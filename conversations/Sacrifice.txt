source("CONVERSE.B")
index(97)

id(196)
name("Sacrifice")

description:
    print("the altar of Sacrifice.")

    f3()

interaction:
    wait()

    print("\nAs you kneel before the altar, a mystical voice sounds in your head.")
    wait()

    print("\n\n")

    if less(integer(value 20), byte 40):
    print("\"Thou hast much to learn about sacrifice.\"")
    jump 256

    endif

    if less(integer(value 20), byte 80):
    print("\"Thy deeds have shown admirable sacrifice.\"")

    else:
    print("\"Thy deeds serve as an example to all.\"")

    endif

    wait()

    print("\n\nDo you wish to meditate at this altar? ")

    askc("yn")
    case "n":
    bye()

    esac

    if equals(integer(value 23), byte 0):
    integer(value 0) = byte 0
    jump 445

    endif

    integer(value 0) = byte 0
    integer(value 2) = byte 1
    print("\n")
    ('SETNAME', ('character', [('integer', [('value', 0)]), ('byte', 0)]))
    print("#2. $Y\n")
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
    jump 341

    endif

    print("\"Who will meditate?\" ")
    ('INPUTNUM', 0)

    if equals(integer(value 0), byte 0):
    print("\n")
    bye()

    endif

    integer(value 0) = minus(integer(value 0), byte 1)

    if greater(integer(value 0), integer(value 23)):
    jump 326

    endif

    print("\"Speak the Mantra of Sacrifice.\"\n")

    ask()
    print("\n\"$Z... $Z...\"")
    wait()

    print("\n\n\"$Z... $Z...\"")
    wait()

    print("\n\n\"$Z... $Z...\"")
    wait()

    print("\n")
    case "cah":
    print("\"The universe is so vast and so ageless ")
    wait()

    print("\nthat the life of one man can only be justified ")
    wait()

    print("\nby the measure of his sacrifice.\"")
    wait()

    jump 701

    case "*":
    print("You receive no enlightenment.")
    wait()

    jump 966

701:
    if equals(hasBit(byte 235, value 0), byte 0):
    ('ADD_KARMA', ('byte', 10))
    ('SETF', ('byte', 235), ('value', 0))

    endif

    if and(and(and(and(and(and(and(hasBit(byte 192, value 0), hasBit(byte 193, value 0)), hasBit(byte 194, value 0)), hasBit(byte 195, value 0)), hasBit(byte 196, value 0)), hasBit(byte 197, value 0)), hasBit(byte 198, value 0)), hasBit(byte 199, value 0)):
    ('CLEARF', ('byte', 192), ('value', 0))
    ('CLEARF', ('byte', 193), ('value', 0))
    ('CLEARF', ('byte', 194), ('value', 0))
    ('CLEARF', ('byte', 195), ('value', 0))
    ('CLEARF', ('byte', 196), ('value', 0))
    ('CLEARF', ('byte', 197), ('value', 0))
    ('CLEARF', ('byte', 198), ('value', 0))
    ('CLEARF', ('byte', 199), ('value', 0))
    ('SETF', ('byte', 235), ('value', 0))

    endif

    integer(value 1) = character(integer(value 0), byte 0)
    integer(value 2) = level(integer(value 1), byte 0)

    if greater(integer(value 2), byte 7):
    jump 966

    endif

    integer(value 3) = experience(integer(value 1), byte 0)

    if greaterOrEquals(integer(value 3), data(dword 1075, integer(value 2))):
    integer(value 2) = level(integer(value 1), byte 1)
    integer(value 4) = strength(integer(value 1), byte 1)
    integer(value 4) = dexterity(integer(value 1), byte 1)
    ('SETNAME', ('integer', [('value', 1)]))
    print("\n\n$Y has gained a level...")
    wait()

    print("\n\nstrength...")
    wait()

    print("\n\nand dexterity!")
    wait()

    endif

    print("\n\n\"There is naught else for you to learn here and now.\"")
    wait()

    print("\n\n\"Return when thy journey has progressed further.\"\n")
    bye()

1075:
    ['INTEGERS', [0, 100, 200, 400, 800, 1600, 3200, 6400]]
