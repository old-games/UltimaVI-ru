source('CONVERSE.B')
index(51)

id(150)
name('Zeke')

description:
    print('a strong looking man with just one arm.')
    wait()

    print('\n')

    f3()

interaction:
    integer(value 5) = byte 0

    if hasBit(byte 235, value 0):
        jump 109
    fi

    print('"Hello," he shouts, waving.')
    ('SETF', ('byte', 235), ('value', 0))
    wait()

    print('\n')
    jump 174

109:
    print('"You\'ve met @Zeke before, \'aven\'t ya?" he says, glaring at you.')
    wait()

    print('\n\n"What d\'ya need?"\n')

193:
    ask()

    case 'name':
        print('"@Zeke the one-armed @beekeep, it is."\n')
        jump 193

    case 'zeke':
        print('"Lost me arm and gained that name in @battle." He flashes a yellowed ')
        print('grin at you.\n')
        jump 193

    case 'batt':
        print('"\'Twas a horrid affair, but @Mondain had to be thwarted."\n')
        jump 193

    case 'mond':
        print('"You must be new here." He looks to the ground.')
        wait()

        print('\n\n"He brought an age of great evil unto our land."')
        wait()

        print('\n\n"Yet try and tell today\'s children of the age of darkness..."')
        wait()

        print('\n\n"They believe nothing can go wrong, as long as the Avatar lives."\n')
        jump 193

    case 'buy':
    case 'hone':
        jump 1183

    case 'sell':
        jump 1721

    case 'bee':
        print('"Bees are true friends. They work all day, making honey and scattering')
        print(' pollen."')
        wait()

        print('\n\n"All we have to do is provide them with @hives."')
        wait()

        print('\n\nHe laughs. "And get stung once in a while!"\n')
        jump 193

    case 'hive':
        print('"I buys all my hives from a nice lady in Minoc named Michelle."')
        wait()

        print('\n\n"She weaves them out of straw."\n')
        jump 193

    case 'job':
        print('"I\'m the @beekeeper here at the abbey."')
        wait()

        print('\n\n"If you want to @buy @honey, or @sell me a honey jar I\'m all ears ')
        print('(if only one-armed)."\n')
        jump 193

    case 'bye':
        print('"Have a nice $T."\n')
        bye()

    case '*':
        print('He scratches his head and looks around.\n')
    esac

    jump 193

1183:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 0
        jump 1319
    fi

1203:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

1217:
    ('SETNAME', ('character', [('integer', [('value', 0)]), ('byte', 0)]))
    print('#2. $Y\n')
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump 1217
    fi

    print('"Which of you?" ')
    ('INPUTNUM', 3)

    if equals(integer(value 3), byte 0):
        jump 1657
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump 1203
    fi

1319:
    print('"It\'ll cost you 10 gold for the \'oney, interested?" ')

    askc('yn')

    case 'y':
        if less(plus(canCarry(character(integer(value 3), byte 0)), weight(byte 88, byte 10)), weight(byte 184, byte 1)):
            print('"You look pretty full to me."')
            wait()

            print('\n')
            jump 174
        fi

        if greaterOrEquals(objectsCount(character(integer(value 3), byte 0), byte 88), byte 10):
            ('DELETE', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 88), ('byte', 0), ('byte', 10))
            ('NEW', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 184), ('byte', 0), ('byte', 1))
            ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))
            print('"Excellent!" After accepting $Y\'s gold, $N hands over the honey.')
            wait()

            integer(value 5) = byte 1
            print('\n\n')
            jump 1657

        else:
            ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))
            print('$N looks at $Y. "You ain\'t that good-looking. My price is 10 gold."')
            wait()

            print('\n')
            jump 174
        fi

    case 'n':
        jump 1657
    esac

1657:
    if integer(value 5):
        print('"Enjoy your \'oney."')
        wait()

        print('\n')
        jump 174
    fi

    print('"You\'ll find none better."')
    wait()

    print('\n')
    jump 174

1721:
    integer(value 0) = byte 0
    integer(value 2) = byte 0
    integer(value 3) = byte 0

1742:
    if objectsCount(character(integer(value 0), byte 0), byte 183):
        data(dword 2329, integer(value 2)) = integer(value 0)
        integer(value 2) = plus(integer(value 2), byte 1)
        integer(value 3) = byte 1
    fi

    integer(value 0) = plus(integer(value 0), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump 1742
    fi

    if equals(integer(value 3), byte 0):
        print('"Sorry, none of you has anything I need."')
        wait()

        print('\n')
        jump 174
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = data(dword 2329, byte 0)
        jump 2023
    fi

1888:
    integer(value 0) = byte 0
    integer(value 1) = byte 1

1902:
    ('SETNAME', ('character', [('data', [('dword', 2329), ('integer', [('value', 0)])]), ('byte', 0)]))
    print('#1. $Y\n')
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 1) = plus(integer(value 1), byte 1)

    if less(integer(value 0), integer(value 2)):
        jump 1902
    fi

    print('"Which of you?" ')
    ('INPUTNUM', 3)

    if equals(integer(value 3), byte 0):
        jump 2279
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greaterOrEquals(integer(value 3), integer(value 2)):
        jump 1888
    fi

    integer(value 3) = data(dword 2329, integer(value 3))

2023:
    integer(value 4) = objectsCount(character(integer(value 3), byte 0), byte 183)
    ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))

    if equals(integer(value 4), byte 0):
        jump 2236
    fi

    print('$N turns to $Y, and says "Will you take 7 gold for that honey jar?" ')

    askc('yn')

    case 'y':
        print('"Done!" He hands $Y 7 gold pieces and takes the honey jar.')
        ('DELETE', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 183), ('byte', 0), ('byte', 1))
        ('NEW', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 88), ('byte', 0), ('byte', 7))
        wait()

        print('\n')
        jump 174

    case 'n':
        jump 2279
    esac

2236:
    print('"Sorry, you \'aven\'t any \'oney jars."')
    wait()

    print('\n')
    jump 174

2279:
    print('"Changed your mind, eh?" he folds his arms.')
    wait()

    print('\n')
    jump 174

    ('INTEGERS', [0, 0, 0, 0, 0, 0, 0, 0], [])
