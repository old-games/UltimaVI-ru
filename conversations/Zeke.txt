source('CONVERSE.B')
index(51)

id(150)
name({
    'english': 'Zeke',
    'russian': 'Зик'
})

description:
    print({
        'english': 'a strong looking man with just one arm.',
        'russian': 'однорукого мужчину, очень крепкого на вид.'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

    f3()

interaction:
    integer(value 5) = byte 0

    if hasBit(byte 235, value 0):
        jump label_109
    fi

    print({
        'english': '"Hello," he shouts, waving.',
        'russian': '"Здравствуйте!" - кричит он, махая рукой.'
    })
    setBit(byte 235, value 0)
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })
    jump label_174

label_109:
    print({
        'english': '"You\'ve met @Zeke before, \'aven\'t ya?" he says, glaring at you.',
        'russian': '"Доводилось уже видеться со стариной @Зиком, да?" - говорит он, не сводя с вас взгляд.'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

label_174:
    print({
        'english': '\n"What d\'ya need?"\n',
        'russian': '\n"Чего вам нужно?"\n'
    })

label_193:
    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"@Zeke the one-armed @beekeep, it is."\n',
            'russian': '"Я @Зик, однорукий @пасечник".\n'
        })
        jump label_193

    case 'zeke':
    case {'russian': 'зик'}:
        print({
            'english': '"Lost me arm and gained that name in @battle." He flashes a yellowed ',
            'russian': '"Так меня зовут с тех пор, как я потерял руку в @бою". На его лице появляется ухмылка, '
        })
        print({
            'english': 'grin at you.\n',
            'russian': 'обнажающая жёлтые зубы.\n'
        })
        jump label_193

    case 'batt':
    case {'russian': 'бой'}:
        print({
            'english': '"\'Twas a horrid affair, but @Mondain had to be thwarted."\n',
            'russian': '"То была страшная бойня, но кто-то должен был помешать @Мондэйну".\n'
        })
        jump label_193

    case 'mond':
    case {'russian': 'монд'}:
        print({
            'english': '"You must be new here." He looks to the ground.',
            'russian': '"А вы, кажись, нездешний". Он начинает рассматривать что-то на полу.'
        })
        wait()

        print({
            'english': '\n\n"He brought an age of great evil unto our land."',
            'russian': '\n\n"Долго он терзал наши края".'
        })
        wait()

        print({
            'english': '\n\n"Yet try and tell today\'s children of the age of darkness..."',
            'russian': '\n\n"Попробуй сейчас расскажи детям об эпохе тьмы..."'
        })
        wait()

        print({
            'english': '\n\n"They believe nothing can go wrong, as long as the Avatar lives."\n',
            'russian': '\n\n"Они верят, что ничего страшного не случится, пока жив Аватар".\n'
        })
        jump label_193

    case 'buy':
    case {'russian': 'куп'}:
    case 'hone':
    case {'russian': 'мёд'}:
        jump label_1183

    case 'sell':
    case {'russian': 'прод'}:
        jump label_1721

    case 'bee':
    case {'russian': 'пчел'}:
        print({
            'english': '"Bees are true friends. They work all day, making honey and scattering',
            'russian': '"Пчёлы - верные друзья. Трудятся весь день, делают мёд да разносят'
        })
        print({
            'english': ' pollen."',
            'russian': ' пыльцу".'
        })
        wait()

        print({
            'english': '\n\n"All we have to do is provide them with @hives."',
            'russian': '\n\n"Ставь им @ульи - вот и вся работа".'
        })
        wait()

        print({
            'english': '\n\nHe laughs. "And get stung once in a while!"\n',
            'russian': '\n\nОн рассмеялся. "Ну, и ещё телеса подставляй под жало иногда!"\n'
        })
        jump label_193

    case 'hive':
    case {'russian': 'ульи'}:
        print({
            'english': '"I buys all my hives from a nice lady in Minoc named Michelle."',
            'russian': '"Ульи я покупаю в Миноке у одной милой женщины по имени Мишель".'
        })
        wait()

        print({
            'english': '\n\n"She weaves them out of straw."\n',
            'russian': '\n\n"Она плетёт их из соломы".\n'
        })
        jump label_193

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"I\'m the @beekeeper here at the abbey."',
            'russian': '"Я служу @пасечником при аббатстве".'
        })
        wait()

        print({
            'english': '\n\n"If you want to @buy @honey, or @sell me a honey jar I\'m all ears ',
            'russian': '\n\n"Если желаете @купить @мёд или @продать мне банку для него, то я весь к вашим услугам '
        })
        print({
            'english': '(if only one-armed)."\n',
            'russian': ' (кроме одной руки, конечно)".\n'
        })
        jump label_193

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"Have a nice $T."\n',
            'russian': '"Хорошего $T".\n'
        })
        bye()

    case '*':
        print({
            'english': 'He scratches his head and looks around.\n',
            'russian': 'Он чешет голову и оглядывается вокруг.\n'
        })
    esac

    jump label_193

label_1183:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 0
        jump label_1319
    fi

label_1203:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_1217:
    look(character(integer(value 0), byte 0))
    print({
        'english': '#2. $Y\n',
        'russian': '#2. $Y\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_1217
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"Кто из вас?" '
    })
    inputDigit(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_1657
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_1203
    fi

label_1319:
    print({
        'english': '"It\'ll cost you 10 gold for the \'oney, interested?" ',
        'russian': '"Отдам мёд за 10 золотых, идёт?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(plus(canCarry(character(integer(value 3), byte 0)), weight(byte 88, byte 10)), weight(byte 184, byte 1)):
            print({
                'english': '"You look pretty full to me."',
                'russian': '"Кажется, ваш рюкзак перегружен".'
            })
            wait()

            print({
                'english': '\n',
                'russian': '\n'
            })
            jump label_174
        fi

        if greaterOrEquals(objectsCount(character(integer(value 3), byte 0), byte 88), byte 10):
            destroyItem(character(integer(value 3), byte 0), byte 88, byte 0, byte 10)
            createItem(character(integer(value 3), byte 0), byte 184, byte 0, byte 1)
            look(character(integer(value 3), byte 0))
            print({
                'english': '"Excellent!" After accepting $Y\'s gold, $N hands over the honey.',
                'russian': '"Отлично!" Взяв золото у персонажа $Y\, $N отдаёт мёд.'
            })
            wait()

            integer(value 5) = byte 1
            print({
                'english': '\n\n',
                'russian': '\n\n'
            })
            jump label_1657

        else:
            look(character(integer(value 3), byte 0))
            print({
                'english': '$N looks at $Y. "You ain\'t that good-looking. My price is 10 gold."',
                'russian': '$N смотрит на персонажа $Y. "У вас не настолько красивые глазки. Цена - 10 золотых".'
            })
            wait()

            print({
                'english': '\n',
                'russian': '\n'
            })
            jump label_174
        fi

    case 'n':
    case {'russian': 'n'}:
        jump label_1657
    esac

label_1657:
    if integer(value 5):
        print({
            'english': '"Enjoy your \'oney."',
            'russian': '"Наслаждайтесь мёдом".'
        })
        wait()

        print({
            'english': '\n',
            'russian': '\n'
        })
        jump label_174
    fi

    print({
        'english': '"You\'ll find none better."',
        'russian': '"Лучше его не найти".'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })
    jump label_174

label_1721:
    integer(value 0) = byte 0
    integer(value 2) = byte 0
    integer(value 3) = byte 0

label_1742:
    if objectsCount(character(integer(value 0), byte 0), byte 183):
        data(integers_2329, integer(value 2)) = integer(value 0)
        integer(value 2) = plus(integer(value 2), byte 1)
        integer(value 3) = byte 1
    fi

    integer(value 0) = plus(integer(value 0), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_1742
    fi

    if equals(integer(value 3), byte 0):
        print({
            'english': '"Sorry, none of you has anything I need."',
            'russian': '"Извините, но ни у кого из вас нет ничего, что мне нужно".'
        })
        wait()

        print({
            'english': '\n',
            'russian': '\n'
        })
        jump label_174
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = data(integers_2329, byte 0)
        jump label_2023
    fi

label_1888:
    integer(value 0) = byte 0
    integer(value 1) = byte 1

label_1902:
    look(character(data(integers_2329, integer(value 0)), byte 0))
    print({
        'english': '#1. $Y\n',
        'russian': '#1. $Y\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 1) = plus(integer(value 1), byte 1)

    if less(integer(value 0), integer(value 2)):
        jump label_1902
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"Кто из вас?" '
    })
    inputDigit(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_2279
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greaterOrEquals(integer(value 3), integer(value 2)):
        jump label_1888
    fi

    integer(value 3) = data(integers_2329, integer(value 3))

label_2023:
    integer(value 4) = objectsCount(character(integer(value 3), byte 0), byte 183)
    look(character(integer(value 3), byte 0))

    if equals(integer(value 4), byte 0):
        jump label_2236
    fi

    print({
        'english': '$N turns to $Y, and says "Will you take 7 gold for that honey jar?" ',
        'russian': '$N поворачивается к персонажу $Y и говорит: "Продашь эту банку за 7 золотых?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        print({
            'english': '"Done!" He hands $Y 7 gold pieces and takes the honey jar.',
            'russian': '"Договорились!" - он передаёт персонажу $Y 7 золотых и забирает банку.'
        })
        destroyItem(character(integer(value 3), byte 0), byte 183, byte 0, byte 1)
        createItem(character(integer(value 3), byte 0), byte 88, byte 0, byte 7)
        wait()

        print({
            'english': '\n',
            'russian': '\n'
        })
        jump label_174

    case 'n':
    case {'russian': 'н'}:
        jump label_2279
    esac

label_2236:
    print({
        'english': '"Sorry, you \'aven\'t any \'oney jars."',
        'russian': '"Извините, но у вас нет банки для мёда".'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })
    jump label_174

label_2279:
    print({
        'english': '"Changed your mind, eh?" he folds his arms.',
        'russian': '"Ну что, передумали?" - спросил он, подобрав руку.'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })
    jump label_174

integers_2329 = [
    0, // 0
    0, // 1
    0, // 2
    0, // 3
    0, // 4
    0, // 5
    0, // 6
    0, // 7
]
