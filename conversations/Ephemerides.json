{
    "source": "CONVERSE.A",
    "index": 35,
    "id": 35,
    "name": "Ephemerides",
    "f3-after-name": true,
    "description": [
        "a solemn man, constantly dusting and polishing the items in his shop.",
        "WAIT",
        "\n"
    ],
    "f3-after-description": false,
    "interaction": {
        "87": [
            [
                "IF",
                [
                    "notEquals(integer(value 32), byte 138)"
                ]
            ],
            [
                "JUMP",
                318
            ],
            "ENDIF",
            "The old man never turns away from his telescope. \"Shhh! Can't you see I'm busy?!\"",
            "WAIT",
            "\n\n\"Whoever you are, come back in the morning.\"",
            "WAIT",
            "\n\nThe old man adjusts the telescope, exclaims \"Aha!\" and starts scribbling on a scroll.\n",
            "BYE"
        ],
        "318": [
            [
                "ASSIGN",
                [
                    "integer(value 0)"
                ],
                [
                    "partyHasObject(byte 48, byte 0)"
                ]
            ],
            [
                "IF",
                [
                    "and(and(notEquals(integer(value 0), word 32769), hasBit(byte 235, byte 7)), equals(hasBit(byte 235, byte 6), byte 0))"
                ]
            ],
            [
                "JUMP",
                3366
            ],
            "ENDIF",
            "\"Ahem. Yes, what can I help you with, ",
            [
                "IF",
                [
                    "equals(integer(value 16), byte 1)"
                ]
            ],
            "madam?\"\n",
            "ELSE",
            "sir?\"\n",
            "ENDIF",
            "ASK",
            [
                "KEYWORDS",
                "name",
                [
                    "\"I am Ephemerides.\"\n",
                    [
                        "SETF",
                        [
                            "byte 235"
                        ],
                        [
                            "value 0"
                        ]
                    ],
                    [
                        "JUMP",
                        418
                    ]
                ]
            ],
            [
                "KEYWORDS",
                "job",
                [
                    "\"I am an astronomer. More precisely, I calculate movements of the stars, phases of the @moons...\"",
                    "WAIT",
                    "\n\n\"My field of specialization is @tidal predictions.\"",
                    "WAIT",
                    "\n\n\"I also make various @glasswares and @instruments.\"\n",
                    [
                        "JUMP",
                        418
                    ]
                ]
            ],
            [
                "KEYWORDS",
                "inst",
                [
                    "\"Yes, @sextants mostly.\"\n",
                    [
                        "JUMP",
                        418
                    ]
                ]
            ],
            [
                "KEYWORDS",
                "glas",
                [
                    "\"Lenses and the like.\"\n",
                    [
                        "JUMP",
                        418
                    ]
                ]
            ],
            [
                "KEYWORDS",
                "buy,sex",
                [
                    [
                        "ASSIGN",
                        [
                            "integer(value 4)"
                        ],
                        [
                            "byte 0"
                        ]
                    ],
                    [
                        "JUMP",
                        3941
                    ]
                ]
            ],
            [
                "KEYWORDS",
                "tida,pred,fiel",
                [
                    "\"Lord British has requested the publication of an almanac for use by the general populace.\"",
                    "WAIT",
                    "\n\n\"It will contain high tides, low tides, ebb tides, flood tides, @spring tides, and @neap tides.\"\n",
                    [
                        "JUMP",
                        418
                    ]
                ]
            ],
            [
                "KEYWORDS",
                "tide",
                [
                    "\"Britannia's tides are a function of the two @moons, Felucca and Trammel, interacting with our world, Sosaria.\"\n",
                    [
                        "JUMP",
                        418
                    ]
                ]
            ],
            [
                "KEYWORDS",
                "sosa,felu,tram,moon,sosa",
                [
                    "\"I plan to publish a paper about how the world is flat, to dispel all this foolish talk to the contrary.\"",
                    "WAIT",
                    "\n\n\"Afterwards, I will construct a model of how it all works: an @orrery.\"\n",
                    [
                        "JUMP",
                        418
                    ]
                ]
            ],
            [
                "KEYWORDS",
                "orre",
                [
                    "Pleased with your interest, Ephemerides shows you papers with plans for a clockwork model of the Sosarian system.",
                    "WAIT",
                    "\n\n\"This, ahem, flat piece is Britannia. Each moon would exert a pull on the oceans thus, resulting in the tides.\"",
                    "WAIT",
                    "\n\n\"You turn that little handle there to get it to go!\"*\n\nThe normally staid Ephemerides is practically giggling with glee.\n",
                    [
                        "JUMP",
                        418
                    ]
                ]
            ],
            [
                "KEYWORDS",
                "roun",
                [
                    "\"Absurd!\"\n",
                    [
                        "JUMP",
                        418
                    ]
                ]
            ],
            [
                "KEYWORDS",
                "neap",
                [
                    "\"Low and high tide marks are close together. The planets are in @quadrature.\"\n",
                    [
                        "JUMP",
                        418
                    ]
                ]
            ],
            [
                "KEYWORDS",
                "quad",
                [
                    "\"Angular separation of two celestial bodies (as measured from a third) being ninety degrees, of course. A very safe @tide.\"\n",
                    [
                        "JUMP",
                        418
                    ]
                ]
            ],
            [
                "KEYWORDS",
                "spri",
                [
                    "\"The opposite of a neap tide; the sun, earth and moons are all aligned.\"",
                    "WAIT",
                    "\n\n\"Thus, lines of low and high tide are far apart.\"",
                    "WAIT",
                    "\n\n\"Once I construct my @orrery, I'd be able to demonstrate the principles involved.\"\n",
                    [
                        "JUMP",
                        418
                    ]
                ]
            ],
            [
                "KEYWORDS",
                "vort,lens,conc",
                [
                    [
                        "IF",
                        [
                            "hasBit(byte 235, byte 6)"
                        ],
                        [
                            "\"I hope the lens I made you will prove suitable.\"\n",
                            [
                                "JUMP",
                                418
                            ]
                        ],
                        []
                    ],
                    [
                        "IF",
                        [
                            "and(equals(partyHasObject(word 396, byte 0), word 32769), equals(hasBit(byte 235, byte 7), byte 0))"
                        ],
                        [
                            "\"What sort of lens do you want?\"\n",
                            [
                                "JUMP",
                                418
                            ]
                        ],
                        []
                    ],
                    [
                        "ASSIGN",
                        [
                            "integer(value 0)"
                        ],
                        [
                            "partyHasObject(word 396, byte 0)"
                        ]
                    ],
                    [
                        "IF",
                        [
                            "equals(integer(value 0), word 32769)"
                        ],
                        [
                            "\"When you bring me a glass @sword, I should be able to duplicate your lens for you.\"\n",
                            [
                                "JUMP",
                                418
                            ]
                        ],
                        []
                    ],
                    "\"Ooooh, let me see it... That's a very interesting lens.\"",
                    "WAIT",
                    "\n\n\"You need a concave copy of it? Let me think...\"",
                    "WAIT",
                    "\n\n\"It would be very tricky to duplicate, being magical in nature, but I believe I might be able to do it.\"",
                    "WAIT",
                    "\n\n\"The material and the nature of the enchantment appear similar to those involved in the making of glass swords.\"",
                    "WAIT",
                    "\n\n\"If I could keep this to analyze while you go get me a glass sword, I'll try and make a copy for you.\"",
                    "WAIT",
                    [
                        "SETF",
                        [
                            "byte 235"
                        ],
                        [
                            "byte 7"
                        ]
                    ],
                    [
                        "GIVE",
                        [
                            "word 396"
                        ],
                        [
                            "byte 0"
                        ],
                        [
                            "integer(value 0)"
                        ],
                        [
                            "byte 235"
                        ]
                    ],
                    "\n\nBefore you can protest, he pockets the lens. \"Let me know when you have the glass @sword.\"\n",
                    [
                        "JUMP",
                        418
                    ]
                ]
            ],
            [
                "KEYWORDS",
                "swor",
                [
                    [
                        "IF",
                        [
                            "and(and(notEquals(partyHasObject(byte 48, byte 0), word 32769), hasBit(byte 235, byte 7)), equals(hasBit(byte 235, byte 6), byte 0))"
                        ],
                        [
                            [
                                "JUMP",
                                3366
                            ]
                        ],
                        []
                    ],
                    "\"I once heard of a @master glassblower who could make glass swords...\"\n",
                    [
                        "JUMP",
                        418
                    ]
                ]
            ],
            [
                "KEYWORDS",
                "mast",
                [
                    "\"Minoc is the logical place to look. That town is filled with master craftsmen.\"",
                    "WAIT",
                    "\n\n\"Why, I once heard of a man from Minoc who built a @flying machine!\"\n",
                    [
                        "JUMP",
                        418
                    ]
                ]
            ],
            [
                "KEYWORDS",
                "fly,mach",
                [
                    "\"Must have been a fairy tale, of course.\"\n",
                    [
                        "JUMP",
                        418
                    ]
                ]
            ],
            [
                "KEYWORDS",
                "bye",
                [
                    "\"Goodbye, $G. It was nice talking with you.\"\n",
                    "BYE"
                ]
            ],
            [
                "KEYWORDS",
                "*",
                [
                    "\"That I cannot help you with.\"\n",
                    [
                        "JUMP",
                        418
                    ]
                ]
            ]
        ],
        "3366": [
            "\"Ah, you've brought me a glass sword! Let me just get your lens...\"",
            "WAIT",
            "\n\nHe fumbles through his pockets.",
            "WAIT",
            "\n\n\"Oh no! I seem to have lost the lens!\"",
            "WAIT",
            "\n\n\"Just kidding... Here it is. Now I'll melt down the glass sword and try to cast a lens for you.\"",
            "WAIT",
            "\n\nYou watch as he works, intently focused on his task. Finally he pronounces the job a success.",
            "WAIT",
            "\n\n\"Here's your lens back, and the duplicate. There's no charge - the challenge of the task was reward enough.\"",
            "WAIT",
            "\n\n\"I don't know what you need these lenses for, but I wish you luck!\"\n",
            [
                "SETF",
                [
                    "byte 235"
                ],
                [
                    "byte 6"
                ]
            ],
            [
                "DELETE",
                [
                    "partyHasObject(byte 48, byte 0)"
                ],
                [
                    "byte 48"
                ],
                [
                    "byte 0"
                ],
                [
                    "byte 1"
                ]
            ],
            [
                "GIVE",
                [
                    "word 396"
                ],
                [
                    "byte 0"
                ],
                [
                    "byte 235"
                ],
                [
                    "byte 1"
                ]
            ],
            [
                "NEW",
                [
                    "byte 1"
                ],
                [
                    "word 394"
                ],
                [
                    "byte 0"
                ],
                [
                    "byte 1"
                ]
            ],
            [
                "JUMP",
                418
            ]
        ],
        "3941": [
            [
                "IF",
                [
                    "equals(integer(value 23), byte 0)"
                ]
            ],
            [
                "ASSIGN",
                [
                    "integer(value 3)"
                ],
                [
                    "byte 0"
                ]
            ],
            [
                "JUMP",
                4087
            ],
            "ENDIF",
            [
                "ASSIGN",
                [
                    "integer(value 0)"
                ],
                [
                    "byte 0"
                ]
            ],
            [
                "ASSIGN",
                [
                    "integer(value 1)"
                ],
                [
                    "byte 1"
                ]
            ],
            [
                "SETNAME",
                [
                    "character(integer(value 0), byte 0)"
                ]
            ],
            "#1. $Y\n",
            [
                "ASSIGN",
                [
                    "integer(value 0)"
                ],
                [
                    "plus(integer(value 0), byte 1)"
                ]
            ],
            [
                "ASSIGN",
                [
                    "integer(value 1)"
                ],
                [
                    "plus(integer(value 1), byte 1)"
                ]
            ],
            [
                "IF",
                [
                    "lessOrEquals(integer(value 0), integer(value 23))"
                ]
            ],
            [
                "JUMP",
                3975
            ],
            "ENDIF",
            "\"Which of you?\" ",
            [
                "INPUTNUM",
                3
            ],
            [
                "IF",
                [
                    "equals(integer(value 3), byte 0)"
                ]
            ],
            [
                "JUMP",
                357
            ],
            "ENDIF",
            [
                "ASSIGN",
                [
                    "integer(value 3)"
                ],
                [
                    "minus(integer(value 3), byte 1)"
                ]
            ],
            [
                "IF",
                [
                    "greater(integer(value 3), integer(value 23))"
                ]
            ],
            [
                "JUMP",
                3961
            ],
            "ENDIF",
            [
                "ASSIGN",
                [
                    "integer(value 3)"
                ],
                [
                    "character(integer(value 3), byte 0)"
                ]
            ],
            [
                "ASSIGN",
                [
                    "string(value 0)"
                ],
                [
                    "data(dword 4491, integer(value 4))"
                ]
            ],
            [
                "SETNAME",
                [
                    "integer(value 3)"
                ]
            ],
            [
                "IF",
                [
                    "less(plus(canCarry(integer(value 3)), weight(byte 88, data(dword 4479, integer(value 4)))), weight(data(dword 4485, integer(value 4)), byte 1))"
                ]
            ],
            "$N looks at $Y. \"You haven't any room in your pack.\"",
            "WAIT",
            "\n\n",
            [
                "JUMP",
                357
            ],
            "ENDIF",
            [
                "IF",
                [
                    "less(objectsCount(integer(value 3), byte 88), data(dword 4479, integer(value 4)))"
                ]
            ],
            "$N looks at $Y. \"`$0s cost more gold than you have.\"",
            "WAIT",
            "\n\n",
            [
                "JUMP",
                357
            ],
            "ENDIF",
            [
                "ASSIGN",
                [
                    "integer(value 0)"
                ],
                [
                    "data(dword 4479, integer(value 4))"
                ]
            ],
            [
                "SETNAME",
                [
                    "integer(value 3)"
                ]
            ],
            "$N looks at $Y. \"It'll cost you #0 gold for a $0. Do you want one?\" ",
            [
                "ASKC",
                "yn"
            ],
            [
                "KEYWORDS",
                "n",
                [
                    "$N frowns at $Y, \"That was a good price.\"",
                    "WAIT",
                    "\n\n",
                    [
                        "JUMP",
                        357
                    ]
                ]
            ],
            [
                "KEYWORDS",
                "y",
                [
                    [
                        "DELETE",
                        [
                            "integer(value 3)"
                        ],
                        [
                            "byte 88"
                        ],
                        [
                            "byte 0"
                        ],
                        [
                            "data(dword 4479, integer(value 4))"
                        ]
                    ],
                    [
                        "NEW",
                        [
                            "integer(value 3)"
                        ],
                        [
                            "data(dword 4485, integer(value 4))"
                        ],
                        [
                            "byte 0"
                        ],
                        [
                            "byte 1"
                        ]
                    ],
                    "He hands $Y a $0.",
                    "WAIT",
                    "\n\n",
                    [
                        "JUMP",
                        357
                    ]
                ]
            ]
        ]
    }
}