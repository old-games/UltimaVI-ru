source('CONVERSE.B')
index(15)

id(114)
name({
    'english': 'Leonna',
    'russian': 'Леонна'
})

description:
    print({
        'english': 'a smartly dressed woman. Her smile has a delightful subtlety to it.',
        'russian': 'элегантно одетую женщину. В её улыбке есть восхитительная утончённость.'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

interaction:
    if partyHas(byte 235):
        print({
            'english': '"Yes, $P?"',
            'russian': '"Да, $P?"'
        })
        jump label_318
    fi

    if equals(integer(value 32), byte 153):
        print({
            'english': 'You fail to get her attention in the midst of the brawl.\n',
            'russian': 'Вам не удаётся привлечь её внимание в разгар драки.\n'
        })
        bye()
    fi

    if hasBit(byte 235, value 0):
        print({
            'english': 'Her face lights up as she recognizes you. "Hello again, $P!"',
            'russian': 'Её лицо озаряется, когда она узнает вас. "И снова привет, $P!"'
        })
        jump label_318

    else:
        setBit(byte 235, value 0)
        print({
            'english': '"Oh, you must be $P, the famous Avatar! \'Tis an honor to meet thee."',
            'russian': '"О, вы, должно быть, $P, знаменитый Аватар! Для меня большая честь познакомиться с вами".'
        })
    fi

    jump label_318

label_318:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"My name is Leonna."',
            'russian': '"Меня зовут Леонна".'
        })
        jump label_318

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"I used to @captain my own ship."',
            'russian': '"Раньше я была @капитаном собственного корабля".'
        })
        wait()

        print({
            'english': '\n\n"But I fell on hard times, and now I sail with @Leodon on the ',
            'russian': '\n\n"Но для меня настали трудные времена, и теперь я плыву с @Леодоном на '
        })
        print({
            'english': '@Hind."',
            'russian': '\'@Лане\'".'
        })
        jump label_318

    case 'hind':
    case {'russian': 'лане'}:
    case 'ship':
    case {'russian': 'кора'}:
    case 'sail':
    case {'russian': 'плыв'}:
        print({
            'english': '"A fine old vessel, the Golden Hind."',
            'russian': '"Прекрасное старинное судно \'Золотая лань\'".'
        })
        wait()

        print({
            'english': '\n\n"Alas, I have little to do while she\'s being @repaired."',
            'russian': '\n\n"Увы, у меня мало дел, пока его @ремонтируют".'
        })
        jump label_318

    case 'litt':
    case {'russian': 'мало'}:
    case 'repa':
    case {'russian': 'ремо'}:
    case 'join':
    case {'russian': 'прис'}:
        jump label_1356

    case 'leav':
    case {'russian': 'поки'}:
        jump label_1764

    case 'leod':
    case {'russian': 'леод'}:
        print({
            'english': '"There\'s none I\'d rather ship out with."',
            'russian': '"Нет никого, с кем я бы предпочла отправиться в путь".'
        })
        jump label_318

    case 'capt':
    case {'russian': 'капи'}:
        if partyHas(byte 235):
            print({
                'english': '"Captain who? I know lots of Captains..."',
                'russian': '"Какой капитан? Я знаю много капитанов..."'
            })
            jump label_318
        fi

        integer(value 0) = plus(plus(isNearby(byte 113), isNearby(byte 111)), isNearby(byte 112))

        if lessOrEquals(integer(value 0), byte 1):
            print({
                'english': '"Captain who? I know lots of Captains..."',
                'russian': '"Какой капитан? Я знаю много капитанов..."'
            })
            jump label_318
        fi

        print({
            'english': 'When you say \'Captain,\' all the pirates at the table turn to you ',
            'russian': 'Когда вы говорите \'Капитан\', все пираты за столом выжидающе поворачиваются '
        })
        print({
            'english': 'expectantly.',
            'russian': 'к вам.'
        })
        wait()

        print({
            'english': '\n\nWhen they realize you weren\'t talking to them, they return to their ',
            'russian': '\n\nКогда они понимают, что вы разговариваете не с ними, они возвращаются к своим '
        })
        print({
            'english': 'business.',
            'russian': 'делам.'
        })
        jump label_318

    case 'john':
    case {'russian': 'джон'}:
        print({
            'english': '"Captain John is a madman!"',
            'russian': '"Капитан Джон - безумец!"'
        })
        wait()

        print({
            'english': '\n\n"He went down in Hythloth seeking a way to the other side of the ',
            'russian': '\n\n"Он спустился в Гилот, ища путь на другой конец '
        })
        print({
            'english': 'world."',
            'russian': 'света".'
        })
        wait()

        print({
            'english': '\n\n"Said he was going to kill as many @gargoyles as he could before ',
            'russian': '\n\n"Говорил, что собирается убить столько @горгулий, сколько сможет, прежде чем '
        })
        print({
            'english': 'they got him."',
            'russian': 'они доберутся до него".'
        })

        if isNearby(byte 111):
            wait()

            portrait(byte 111)
            print({
                'english': '\n\n"That\'s not true!" says Captain Fox. "I can tell you what really ',
                'russian': '\n\n"Это неправда!" - говорит капитан Фокс. "Я могу рассказать вам, что '
            })
            print({
                'english': 'happened."',
                'russian': 'произошло на самом деле".'
            })
            wait()

            portrait(byte 235)
        fi

        jump label_318

    case 'garg':
    case {'russian': 'горг'}:
        print({
            'english': '"Please, let\'s not talk about them."',
            'russian': '"Пожалуйста, давайте не будем о них говорить".'
        })
        jump label_318

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"Talk to you later."\n',
            'russian': '"Поговорим позже".\n'
        })
        bye()

    case '*':
        print({
            'english': '"I can\'t help you with that."',
            'russian': '"Я не могу вам с этим помочь".'
        })
    esac

    jump label_318

label_1356:
    if partyHas(byte 235):
label_1361:
        print({
            'english': '"I\'d be glad to join you--but I have already!"',
            'russian': '"Я была бы рада присоединиться к вам, но я уже это сделала!"'
        })
        jump label_318
    fi

    print({
        'english': '"Could I join your party, perhaps?" ',
        'russian': '"Может быть, я могла бы присоединиться к вашей группе?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"Okay. I guess I\'ll just stay here for now."',
            'russian': '"Хорошо. Думаю, я пока останусь здесь".'
        })
        jump label_318

    case 'y':
    case {'russian': 'д'}:
    esac

    integer(value 0) = partyJoin(byte 235)

    if equals(integer(value 0), byte 1):
        print({
            'english': '"Not while you\'re in that thing!"',
            'russian': '"Не сейчас, пока вы в этой штуке!"'
        })
        jump label_318
    fi

    if equals(integer(value 0), byte 2):
        print({
            'english': '"You have enough traveling with you already."',
            'russian': '"У вас и так достаточно попутчиков с собой".'
        })
        wait()

        print({
            'english': '\n\n"But if you ask one of them to @leave first, I\'d be happy to join ',
            'russian': '\n\n"Но если вы сначала попросите кого-нибудь из них @уйти, я с радостью присоединюсь '
        })
        print({
            'english': 'you."',
            'russian': 'к вам".'
        })
        jump label_318
    fi

    if equals(integer(value 0), byte 3):
        jump label_1361
    fi

    print({
        'english': '"Oh good! I bet we\'ll meet a lot of interesting men..."\n',
        'russian': '"О, отлично! Держу пари, мы встретим много интересных мужчин..."\n'
    })
    bye()

label_1764:
    if equals(partyHas(byte 235), byte 0):
label_1772:
        print({
            'english': '"I\'d have to @join you before I could leave, silly!"',
            'russian': '"Мне нужно для начала @присоединиться к вам, прежде чем я смогу покинуть вас, дурёха!"'
        })
        jump label_318
    fi

    integer(value 0) = partyLeave(byte 235)

    if equals(integer(value 0), byte 1):
        print({
            'english': '"Let\'s get our feet back on solid ground first, okay?"',
            'russian': '"Давайте сначала вернёмся на твёрдую землю, хорошо?"'
        })
        jump label_318
    fi

    if equals(integer(value 0), byte 2):
        jump label_1772
    fi

    print({
        'english': '"Okay. I\'ll go wait back at the Fallen Virgin."\n*\n"You\'re more likely ',
        'russian': '"Хорошо. Я подожду вас в 'Падшей Девственнице'".\n*\n"Вам всё это '
    })
    print({
        'english': 'to need this equipment than I am."\n*\nShe sets down everything she was ',
        'russian': 'снаряжение понадобится больше, чем мне".\n*\nОна оставляет всё, что несла, '
    })
    print({
        'english': 'carrying before walking off.\n',
        'russian': 'и уходит.\n'
    })
    bye()

    // Unreachable code!
    jump label_318
