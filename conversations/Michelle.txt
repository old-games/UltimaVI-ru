source('CONVERSE.A')
index(68)

id(68)
name({
    'english': 'Michelle',
    'russian': 'Мишель'
})

description:
    print({
        'english': 'an industrious young woman.',
        'russian': 'трудолюбивую молодую женщину.'
    })
    wait()

    f3()

interaction:
    integer(value 5) = byte 0
    print({
        'english': '\n',
        'russian': '\n'
    })

    if hasBit(byte 235, value 0):
        print({
            'english': '"Well, hello again, Avatar!"',
            'russian': '"И снова здравствуй, Аватар!"'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })

    else:
        setBit(byte 235, value 0)
    fi

    print({
        'english': '"How can I help thee this fine $T?"',
        'russian': '"Чем я могу помочь тебе в это прекрасное время $T?"'
    })

label_129:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"I\'m Michelle."',
            'russian': '"Я Мишель".'
        })
        wait()

        print({
            'english': '\n\n"Thou needn\'t tell me thy name, $P. The Avatar is famous throughout ',
            'russian': '\n\n"Тебе не обязательно называть мне своё имя, $P. Аватар известен по всей '
        })
        print({
            'english': 'the land!"',
            'russian': 'стране!"'
        })
        jump label_129

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"I weave baskets and beehives, just like my @father and his father ',
            'russian': '"Я плету корзины и пчелиные ульи, как мой @отец и его отец '
        })
        print({
            'english': 'before him."',
            'russian': 'до него".'
        })
        wait()

        print({
            'english': '\n\n"My @baskets are sold throughout Britannia!" she adds proudly.',
            'russian': '\n\n"Мои @корзины продаются по всей Британии!" - с гордостью добавляет она.'
        })
        jump label_129

    case 'bask':
    case {'russian': 'корз'}:
    case 'beeh':
    case {'russian': 'ульи'}:
        if notEquals(integer(value 32), byte 144):
            print({
                'english': '"Come to my shop when I\'m open!"',
                'russian': '"Приходите в мой магазин, когда он будет открт!"'
            })
            jump label_129

        else:
            jump label_1112
        fi

    case 'buy':
    case {'russian': 'купи'}:
        if notEquals(integer(value 32), byte 144):
            print({
                'english': '"Come to my shop when I\'m open!"',
                'russian': '"Приходите в мой магазин, когда он будет открт!"'
            })
            jump label_129

        else:
            jump label_1242
        fi

    case 'sell':
    case {'russian': 'прод'}:
        print({
            'english': '"I have all I need, and have no reason to purchase anything more."',
            'russian': '"У меня есть всё, что мне нужно, и у меня нет необходимости покупать что-то ещё".'
        })
        wait()

        print({
            'english': '\n\n"But I appreciate thy offer."',
            'russian': '\n\n"Но я ценю твоё предложение".'
        })
        jump label_129

    case 'fath':
    case {'russian': 'отец'}:
    case 'ball':
    case {'russian': 'шар'}:
        print({
            'english': '"Father once told me a story of weaving a basket large enough for ',
            'russian': '"Однажды отец рассказал мне историю о том, как он сплёл корзину, в которой могли поместиться '
        })
        print({
            'english': 'eight people!"',
            'russian': 'восемь человек!"'
        })
        wait()

        print({
            'english': '\n\n"He never showed me the @plans, though."',
            'russian': '\n\n"Правда, он никогда не показывал мне @чертежи".'
        })
        jump label_129

    case 'plan':
    case {'russian': 'черт'}:
        if notEquals(integer(value 32), byte 144):
            print({
                'english': '"Ask when I\'m open for business!"',
                'russian': '"Спроси, когда я открою магазин!"'
            })
            jump label_129
        fi

        integer(value 9) = partyHasObject(word 270, byte 0)

        if equals(integer(value 9), word 32769):
            print({
                'english': '"Yes, without accurate plans it takes far too much time to craft a ',
                'russian': '"Нет, без точных чертежей на изготовление корзины уйдёт слишком много '
            })
            print({
                'english': 'basket."',
                'russian': 'времени".'
            })
            jump label_129
        fi

        print({
            'english': '"Then it was true! Father did weave a basket that big!"',
            'russian': '"Так значит, это правда! Отец действительно сплёл такую большую корзину!"'
        })
        wait()

        print({
            'english': '\n\n"Surely I could do the same."',
            'russian': '\n\n"Я, конечно, могла бы сделать то же самое".'
        })
        wait()

        print({
            'english': '\n\nShe studies the plans for a moment.',
            'russian': '\n\nОна какое-то время изучает чертежи.'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_2268

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"Farewell! I hope I\'ve aided thy quest!"\n',
            'russian': '"Прощай! Надеюсь, я помогла тебе в твоих в поисках!"\n'
        })
        bye()

    case '*':
        print({
            'english': '"Beg pardon?"',
            'russian': '"Прошу прощения?"'
        })
        jump label_129
    esac

label_1112:
    print({
        'english': '"Wouldst thou like to buy one of my weavings?" ',
        'russian': '"Не хочешь ли ты купить одно из моих плетений?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"All right, though I can give thou the best price in the land!"',
            'russian': '"Хорошо, но я могу предложить вам лучшую цену в стране!"'
        })
        jump label_129

    case 'y':
    case {'russian': 'д'}:
        jump label_1242
    esac

label_1242:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 0
        jump label_1385
    fi

label_1262:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_1276:
    look(character(integer(value 0), byte 0))
    print({
        'english': '#2) $Y\n',
        'russian': '#2) $Y\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_1276
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"Кто из вас?" '
    })
    inputDigit(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_2139
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_1262
    fi

    look(character(integer(value 3), byte 0))

label_1385:
    print({
        'english': '1) Basket\n2) Beehive\n3) Custom job\n"Which item?" ',
        'russian': '1) Корзину\n2) Улей\n3) Особую работу\n"Что именно?" '
    })
    inputDigit(integer(value 0))

    if equals(integer(value 0), byte 0):
        jump label_2139
    fi

    integer(value 0) = minus(integer(value 0), byte 1)

    if greater(integer(value 0), byte 1):
        print({
            'english': '"I fear my schedule is packed."',
            'russian': '"Боюсь, у меня плотный график".'
        })
        wait()

        print({
            'english': '\n\n"I have no time to create a basket for which I have no @plans."',
            'russian': '\n\n"У меня нет времени плести корзину, на которую у меня нет @чертежей".'
        })
        jump label_129
    fi

    integer(value 1) = data(integers_3728, integer(value 0))
    string(value 1) = data(strings_3736, integer(value 0))
    print({
        'english': '"Those $1s cost #1 gold apiece."',
        'russian': '"Цена за $1 - #1 золота".'
    })
    wait()

    print({
        'english': '\n\n"How many dost thou wish?" ',
        'russian': '\n\n"Сколько ты хочешь?" '
    })
    inputDigit(integer(value 4))

    if equals(integer(value 4), byte 0):
        jump label_1385
    fi

    integer(value 5) = byte 0

label_1681:
    if less(plus(canCarry(character(integer(value 3), byte 0)), weight(byte 88, integer(value 1))), weight(data(integers_3732, integer(value 0)), byte 1)):
        jump label_1799
    fi

    if less(objectsCount(character(integer(value 3), byte 0), byte 88), integer(value 1)):
        jump label_1921
    fi

    destroyItem(character(integer(value 3), byte 0), byte 88, byte 0, integer(value 1))
    createItem(character(integer(value 3), byte 0), data(integers_3732, integer(value 0)), byte 0, byte 1)
    integer(value 5) = plus(integer(value 5), byte 1)

    if equals(integer(value 5), integer(value 4)):
        jump label_2053

    else:
        jump label_1681
    fi

label_1799:
    if integer(value 5):
        print({
            'english': '"Thou canst not carry that many!"',
            'russian': '"Тебе столько не унести!"'
        })
        wait()

        print({
            'english': '\n\n"I will sell thee just #5 $1\\s."',
            'russian': '\n\n"Итак, ты заказывал $1. Я продам тебе только #5 единиц".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_2053

    else:
        print({
            'english': '"But thou canst not carry any $1s!"',
            'russian': '"Но ты не сможешь унести $1!"'
        })
        jump label_2139
    fi

label_1921:
    if integer(value 5):
        print({
            'english': '"Thou hast not enough gold for that many!"',
            'russian': '"У тебя не хватит золота на такое количество!"'
        })
        wait()

        print({
            'english': '\n\n"I will sell thee just #5 $1\\s."',
            'russian': '\n\n"Итак, ты заказывал $1. Я продам тебе только #5 единиц".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_2053

    else:
        print({
            'english': '"But thou canst not afford any $1s!"',
            'russian': '"Но ты не можешь позволить себе $1!"'
        })
        jump label_2139
    fi

label_2053:
    print({
        'english': 'Michelle takes $Y\'s money and hands over the $1',
        'russian': 'Мишель забирает деньги. $Y получает $1'
    })

    if greater(integer(value 5), byte 1):
        print({
            'english': 's',
            'russian': ''
        })
    fi

    print({
        'english': '. "I appreciate thy business."',
        'russian': '. "Приятно иметь с тобой дело".'
    })

label_2139:
    wait()

    print({
        'english': '\n\n"Is there aught else thou wouldst buy?" ',
        'russian': '\n\n"Хотел бы ты купить что-нибудь ещё?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        jump label_1242

    case 'n':
    case {'russian': 'н'}:
        if equals(integer(value 5), byte 0):
            print({
                'english': '"Perhaps some other time."',
                'russian': '"Возможно, в другой раз".'
            })
            jump label_129
        fi

        print({
            'english': '"Enjoy thy $1',
            'russian': '"Держите $1'
        })

        if greater(integer(value 5), byte 1):
            print({
                'english': 's."',
                'russian': '".'
            })

        else:
            print({
                'english': '."',
                'russian': '".'
            })
        fi

        jump label_129
    esac

label_2268:
    integer(value 6) = byte 0
    integer(value 0) = word 422
    integer(value 9) = weight(word 422, byte 1)

label_2294:
    if greater(integer(value 6), integer(value 23)):
        print({
            'english': '"But it would weigh six stones!"',
            'russian': '"Но он весил бы шесть стоунов!"'
        })
        wait()

        print({
            'english': '\n\n"Thou couldst not carry such a basket, loaded as thou art."',
            'russian': '\n\n"Ты не сможешь унести такую корзину с тем грузом, что ты с собой уже носишь".'
        })
        wait()

        print({
            'english': '\n\n"Lighten thy load, and then I will weave thee this basket."',
            'russian': '\n\n"Облегчи свою ношу, и тогда я сплету тебе эту корзину".'
        })
        jump label_129
    fi

    if greater(integer(value 9), plus(canCarry(character(integer(value 6), byte 0)), weight(byte 88, word 300))):
        integer(value 6) = plus(integer(value 6), byte 1)
        jump label_2294
    fi

    print({
        'english': '"Such a basket would cost 300 gold, in advance. Art thou still ',
        'russian': '"Такая корзина обойдётся в 300 золотых, и сумму нужно оплатить сейчас. Ты все ещё '
    })
    print({
        'english': 'interested?" ',
        'russian': 'заинтересован в этом?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        jump label_2640

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"I do not blame thee. \'Tis a huge undertaking!"',
            'russian': '"Я тебя не виню. Это грандиозная затея!"'
        })
        jump label_129
    esac

label_2640:
    integer(value 1) = word 300
    integer(value 2) = byte 0
    integer(value 3) = byte 0
    integer(value 4) = byte 0

label_2669:
    if greater(integer(value 3), integer(value 23)):
        print({
            'english': '"Thou hast not enough money for the basket."',
            'russian': '"У тебя недостаточно денег на такую корзину".'
        })
        wait()

        print({
            'english': '\n\n"I fear I cannot afford to start such a task on a mere #2 gold ',
            'russian': '\n\n"Боюсь, я не смогу позволить себе начать такую работу ради суммы в #2 '
        })
        print({
            'english': 'crown\\s."',
            'russian': 'золота".'
        })
        jump label_129
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)

    if less(integer(value 5), integer(value 1)):
        integer(value 1) = minus(integer(value 1), integer(value 5))
        integer(value 2) = plus(integer(value 2), integer(value 5))
        integer(value 3) = plus(integer(value 3), byte 1)
        jump label_2669

    else:
        print({
            'english': 'Your party takes up a collection to pay for the basket.',
            'russian': 'Ваш отряд собирает деньги, чтобы оплатить корзину.'
        })
        integer(value 1) = word 400
        integer(value 2) = byte 0
        integer(value 4) = integer(value 3)
        integer(value 3) = byte 0
        jump label_2947
    fi

label_2947:
    if equals(integer(value 3), integer(value 4)):
        destroyItem(character(integer(value 3), byte 0), byte 88, byte 0, integer(value 1))
        jump label_3030
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)
    integer(value 1) = minus(integer(value 1), integer(value 5))
    destroyItem(character(integer(value 3), byte 0), byte 88, byte 0, integer(value 5))
    integer(value 3) = plus(integer(value 3), byte 1)
    jump label_2947

label_3030:
    wait()

    print({
        'english': '\n\nShe begins weaving the huge basket, chatting with you as she works.',
        'russian': '\n\nОна начинает плести огромную корзину, болтая с вами во время работы.'
    })
    wait()

    print({
        'english': '\n\n"Hast thou found a silk weaver yet?" ',
        'russian': '\n\n"Ты уже нашёл ткача по шёлку?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        print({
            'english': '"Thou art wise, then. \'Tis a huge bag this will require."',
            'russian': '"Очень предусмотрительно с твоей стороны. Для такой корзины потребуется огромная сумка".'
        })
        jump label_3338

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"Well, I can see that this will require a huge silk bag."',
            'russian': '"Ну, я вижу, что для такой корзины потребуется огромная шелковая сумка".'
        })
        wait()

        print({
            'english': '\n\n"I know not where thou might find a silk weaver to craft it!"',
            'russian': '\n\n"Я не знаю, где ты найдёшь мастера по шёлку, чтобы сделать такую!"'
        })
        jump label_3338
    esac

label_3338:
    wait()

    print({
        'english': '\n\nShe continues weaving the basket.',
        'russian': '\n\nОна продолжает плести корзину.'
    })
    wait()

    print({
        'english': '\n\n"I do not mean to pry, but why dost thou need a balloon anyway?"\n',
        'russian': '\n\n"Я не хочу совать нос не в своё дело, но зачем тебе вообще нужен воздушный шар?"\n'
    })

    ask()

    case '*':
        print({
            'english': '"I\'m afraid I don\'t understand."\n',
            'russian': '"Боюсь, я не понимаю".\n'
        })
    esac

    ask()

    case '*':
        print({
            'english': '"Oh, I see."',
            'russian': '"О, я понимаю".'
        })
    esac

    wait()

    print({
        'english': '\n\nShe continues weaving the basket.',
        'russian': '\n\nОна продолжает плести корзину.'
    })
    wait()

    print({
        'english': '\n\nTime passes...',
        'russian': '\n\nПроходит время...'
    })
    wait()

    print({
        'english': '\n\nMore time passes...',
        'russian': '\n\nПроходит ещё больше времени...'
    })
    wait()

    print({
        'english': '\n\n"Finished!"',
        'russian': '\n\n"Готово!"'
    })
    wait()

    print({
        'english': '\n\n"It took less time than I had thought it might!"',
        'russian': '\n\n"Это заняло меньше времени, чем я думала!"'
    })
    createItem(character(integer(value 6), byte 0), word 422, byte 0, byte 1)
    look(character(integer(value 6), byte 0))
    wait()

    print({
        'english': '\n\nShe gives the basket to $Y, who struggles under its weight.',
        'russian': '\n\n$Y забирает корзину, сгибаясь под её тяжестью.'
    })
    jump label_129

integers_3728 = [
    10, // 0
    15, // 1
]

integers_3732 = [
    191, // 0
    182, // 1
]

strings_3736 = [
    {
        'english': 'basket',
        'russian': 'корзину'
    }, // 0
    {
        'english': 'beehive',
        'russian': 'улей'
    }, // 1
    {
        'english': '"These baskets are sturdy and decorative."*\n\n"Thou\'lt find no better in all Britannia for the price, a mere #1 gold."',
        'russian': '"Эти корзины прочные и декоративные".*\n\n"Во всей Британии ты не найдёшь ничего лучше по такой цене, всего #1 золота".'
    }, // 2
    {
        'english': '"If thou hast need of beehives, these woven ones are the best thou\'lt find!"*\n\n"And cheap, too, at #1 apiece."',
        'russian': '"Если вам нужны ульи, то мои плетёные - лучшее, что вы сможете найти!"*\n\n"И к тому же дешёвые, по #1 золота за штуку".'
    }, // 3
]
