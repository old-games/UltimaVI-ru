source("CONVERSE.A")
index(40)

id(40)
name("Manrel")

description:
    print("a pipe-smoking gentleman with the symbol of the Codex @tattooed on his")
    print(" forehead.")
    wait()

    print("\n")

interaction:
    print("\"Greetings to you, $G.\"\n")

    ask()

    case "name":
        print("\"My name is Manrel.\"")
        ('SETF', ('byte', 235), ('value', 0))
        jump 115

    case "job":
        print("\"I'm a @woodworker. I also dabble in @alchemy from time to time.\"")
        jump 115

    case "wood":
        print("\"I make furniture, cabinets, walking sticks, and the like.\"")
        wait()

        print("\n\n\"Perhaps I can make something for you someday.\"")
        jump 115

    case "alch":
    case "dabb":
        print("\"I'm trying to learn how to make healing potions, but I don't have the")
        print(" formula right yet.\"")
        wait()

        print("\n\n\"I did stumble across a wicked recipe for red @mead, though.\"")
        jump 115

    case "mead":
    case "red":
        print("\"Alas, there's little call for my brew in this town, with the Blue ")
        print("@Bottle serving Frasier's @Folly.\"")
        jump 115

    case "blue":
    case "bott":
        print("\"A fine establishment.\"")
        jump 115

    case "foll":
    case "fras":
        print("\"One of the finest @libations you'll find anywhere.\"")
        jump 115

    case "liba":
        print("\"Libation or liability - take your pick.\"")
        jump 115

    case "code":
    case "symb":
    case "tatt":
        print("\"I went drinking with some friends the night we heard of the discovery")
        print(" of the Codex.\"")
        wait()

        print("\n\n\"When I woke up the next morning, I had this tattoo...\"")
        jump 115

    case "beyv":
    case "cryp":
    case "door":
    case "key":
    case "lock":
        jump 1247

    case "flow":
        print("\"@Daffodils were always his favorites... It's too bad I couldn't find ")
        print("any.\"")
        jump 115

    case "daff":
        print("\"Yes, daffodils.\"")
        jump 115

    case "bye":
        if equals(integer(value 16), byte 1):
            print("\"Take care, my dear. I hope I'll see you again soon.\"")

        else:
            print("\"It was a pleasure speaking with you.\"")
        fi

        print("\n")
        bye()

    case "*":
        print("\"I can't help you with that.\"")
    esac

    jump 115

1247:
    if hasBit(byte 235, byte 7):
        print("\"I hope you got a chance to deliver the @flowers.\"")
        jump 115
    fi

    print("\"Oh, have you been to visit my cousin's grave?\" ")

    askc("yn")

    case "n":
        print("\"My mistake.\"")
        jump 115

    case "y":
        print("He looks at you suspiciously. \"You wouldn't be wanting the key to his ")
        print("crypt, would you?\" ")
    esac

    askc("yn")

    case "n":
        print("\"Well, alright then.\"")
        jump 115

    case "y":
        integer(value 9) = plus(weight(byte 139, byte 1), weight(byte 64, byte 1))
    esac

    if less(canCarry(character(byte 0, byte 0)), integer(value 9)):
        print("\"You're carrying too much right now. Come back for it later.\"")
        jump 115
    fi

    print("\"Well, perhaps you have your reasons... Okay, you can have the key.\"")
    wait()

    print("\n\n\"But you have to take these @flowers and leave them there.\"")
    ('NEW', ('byte', 1), ('byte', 139), ('byte', 0), ('byte', 1))
    ('GIVE', ('byte', 64), ('byte', 12), ('byte', 235), ('byte', 1))
    ('SETF', ('byte', 235), ('byte', 7))
    jump 115
