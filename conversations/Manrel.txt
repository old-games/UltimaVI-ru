source('CONVERSE.A')
index(40)

id(40)
name({
    'english': 'Manrel',
    'russian': 'FIXME Manrel'
})

description:
    print({
        'english': 'a pipe-smoking gentleman with the symbol of the Codex @tattooed on his',
        'russian': 'FIXME a pipe-smoking gentleman with the symbol of the Codex @tattooed on his'
    })
    print({
        'english': ' forehead.',
        'russian': 'FIXME  forehead.'
    })
    wait()

    print({
        'english': '\n',
        'russian': 'FIXME \n'
    })

interaction:
    print({
        'english': '"Greetings to you, $G."\n',
        'russian': 'FIXME "Greetings to you, $G."\n'
    })

    ask()

    case {
        'english': 'name',
        'russian': 'FIXME name'
    }:
        print({
            'english': '"My name is Manrel."',
            'russian': 'FIXME "My name is Manrel."'
        })
        setBit(byte 235, value 0)
        jump label_115

    case {
        'english': 'job',
        'russian': 'FIXME job'
    }:
        print({
            'english': '"I\'m a @woodworker. I also dabble in @alchemy from time to time."',
            'russian': 'FIXME "I\'m a @woodworker. I also dabble in @alchemy from time to time."'
        })
        jump label_115

    case {
        'english': 'wood',
        'russian': 'FIXME wood'
    }:
        print({
            'english': '"I make furniture, cabinets, walking sticks, and the like."',
            'russian': 'FIXME "I make furniture, cabinets, walking sticks, and the like."'
        })
        wait()

        print({
            'english': '\n\n"Perhaps I can make something for you someday."',
            'russian': 'FIXME \n\n"Perhaps I can make something for you someday."'
        })
        jump label_115

    case {
        'english': 'alch',
        'russian': 'FIXME alch'
    }:
    case {
        'english': 'dabb',
        'russian': 'FIXME dabb'
    }:
        print({
            'english': '"I\'m trying to learn how to make healing potions, but I don\'t have the',
            'russian': 'FIXME "I\'m trying to learn how to make healing potions, but I don\'t have the'
        })
        print({
            'english': ' formula right yet."',
            'russian': 'FIXME  formula right yet."'
        })
        wait()

        print({
            'english': '\n\n"I did stumble across a wicked recipe for red @mead, though."',
            'russian': 'FIXME \n\n"I did stumble across a wicked recipe for red @mead, though."'
        })
        jump label_115

    case {
        'english': 'mead',
        'russian': 'FIXME mead'
    }:
    case {
        'english': 'red',
        'russian': 'FIXME red'
    }:
        print({
            'english': '"Alas, there\'s little call for my brew in this town, with the Blue ',
            'russian': 'FIXME "Alas, there\'s little call for my brew in this town, with the Blue '
        })
        print({
            'english': '@Bottle serving Frasier\'s @Folly."',
            'russian': 'FIXME @Bottle serving Frasier\'s @Folly."'
        })
        jump label_115

    case {
        'english': 'blue',
        'russian': 'FIXME blue'
    }:
    case {
        'english': 'bott',
        'russian': 'FIXME bott'
    }:
        print({
            'english': '"A fine establishment."',
            'russian': 'FIXME "A fine establishment."'
        })
        jump label_115

    case {
        'english': 'foll',
        'russian': 'FIXME foll'
    }:
    case {
        'english': 'fras',
        'russian': 'FIXME fras'
    }:
        print({
            'english': '"One of the finest @libations you\'ll find anywhere."',
            'russian': 'FIXME "One of the finest @libations you\'ll find anywhere."'
        })
        jump label_115

    case {
        'english': 'liba',
        'russian': 'FIXME liba'
    }:
        print({
            'english': '"Libation or liability - take your pick."',
            'russian': 'FIXME "Libation or liability - take your pick."'
        })
        jump label_115

    case {
        'english': 'code',
        'russian': 'FIXME code'
    }:
    case {
        'english': 'symb',
        'russian': 'FIXME symb'
    }:
    case {
        'english': 'tatt',
        'russian': 'FIXME tatt'
    }:
        print({
            'english': '"I went drinking with some friends the night we heard of the discovery',
            'russian': 'FIXME "I went drinking with some friends the night we heard of the discovery'
        })
        print({
            'english': ' of the Codex."',
            'russian': 'FIXME  of the Codex."'
        })
        wait()

        print({
            'english': '\n\n"When I woke up the next morning, I had this tattoo..."',
            'russian': 'FIXME \n\n"When I woke up the next morning, I had this tattoo..."'
        })
        jump label_115

    case {
        'english': 'beyv',
        'russian': 'FIXME beyv'
    }:
    case {
        'english': 'cryp',
        'russian': 'FIXME cryp'
    }:
    case {
        'english': 'door',
        'russian': 'FIXME door'
    }:
    case {
        'english': 'key',
        'russian': 'FIXME key'
    }:
    case {
        'english': 'lock',
        'russian': 'FIXME lock'
    }:
        jump label_1247

    case {
        'english': 'flow',
        'russian': 'FIXME flow'
    }:
        print({
            'english': '"@Daffodils were always his favorites... It\'s too bad I couldn\'t find ',
            'russian': 'FIXME "@Daffodils were always his favorites... It\'s too bad I couldn\'t find '
        })
        print({
            'english': 'any."',
            'russian': 'FIXME any."'
        })
        jump label_115

    case {
        'english': 'daff',
        'russian': 'FIXME daff'
    }:
        print({
            'english': '"Yes, daffodils."',
            'russian': 'FIXME "Yes, daffodils."'
        })
        jump label_115

    case {
        'english': 'bye',
        'russian': 'FIXME bye'
    }:
        if equals(integer(value 16), byte 1):
            print({
                'english': '"Take care, my dear. I hope I\'ll see you again soon."',
                'russian': 'FIXME "Take care, my dear. I hope I\'ll see you again soon."'
            })

        else:
            print({
                'english': '"It was a pleasure speaking with you."',
                'russian': 'FIXME "It was a pleasure speaking with you."'
            })
        fi

        print({
            'english': '\n',
            'russian': 'FIXME \n'
        })
        bye()

    case {
        'english': '*',
        'russian': 'FIXME *'
    }:
        print({
            'english': '"I can\'t help you with that."',
            'russian': 'FIXME "I can\'t help you with that."'
        })
    esac

    jump label_115

label_1247:
    if hasBit(byte 235, byte 7):
        print({
            'english': '"I hope you got a chance to deliver the @flowers."',
            'russian': 'FIXME "I hope you got a chance to deliver the @flowers."'
        })
        jump label_115
    fi

    print({
        'english': '"Oh, have you been to visit my cousin\'s grave?" ',
        'russian': 'FIXME "Oh, have you been to visit my cousin\'s grave?" '
    })

    choice({
        'english': 'yn',
        'russian': 'FIXME yn'
    })

    case {
        'english': 'n',
        'russian': 'FIXME n'
    }:
        print({
            'english': '"My mistake."',
            'russian': 'FIXME "My mistake."'
        })
        jump label_115

    case {
        'english': 'y',
        'russian': 'FIXME y'
    }:
        print({
            'english': 'He looks at you suspiciously. "You wouldn\'t be wanting the key to his ',
            'russian': 'FIXME He looks at you suspiciously. "You wouldn\'t be wanting the key to his '
        })
        print({
            'english': 'crypt, would you?" ',
            'russian': 'FIXME crypt, would you?" '
        })
    esac

    choice({
        'english': 'yn',
        'russian': 'FIXME yn'
    })

    case {
        'english': 'n',
        'russian': 'FIXME n'
    }:
        print({
            'english': '"Well, alright then."',
            'russian': 'FIXME "Well, alright then."'
        })
        jump label_115

    case {
        'english': 'y',
        'russian': 'FIXME y'
    }:
        integer(value 9) = plus(weight(byte 139, byte 1), weight(byte 64, byte 1))
    esac

    if less(canCarry(character(byte 0, byte 0)), integer(value 9)):
        print({
            'english': '"You\'re carrying too much right now. Come back for it later."',
            'russian': 'FIXME "You\'re carrying too much right now. Come back for it later."'
        })
        jump label_115
    fi

    print({
        'english': '"Well, perhaps you have your reasons... Okay, you can have the key."',
        'russian': 'FIXME "Well, perhaps you have your reasons... Okay, you can have the key."'
    })
    wait()

    print({
        'english': '\n\n"But you have to take these @flowers and leave them there."',
        'russian': 'FIXME \n\n"But you have to take these @flowers and leave them there."'
    })
    createItem(byte 1, byte 139, byte 0, byte 1)
    giveItem(byte 64, byte 12, byte 235, byte 1)
    setBit(byte 235, byte 7)
    jump label_115
