source("CONVERSE.A")
index(37)

id(37)
name("Dargoth")

description:
    print("a stern, severe man in white robes.")
    wait()

interaction:
    print("\nYou interrupt the man from his research.")
    wait()

    print("\n\n\"Yes, yes, what is it?\"")
    wait()

    print("\n\n")
    integer(value 0) = partyHasObject(word 339, byte 0)

    if notEquals(integer(value 0), word 32769):
        jump 2332
    fi

    print("\"You've come for healing, I suppose.\"\n")

    ask()

    case "heal":
        jump 817

    case "cure":
        jump 1571

    case "resu":
        integer(value 0) = partyHasObject(word 339, byte 0)

        if equals(integer(value 0), word 32769):
            print("He raises an eyebrow.")
            wait()

            print("\n\n\"You may not be my choice for dinner conversation, but none of you ")
            print("are dead.\"")
            jump 179

        else:
            ('SETNAME', ('integer', [('value', 0)]))
            jump 2447
        fi

    case "name":
        print("\"I am Dargoth, master of medical lore.\"")
        ('SETF', ('byte', 235), ('value', 0))
        jump 179

    case "job":
        print("\"My true calling is research.\"")
        wait()

        print("\n\n\"My studies here have advanced the healing art throughout the ")
        print("world!\"")
        wait()

        print("\n\n\"But, more often than not, I am called upon to @cure poison ivy and ")
        print("@heal paper cuts!\"")
        wait()

        print("\n\n\"I grow weary of such trifles!\"")
        jump 179

    case "bye":
    case "no":
        print("\"Stay out of trouble!\"")
        wait()

        print("\n\n\"I don't want to see my fine workmanship wasted!\"\n")
        bye()

    case "yes":
        print("\"Well, what can I do for thee?\"")
        jump 179

    case "*":
        print("\"Come, come, get to the point. I'm a busy man!\"")
        jump 179

        // Unreachable code!
    esac

817:
    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump 938
    fi

    integer(value 3) = character(byte 0, byte 0)

    if isWounded(integer(value 3)):
        jump 1245

    else:
        print("\"I can do nothing for those scars. Still, they look healed.\"")
        jump 1539

        // Unreachable code!
    fi

938:
    if greater(integer(value 1), integer(value 23)):
        jump 1048
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(isWounded(integer(value 3)), byte 0):
        jump 1033
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump 1033
    fi

    ('SETNAME', ('integer', [('value', 4)]))
    print("#2) $Y\n")
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

1033:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump 938

1048:
    if equals(integer(value 2), byte 0):
        print("\"Why do you waste my time? None of you are wounded!\"")
        jump 1539
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump 1245
    fi

    ('SETNAME', ('integer', [('value', 4)]))
    print("#2) $Y\n\"Which of you?\" ")
    ('INPUTNUM', 2)

    if equals(integer(value 2), byte 0):
        jump 1539
    fi

    integer(value 1) = byte 0

1183:
    integer(value 3) = character(integer(value 1), byte 0)

    if isWounded(integer(value 3)):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump 1245
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump 1183
    fi

1245:
    ('SETNAME', ('integer', [('value', 3)]))

    if random(byte 0, byte 1):
        print("\"$Y, your injury is most interesting!\"")

    else:
        print("\"Ah! $Y, you have an injury worthy of my skill!\"")
    fi

    wait()

    print("\n\n\"It will cost you 30 gold for me to heal you, interested?\" ")

    askc("yn")

    case "y":
        if less(objectsCount(integer(value 3), byte 88), byte 30):
            jump 1501

        else:
            print("Laying hands upon $Y, Dargoth mends the wounds.")
            ('DELETE', ('integer', [('value', 3)]), ('byte', 88), ('byte', 0), ('byte', 30))
            ('HEAL', ('integer', [('value', 3)]))
            jump 179
        fi

    case "n":
1501:
        print("\"I need to be paid to heal you.\"")
        jump 1539

        // Unreachable code!
    esac

1539:
    wait()

    print("\n\n\"What else do you need?\"")
    jump 179

1571:
    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump 1679
    fi

    integer(value 3) = character(byte 0, byte 0)

    if isPoisoned(integer(value 3)):
        jump 1987

    else:
        print("\"You don't look good, but you're not poisoned.\"")
        jump 1539

        // Unreachable code!
    fi

1679:
    if greater(integer(value 1), integer(value 23)):
        jump 1789
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(isPoisoned(integer(value 3)), byte 0):
        jump 1774
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump 1774
    fi

    ('SETNAME', ('integer', [('value', 4)]))
    print("#2) $Y\n")
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

1774:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump 1679

1789:
    if equals(integer(value 2), byte 0):
        print("\"Why do you waste my time? None of you are poisoned!\"")
        jump 1539
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump 1987
    fi

    ('SETNAME', ('integer', [('value', 4)]))
    print("#2) $Y\n\"Which of you?\" ")
    ('INPUTNUM', 2)

    if equals(integer(value 2), byte 0):
        jump 1539
    fi

    integer(value 1) = byte 0

1925:
    integer(value 3) = character(integer(value 1), byte 0)

    if isPoisoned(integer(value 3)):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump 1987
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump 1925
    fi

1987:
    ('SETNAME', ('integer', [('value', 3)]))

    if random(byte 0, byte 1):
        print("\"Fascinating, $Y! I have read about such poison only in ancient ")
        print("books!\"")

    else:
        print("\"I haven't gotten many cases like this since they invented swamp ")
        print("boots.\"")
    fi

    wait()

    print("\n\n\"It'll cost 10 gold to cure you, interested?\" ")

    askc("yn")

    case "y":
        if less(objectsCount(integer(value 3), byte 88), byte 10):
            jump 2289

        else:
            print("Laying hands upon $Y, Dargoth removes the poison.")
            ('DELETE', ('integer', [('value', 3)]), ('byte', 88), ('byte', 0), ('byte', 10))
            ('CURE', ('integer', [('value', 3)]))
            jump 1539
        fi

    case "n":
2289:
        print("\"If you can't pay, I can't cure you.\"")
        jump 1539

        // Unreachable code!
    esac

2332:
    ('SETNAME', ('integer', [('value', 0)]))
    print("\"Oh.\" Seeing the dead body that $Y carries, he becomes more polite.")
    wait()

    print("\n\n\"I am sorry you've lost a compatriot.\"")
    wait()

    print("\n\n\"For 400 gold I can attempt resurrection, interested?\" ")

    askc("yn")

    case "y":
        if less(objectsCount(integer(value 0), byte 88), word 400):
            jump 2609

        else:
            jump 3008
        fi

    case "n":
        print("\"Resurrection is a difficult task. I'm sorry, but I need to be paid.\"")
        jump 179

        // Unreachable code!
    esac

2609:
    integer(value 1) = word 400
    integer(value 2) = byte 0
    integer(value 3) = byte 0
    integer(value 4) = byte 0

2638:
    if greater(integer(value 3), integer(value 23)):
        print("\"That ain't enough money.\"")
        wait()

        print("\n\n\"You are #1 gold piece\\s short.\"")
        wait()

        print("\n\n\"Go see a gravedigger. I'll reckon his price'll be lower.\"")
        jump 179
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)

    if less(integer(value 5), integer(value 1)):
        integer(value 1) = minus(integer(value 1), integer(value 5))
        integer(value 2) = plus(integer(value 2), integer(value 5))
        integer(value 3) = plus(integer(value 3), byte 1)
        jump 2638

    else:
        print("Your party takes up a collection for their fallen comrade.")
        integer(value 1) = word 400
        integer(value 2) = byte 0
        integer(value 4) = integer(value 3)
        integer(value 3) = byte 0
        jump 2922

        // Unreachable code!
    fi

2922:
    if equals(integer(value 3), integer(value 4)):
        ('DELETE', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 88), ('byte', 0), ('integer', [('value', 1)]))
        wait()

        print("\n\n")
        jump 3008
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)
    integer(value 1) = minus(integer(value 1), integer(value 5))
    ('DELETE', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 88), ('byte', 0), ('integer', [('value', 5)]))
    integer(value 3) = plus(integer(value 3), byte 1)
    jump 2922

3008:
    print("Dargoth lays hands upon the corpse...")
    wait()

    print("\n\n\"Doman...\"")
    wait()

    print("\n\n\"thixus...\"")
    wait()

    print("\n\n\"anretu!\"")
    ('RESURRECT', ('integer', [('value', 0)]))
    wait()

    print("\n\nAnd the dead live again!")
    integer(value 0) = partyHasObject(word 339, byte 0)

    if notEquals(integer(value 0), word 32769):
        ('SETNAME', ('integer', [('value', 0)]))
        wait()

        print("\n\n\"I see that $Y carries another slain friend.\"")
        wait()

        print("\n\n")
        jump 2447

    else:
        jump 179

        // Unreachable code!
    fi
