source('CONVERSE.A')
index(37)

id(37)
name('Dargoth')

description:
    print('a stern, severe man in white robes.')
    wait()

interaction:
    print('\nYou interrupt the man from his research.')
    wait()

    print('\n\n"Yes, yes, what is it?"')
    wait()

    print('\n\n')
    integer(value 0) = partyHasObject(word 339, byte 0)

    if notEquals(integer(value 0), word 32769):
        jump label_2332
    fi

    print('"You\'ve come for healing, I suppose."\n')

    ask()

    case 'heal':
        jump label_817

    case 'cure':
        jump label_1571

    case 'resu':
        integer(value 0) = partyHasObject(word 339, byte 0)

        if equals(integer(value 0), word 32769):
            print('He raises an eyebrow.')
            wait()

            print('\n\n"You may not be my choice for dinner conversation, but none of you ')
            print('are dead."')
            jump label_179

        else:
            look(integer(value 0))
            jump label_2447
        fi

    case 'name':
        print('"I am Dargoth, master of medical lore."')
        setBit(byte 235, value 0)
        jump label_179

    case 'job':
        print('"My true calling is research."')
        wait()

        print('\n\n"My studies here have advanced the healing art throughout the ')
        print('world!"')
        wait()

        print('\n\n"But, more often than not, I am called upon to @cure poison ivy and ')
        print('@heal paper cuts!"')
        wait()

        print('\n\n"I grow weary of such trifles!"')
        jump label_179

    case 'bye':
    case 'no':
        print('"Stay out of trouble!"')
        wait()

        print('\n\n"I don\'t want to see my fine workmanship wasted!"\n')
        bye()

    case 'yes':
        print('"Well, what can I do for thee?"')
        jump label_179

    case '*':
        print('"Come, come, get to the point. I\'m a busy man!"')
        jump label_179
    esac

label_817:
    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump label_938
    fi

    integer(value 3) = character(byte 0, byte 0)

    if isWounded(integer(value 3)):
        jump label_1245

    else:
        print('"I can do nothing for those scars. Still, they look healed."')
        jump label_1539
    fi

label_938:
    if greater(integer(value 1), integer(value 23)):
        jump label_1048
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(isWounded(integer(value 3)), byte 0):
        jump label_1033
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_1033
    fi

    look(integer(value 4))
    print('#2) $Y\n')
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

label_1033:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump label_938

label_1048:
    if equals(integer(value 2), byte 0):
        print('"Why do you waste my time? None of you are wounded!"')
        jump label_1539
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump label_1245
    fi

    look(integer(value 4))
    print('#2) $Y\n"Which of you?" ')
    inputNumber(integer(value 2))

    if equals(integer(value 2), byte 0):
        jump label_1539
    fi

    integer(value 1) = byte 0

label_1183:
    integer(value 3) = character(integer(value 1), byte 0)

    if isWounded(integer(value 3)):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump label_1245
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump label_1183
    fi

label_1245:
    look(integer(value 3))

    if random(byte 0, byte 1):
        print('"$Y, your injury is most interesting!"')

    else:
        print('"Ah! $Y, you have an injury worthy of my skill!"')
    fi

    wait()

    print('\n\n"It will cost you 30 gold for me to heal you, interested?" ')

    choice('yn')

    case 'y':
        if less(objectsCount(integer(value 3), byte 88), byte 30):
            jump label_1501

        else:
            print('Laying hands upon $Y, Dargoth mends the wounds.')
            destroy(integer(value 3), byte 88, byte 0, byte 30)
            heal(integer(value 3))
            jump label_179
        fi

    case 'n':
label_1501:
        print('"I need to be paid to heal you."')
        jump label_1539
    esac

label_1539:
    wait()

    print('\n\n"What else do you need?"')
    jump label_179

label_1571:
    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump label_1679
    fi

    integer(value 3) = character(byte 0, byte 0)

    if isPoisoned(integer(value 3)):
        jump label_1987

    else:
        print('"You don\'t look good, but you\'re not poisoned."')
        jump label_1539
    fi

label_1679:
    if greater(integer(value 1), integer(value 23)):
        jump label_1789
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(isPoisoned(integer(value 3)), byte 0):
        jump label_1774
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_1774
    fi

    look(integer(value 4))
    print('#2) $Y\n')
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

label_1774:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump label_1679

label_1789:
    if equals(integer(value 2), byte 0):
        print('"Why do you waste my time? None of you are poisoned!"')
        jump label_1539
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump label_1987
    fi

    look(integer(value 4))
    print('#2) $Y\n"Which of you?" ')
    inputNumber(integer(value 2))

    if equals(integer(value 2), byte 0):
        jump label_1539
    fi

    integer(value 1) = byte 0

label_1925:
    integer(value 3) = character(integer(value 1), byte 0)

    if isPoisoned(integer(value 3)):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump label_1987
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump label_1925
    fi

label_1987:
    look(integer(value 3))

    if random(byte 0, byte 1):
        print('"Fascinating, $Y! I have read about such poison only in ancient ')
        print('books!"')

    else:
        print('"I haven\'t gotten many cases like this since they invented swamp ')
        print('boots."')
    fi

    wait()

    print('\n\n"It\'ll cost 10 gold to cure you, interested?" ')

    choice('yn')

    case 'y':
        if less(objectsCount(integer(value 3), byte 88), byte 10):
            jump label_2289

        else:
            print('Laying hands upon $Y, Dargoth removes the poison.')
            destroy(integer(value 3), byte 88, byte 0, byte 10)
            cure(integer(value 3))
            jump label_1539
        fi

    case 'n':
label_2289:
        print('"If you can\'t pay, I can\'t cure you."')
        jump label_1539
    esac

label_2332:
    look(integer(value 0))
    print('"Oh." Seeing the dead body that $Y carries, he becomes more polite.')
    wait()

    print('\n\n"I am sorry you\'ve lost a compatriot."')
    wait()

    print('\n\n"For 400 gold I can attempt resurrection, interested?" ')

    choice('yn')

    case 'y':
        if less(objectsCount(integer(value 0), byte 88), word 400):
            jump label_2609

        else:
            jump label_3008
        fi

    case 'n':
        print('"Resurrection is a difficult task. I\'m sorry, but I need to be paid."')
        jump label_179
    esac

label_2609:
    integer(value 1) = word 400
    integer(value 2) = byte 0
    integer(value 3) = byte 0
    integer(value 4) = byte 0

label_2638:
    if greater(integer(value 3), integer(value 23)):
        print('"That ain\'t enough money."')
        wait()

        print('\n\n"You are #1 gold piece\\s short."')
        wait()

        print('\n\n"Go see a gravedigger. I\'ll reckon his price\'ll be lower."')
        jump label_179
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)

    if less(integer(value 5), integer(value 1)):
        integer(value 1) = minus(integer(value 1), integer(value 5))
        integer(value 2) = plus(integer(value 2), integer(value 5))
        integer(value 3) = plus(integer(value 3), byte 1)
        jump label_2638

    else:
        print('Your party takes up a collection for their fallen comrade.')
        integer(value 1) = word 400
        integer(value 2) = byte 0
        integer(value 4) = integer(value 3)
        integer(value 3) = byte 0
        jump label_2922
    fi

label_2922:
    if equals(integer(value 3), integer(value 4)):
        destroy(character(integer(value 3), byte 0), byte 88, byte 0, integer(value 1))
        wait()

        print('\n\n')
        jump label_3008
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)
    integer(value 1) = minus(integer(value 1), integer(value 5))
    destroy(character(integer(value 3), byte 0), byte 88, byte 0, integer(value 5))
    integer(value 3) = plus(integer(value 3), byte 1)
    jump label_2922

label_3008:
    print('Dargoth lays hands upon the corpse...')
    wait()

    print('\n\n"Doman..."')
    wait()

    print('\n\n"thixus..."')
    wait()

    print('\n\n"anretu!"')
    resurrect(integer(value 0))
    wait()

    print('\n\nAnd the dead live again!')
    integer(value 0) = partyHasObject(word 339, byte 0)

    if notEquals(integer(value 0), word 32769):
        look(integer(value 0))
        wait()

        print('\n\n"I see that $Y carries another slain friend."')
        wait()

        print('\n\n')
        jump label_2447

    else:
        jump label_179
    fi
