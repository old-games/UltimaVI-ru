source('CONVERSE.A')
index(37)

id(37)
name({
    'english': 'Dargoth',
    'russian': 'Даргот'
})

description:
    print({
        'english': 'a stern, severe man in white robes.',
        'russian': 'сурового мужчину в белых одеждах.'
    })
    wait()

interaction:
    print({
        'english': '\nYou interrupt the man from his research.',
        'russian': '\nВы отвлекаете мужчину от его исследований.'
    })
    wait()

    print({
        'english': '\n\n"Yes, yes, what is it?"',
        'russian': '\n\n"Да, да, в чём дело?"'
    })
    wait()

    print({
        'english': '\n\n',
        'russian': '\n\n'
    })
    integer(value 0) = partyHasObject(word 339, byte 0)

    if notEquals(integer(value 0), word 32769):
        jump label_2332
    fi

    print({
        'english': '"You\'ve come for healing, I suppose."',
        'russian': '"Я полагаю, вы пришли за лечением".'
    })

label_179:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'heal':
    case {'russian': 'лече'}:
        jump label_817

    case 'cure':
    case {'russian': 'исце'}:
        jump label_1571

    case 'resu':
    case {'russian': 'воск'}:
        integer(value 0) = partyHasObject(word 339, byte 0)

        if equals(integer(value 0), word 32769):
            print({
                'english': 'He raises an eyebrow.',
                'russian': 'Он поднимает свою бровь.'
            })
            wait()

            print({
                'english': '\n\n"You may not be my choice for dinner conversation, but none of you ',
                'russian': '\n\n"Может, вы и не самый лучший выбор для светской беседы, но по крайней мере вы '
            })
            print({
                'english': 'are dead."',
                'russian': 'не мертвы".'
            })
            jump label_179

        else:
            look(integer(value 0))
            jump label_2447
        fi

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"I am Dargoth, master of medical lore."',
            'russian': '"Я Даргот, магистр медицинских наук".'
        })
        setBit(byte 235, value 0)
        jump label_179

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"My true calling is research."',
            'russian': '"Моё истинное призвание - исследования".'
        })
        wait()

        print({
            'english': '\n\n"My studies here have advanced the healing art throughout the ',
            'russian': '\n\n"Мои работы способствовали развитию искусства врачевания во всём '
        })
        print({
            'english': 'world!"',
            'russian': 'мире!"'
        })
        wait()

        print({
            'english': '\n\n"But, more often than not, I am called upon to @cure poison ivy and ',
            'russian': '\n\n"Но чаще всего я занимаюсь @исцелением ядовитого плюща или '
        })
        print({
            'english': '@heal paper cuts!"',
            'russian': '@лечением порезов бумагой!"'
        })
        wait()

        print({
            'english': '\n\n"I grow weary of such trifles!"',
            'russian': '\n\n"Я начинаю уставать от таких мелочей!"'
        })
        jump label_179

    case 'bye':
    case {'russian': 'пока'}:
    case 'no':
    case {'russian': 'нет'}:
        print({
            'english': '"Stay out of trouble!"',
            'russian': '"Держитесь подальше от неприятностей!"'
        })
        wait()

        print({
            'english': '\n\n"I don\'t want to see my fine workmanship wasted!"\n',
            'russian': '\n\n"Я не хочу, чтобы моё мастерство пропадало даром!"\n'
        })
        bye()

    case 'yes':
    case {'russian': 'да'}:
        print({
            'english': '"Well, what can I do for thee?"',
            'russian': '"Итак, что же я могу для тебя сделать?"'
        })
        jump label_179

    case '*':
        print({
            'english': '"Come, come, get to the point. I\'m a busy man!"',
            'russian': '"Давай, давай, ближе к делу. Я занятой человек!"'
        })
        jump label_179
    esac

label_817:
    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump label_938
    fi

    integer(value 3) = character(byte 0, byte 0)

    if isWounded(integer(value 3)):
        jump label_1245

    else:
        print({
            'english': '"I can do nothing for those scars. Still, they look healed."',
            'russian': '"Я ничего не могу сделать с этими шрамами. К тому же, они выглядят зажившими".'
        })
        jump label_1539
    fi

label_938:
    if greater(integer(value 1), integer(value 23)):
        jump label_1048
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(isWounded(integer(value 3)), byte 0):
        jump label_1033
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_1033
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n',
        'russian': '#2) $Y\n'
    })
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

label_1033:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump label_938

label_1048:
    if equals(integer(value 2), byte 0):
        print({
            'english': '"Why do you waste my time? None of you are wounded!"',
            'russian': '"Зачем вы тратите моё время? Никто из вас не ранен!"'
        })
        jump label_1539
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump label_1245
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n"Which of you?" ',
        'russian': '#2) $Y\n"Кто из вас?" '
    })
    inputDigit(integer(value 2))

    if equals(integer(value 2), byte 0):
        jump label_1539
    fi

    integer(value 1) = byte 0

label_1183:
    integer(value 3) = character(integer(value 1), byte 0)

    if isWounded(integer(value 3)):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump label_1245
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump label_1183
    fi

label_1245:
    look(integer(value 3))

    if random(byte 0, byte 1):
        print({
            'english': '"$Y, your injury is most interesting!"',
            'russian': '"$Y, ваши раны самые интересные!"'
        })

    else:
        print({
            'english': '"Ah! $Y, you have an injury worthy of my skill!"',
            'russian': '"Ах! $Y, у вас раны, достойные моего мастерства!"'
        })
    fi

    wait()

    print({
        'english': '\n\n"It will cost you 30 gold for me to heal you, interested?" ',
        'russian': '\n\n"Ваше лечение будет стоить 30 золотых, продолжаем?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(objectsCount(integer(value 3), byte 88), byte 30):
            jump label_1501

        else:
            print({
                'english': 'Laying hands upon $Y, Dargoth mends the wounds.',
                'russian': 'Даргот, возложив руки, залечивает раны. $Y становится лучше.'
            })
            destroyItem(integer(value 3), byte 88, byte 0, byte 30)
            heal(integer(value 3))
            jump label_179
        fi

    case 'n':
    case {'russian': 'н'}:
label_1501:
        print({
            'english': '"I need to be paid to heal you."',
            'russian': '"Оплата лечения обязательна".'
        })
        jump label_1539
    esac

label_1539:
    wait()

    print({
        'english': '\n\n"What else do you need?"',
        'russian': '\n\n"Нужно ли вам что-нибудь ещё?"'
    })
    jump label_179

label_1571:
    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump label_1679
    fi

    integer(value 3) = character(byte 0, byte 0)

    if isPoisoned(integer(value 3)):
        jump label_1987

    else:
        print({
            'english': '"You don\'t look good, but you\'re not poisoned."',
            'russian': '"Вы неважно выглядите, но вы не отравлены".'
        })
        jump label_1539
    fi

label_1679:
    if greater(integer(value 1), integer(value 23)):
        jump label_1789
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(isPoisoned(integer(value 3)), byte 0):
        jump label_1774
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_1774
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n',
        'russian': '#2) $Y\n'
    })
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

label_1774:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump label_1679

label_1789:
    if equals(integer(value 2), byte 0):
        print({
            'english': '"Why do you waste my time? None of you are poisoned!"',
            'russian': '"Зачем вы тратите моё время? Никто из вас не отравлен!"'
        })
        jump label_1539
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump label_1987
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n"Which of you?" ',
        'russian': '#2) $Y\n"Кто из вас?" '
    })
    inputDigit(integer(value 2))

    if equals(integer(value 2), byte 0):
        jump label_1539
    fi

    integer(value 1) = byte 0

label_1925:
    integer(value 3) = character(integer(value 1), byte 0)

    if isPoisoned(integer(value 3)):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump label_1987
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump label_1925
    fi

label_1987:
    look(integer(value 3))

    if random(byte 0, byte 1):
        print({
            'english': '"Fascinating, $Y! I have read about such poison only in ancient ',
            'russian': '"Очаровательно, $Y! Я читал о таком яде только в древних '
        })
        print({
            'english': 'books!"',
            'russian': 'книгах!"'
        })

    else:
        print({
            'english': '"I haven\'t gotten many cases like this since they invented swamp ',
            'russian': '"У меня было не так много подобных случаев с тех пор, как изобрели болотные '
        })
        print({
            'english': 'boots."',
            'russian': 'сапоги".'
        })
    fi

    wait()

    print({
        'english': '\n\n"It\'ll cost 10 gold to cure you, interested?" ',
        'russian': '\n\n"Ваше исцеление обойдётся в 10 золотых, продолжаем?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(objectsCount(integer(value 3), byte 88), byte 10):
            jump label_2289

        else:
            print({
                'english': 'Laying hands upon $Y, Dargoth removes the poison.',
                'russian': 'Даргот, возложив руки, нейтрализует яд. $Y становится лучше.'
            })
            destroyItem(integer(value 3), byte 88, byte 0, byte 10)
            cure(integer(value 3))
            jump label_1539
        fi

    case 'n':
    case {'russian': 'н'}:
label_2289:
        print({
            'english': '"If you can\'t pay, I can\'t cure you."',
            'russian': '"Если вы не можете заплатить, я не смогу вас исцелить".'
        })
        jump label_1539
    esac

label_2332:
    look(integer(value 0))
    print({
        'english': '"Oh." Seeing the dead body that $Y carries, he becomes more polite.',
        'russian': '"Ох". Увидев мёртвое тело, которое несёт $Y, он становится более вежливым.'
    })
    wait()

    print({
        'english': '\n\n"I am sorry you\'ve lost a compatriot."',
        'russian': '\n\n"Мне жаль, что вы потеряли своего товарища".'
    })
    wait()

    print({
        'english': '\n\n',
        'russian': '\n\n'
    })

label_2447:
    print({
        'english': '"For 400 gold I can attempt resurrection, interested?" ',
        'russian': '"За 400 золотых я могу попробовать воскресить тело, продолжаем?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(objectsCount(integer(value 0), byte 88), word 400):
            jump label_2609

        else:
            jump label_3008
        fi

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"Resurrection is a difficult task. I\'m sorry, but I need to be paid."',
            'russian': '"Воскрешение - сложная задача. Извините, но услуга должна быть оплачена".'
        })
        jump label_179
    esac

label_2609:
    integer(value 1) = word 400
    integer(value 2) = byte 0
    integer(value 3) = byte 0
    integer(value 4) = byte 0

label_2638:
    if greater(integer(value 3), integer(value 23)):
        print({
            'english': '"That ain\'t enough money."',
            'russian': '"Этой суммы недостаточно".'
        })
        wait()

        print({
            'english': '\n\n"You are #1 gold piece\\s short."',
            'russian': '\n\n"Вам не хватает #1 золота".'
        })
        wait()

        print({
            'english': '\n\n"Go see a gravedigger. I\'ll reckon his price\'ll be lower."',
            'russian': '\n\n"Сходите к могильщику. Я думаю, он запросит меньшую цену".'
        })
        jump label_179
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)

    if less(integer(value 5), integer(value 1)):
        integer(value 1) = minus(integer(value 1), integer(value 5))
        integer(value 2) = plus(integer(value 2), integer(value 5))
        integer(value 3) = plus(integer(value 3), byte 1)
        jump label_2638

    else:
        print({
            'english': 'Your party takes up a collection for their fallen comrade.',
            'russian': 'Ваш отряд собирает нужную сумму в память о своём павшем товарище.'
        })
        integer(value 1) = word 400
        integer(value 2) = byte 0
        integer(value 4) = integer(value 3)
        integer(value 3) = byte 0
        jump label_2922
    fi

label_2922:
    if equals(integer(value 3), integer(value 4)):
        destroyItem(character(integer(value 3), byte 0), byte 88, byte 0, integer(value 1))
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_3008
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)
    integer(value 1) = minus(integer(value 1), integer(value 5))
    destroyItem(character(integer(value 3), byte 0), byte 88, byte 0, integer(value 5))
    integer(value 3) = plus(integer(value 3), byte 1)
    jump label_2922

label_3008:
    print({
        'english': 'Dargoth lays hands upon the corpse...',
        'russian': 'Даргот возлагает руки на труп...'
    })
    wait()

    print({
        'english': '\n\n"Doman..."',
        'russian': '\n\n"Доман..."'
    })
    wait()

    print({
        'english': '\n\n"thixus..."',
        'russian': '\n\n"тиксус..."'
    })
    wait()

    print({
        'english': '\n\n"anretu!"',
        'russian': '\n\n"анрету!"'
    })
    resurrect(integer(value 0))
    wait()

    print({
        'english': '\n\nAnd the dead live again!',
        'russian': '\n\nИ мёртвый оживает!'
    })
    integer(value 0) = partyHasObject(word 339, byte 0)

    if notEquals(integer(value 0), word 32769):
        look(integer(value 0))
        wait()

        print({
            'english': '\n\n"I see that $Y carries another slain friend."',
            'russian': '\n\n"Я вижу, что $Y несёт ещё одного павшего друга".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_2447

    else:
        jump label_179
    fi
