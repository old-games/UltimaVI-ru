source('CONVERSE.A')
index(98)

id(98)
name('Aurendir')

description:
    print('a short man dressed in shepherds clothing.')
    wait()

    print('\n')

interaction:
    integer(value 5) = byte 0
    print('"Hi there!"\n*\n"Is there anything I can do for you?"\n')

    ask()

    case 'name':
        print('"Once I was Aurendir the mighty - now I live a more @modest life."')
        setBit(byte 235, value 0)
        jump label_114

    case 'job':
    case 'life':
    case 'shep':
        print('"I came here to @meditate, tend @sheep and sell @wool."')
        jump label_114

    case 'shee':
    case 'tend':
        print('"So they can be @shorn."')
        jump label_114

    case 'shor':
        print('"To make @wool. People @buy it from me."')
        jump label_114

    case 'wool':
        print('"It\'s used to make @thread."')
        jump label_114

    case 'buy':
        print('"Would you like some wool?" ')
        jump label_1501

    case 'thre':
        print('"To be woven into @cloth."')
        jump label_114

    case 'clot':
    case 'wove':
        print('"You can make @robes from it."')
        jump label_114

    case 'robe':
        print('"I wear a robe while I tend @sheep. It\'s all part of life\'s great ')
        print('@circle."')
        jump label_114

    case 'circ':
    case 'life':
        print('"From earth, to grass, to sheep, to me... when I die, I\'ll return to ')
        print('the @earth."')
        jump label_114

    case 'back':
    case 'buri':
    case 'die':
    case 'eart':
    case 'gras':
        print('"That\'s right."')
        jump label_114

    case 'humb':
    case 'humi':
    case 'migh':
    case 'mode':
    case 'once':
        print('"I used to be a powerful and wealthy mage. I wore silk robes, and fine')
        print(' jewelry."')
        wait()

        print('\n\n"In fact, I even had my own @castle."')
        wait()

        print('\n\n"But one day in my travels I visited the @Shrine of Humility."')
        wait()

        print('\n\n"Meditating there, I had an idea."')
        wait()

        print('\n\n"I would give up all my earthly possessions and quit the practice of')
        print(' magic."')
        wait()

        print('\n\n"I would live as a shepherd!"')
        wait()

        print('\n\n"Surely this would be the greatest act of humility a man could ')
        print('perform."')
        wait()

        print('\n\n"And so you see me here today."')
        jump label_114

    case 'cast':
    case 'jewe':
    case 'mage':
    case 'magi':
    case 'powe':
    case 'silk':
    case 'weal':
        print('"Those days are no more."')
        jump label_114

    case 'shri':
        print('"I should go there again soon... It changed my life."')
        jump label_114

    case 'mant':
    case 'medi':
        print('"You should go meditate at the shrine yourself. I find \'lum\' a most ')
        print('effective mantra."')
        jump label_114

    case 'bye':
        print('"See you later."\n')
        bye()

    case '*':
        print('"Beats me."')
    esac

    jump label_114

label_1501:
    choice('yn')

    case 'y':
        jump label_1528

    case 'n':
        print('"Okay."')
        jump label_114
    esac

label_1528:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 0
        jump label_1664
    fi

label_1548:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_1562:
    look(character(integer(value 0), byte 0))
    print('#2. $Y\n')
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_1562
    fi

    print('"Which of you?" ')
    inputNumber(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_1994
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_1548
    fi

label_1664:
    print('"I charge 5 gold for a bale of wool. Would you like some?" ')

    choice('yn')

    case 'y':
        if less(plus(canCarry(character(integer(value 3), byte 0)), weight(byte 88, byte 5)), weight(byte 190, byte 1)):
            print('"You look pretty full to me."')
            wait()

            print('\n')
            jump label_76
        fi

        if greaterOrEquals(objectsCount(character(integer(value 3), byte 0), byte 88), byte 5):
            destroy(character(integer(value 3), byte 0), byte 88, byte 0, byte 5)
            create(character(integer(value 3), byte 0), byte 190, byte 0, byte 1)
            look(character(integer(value 3), byte 0))
            print('"Very good." After accepting $Y\'s gold, $N hands over the wool.')
            wait()

            integer(value 5) = byte 1
            print('\n\n')
            jump label_1994

        else:
            look(character(integer(value 3), byte 0))
            print('"I\'m sorry, but you don\'t seem to have enough money."')
            wait()

            print('\n')
            jump label_76
        fi

    case 'n':
        jump label_1994
    esac

label_1994:
    if integer(value 5):
        print('"It was a pleasure doing business with you."')
        wait()
    fi

    print('\n')
    jump label_76
