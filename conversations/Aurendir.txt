source('CONVERSE.A')
index(98)

id(98)
name({
    'english': 'Aurendir',
    'russian': 'Аурендир'
})

description:
    print({
        'english': 'a short man dressed in shepherds clothing.',
        'russian': 'Низкорослый мужчина, одетый как пастух.'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

interaction:
    integer(value 5) = byte 0
    print({
        'english': '"Hi there!"\n*',
        'russian': '"Приветствую!"\n*'
    })

label_76:
    print({
        'english': '\n"Is there anything I can do for you?"',
        'russian': '\n"Чем могу помочь?"'
    })

label_114:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"Once I was Aurendir the mighty - now I live a more @modest life."',
            'russian': '"Раньше меня звали Аурендир Могучий. Теперь же у меня более @скромная жизнь".'
        })
        setBit(byte 235, value 0)
        jump label_114

    case 'job':
    case {'russian': 'раб'}:
    case 'life':
    case {'russian': 'жиз'}:
    case 'shep':
    case {'russian': 'паст'}:
        print({
            'english': '"I came here to @meditate, tend @sheep and sell @wool."',
            'russian': '"Я пришёл сюда @медитировать, присматривать за @овцами и продавать @шерсть".'
        })
        jump label_114

    case 'tend':
    case {'russian': 'смо'}:
    case 'shee':
    case {'russian': 'овц'}:
        print({
            'english': '"So they can be @shorn."',
            'russian': '"Чтобы их можно было @стричь".'
        })
        jump label_114

    case 'shor':
    case {'russian': 'стр'}:
        print({
            'english': '"To make @wool. People @buy it from me."',
            'russian': '"Чтобы получать @шерсть, которую люди могут у меня @купить".'
        })
        jump label_114

    case 'wool':
    case {'russian': 'шерс'}:
        print({
            'english': '"It\'s used to make @thread."',
            'russian': '"Из неё можно делать @нити."'
        })
        jump label_114

    case 'buy':
    case {'russian': 'куп'}:
        print({
            'english': '"Would you like some wool?" ',
            'russian': '"Хотите купить немного шерсти?" '
        })
        jump label_1501

    case 'thre':
    case {'russian': 'нит'}:
        print({
            'english': '"To be woven into @cloth."',
            'russian': '"Из нитей плетут @ткань".'
        })
        jump label_114

    case 'wove':
    case {'russian': 'плес'}:
    case 'clot':
    case {'russian': 'ткан'}:
        print({
            'english': '"You can make @robes from it."',
            'russian': '"Из неё можно сделать @накидки".'
        })
        jump label_114

    case 'robe':
    case {'russian': 'наки'}:
        print({
            'english': '"I wear a robe while I tend @sheep. It\'s all part of life\'s great ',
            'russian': '"Я надеваю накидку, когда собираюсь пасти @овец. Это всё часть жизни великого '
        })
        print({
            'english': '@circle."',
            'russian': '@круга".'
        })
        jump label_114

    case 'life':
    case {'russian': 'жиз'}:
    case 'circ':
    case {'russian': 'круг'}:
        print({
            'english': '"From earth, to grass, to sheep, to me... when I die, I\'ll return to ',
            'russian': '"От земли к траве, к овцам, ко мне... Когда я умру, я вернусь '
        })
        print({
            'english': 'the @earth."',
            'russian': 'к @земле".'
        })
        jump label_114

    case 'die':
    case {'russian': 'сме'}:
    case 'buri':
    case {'russian': 'хор'}:
    case 'back':
    case {'russian': 'наз'}:
    case 'eart':
    case {'russian': 'зем'}:
    case 'gras':
    case {'russian': 'трав'}:
        print({
            'english': '"That\'s right."',
            'russian': '"Верно".'
        })
        jump label_114

    case 'once':
    case {'russian': 'ран'}:
    case 'migh':
    case {'russian': 'мог'}:
    case 'mode':
    case {'russian': 'уме'}:
    case 'humi':
    case {'russian': 'тих'}:
    case 'humb':
    case {'russian': 'скр'}:
        print({
            'english': '"I used to be a powerful and wealthy mage. I wore silk robes, and fine',
            'russian': '"Когда-то я был могущественным и богатым волшебником. Моя накидка была из шёлка, а на мне сияли искусно сделанные'
        })
        print({
            'english': ' jewelry."',
            'russian': ' украшения".'
        })
        wait()

        print({
            'english': '\n\n"In fact, I even had my own @castle."',
            'russian': '\n\n"У меня даже был собственный @замок".'
        })
        wait()

        print({
            'english': '\n\n"But one day in my travels I visited the @Shrine of Humility."',
            'russian': '\n\n"Но однажды дороги привели меня в @Святыню Смирения".'
        })
        wait()

        print({
            'english': '\n\n"Meditating there, I had an idea."',
            'russian': '\n\n"Во время медитации меня посетила идея".'
        })
        wait()

        print({
            'english': '\n\n"I would give up all my earthly possessions and quit the practice of',
            'russian': '\n\n"А именно отказаться от всей собственности и оставить занятия'
        })
        print({
            'english': ' magic."',
            'russian': ' магией".'
        })
        wait()

        print({
            'english': '\n\n"I would live as a shepherd!"',
            'russian': '\n\n"Мне захотелось стать пастухом!"'
        })
        wait()

        print({
            'english': '\n\n"Surely this would be the greatest act of humility a man could ',
            'russian': '\n\n"Воистину величайшее смирение, к которому может '
        })
        print({
            'english': 'perform."',
            'russian': 'прийти человек".'
        })
        wait()

        print({
            'english': '\n\n"And so you see me here today."',
            'russian': '\n\n"И теперь я тот, кто я есть".'
        })
        jump label_114

    case 'powe':
    case {'russian': 'мог'}:
    case 'weal':
    case {'russian': 'бог'}:
    case 'mage':
    case {'russian': 'маг'}:
    case 'silk':
    case {'russian': 'шёлк'}:
    case 'jewe':
    case {'russian': 'укр'}:
    case 'cast':
    case {'russian': 'зам'}:
    case 'magi':
    case {'russian': 'волш'}:
        print({
            'english': '"Those days are no more."',
            'russian': '"Прежняя жизнь уже в прошлом".'
        })
        jump label_114

    case 'shri':
    case {'russian': 'свят'}:
        print({
            'english': '"I should go there again soon... It changed my life."',
            'russian': '"Скоро я должен снова отправиться туда... Ведь то место изменило мою жизнь".'
        })
        jump label_114

    case 'medi':
    case {'russian': 'меди'}:
    case 'mant':
    case {'russian': 'мант'}:
        print({
            'english': '"You should go meditate at the shrine yourself. I find \'lum\' a most ',
            'russian': '"Вам тоже следует посетить святыне. \'Лам\' - '
        })
        print({
            'english': 'effective mantra."',
            'russian': 'самая эффективная мантра".'
        })
        jump label_114

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"See you later."\n',
            'russian': '"Увидимся".\n'
        })
        bye()

    case '*':
        print({
            'english': '"Beats me."',
            'russian': '"Ничего не понимаю".'
        })
    esac

    jump label_114

label_1501:
    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        jump label_1528

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"Okay."',
            'russian': '"Хорошо".'
        })
        jump label_114
    esac

label_1528:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 0
        jump label_1664
    fi

label_1548:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_1562:
    look(character(integer(value 0), byte 0))
    print({
        'english': '#2. $Y\n',
        'russian': '#2. $Y\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_1562
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"Кто из вас?" '
    })
    inputDigit(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_1994
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_1548
    fi

label_1664:
    print({
        'english': '"I charge 5 gold for a bale of wool. Would you like some?" ',
        'russian': '"Тюк шерсти стоит 5 золотых. Желаете купить?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(plus(canCarry(character(integer(value 3), byte 0)), weight(byte 88, byte 5)), weight(byte 190, byte 1)):
            print({
                'english': '"You look pretty full to me."',
                'russian': '"По-моему вы и без того перегружены".'
            })
            wait()

            print({
                'english': '\n',
                'russian': '\n'
            })
            jump label_76
        fi

        if greaterOrEquals(objectsCount(character(integer(value 3), byte 0), byte 88), byte 5):
            destroyItem(character(integer(value 3), byte 0), byte 88, byte 0, byte 5)
            createItem(character(integer(value 3), byte 0), byte 190, byte 0, byte 1)
            look(character(integer(value 3), byte 0))
            print({
                'english': '"Very good." After accepting $Y\'s gold, $N hands over the wool.',
                'russian': '"Очень хорошо". Получив золото от персонажа $Y, $N передаёт шерсть.'
            })
            wait()

            integer(value 5) = byte 1
            print({
                'english': '\n\n',
                'russian': '\n\n'
            })
            jump label_1994

        else:
            look(character(integer(value 3), byte 0))
            print({
                'english': '"I\'m sorry, but you don\'t seem to have enough money."',
                'russian': '"Очень жаль, но, кажется, что у вас не хватает денег".'
            })
            wait()

            print({
                'english': '\n',
                'russian': '\n'
            })
            jump label_76
        fi

    case 'n':
    case {'russian': 'н'}:
        jump label_1994
    esac

label_1994:
    if integer(value 5):
        print({
            'english': '"It was a pleasure doing business with you."',
            'russian': '"С вами приятно иметь дело".'
        })
        wait()
    fi

    print({
        'english': '\n',
        'russian': '\n'
    })
    jump label_76
