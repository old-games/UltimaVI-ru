source('CONVERSE.A')
index(84)

id(84)
name({
    'english': 'Stivius',
    'russian': 'Стивий'
})

description:
    print({
        'english': 'a tiny little man with wild eyes.',
        'russian': 'крохотного мужчину с безумным взглядом.'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

interaction:
    integer(value 5) = byte 0

    if hasBit(byte 235, value 0):
        jump label_174
    fi

    print({
        'english': '"Yeah. Ok. Yeah."',
        'russian': '"Ага. Хорошо. Ага".'
    })
    wait()

    print({
        'english': '\nHe looks you up and down and then claps his hands together. "Yeah. ',
        'russian': '\nОн смеряет вас взглядом и затем хлопает в ладоши. "Ага. '
    })
    print({
        'english': 'Ok. Yeah."\n',
        'russian': 'Хорошо. Ага".\n'
    })
    wait()

    setBit(byte 235, value 0)
    jump label_206

label_174:
    print({
        'english': '"Back for some more wine?"\n',
        'russian': '"Ещё вина?"\n'
    })
    jump label_232

label_206:
    print({
        'english': '\n"What can I do you for?"\n',
        'russian': '\n"Чем могу помочь?"\n'
    })

label_232:
    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"@Stivius the wine merchant is mine."\n',
            'russian': '"@Стивий, торговец вином".\n'
        })
        jump label_232

    case 'stiv':
    case {'russian': 'стив'}:
        print({
            'english': '"Quite a name, eh?"\n',
            'russian': '"Неплохое имечко, да?"\n'
        })
        jump label_232

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"I make @wine."',
            'russian': '"Я делаю @вино".'
        })

    case 'buy':
    case {'russian': 'куп'}:
    case 'wine':
    case {'russian': 'вино'}:
    case 'merc':
    case {'russian': 'торг'}:
        print({
            'english': '"Yeah. Maybe you want to buy some."\n*\n',
            'russian': '"Ага. Возможно, вы хотите купить немного".\n*\n'
        })
        jump label_2676

    case 'ghos':
    case {'russian': 'приз'}:
        print({
            'english': '"It\'s not just a @tale you\'ve been hearing."\n',
            'russian': '"Это не просто @байка, которую вам рассказывали".\n'
        })
        jump label_232

    case 'tale':
    case {'russian': 'бай'}:
        print({
            'english': '"Everyone knows that @Quenton haunts this town."',
            'russian': '"Каждый знает, что @Квентон терзает наш городок".'
        })
        wait()

        print({
            'english': '\n\n"If I had been @murdered by those evil ones...but that\'s just ',
            'russian': '\n\n"Если бы меня @убили эти злодеи... Но это лишь '
        })
        print({
            'english': 'gossip."\n',
            'russian': 'слухи".\n'
        })
        jump label_232

    case 'ones':
    case {'russian': 'злод'}:
    case 'murd':
    case {'russian': 'убил'}:
        print({
            'english': '"It was late one night and I had just returned from my fields."',
            'russian': '"Была поздняя ночь, когда я только вернулся со своих виноградников".'
        })
        wait()

        print({
            'english': '\n\n"\'Course my path takes me right by @Gideon\'s garden."',
            'russian': '\n\n"Конечно, тропа завела меня прямо в сад к @Гидеону".'
        })
        wait()

        print({
            'english': '\n"I heard a @noise by the well and saw some @dark forms hunched ',
            'russian': '\n"Я услышал @шум у колодца и увидел сгорбившиеся @тёмные '
        })
        print({
            'english': 'there."',
            'russian': 'силуэты".'
        })
        wait()

        print({
            'english': '\n\n"They had huge wings and @evil red eyes."',
            'russian': '\n\n"У них были огромные крылья и @злые красные глаза".'
        })
        wait()

        print({
            'english': '\n\n"I ran like the wind to my doorway. I was sure I was dead."\n',
            'russian': '\n\n"Я мигом бросился к своей двери. Я был уверен, что мне конец".\n'
        })
        jump label_232

    case 'quen':
    case {'russian': 'квен'}:
        print({
            'english': '"He was a nice enough soul. I sold many bottles to him."\n',
            'russian': '"Он был славный малый. Я продал ему немало бутылок".\n'
        })
        jump label_232

    case 'gide':
    case {'russian': 'гиде'}:
    case 'gard':
    case {'russian': 'сад'}:
        print({
            'english': '"Gideon runs the Haunting @Inn."',
            'russian': '"Гидеон владеет @Гостиницей \'Наваждение\'".'
        })
        wait()

        print({
            'english': '\n\n"His @wife has a garden which you can see from my front door."\n',
            'russian': '\n\n"У его @жены разбит садик, который можно увидеть, стоя у моей двери".\n'
        })
        jump label_232

    case 'haun':
    case {'russian': 'нав'}:
    case 'inn':
    case {'russian': 'гост'}:
        print({
            'english': '"It\'s the Inn straight across the lane from here."\n',
            'russian': '"Это гостиница прямо через дорогу отсюда".\n'
        })
        jump label_232

    case 'wife':
    case {'russian': 'жена'}:
        print({
            'english': '"She doesn\'t do much. Helps him run the place."\n',
            'russian': '"Она иногда помогает ему с гостиницей".\n'
        })
        jump label_232

    case 'nois':
    case {'russian': 'шум'}:
        print({
            'english': '"Twas a strange @whispering, in a tongue I could not understand."\n',
            'russian': '"Я слышал странный @шёпот на непонятном мне наречии".\n'
        })
        jump label_232

    case 'stra':
    case {'russian': 'стра'}:
    case 'whis':
    case {'russian': 'шёп'}:
    case 'tong':
    case {'russian': 'наре'}:
        print({
            'english': '"It didn\'t sound like any language I ever heard."',
            'russian': '"Мне никогда не доводилось слышать подобную речь".'
        })
        wait()

        print({
            'english': '\n\n"More like one o\' them guild @languages."\n',
            'russian': '\n\n"Похоже на @языки, на которых говорят между собой различные гильдийцы".\n'
        })
        jump label_232

    case 'guil':
    case {'russian': 'гиль'}:
    case 'lang':
    case {'russian': 'язык'}:
        print({
            'english': '"Like the one the @alchemist speaks."\n',
            'russian': '"Вот как наш @алхимик разговаривает".\n'
        })
        jump label_232

    case 'alch':
    case {'russian': 'алх'}:
        print({
            'english': '"Go ask old @Horance. He can tell ya - if you can understand him!"\n',
            'russian': '"Идите и поговорите со стариком @Хорансом. Он расскажет - если удастся что-то понять!"\n'
        })
        jump label_232

    case 'hora':
    case {'russian': 'хора'}:
        print({
            'english': '"He lives over on @Ivers Rounding by himself.\n',
            'russian': '"Он живёт один на @Иверском островке.\n'
        })
        jump label_232

    case 'iver':
    case {'russian': 'ивер'}:
    case 'roun':
    case {'russian': 'остр'}:
        print({
            'english': '"You must be new to this village."',
            'russian': '"А вы должно быть впервые в нашей деревне".'
        })
        wait()

        print({
            'english': '\n"Go see @Marney, she\'ll get you there."\n',
            'russian': '\n"Поговорите с @Марни - она отвезёт вас туда".\n'
        })
        jump label_232

    case 'marn':
    case {'russian': 'марн'}:
        print({
            'english': '"She\'s the daughter of @Quenton - the ghost."\n',
            'russian': '"Она дочь @Квентона - призрака".\n'
        })
        jump label_232

    case 'dark':
    case {'russian': 'тёмн'}:
    case 'form':
    case {'russian': 'силу'}:
        print({
            'english': '"I couldn\'t see too clearly. They were about man-@sized though."\n',
            'russian': '"Я не мог разглядеть. Хотя они и были @размером с человека".\n'
        })
        jump label_232

    case 'man':
    case {'russian': 'чел'}:
    case 'size':
    case {'russian': 'разм'}:
        print({
            'english': '"Yes, but they were hunched down so it was hard to see them."\n',
            'russian': '"Да, они сгорбились, поэтому было нелегко разглядеть их".\n'
        })
        jump label_232

    case 'huge':
    case {'russian': 'огро'}:
    case 'wing':
    case {'russian': 'крыл'}:
    case 'evil':
    case {'russian': 'злы'}:
    case 'red':
    case {'russian': 'крас'}:
    case 'eyes':
    case {'russian': 'глаз'}:
        print({
            'english': 'His eyes widen. "@Gargoyles they were!"',
            'russian': 'Он широко раскрыл глаза. "Это были @Горгульи!"'
        })
        wait()

        print({
            'english': '\n\n"Must\'a been ten or @twelve of \'em."\n',
            'russian': '\n\n"Должно быть, их было десять или @двенадцать".\n'
        })
        jump label_232

    case 'ten':
    case {'russian': 'дес'}:
    case 'twel':
    case {'russian': 'две'}:
        print({
            'english': '"Well, perhaps more like two or three."',
            'russian': '"Ладно, возможно, две или три".'
        })
        wait()

        print({
            'english': '\n\n"I didn\'t stay around and count \'em."\n',
            'russian': '\n\n"Не было времени стоять и считать их".\n'
        })
        jump label_232

    case 'garg':
    case {'russian': 'горг'}:
        print({
            'english': '"Yes. Big, ugly, snarling beasts."',
            'russian': '"Да. Большие, уродливые, рычащие твари".'
        })
        wait()

        print({
            'english': '\n"\'Course, they were @kneeling when I saw \'em."\n',
            'russian': '\n"Конечно, я застал их стоящими на @коленях".\n'
        })
        jump label_232

    case 'knee':
    case {'russian': 'кол'}:
        print({
            'english': '"You know, on their knees."\n',
            'russian': '"Ну, на своих коленях".\n'
        })
        jump label_232

    case 'tren':
    case {'russian': 'трен'}:
    case 'bell':
    case {'russian': 'бэлл'}:
        print({
            'english': '"I don\'t care much for him. He\'s always trying to get me to sell him ',
            'russian': '"Мне он безразличен. Он постоянно пытается купить у меня вина '
        })
        print({
            'english': 'my wine cheaper."\n',
            'russian': 'подешевле".\n'
        })
        jump label_232

    case 'deza':
    case {'russian': 'деза'}:
        print({
            'english': '"She\'s my sweetie."',
            'russian': '"Она такая душечка".'
        })
        wait()

        print({
            'english': '\n\nHe clasps his hands next to his cheek. "I count the hours until I ',
            'russian': '\n\nОн сцепляет ладони у своей щеки и говорит: "Я считаю часы до '
        })
        print({
            'english': 'can see her."\n',
            'russian': 'встречи с ней".\n'
        })
        jump label_232

    case 'mich':
    case {'russian': 'майк'}:
        print({
            'english': '"I have never talked to him. He bought wine from me once but that\'s ',
            'russian': '"Никогда не разговаривал с ним. Он однажды покупал у меня вино. На этом '
        })
        print({
            'english': 'it."\n',
            'russian': 'всё".\n'
        })
        jump label_232

    case 'lord':
    case {'russian': 'лорд'}:
    case 'brit':
    case {'russian': 'брит'}:
        print({
            'english': '"Well, what\'s to say? I am glad he is again our ruler."\n',
            'russian': '"Что ж, что тут можно сказать? Я рад, что он вновь правит нами".\n'
        })
        jump label_232

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"Come back if you get thirsty."\n',
            'russian': '"Возвращайтесь, когда захотите промочить горло".\n'
        })
        bye()

    case '*':
        print({
            'english': '"Ask someone else about that."\n',
            'russian': '"Поспрашивайте кого-нибудь ещё об этом".\n'
        })
    esac

    jump label_232

label_2676:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 1
        jump label_2822
    fi

label_2696:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_2710:
    look(character(integer(value 0), byte 0))
    print({
        'english': '#2. $Y\n',
        'russian': '#2. $Y\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_2710
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"Кто из вас?" '
    })
    inputDigit(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_3296
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_2696
    fi

    integer(value 3) = character(integer(value 3), byte 0)

label_2822:
    integer(value 0) = byte 1

label_2829:
    string(value 0) = data(strings_3388, minus(integer(value 0), byte 1))
    print({
        'english': '#0. $0\n',
        'russian': '#0. $0\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)

    if less(integer(value 0), byte 7):
        jump label_2829
    fi

    print({
        'english': '"Which item?" ',
        'russian': '"Какую вещь?" '
    })
    inputDigit(integer(value 0))

    if equals(integer(value 0), byte 0):
        jump label_3296
    fi

    if greater(integer(value 0), byte 6):
        jump label_2822
    fi

    integer(value 0) = minus(integer(value 0), byte 1)
    look(integer(value 3))
    string(value 0) = data(strings_3388, integer(value 0))
    integer(value 1) = data(integers_3364, integer(value 0))
    print({
        'english': '$N smiles at $Y. "For $0 it will cost you #1 gold. Interested?" ',
        'russian': '$N улыбается персонажу $Y: "$0 будет стоить #1 золота. Интересно?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'n':
    case {'russian': 'н'}:
        jump label_2822

    case 'y':
    case {'russian': 'д'}:
    esac

    if less(plus(canCarry(integer(value 3)), weight(byte 88, integer(value 1))), weight(data(integers_3376, integer(value 0)), byte 1)):
        print({
            'english': '"You look pretty full to me."',
            'russian': '"Кажется, ваш рюкзак перегружен".'
        })
        wait()

        print({
            'english': '\n',
            'russian': '\n'
        })
        jump label_206
    fi

    if greaterOrEquals(objectsCount(integer(value 3), byte 88), data(integers_3364, integer(value 0))):
        destroyItem(integer(value 3), byte 88, byte 0, data(integers_3364, integer(value 0)))
        createItem(integer(value 3), data(integers_3376, integer(value 0)), byte 0, byte 1)
        print({
            'english': '"Excellent!" After accepting $Y\'s gold, $N hands over the wine.',
            'russian': '"Прекрасно!" Взяв золото у персонажа $Y, $N отдаёт вино.'
        })
        wait()

        print({
            'english': '\n',
            'russian': '\n'
        })
        integer(value 5) = byte 1
        string(value 1) = data(strings_3388, integer(value 0))
        print({
            'english': '\n',
            'russian': '\n'
        })
        jump label_2822

    else:
        print({
            'english': '$N looks at $Y. "You don\'t have enough gold."',
            'russian': '$N (глядя на персонажа $Y): "У вас недостаточно золота".'
        })
        wait()

        print({
            'english': '\n',
            'russian': '\n'
        })
        jump label_206
    fi

label_3296:
    if integer(value 5):
        print({
            'english': '"Enjoy your $1."',
            'russian': '"Наслаждайтесь вашим $1".'
        })
        wait()

        print({
            'english': '\n',
            'russian': '\n'
        })
        jump label_206
    fi

    print({
        'english': '"Too bad, it\'s really good wine."',
        'russian': '"Очень жаль, это действительно хорошее вино".'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })
    jump label_206

integers_3364 = [
    10,  // 0
    20,  // 1
    30,  // 2
    40,  // 3
    100, // 4
    100, // 5
]

integers_3376 = [
    115, // 0
    115, // 1
    115, // 2
    115, // 3
    115, // 4
    115, // 5
]

strings_3388 = [
    {
        'english': 'White Wine',
        'russian': 'белым вином'
    }, // 0
    {
        'english': 'Red Wine',
        'russian': 'красным вином'
    }, // 1
    {
        'english': 'Dry Wine',
        'russian': 'сухим вином'
    }, // 2
    {
        'english': 'Sweet Wine',
        'russian': 'сладким вином'
    }, // 3
    {
        'english': 'Skara Red',
        'russian': 'красным Скара'
    }, // 4
    {
        'english': 'Skara Dry',
        'russian': 'сухим Скара'
    }, // 5
]
