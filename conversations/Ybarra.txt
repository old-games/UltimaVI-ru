source('CONVERSE.B')
index(86)

id(185)
name({
    'english': 'Ybarra',
    'russian': 'Ибарра'
})

description:
    print({
        'english': 'a sunken-faced, starving man, dressed in rags.',
        'russian': 'измученного голодом человека с осунувшимся лицом, одетого в лохмотья.'
    })

    f3()

interaction:
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

    if hasBit(byte 235, value 0):
        print({
            'english': '"Thou art back!"',
            'russian': '"Ты вернулся!"'
        })
        wait()

        print({
            'english': '\n\n"Please, please! @Give me some food!"',
            'russian': '\n\n"Пожалуйста, пожалуйста! @Дай мне немного еды!"'
        })
        jump label_269
    fi

    print({
        'english': 'It takes a few moments for the man to notice you.',
        'russian': 'Требуется несколько мгновений, чтобы человек обратил на вас внимание.'
    })
    wait()

    print({
        'english': '\n\n"Hu--humans!"',
        'russian': '\n\n"Лю-люди!"'
    })
    wait()

    print({
        'english': '\n\n"Please, you must help me!" he says weakly.',
        'russian': '\n\n"Пожалуйста, вы должны мне помочь!" - слабо произносит он.'
    })
    wait()

    print({
        'english': '\n\n"I need @food, badly!"',
        'russian': '\n\n"Мне срочно нужна @еда!"'
    })
    setBit(byte 235, value 0)

label_269:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"Ybarra. Ybarra\'s my name."',
            'russian': '"Ибарра. Меня зовут Ибарра".'
        })
        jump label_269

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"Lost here, no job now."',
            'russian': '"Я здесь потерялся, нет больше работы".'
        })
        wait()

        print({
            'english': '\n\n"I used to sail under Captain Hawkins on the Empire."',
            'russian': '\n\n"Раньше я плавал под командованием капитана Хокинса на \'Империи\'".'
        })
        wait()

        print({
            'english': '\n\n"We had @food then!"',
            'russian': '\n\n"Тогда у нас была @еда!"'
        })
        wait()

        print({
            'english': '\n\n"But those days are gone...."',
            'russian': '\n\n"Но те времена прошли..."'
        })
        jump label_269

    case 'food':
    case {'russian': 'еда'}:
        print({
            'english': '"Yes, @food! The last thing I ate was my @belt."',
            'russian': '"Да, @еда! Последнее, что я съел, был мой @ремень".'
        })
        wait()

        print({
            'english': '\n\n"And that was three weeks ago."',
            'russian': '\n\n"И это было три недели назад".'
        })
        wait()

        print({
            'english': '\n\n"If only you could @give me some food..."',
            'russian': '\n\n"Если бы вы только могли @дать мне немного еды..."'
        })
        jump label_269

    case 'belt':
    case {'russian': 'реме'}:
        print({
            'english': '"Not very tasty, but it was filling."',
            'russian': '"Не очень вкусный, но зато сытный".'
        })
        jump label_269

    case 'give':
    case {'russian': 'дать'}:
    case 'spar':
    case {'russian': 'дай'}:
        jump label_1061

    case 'map':
    case {'russian': 'карт'}:
    case 'piec':
    case {'russian': 'кусо'}:
        print({
            'english': '"Map? Map. Map."',
            'russian': '"Карта? Карта. Карта".'
        })
        wait()

        if equals(hasObject(byte 235, word 404, byte 0), byte 0):
            print({
                'english': '\n\n"You already got it from me."',
                'russian': '\n\n"Вы уже получили её от меня".'
            })
            jump label_269
        fi

        print({
            'english': '\n\n"Oh, the map. Yes, I still have that."',
            'russian': '\n\n"О, карта. Да, она всё ещё у меня".'
        })
        wait()

        print({
            'english': '\n\n"I couldn\'t eat it."',
            'russian': '\n\n"Я не смог бы её съесть".'
        })
        integer(value 9) = byte 0
        wait()

        print({
            'english': '\n\n"It ought to be worth some @food, surely?" ',
            'russian': '\n\n"Но ведь она должна стоить немного @еды, не так ли?" '
        })
        jump label_1469

    case 'join':
    case {'russian': 'прис'}:
        print({
            'english': '"Leave here? No!"',
            'russian': '"Уйти отсюда? Нет!"'
        })
        wait()

        print({
            'english': '\n"I\'ve almost gotten the tunnels figured out!"',
            'russian': '\n"Я почти разобрался с туннелями!"'
        })
        wait()

        print({
            'english': '\n\n"Just a few more days and I\'ll be free!"',
            'russian': '\n\n"Ещё несколько дней, и я буду свободен!"'
        })
        wait()

        print({
            'english': '\n\n"But I must have @food!"',
            'russian': '\n\n"Но мне нужна @еда!"'
        })
        jump label_269

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"Don\'t go! I need @food... @food..."\n',
            'russian': '"Не уходите! Мне нужна @еда... @еда..."\n'
        })
        wait()

        jump label_1769

    case '*':
        print({
            'english': '"Huh?"',
            'russian': '"А?"'
        })
        jump label_269
    esac

label_1061:
    integer(value 0) = byte 0

label_1068:
    if greater(integer(value 0), byte 15):
        jump label_1360
    fi

    integer(value 1) = partyHasObject(data(integers_1878, integer(value 0)), byte 0)

    if equals(integer(value 1), word 32769):
        integer(value 0) = plus(integer(value 0), byte 1)
        jump label_1068
    fi

    if equals(integer(value 1), byte 1):
        print({
            'english': 'You share ',
            'russian': 'Вы делитесь '
        })

    else:
        look(integer(value 1))
        print({
            'english': '$Y shares ',
            'russian': '$Y делится '
        })
    fi

    print({
        'english': 'some food with the pathetic man.',
        'russian': 'едой с этим жалким человеком.'
    })
    destroyItem(integer(value 1), data(integers_1878, integer(value 0)), byte 0, objectsCount(integer(value 1), data(integers_1878, integer(value 0))))
    increaseKarma(byte 1)
    wait()

    print({
        'english': '\n\n"Thunff fou," Ybarra says, stuffing the food into his mouth.',
        'russian': '\n\n"Фпафибо фебе", - говорит Ибарра, запихивая еду в рот.'
    })
    wait()

    print({
        'english': '\n\nAfter finishing the offered meal, however, Ybarra still seemes ',
        'russian': '\n\n"Однако, закончив с предложенным блюдом, Ибарра, похоже, всё ещё испытывает '
    })
    print({
        'english': 'starved.',
        'russian': 'голод".'
    })
    jump label_269

label_1360:
    print({
        'english': 'Suddenly, you realize that you have no food to give him!',
        'russian': 'Внезапно вы понимаете, что у вас нет еды, которую вы могли бы ему дать!'
    })
    wait()

    print({
        'english': '\n\n"No @food?" he asks. "Then thou art doomed too!"\n',
        'russian': '\n\n"Нет @еды?" - спрашивает он. - "Тогда ты тоже обречён!"\n'
    })
    bye()

label_1469:
    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        print({
            'english': 'He hands you the map piece and rubs his hands, eagerly awaiting his ',
            'russian': 'Он протягивает вам кусок карты и потирает руки, с нетерпением ожидая '
        })
        print({
            'english': 'food.',
            'russian': 'еды.'
        })
        moveItem(word 404, byte 0, byte 235, byte 1)
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_1061

    case 'n':
    case {'russian': 'н'}:
        if equals(integer(value 9), byte 1):
            jump label_1661
        fi

        print({
            'english': '"You must! I\'ll die! Just a little bit of @food for the map?" ',
            'russian': '"Вы должны! Или я умру! Всего лишь немного @еды за карту?" '
        })
        integer(value 9) = byte 1
        jump label_1469
    esac

label_1661:
    print({
        'english': 'His last shred of hope torn away from him, the withered man leaps at ',
        'russian': 'У него отняли последнюю надежду, и иссохший человек бросается на '
    })
    print({
        'english': 'you, screaming "@Food! @Food!"\n',
        'russian': 'вас с криками - "@Еда! @Еда!"\n'
    })
    do(byte 235, byte 153)
    bye()

label_1769:
    print({
        'english': '\n"Can I have a little before you go?" ',
        'russian': '\n"Можно мне немного еды, прежде чем вы уйдёте?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': 'The man collapses, the last of his energy gone.\n',
            'russian': 'Мужчина падает в обморок, его покидают последние силы.\n'
        })
        do(byte 235, byte 145)
        bye()

    case 'y':
    case {'russian': 'д'}:
        jump label_1061
    esac

integers_1878 = [
    128,   // 0
    131,   // 1
    132,   // 2
    135,   // 3
    265,   // 4
    209,   // 5
    129,   // 6
    130,   // 7
    65490, // 8
    0,     // 9
    0,     // 10
    115,   // 11
    116,   // 12
    117,   // 13
    180,   // 14
    184,   // 15
]
