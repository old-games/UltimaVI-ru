source('CONVERSE.B')
index(52)

id(151)
name('Eckhart')

description:
    print('a gnarled man with knobby muscles.\n')

interaction:
    print('"Hullo, $G." He touches his cap respectfully.')

    if notEquals(integer(value 32), byte 144):
        jump label_252
    fi

    wait()

    print('\nHe has a very sharp knife with which he prunes off less productive ')
    print('branches.\n*\n"Mind that you stay out of the flight paths of the @bees, ')
    print('$G."')
    jump label_252

label_252:
    print('\n')

    ask()

    case 'name':
        print('"Eckhart the vinekeeper, at your service, ')

        if equals(integer(value 16), byte 1):
            print('ma\'am."')

        else:
            print('sir."')
        fi

        ('SETF', ('byte', 235), ('value', 0))
        jump label_252

    case 'bees':
    case 'hone':
    case 'mead':
        print('You notice the bees have regular aerial routes all about the vineyard.')
        wait()

        print('\n\n"Zeke keeps bees on the other side of the abbey, $G."')
        jump label_252

    case 'job':
        print('"I care for the @garden and tend the @vines."')
        jump label_252

    case 'care':
    case 'gard':
        print('"Some of our rosebushes were planted by druids hundreds of years ago."')
        wait()

        print('\n\n"Eventually, we became the Brotherhood of the Rose."')
        jump label_252

    case 'tend':
    case 'vine':
        if equals(integer(value 32), byte 144):
            print('"These rows," he gestures, "are ')

        else:
            print('"Here at the abbey we grow ')
        fi

        print('@seedless grapes."')
        jump label_252

    case 'less':
    case 'seed':
        print('"Amazing, ain\'t it, $G. The @enchanter made them for us."')
        wait()

        print('\n\n"Now I grow new vines by grafting seedless @grapevines onto regular ')
        print('rootstocks."')
        jump label_252

    case 'ench':
    case 'nico':
        print('"Yes, $G. He lives east of here, between two rivers."')
        wait()

        print('\n\n"His hut be due north of Britain, or so they tell me."')
        jump label_252

    case 'grap':
        if notEquals(integer(value 32), byte 144):
            print('"Visit me in the fields some time and I\'ll give you some!"')
            jump label_252
        fi

        print('"Now those grapes there are for making @wine."')

        if partyHas(byte 2):
            wait()

            ('PORTRAIT', ('byte', 2))
            print('\n\nDupre says "I cannot say which I like better: wine from grapes or ')
            print('mead from honey!"')
            ('PORTRAIT', ('byte', 235))
        fi

        wait()

        print('\n\n"And these over here are for eating."')

        if and(notEquals(partyHasObject(byte 95, byte 0), word 32769), equals(hasBit(byte 235, byte 7), byte 1)):
            jump label_252
        fi

        if less(canCarry(byte 1), weight(byte 95, byte 1)):
            jump label_252
        fi

        ('SETF', ('byte', 235), ('byte', 7))
        ('NEW', ('byte', 1), ('byte', 95), ('byte', 0), ('byte', 1))
        wait()

        print('\n\nHe gives you a plump little bunch of sweet table grapes.')
        jump label_252

    case 'wine':
        print('"Ask @Faren of that."')
        jump label_252

    case 'fare':
        print('"Yes, Faren--the local winemaker."')
        jump label_252

    case 'bye':
        if equals(integer(value 32), byte 144):
            print('He waves and turns back to work.\n')

        else:
            print('Eckhart waves goodbye.\n')
        fi

        bye()

    case '*':
        print('"Beg pardon, $G?"')
        jump label_252
