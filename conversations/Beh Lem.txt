source('CONVERSE.B')
index(65)

id(164)
name('Beh Lem')

description:
    print('a small, light-skinned gargoyle.')

interaction:
    wait()

    if partyHas(byte 235):
        print('\n"To ask how I can help, mighty $P," Beh Lem asks.')
        jump label_1027
    fi

    if integer(value 21):
        integer(value 9) = byte 0
        jump label_888
    fi

    print('\nThe gargoyle greets you enthusiastically, but you can\'t understand ')
    print('him!')
    wait()

    print('\n\nSeeing your confusion, he switches to the human language. It\'s ')
    print('obviously a strain for him.')
    wait()

    print('\n\n"Hello. I little human @speak."')
    integer(value 0) = byte 0

label_328:
    integer(value 0) = plus(integer(value 0), byte 1)

    if less(integer(value 0), byte 5):
        jump label_576
    fi

    wait()

    if partyHas(byte 2):
        ('PORTRAIT', ('byte', 2))
        ('SETNAME', ('byte', 2))
        jump label_396
    fi

    if partyHas(byte 4):
        ('PORTRAIT', ('byte', 4))
        ('SETNAME', ('byte', 4))
        jump label_396

    else:
        jump label_576
    fi

label_396:
    print('\n\n$Y speaks. "$P, let\'s away from here."')
    wait()

    print('\n\n"There\'s naught of use this creature can tell us. Agreed?" ')

    choice('yn')

    case 'y':
        print('The confused gargoyle waves good-bye.\n')
        bye()

    case 'n':
        print('"As you wish, $G."')
        ('PORTRAIT', ('byte', 235))
        integer(value 0) = byte 0
    esac

label_576:
    print('\n')

    ask()

    case 'capt':
    case 'john':
        print('"Captain John friend. He come here. I wait here."')
        jump label_328

    case 'name':
        print('"No name. I Beh Lem."')
        jump label_328

    case 'job':
        print('"I wait here. @Captain John come."')
        jump label_328

    case 'huma':
    case 'lang':
    case 'litt':
    case 'read':
    case 'spea':
        print('"@Captain John teach I human speak," the gargoyle says haltingly.')
        jump label_328

    case 'bye':
        print('The confused gargoyle waves good-bye.\n')
        bye()

    case '*':
        print('The gargoyle shrugs.')
        jump label_328
    esac

label_888:
    print('\n')

    if equals(hasBit(byte 235, value 0), byte 0):
        print('"To greet you, human. To recognize you as the False @Prophet!"')
        wait()

        jump label_1027
    fi

    print('"Good $T, my friend')

    if integer(value 23):
        print('s')
    fi

    print('. To have met @Valkadesh yet?"')
    jump label_1027

label_1027:
    print('\n')

    ask()

    case 'capt':
    case 'frie':
    case 'john':
        print('"To know Captain John! To help him and @Valkedesh in their work," the ')
        print('youngster says proudly.')
        jump label_1027

    case 'true':
        print('"To not receive a true name until I have proved myself @worthy."')
        jump label_1027

    case 'name':
        print('"To be called Beh Lem, which means \'just one.\' To have not yet ')
        print('received a @true name."')
        jump label_1027

    case 'prov':
    case 'wort':
        print('"To not deserve a name yet. But to get one someday, just like my ')
        print('father @Valkadesh!"')
        jump label_1027

    case 'job':
        if partyHas(byte 235):
            print('"To be here to help you, noble $P."')

        else:
            print('"To be here to wait for Captain @John."')
        fi

        jump label_1027

    case 'fath':
    case 'scho':
    case 'valk':
        if partyHas(byte 235):
            jump label_3117

        else:
            print('"To very much respect Valkadesh my father."')
            wait()

            print('\n\n"To want to be a scholar someday just like him!"\n')
            wait()

            jump label_2973
        fi

    case 'dire':
        print('"To ask what directions were unclear?"')
        jump label_1027

    case 'join':
        if partyHas(byte 235):
            ('DPRINT', ('dword', 4206), ('byte', 3))
            jump label_1027

        else:
            jump label_3693
        fi

    case 'sacr':
        print('"To not know much about that. But to be sure that @Valkadesh would ')
        print('know!"')
        jump label_1027

    case 'cont':
    case 'dili':
    case 'pass':
        print('"To be one of our guiding @principles."')
        jump label_1027

    case 'prin':
        print('"To be surprised that you don\'t know that!"')
        wait()

        print('\n\n"To have three guiding principles - @control, @diligence, and ')
        print('@passion."')
        wait()

        print('\n\n"To be the basis of all gargoyle beliefs."')
        jump label_1027

    case 'fals':
    case 'prop':
        print('"To be feared by everybody - everybody except me and @Valkadesh, my ')
        print('father!"')
        jump label_1027

    case 'guid':
        jump label_3213

    case 'leav':
        if partyHas(byte 235):
            print('"To wish to stay with you!"\n*\n"To not leave until there is peace ')
            print('between our races!"')
            jump label_1027

        else:
            ('DPRINT', ('dword', 4206), ('byte', 3))
            jump label_1027
        fi

    case 'bye':
        print('"May ')

        if equals(partyHas(byte 235), byte 0):
            print('y')
        fi

        print('our persistence and precision lead to success!"')
        wait()

        print('\n')
        ('SETF', ('byte', 235), ('value', 0))

        if equals(integer(value 9), byte 1):
            print('\nDuring your absence, $9 decided to head for the surface, to inform ')
            print('Lord British of your progress.')
            wait()

            print('\n')
        fi

        bye()

    case 'lava':
    case 'pits':
        print('"To be in danger from the lava! To stay far away!"')
        jump label_1027

    case 'moun':
        print('"To walk clockwise around the mountains from Hythloth to reach my ')
        print('father\'s @house."')
        jump label_1027

    case 'hous':
        print('"To find the house of Valkadesh my father through the pass east of the')
        print(' @Hall."')
        jump label_1027

    case 'hall':
    case 'know':
        if equals(partyHasObject(byte 76, byte 0), byte 1):
            print('"To find the Hall of Knowledge to the south of the city."')

        else:
            print('"To avoid the Hall! To talk to @Valkadesh first!"')
        fi

        jump label_1027

    case 'all':
    case 'ever':
        jump label_3213

    case 'no':
        if hasBit(byte 235, value 0):
            jump label_3117

        else:
            ('DPRINT', ('dword', 4206), ('byte', 3))
        fi

        jump label_1027

    case 'yes':
        if hasBit(byte 235, value 0):
            print('"Good! To know that he very much wanted to speak with you."')

        else:
            ('DPRINT', ('dword', 4206), ('byte', 3))
        fi

        jump label_1027

    case '*':
        ('DPRINT', ('dword', 4206), ('random', [('byte', 0), ('byte', 4)]))
        jump label_1027
    esac

label_2973:
    print('\n"To wish to meet Valkadesh?" ')

    choice('yn')

    case 'y':
        if partyHas(byte 164):
            jump label_3117

        else:
            print('"To go with you and @guide you there!"')
            wait()

            print('\n\n')
            jump label_3693
        fi

    case 'n':
        print('"Oh." The little gargoyle seems saddened.')
        jump label_1027
    esac

label_3117:
    print('"To wish @directions to the house of Valkadesh?" ')

    choice('yn')

    case 'y':
        jump label_3213
    esac

    print('\n"Then to not understand you."')
    jump label_1027

label_3213:
    print('"To go from the entrance to Hythloth westward, following the ')
    print('@mountains."')
    wait()

    print('\n\n"Then to turn north, at the @Hall of Knowledge."')
    wait()

    print('\n\n"To walk east along the mountains until you come to a narrow pass."')
    wait()

    print('\n\n"To find the @house of Valkadesh through the pass!"')
    wait()

    print('\n\n"To see it at 40 degrees south, 65 degrees east by the sextant."')
    wait()

    print('\n\n"But to take care! To avoid the @lava pits and the @Hall of ')
    print('Knowledge!"')
    wait()

    print('\n\n"To understand these @directions?" ')

    choice('yn')

    case 'y':
        print('"Good!"')
        jump label_1027

    case 'n':
        print('"To ask what was unclear?"')
        jump label_1027
    esac

label_3693:
    integer(value 7) = partyJoin(byte 235)

    if integer(value 7):
        jump label_3761
    fi

    print('The little gargoyle eagerly joins your group.')
    jump label_1027

label_3761:
    integer(value 8) = plus(integer(value 24), byte 1)
    integer(value 9) = byte 0

label_3778:
    if less(integer(value 8), byte 2):
        print('"To wish very much to join you. But to not have enough room in your ')
        print('party for another."')
        jump label_1027
    fi

    integer(value 6) = character(integer(value 8), byte 1)

    if or(or(equals(integer(value 6), byte 4), equals(integer(value 6), byte 3)), equals(integer(value 6), byte 2)):
        integer(value 8) = minus(integer(value 8), byte 1)
        jump label_3778

        if partyLeave(integer(value 6)):
            integer(value 8) = minus(integer(value 8), byte 1)
            jump label_3778
        fi
    fi

    ('SETNAME', ('integer', [('value', 6)]))
    string(value 9) = string(value 34)

    if isNearby(integer(value 6)):
        ('PORTRAIT', ('integer', [('value', 6)]))
        print('$9 speaks. "$G, I\'ll return to the surface and let everyone know of ')
        print('our progress."')
        wait()

        print('\n\n')
        integer(value 9) = byte 0
        jump label_4075

    else:
        integer(value 9) = byte 1
        jump label_4075
    fi

label_4075:
    ('PORTRAIT', ('byte', 235))

    if partyJoin(byte 235):
        print('"To not be able to join you right now. To ask again later, perhaps."\n')
        bye()

    else:
        print('The little gargoyle eagerly joins your group.')
        jump label_1027
    fi

strings_4206 = [
    '"To know nothing about that."',                         // 0
    '"To be young. To think you should ask someone older."', // 1
    '"To truly wish I could help you with that."',           // 2
    '"To not understand what you mean by $Z."',              // 3
    '"To not have enough experience to answer that."',       // 4
]
