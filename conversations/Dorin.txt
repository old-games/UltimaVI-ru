source('CONVERSE.B')
index(6)

id(105)
name({
    'english': 'Dorin',
    'russian': 'Дорин'
})

description:
    print({
        'english': 'a plump older woman with an apron about her waist.',
        'russian': 'полную пожилую женщину в фартуке, обёрнутом вокруг талии.'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

interaction:
    integer(value 5) = byte 0

    if hasBit(byte 235, value 0):
        print({
            'english': '"Oh, good, you\'ve come back. Perhaps for some @pie?" She smiles ',
            'russian': '"О, хорошо, что вы вернулись. Может, за @пирогом?" Она широко '
        })
        print({
            'english': 'broadly.',
            'russian': 'улыбается.'
        })

    else:
        print({
            'english': '"Hello," she says in a scratchy yet firm voice. "What can I do for ',
            'russian': '"Привет", - говорит она скрипучим, но твёрдым голосом. - "Что я могу для вас '
        })
        print({
            'english': 'ye?"',
            'russian': 'сделать?"'
        })
    fi

    print({
        'english': '\n',
        'russian': '\n'
    })

label_220:
    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"Dorin...and yours?"\n',
            'russian': '"Дорин... а ваше?"\n'
        })

        ask()
        print({
            'english': '\n"That\'s nice."\n',
            'russian': '\n"Как мило".\n'
        })
        setBit(byte 235, value 0)
        jump label_220

    case 'moth':
    case {'russian': 'мать'}:
        print({
            'english': '"She was a wonderful cook. Taught me all I know."\n',
            'russian': '"Она была замечательным поваром. Научила меня всему, что я знаю".\n'
        })
        jump label_220

    case 'dori':
    case {'russian': 'дори'}:
        print({
            'english': '"It was my @mother\'s name."\n',
            'russian': '"Так звали мою @мать".\n'
        })
        jump label_220

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"At the moment, only Meri and I are here, so I guess I must conduct ',
            'russian': '"В данный момент здесь только Мери и я, так что, полагаю, мне придётся '
        })
        print({
            'english': 'the @business."\n',
            'russian': 'вести @дела".\n'
        })
        jump label_220

    case 'shee':
    case {'russian': 'овцы'}:
    case 'busi':
    case {'russian': 'дела'}:
        print({
            'english': '"We are shepherds. We sell @wool."\n',
            'russian': '"Мы пастухи. Мы продаём @шерсть".\n'
        })
        jump label_220

    case 'timo':
    case {'russian': 'тимо'}:
        print({
            'english': '"He and I like to care for the less fortunate people in town. I like ',
            'russian': '"Нам с ним нравится заботиться о менее удачливых жителях города. Он мне '
        })
        print({
            'english': 'him alot."\n',
            'russian': 'очень нравится".\n'
        })
        jump label_220

    case 'shor':
    case {'russian': 'коро'}:
    case 'mort':
    case {'russian': 'морт'}:
        print({
            'english': '"Old Shorty, eh? He\'s actually quite a nice little man."\n',
            'russian': '"Старый коротышка, да? На самом деле он довольно милый маленький человек".\n'
        })
        jump label_220

    case 'mari':
    case {'russian': 'мари'}:
        print({
            'english': '"A bit caught up in herself, but likable."\n',
            'russian': '"Немного замкнута в себе, но симпатична".\n'
        })
        jump label_220

    case 'arbe':
    case {'russian': 'арбе'}:
        print({
            'english': '"Poor little guy. He\'s afraid of the dark, or so I\'m told."\n',
            'russian': '"Бедный малыш. Он боится темноты, по крайней мере, мне так сказали".\n'
        })
        jump label_220

    case 'gris':
    case {'russian': 'гриз'}:
        print({
            'english': '"He has the best flour in all the land."\n',
            'russian': '"У него самая лучшая мука во всей стране".\n'
        })
        jump label_220

    case 'meri':
    case {'russian': 'мери'}:
        print({
            'english': '"She\'s my little angel. If you see her around here, tell her I have ',
            'russian': '"Она мой маленький ангелочек. Если увидишь её здесь, скажи, что мне нужно '
        })
        print({
            'english': 'errands to run."\n',
            'russian': 'сбегать по делам".\n'
        })
        jump label_220

    case 'hend':
    case {'russian': 'хенд'}:
        print({
            'english': 'She winces at his name. "He is a hard worker, but sometimes his smell ',
            'russian': 'Она морщится, услышав его имя. "Он трудолюбивый, но иногда от него довольно '
        })
        print({
            'english': 'is quite strong."\n',
            'russian': 'сильно пахнет".\n'
        })
        jump label_220

    case 'uber':
    case {'russian': 'убер'}:
        print({
            'english': '"I like to go on walks with Uby. He has such an interesting life."\n',
            'russian': '"Мне нравится гулять с Уби. У него такая интересная жизнь".\n'
        })
        jump label_220

    case 'pie':
    case {'russian': 'пиро'}:
        if hasBit(byte 235, byte 7):
            clearBit(byte 235, byte 7)
            print({
                'english': '"Oh, dear, I\'m afraid you just missed the last piece."',
                'russian': '"Ох, дорогуша, боюсь, вы только что пропустили последний кусочек".'
            })
            wait()

            print({
                'english': '\n\n"But I\'m baking another, and I\'ll be sure to save you a slice!"\n',
                'russian': '\n\n"Но я испеку ещё один и обязательно оставлю вам кусочек!"\n'
            })
            jump label_220
        fi

        print({
            'english': '"Yes, I\'m baking the nicest shepherd\'s pie right now."\n*\n"It\'s not ',
            'russian': '"Да, прямо сейчас я пеку вкуснейший пастуший пирог".\n*\n"Он ещё не '
        })
        print({
            'english': 'done yet, but you can have a slice as soon as it is!"\n',
            'russian': 'готов, но вы сможете съесть кусочек, как только он будет готов!"\n'
        })
        setBit(byte 235, byte 7)
        jump label_220

    case 'buy':
    case {'russian': 'купи'}:
    case 'sell':
    case {'russian': 'прод'}:
    case 'wool':
    case {'russian': 'шерс'}:
        jump label_1542

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': 'She wipes her hand on her apron, and then waves it at you.\n',
            'russian': 'Она вытирает руку о фартук, а затем машет ей вам.\n'
        })
        bye()

    case '*':
        print({
            'english': '"Sorry, don\'t know about any $Z."\n',
            'russian': '"Извините, не знаю ни о каком $Z".\n'
        })
    esac

    jump label_220

label_1542:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 0
        jump label_1678
    fi

label_1562:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_1576:
    look(character(integer(value 0), byte 0))
    print({
        'english': '#2. $Y\n',
        'russian': '#2. $Y\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_1576
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"Кто из вас?" '
    })
    inputDigit(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_2001
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_1562
    fi

label_1678:
    print({
        'english': '"We charge 5 gold for a bale of wool. Would you like some?" ',
        'russian': '"Мы берём 5 золотых за тюк шерсти. Хотите немного?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(canCarry(character(integer(value 3), byte 0)), weight(byte 190, byte 1)):
            print({
                'english': '"You look pretty full to me."\n',
                'russian': '"По-моему, вы итак слишком много на себе несёте".\n'
            })
            jump label_220
        fi

        if greaterOrEquals(objectsCount(character(integer(value 3), byte 0), byte 88), byte 5):
            destroyItem(character(integer(value 3), byte 0), byte 88, byte 0, byte 5)
            createItem(character(integer(value 3), byte 0), byte 190, byte 0, byte 1)
            look(character(integer(value 3), byte 0))
            print({
                'english': '"Very good." After accepting $Y\'s gold, $N hands over the wool.',
                'russian': '"Очень хорошо". Приняв золото $Y, $N передаёт шерсть.'
            })
            wait()

            integer(value 5) = byte 1
            print({
                'english': '\n\n',
                'russian': '\n\n'
            })
            jump label_2001

        else:
            look(character(integer(value 3), byte 0))
            print({
                'english': '"I\'m sorry, but you don\'t seem to have enough money."\n',
                'russian': '"Мне жаль, но у вас, похоже, недостаточно денег".\n'
            })
            jump label_220
        fi

    case 'n':
    case {'russian': 'н'}:
        jump label_2001
    esac

label_2001:
    if integer(value 5):
        print({
            'english': '"It was a pleasure doing business with you."',
            'russian': '"Было приятно иметь с вами дело".'
        })
    fi

    print({
        'english': '\n',
        'russian': '\n'
    })
    jump label_220
