source('CONVERSE.A')
index(87)

id(87)
name({
    'english': 'Dezana',
    'russian': 'Дезана'
})

description:
    print({
        'english': 'a very large woman with a deliberate smile.',
        'russian': 'очень крупная женщина с нарочитой улыбкой.'
    })
    wait()

interaction:
    print({
        'english': '\n',
        'russian': '\n'
    })
    integer(value 0) = partyHasObject(word 339, byte 0)

    if notEquals(integer(value 0), word 32769):
        jump label_4188
    fi

    if hasBit(byte 235, value 0):
        print({
            'english': '"Dezana knows much. Have you returned for more @talk or are you in ',
            'russian': '"Дезана многое знает. Вы вернулись, чтобы продолжить беседу или вам что-то  '
        })
        print({
            'english': '@need?"',
            'russian': '@нужно?"'
        })

    else:
        print({
            'english': '"Mmm...yes?" She looks down at you, her eyes merely slits.',
            'russian': '"Ммм... да?" Она смотрит на вас сверху вниз, её глаза чуть прищуриваются.'
        })
        setBit(byte 235, value 0)
    fi

    wait()

label_227:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"@Dezana." She smiles like a cat preparing for a meal.',
            'russian': '"@Дезана". Она улыбается как кошка, готовящаяся к трапезе.'
        })
        jump label_227

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"I can @heal, @cure, and even @resurrect."',
            'russian': '"Я могу @лечить, @исцелять и даже @воскрешать".'
        })
        jump label_227

    case 'need':
    case {'russian': 'нужн'}:
        print({
            'english': '"Yes? What is thy need--@healing, @curing or @resurrection?"',
            'russian': '"Да? В чём ты нуждаешься -- в @лечении, @исцелении или @воскрешении?"'
        })
        jump label_227

    case 'heal':
    case {'russian': 'леч'}:
        jump label_2923

    case 'cure':
    case {'russian': 'исц'}:
        jump label_3535

    case 'resu':
    case {'russian': 'воск'}:
        integer(value 0) = partyHasObject(word 339, byte 0)

        if equals(integer(value 0), word 32769):
            print({
                'english': '"What? But you carry no dead body!"',
                'russian': '"Что? Но у вас нет никакого мёртвого тела!"'
            })
            jump label_227

        else:
            look(integer(value 0))
            jump label_4237
        fi

    case 'deza':
    case {'russian': 'деза'}:
        print({
            'english': '"That is correct. Now, are you here to @chat, or are you in @need?"',
            'russian': '"Это верно. Итак, вы здесь для того, чтобы @поболтать, или вам что-то @нужно?"'
        })
        jump label_227

    case 'talk':
    case {'russian': 'бес'}:
    case 'conv':
    case {'russian': 'разг'}:
    case 'chat':
    case {'russian': 'поб'}:
        print({
            'english': '"There are many words which travel about this small hamlet."',
            'russian': '"Об этой маленькой деревушке ходит много слухов".'
        })
        wait()

        print({
            'english': '\n\n"Many are intriguing, some are even dangerous. What words have you ',
            'russian': '\n\n"Многие из них интригуют, некоторые даже опасны. Что именно вы о ней '
        })
        print({
            'english': 'heard?"',
            'russian': 'слышали?"'
        })
        jump label_227

    case 'ghos':
    case {'russian': 'приз'}:
        print({
            'english': '"That is one worth speaking about. You see, many people travel the ',
            'russian': '"Об этом стоит поговорить. Видите ли, многие люди путешествуют по  '
        })
        print({
            'english': '@spirit world."',
            'russian': '@духовному миру".'
        })
        wait()

        print({
            'english': '\n\n"Some are lost souls, others have a purpose. @Quenton is not a lost ',
            'russian': '\n\n"Некоторые из них - потерянные души, у других есть цель. @Квентон - не потерянная '
        })
        print({
            'english': '@soul."',
            'russian': '@душа".'
        })
        jump label_227

    case 'trav':
    case {'russian': 'путе'}:
    case 'spir':
    case {'russian': 'дух'}:
    case 'worl':
    case {'russian': 'мир'}:
        print({
            'english': '"It is a mystical place between here and the hereafter. Quenton ',
            'russian': '"Это мистическое место между настоящим и потусторонним миром. Квентон '
        })
        print({
            'english': 'resides there."',
            'russian': 'проживает там".'
        })
        jump label_227

    case 'lost':
    case {'russian': 'пот'}:
    case 'soul':
    case {'russian': 'душ'}:
        print({
            'english': '"They spent their whole life without learning anything or growing ',
            'russian': '"Они провели всю свою жизнь, ничему не научившись и не развившись  '
        })
        print({
            'english': 'inside."',
            'russian': 'внутренне".'
        })
        wait()

        print({
            'english': '\n\n"They are as children left alone in a crib. Never learning, always ',
            'russian': '\n\n"Они как дети, которых оставили одних в кроватке. Никогда не учатся, всё '
        })
        print({
            'english': 'seeking."',
            'russian': 'рыщут".'
        })
        jump label_227

    case 'quen':
    case {'russian': 'квен'}:
        print({
            'english': '"He had attained much wisdom before he was forced from here."',
            'russian': '"Он обрёл большую мудрость, прежде чем был вынужден покинуть это место".'
        })
        wait()

        print({
            'english': '\n\n"If his ghost has been seen..."',
            'russian': '\n\n"Если кто-то видел его призрак..."'
        })
        wait()

        print({
            'english': '\n\n"And I believe he has..."',
            'russian': '\n\n"И я верю, что так оно и есть..."'
        })
        wait()

        print({
            'english': '\n\n"Then he must be attempting to communicate with us about some ',
            'russian': '\n\n"Тогда он, должно быть, пытается связаться с нами по поводу какого-то  '
        })
        print({
            'english': 'unfinished business."',
            'russian': 'незаконченного дела".'
        })
        wait()

        print({
            'english': '\n\n"Perhaps he knows who @killed him."',
            'russian': '\n\n"Возможно, он знает, кто @убил его".'
        })
        jump label_227

    case 'kill':
    case {'russian': 'уби'}:
    case 'comm':
    case {'russian': 'связ'}:
        print({
            'english': '"I know this much: if you wish to find out who murdered him, you won\'t',
            'russian': '"Я знаю только одно: если вы хотите узнать, кто его убил, вы не сможете'
        })
        print({
            'english': ' be able to ask his ghost."',
            'russian': ' спросить об этом его призрака".'
        })
        wait()

        print({
            'english': '\n\n"You see, the spirit world can not communicate with ours directly."',
            'russian': '\n\n"Видите ли, духовный мир не может напрямую взаимодействовать с нашим".'
        })
        wait()

        print({
            'english': '\n\n"Although his ghost can hear your questions, he\'ll respond by ',
            'russian': '\n\n"Хотя его призрак и может слышать ваши вопросы, но он будет отвечать, '
        })
        print({
            'english': '@manipulating the environment."',
            'russian': '@манипулируя окружающей средой".'
        })
        jump label_227

    case 'mani':
    case {'russian': 'мани'}:
    case 'envi':
    case {'russian': 'сред'}:
        print({
            'english': '"Yes, you know, make him demonstrate his answers by, say, shaking a ',
            'russian': '"Да, знаете, заставьте его показать свои ответы, скажем, встряхнув '
        })
        print({
            'english': 'branch."',
            'russian': 'ветку".'
        })
        jump label_227

    case 'garg':
    case {'russian': 'горг'}:
        print({
            'english': '"Those creatures are dangerous. I have heard that they can tear a man ',
            'russian': '"Эти существа опасны. Я слышала, что они могут разорвать человека '
        })
        print({
            'english': 'to pieces."',
            'russian': 'на куски".'
        })
        wait()

        print({
            'english': '\n\n"So why, then, did the gargoyles not attack @Stivius as well?"',
            'russian': '\n\n"Так почему же тогда горгульи не напали ещё и на @Стивиуса?"'
        })
        wait()

        print({
            'english': '\n\n"Certainly he would have tasted just as good."',
            'russian': '\n\n"Определённо, на вкус он был бы не хуже".'
        })
        jump label_227

    case 'tren':
    case {'russian': 'трен'}:
    case 'bell':
    case {'russian': 'белл'}:
        print({
            'english': '"He is a very stiff man. I believe he may be hiding something about ',
            'russian': '"Он очень жёсткий человек. Я полагаю, что он, возможно, скрывает что-то о  '
        })
        print({
            'english': 'his past."',
            'russian': 'своём прошлом".'
        })
        jump label_227

    case 'yorl':
    case {'russian': 'йорл'}:
        print({
            'english': '"A nice fellow, but a bit too simple for me."',
            'russian': '"Приятный парень, но для меня слишком простоват".'
        })
        jump label_227

    case 'mich':
    case {'russian': 'майк'}:
        print({
            'english': '"I know something about everyone in this village. However, this man is',
            'russian': '"Я знаю кое-что о каждом жителе этой деревни. Однако этот человек'
        })
        print({
            'english': ' unknown to me."',
            'russian': ' мне незнаком".'
        })
        wait()

        print({
            'english': '\n\n"He never talks about his past."',
            'russian': '\n\n"Он никогда не говорит о своём прошлом".'
        })
        jump label_227

    case 'gide':
    case {'russian': 'гиде'}:
        print({
            'english': '"He is a dear old man. Never has a mean thing to say of anyone."',
            'russian': '"Он милый старик. Никогда ни о ком не скажет ничего плохого".'
        })
        jump label_227

    case 'stiv':
    case {'russian': 'стив'}:
        print({
            'english': '"A quaint little man. He has strong feelings for me."',
            'russian': '"Странный маленький человечек. Он испытывает ко мне сильные чувства".'
        })
        wait()

        print({
            'english': '\n\n"I must admit, he has a cute way about him."',
            'russian': '\n\n"Я должна признать, что в нём есть что-то милое".'
        })
        jump label_227

    case 'marn':
    case {'russian': 'марн'}:
        print({
            'english': '"She has seen much pain in her life. More than even I can heal. I pity',
            'russian': '"Она видела много боли в своей жизни. Больше, чем даже я могу исцелить. Мне жаль'
        })
        print({
            'english': ' her."',
            'russian': ' её".'
        })
        jump label_227

    case 'hora':
    case {'russian': '{хора'}:
        print({
            'english': '"He was once a great man. Discovered many of the herbs I use in ',
            'russian': '"Когда-то он был великим человеком. Открыл многие травы, которые я использую в  '
        })
        print({
            'english': 'healing."',
            'russian': 'лечении".'
        })
        wait()

        print({
            'english': '\n\n"He discovered something else, however: that total knowledge can ',
            'russian': '\n\n"Однако он обнаружил кое-что ещё: полное знание может '
        })
        print({
            'english': 'corrupt totally."',
            'russian': 'испортить человека полностью".'
        })
        wait()

        print({
            'english': '\n\n"I don\'t know what drove him mad. And I don\'t want to know." She ',
            'russian': '\n\n"Я не знаю, что свело его с ума. И я не хочу знать". Она '
        })
        print({
            'english': 'shudders slightly.',
            'russian': 'слегка вздрагивает.'
        })
        jump label_227

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"Return when you need healing."\n',
            'russian': '"Возвращайся, когда тебе понадобится лечение".\n'
        })
        bye()

    case '*':
        print({
            'english': '"It is not my place to talk about that."',
            'russian': '"Не моё дело говорить об этом".'
        })
        jump label_227
    esac

label_2923:
    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump label_3006
    fi

    integer(value 3) = character(byte 0, byte 0)

    if isWounded(integer(value 3)):
        jump label_3285

    else:
        print({
            'english': '"You look fine to me."',
            'russian': '"По-моему, ты в порядке".'
        })
        jump label_3484
    fi

label_3006:
    if greater(integer(value 1), integer(value 23)):
        jump label_3116
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(isWounded(integer(value 3)), byte 0):
        jump label_3101
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_3101
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n',
        'russian': '#2) $Y\n'
    })
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

label_3101:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump label_3006

label_3116:
    if equals(integer(value 2), byte 0):
        print({
            'english': '"None of you look hurt!"',
            'russian': '"Никто из вас не выглядит раненым!"'
        })
        jump label_3484
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump label_3285
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n"Which of you?" ',
        'russian': '#2) $Y\n"Кто из вас?"'
    })
    inputDigit(integer(value 2))

    if equals(integer(value 2), byte 0):
        jump label_3484
    fi

    integer(value 1) = byte 0

label_3223:
    integer(value 3) = character(integer(value 1), byte 0)

    if isWounded(integer(value 3)):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump label_3285
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump label_3223
    fi

label_3285:
    look(integer(value 3))
    print({
        'english': '"I see thy injury, $Y."',
        'russian': '"Я вижу твою рану, $Y".'
    })
    wait()

    print({
        'english': '\n\n"It will cost you 30 gold, interested?" ',
        'russian': '\n\n"Это обойдётся тебе в 30 золотых. Согласен?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(objectsCount(integer(value 3), byte 88), byte 30):
            jump label_3441

        else:
            print({
                'english': '$N approaches $Y and binds the wounds.',
                'russian': '$N подходит к $Y и перевязывает раны.'
            })
            destroyItem(integer(value 3), byte 88, byte 0, byte 30)
            heal(integer(value 3))
            jump label_227
        fi

    case 'n':
    case {'russian': 'н'}:
label_3441:
        print({
            'english': '"You must pay before I can heal you."',
            'russian': '"Ты должен заплатить, прежде чем я смогу вылечить тебя".'
        })
        jump label_3484
    esac

label_3484:
    wait()

    print({
        'english': '\n\n"Is there something else I can do for you?"',
        'russian': '\n\n"Могу ли я ещё что-нибудь для вас сделать?"'
    })
    jump label_227

label_3535:
    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump label_3622
    fi

    integer(value 3) = character(byte 0, byte 0)

    if isPoisoned(integer(value 3)):
        jump label_3940

    else:
        print({
            'english': '"You don\'t look poisoned."',
            'russian': '"Ты не выглядишь отравленным".'
        })
        jump label_3484
    fi

label_3622:
    if greater(integer(value 1), integer(value 23)):
        jump label_3732
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(isPoisoned(integer(value 3)), byte 0):
        jump label_3717
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_3717
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n',
        'russian': '#2) $Y\n'
    })
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

label_3717:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump label_3622

label_3732:
    if equals(integer(value 2), byte 0):
        print({
            'english': '"Perhaps you have a hangover, \'cause none of you are poisoned."',
            'russian': '"Возможно, у вас похмелье, потому что никто из вас не отравлен".'
        })
        jump label_3484
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump label_3940
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n"Which of you?" ',
        'russian': '#2) $Y\n"Кто из вас?" '
    })
    inputDigit(integer(value 2))

    if equals(integer(value 2), byte 0):
        jump label_3484
    fi

    integer(value 1) = byte 0

label_3878:
    integer(value 3) = character(integer(value 1), byte 0)

    if isPoisoned(integer(value 3)):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump label_3940
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump label_3878
    fi

label_3940:
    look(integer(value 3))
    print({
        'english': '"You look poisoned to me." She nods at $Y.',
        'russian': '"По-моему ты выглядишь отравленным". Она кивает на $Y.'
    })
    wait()

    print({
        'english': '\n\n"It\'ll cost you 10 gold, interested?" ',
        'russian': '\n\n"Это обойдётся тебе в 10 золотых. Согласен?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(objectsCount(integer(value 3), byte 88), byte 10):
            jump label_4145

        else:
            print({
                'english': '$N grabs a vial and pours it down $Y\'s throat.',
                'russian': '$N хватает пузырёк и вливает его в глотку $Y.'
            })
            wait()

            print({
                'english': '\n\n$Y feels much better.',
                'russian': '\n\n$Y чувствует себя намного лучше.'
            })
            destroyItem(integer(value 3), byte 88, byte 0, byte 10)
            cure(integer(value 3))
            jump label_3484
        fi

    case 'n':
    case {'russian': 'н'}:
label_4145:
        print({
            'english': '"You must pay before I can heal you."',
            'russian': '"Ты должен заплатить, прежде чем я смогу начать тебя лечить".'
        })
        jump label_3484
    esac

label_4188:
    look(integer(value 0))
    print({
        'english': '"I see that $Y carries a departed friend."',
        'russian': '"Я вижу, ты везёшь с собой усопшего друга".'
    })
    wait()

    print({
        'english': '\n\n',
        'russian': '\n\n'
    })

label_4237:
    print({
        'english': '"Resurrection costs 400 gold, interested?" ',
        'russian': '"Воскрешение стоит 400 золотых. Согласен?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(objectsCount(integer(value 0), byte 88), word 400):
            jump label_4332

        else:
            jump label_4681
        fi

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"As you wish."',
            'russian': '"Как пожелаешь".'
        })
        jump label_227
    esac

label_4332:
    integer(value 1) = word 400
    integer(value 2) = byte 0
    integer(value 3) = byte 0
    integer(value 4) = byte 0

label_4361:
    if greater(integer(value 3), integer(value 23)):
        print({
            'english': '"You don\'t have enough gold."',
            'russian': '"У тебя недостаточно золота".'
        })
        wait()

        print({
            'english': '\n\n"You might think about a proper burial."',
            'russian': '\n\n"Вам стоило бы подумать о достойных похоронах".'
        })
        jump label_227
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)

    if less(integer(value 5), integer(value 1)):
        integer(value 1) = minus(integer(value 1), integer(value 5))
        integer(value 2) = plus(integer(value 2), integer(value 5))
        integer(value 3) = plus(integer(value 3), byte 1)
        jump label_4361

    else:
        print({
            'english': 'Your party takes up a collection for their fallen comrade.',
            'russian': 'Ваша группа собирает деньги на своего погибшего товарища.'
        })
        integer(value 1) = word 400
        integer(value 2) = byte 0
        integer(value 4) = integer(value 3)
        integer(value 3) = byte 0
        jump label_4595
    fi

label_4595:
    if equals(integer(value 3), integer(value 4)):
        destroyItem(character(integer(value 3), byte 0), byte 88, byte 0, integer(value 1))
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_4681
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)
    integer(value 1) = minus(integer(value 1), integer(value 5))
    destroyItem(character(integer(value 3), byte 0), byte 88, byte 0, integer(value 5))
    integer(value 3) = plus(integer(value 3), byte 1)
    jump label_4595

label_4681:
    print({
        'english': '$N lays hands upon the corpse...',
        'russian': '$N возлагает руки на труп...'
    })
    wait()

    print({
        'english': '\n\n"Doman..."',
        'russian': '\n\n"Доман..."'
    })
    wait()

    print({
        'english': '\n\n"thixus..."',
        'russian': '\n\n"тиксус..."'
    })
    wait()

    print({
        'english': '\n\n"anretu!"',
        'russian': '\n\n"анрету!"'
    })
    resurrect(integer(value 0))
    wait()

    print({
        'english': '\n\nAnd the dead live again!',
        'russian': '\n\nИ мертвец оживает снова!'
    })
    integer(value 0) = partyHasObject(word 339, byte 0)

    if notEquals(integer(value 0), word 32769):
        look(integer(value 0))
        wait()

        print({
            'english': '\n\n"I see that $Y carries another slain friend."',
            'russian': '\n\n"Я вижу, что $Y несёт ещё одного убитого друга".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_4237

    else:
        jump label_227
    fi
