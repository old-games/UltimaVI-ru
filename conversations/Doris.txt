source('CONVERSE.A')
index(74)

id(74)
name({
    'english': 'Doris',
    'russian': 'FIXME Doris'
})

description:
    print({
        'english': 'a stunningly beautiful young woman.',
        'russian': 'FIXME a stunningly beautiful young woman.'
    })

interaction:
    print({
        'english': '\nThe woman never looks up from the book she\'s reading, even when you ',
        'russian': 'FIXME \nThe woman never looks up from the book she\'s reading, even when you '
    })
    print({
        'english': 'speak to her.',
        'russian': 'FIXME speak to her.'
    })
    wait()

    print({
        'english': '\n\n"Yes, what do you want',
        'russian': 'FIXME \n\n"Yes, what do you want'
    })

    if hasBit(byte 235, value 0):
        print({
            'english': ' now?"',
            'russian': 'FIXME  now?"'
        })

    else:
        print({
            'english': '?"',
            'russian': 'FIXME ?"'
        })
        setBit(byte 235, value 0)
    fi

label_173:
    print({
        'english': '\n',
        'russian': 'FIXME \n'
    })

    ask()

    case {'english': 'name'}:
    case {'russian': 'FIXME name'}:
        print({
            'english': '"My name\'s Doris, but you can just call me \'@Hey @you.\'"',
            'russian': 'FIXME "My name\'s Doris, but you can just call me \'@Hey @you.\'"'
        })
        wait()

        print({
            'english': '\n\n"Everyone else does."',
            'russian': 'FIXME \n\n"Everyone else does."'
        })
        jump label_173

    case {'english': 'hey'}:
    case {'russian': 'FIXME hey'}:
    case {'english': 'you'}:
    case {'russian': 'FIXME you'}:
        print({
            'english': '"Typical," she mutters.',
            'russian': 'FIXME "Typical," she mutters.'
        })
        jump label_173

    case {'english': 'job'}:
    case {'russian': 'FIXME job'}:
        print({
            'english': '"I\'m in charge of the Tinker\'s Inn while my @father\'s away."',
            'russian': 'FIXME "I\'m in charge of the Tinker\'s Inn while my @father\'s away."'
        })
        wait()

        print({
            'english': '\n\n"If you have any complaint, no matter how trivial, please feel free ',
            'russian': 'FIXME \n\n"If you have any complaint, no matter how trivial, please feel free '
        })
        print({
            'english': 'to bother me."',
            'russian': 'FIXME to bother me."'
        })
        wait()

        print({
            'english': '\n\nIt doesn\'t really sound like she means what she said.',
            'russian': 'FIXME \n\nIt doesn\'t really sound like she means what she said.'
        })
        jump label_173

    case {'english': 'inn'}:
    case {'russian': 'FIXME inn'}:
    case {'english': 'rest'}:
    case {'russian': 'FIXME rest'}:
    case {'english': 'room'}:
    case {'russian': 'FIXME room'}:
        print({
            'english': '"Room and board\'s 5 gold per night per person, cash in advance."',
            'russian': 'FIXME "Room and board\'s 5 gold per night per person, cash in advance."'
        })
        wait()

        print({
            'english': '\n\n"Interested?" ',
            'russian': 'FIXME \n\n"Interested?" '
        })
        jump label_1168

    case {'english': 'beau'}:
    case {'russian': 'FIXME beau'}:
        print({
            'english': '"Yes, that\'s what they all say."',
            'russian': 'FIXME "Yes, that\'s what they all say."'
        })
        jump label_173

    case {'english': 'fath'}:
    case {'russian': 'FIXME fath'}:
        print({
            'english': '"My father called me back from the @Lycaeum so that he could go fight ',
            'russian': 'FIXME "My father called me back from the @Lycaeum so that he could go fight '
        })
        print({
            'english': 'the gargoyles."',
            'russian': 'FIXME the gargoyles."'
        })
        jump label_173

    case {'english': 'book'}:
    case {'russian': 'FIXME book'}:
    case {'english': 'lyca'}:
    case {'russian': 'FIXME lyca'}:
    case {'english': 'read'}:
    case {'russian': 'FIXME read'}:
        print({
            'english': '"Yes, I\'m learning the mystic arts from the great @Xiao."',
            'russian': 'FIXME "Yes, I\'m learning the mystic arts from the great @Xiao."'
        })
        wait()

        print({
            'english': '\n\n"Though I doubt you\'d know much about that sort of thing."',
            'russian': 'FIXME \n\n"Though I doubt you\'d know much about that sort of thing."'
        })
        jump label_173

    case {'english': 'xiao'}:
    case {'russian': 'FIXME xiao'}:
        print({
            'english': '"She is the wisest mage in all Britannia."',
            'russian': 'FIXME "She is the wisest mage in all Britannia."'
        })
        wait()

        print({
            'english': '\n\n"Only she can teach the spells of the greatest @power."',
            'russian': 'FIXME \n\n"Only she can teach the spells of the greatest @power."'
        })
        jump label_173

    case {'english': 'brit'}:
    case {'russian': 'FIXME brit'}:
    case {'english': 'grea'}:
    case {'russian': 'FIXME grea'}:
    case {'english': 'mage'}:
    case {'russian': 'FIXME mage'}:
    case {'english': 'powe'}:
    case {'russian': 'FIXME powe'}:
    case {'english': 'spel'}:
    case {'russian': 'FIXME spel'}:
    case {'english': 'wise'}:
    case {'russian': 'FIXME wise'}:
        print({
            'english': '"Mmm-hmm, that\'s right."',
            'russian': 'FIXME "Mmm-hmm, that\'s right."'
        })
        jump label_173

    case {'english': 'bye'}:
    case {'russian': 'FIXME bye'}:
        print({
            'english': '"Mmm-hmmm," she mutters as you leave.\n',
            'russian': 'FIXME "Mmm-hmmm," she mutters as you leave.\n'
        })
        bye()

    case '*':
        if random(byte 0, byte 1):
            print({
                'english': '"Oh really?"',
                'russian': 'FIXME "Oh really?"'
            })

        else:
            print({
                'english': '"Hmm, fascinating," she yawns.',
                'russian': 'FIXME "Hmm, fascinating," she yawns.'
            })
        fi

        jump label_173
    esac

label_1168:
    choice({
        'english': 'yn',
        'russian': 'FIXME yn'
    })

    case {'english': 'y'}:
    case {'russian': 'FIXME y'}:
        if integer(value 23):
            integer(value 1) = multiply(plus(integer(value 23), byte 1), byte 5)
            jump label_1310

        else:
            jump label_1226
        fi

    case {'english': 'n'}:
    case {'russian': 'FIXME n'}:
        print({
            'english': '"What a pity."',
            'russian': 'FIXME "What a pity."'
        })
        jump label_173
    esac

label_1226:
    if less(objectsCount(character(byte 0, byte 0), byte 88), byte 5):
        print({
            'english': '"No pay, no stay. 5 gold, cash in advance."',
            'russian': 'FIXME "No pay, no stay. 5 gold, cash in advance."'
        })
        jump label_173

    else:
        destroyItem(character(byte 0, byte 0), byte 88, byte 0, byte 5)
        jump label_1647
    fi

label_1310:
    integer(value 2) = byte 0
    integer(value 3) = byte 0
    integer(value 4) = byte 0

label_1331:
    if greater(integer(value 3), integer(value 23)):
        print({
            'english': '"No pay, no stay."',
            'russian': 'FIXME "No pay, no stay."'
        })
        wait()

        print({
            'english': '\n\n"#1 gold for the lot of you, cash in advance."',
            'russian': 'FIXME \n\n"#1 gold for the lot of you, cash in advance."'
        })
        jump label_173
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)

    if less(integer(value 5), integer(value 1)):
        integer(value 1) = minus(integer(value 1), integer(value 5))
        integer(value 2) = plus(integer(value 2), integer(value 5))
        integer(value 3) = plus(integer(value 3), byte 1)
        jump label_1331

    else:
        print({
            'english': 'Your party takes up a collection to pay for the rooms.',
            'russian': 'FIXME Your party takes up a collection to pay for the rooms.'
        })
        integer(value 1) = multiply(plus(integer(value 23), byte 1), byte 5)
        integer(value 2) = byte 0
        integer(value 4) = integer(value 3)
        integer(value 3) = byte 0
        jump label_1561
    fi

label_1561:
    if equals(integer(value 3), integer(value 4)):
        destroyItem(character(integer(value 3), byte 0), byte 88, byte 0, integer(value 1))
        wait()

        print({
            'english': '\n\n',
            'russian': 'FIXME \n\n'
        })
        jump label_1647
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)
    integer(value 1) = minus(integer(value 1), integer(value 5))
    destroyItem(character(integer(value 3), byte 0), byte 88, byte 0, integer(value 5))
    integer(value 3) = plus(integer(value 3), byte 1)
    jump label_1561

label_1647:
    print({
        'english': 'Putting all thoughts of the rude innkeeper out of your mind, you drift',
        'russian': 'FIXME Putting all thoughts of the rude innkeeper out of your mind, you drift'
    })
    print({
        'english': ' off into a pleasant sleep.\n',
        'russian': 'FIXME  off into a pleasant sleep.\n'
    })
    sleep()

    wait()

    print({
        'english': '\nThe next morning, Doris sullenly serves you breakfast and then ',
        'russian': 'FIXME \nThe next morning, Doris sullenly serves you breakfast and then '
    })
    print({
        'english': 'returns to her studies.',
        'russian': 'FIXME returns to her studies.'
    })
    jump label_173
