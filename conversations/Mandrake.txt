source('CONVERSE.B')
index(81)

id(180)
name({
    'english': 'Mandrake',
    'russian': 'Мандрейк'
})

description:
    print({
        'english': 'a charming fellow with a peacock feather in his cap.',
        'russian': 'очаровательного парня с павлиньим пером на шляпе.'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

interaction:
    if hasBit(byte 235, value 0):
        jump label_389
    fi

    print({
        'english': '"Welcome, welcome! \'Tis always a pleasure to see a new face."',
        'russian': '"Добро пожаловать, добро пожаловать! Всегда приятно увидеть новое лицо".'
    })
    wait()

    print({
        'english': '\n\n"My name is Mandrake. And what may I call thee?"\n',
        'russian': '\n\n"Меня зовут Мандрейк. А как я могу тебя называть?"\n'
    })

    ask()
    setBit(byte 235, value 0)
    print({
        'english': '\n',
        'russian': '\n'
    })

    if integer(value 16):
        print({
            'english': '"A pleasure, to be sure, $G. I hope I\'ll be seeing a lot more of you."',
            'russian': '"Приятно познакомиться, $G. Надеюсь, мы будем часто видеться".'
        })
        print({
            'english': ' He gives you a sly wink.',
            'russian': ' Он лукаво подмигивает вам.'
        })

    else:
        print({
            'english': '"Well met, sirrah!"',
            'russian': '"Приятно познакомиться, сэр!"'
        })
        wait()

        print({
            'english': '\n\n"You look like the sort who knows how to enjoy a good @story."',
            'russian': '\n\n"Вы похожи на человека, который умеет получать удовольствие от хорошей @истории".'
        })
    fi

    jump label_525

label_389:
    print({
        'english': '"$P! It\'s been too long. What brings you to this part of the realm?"\n',
        'russian': '"$P! Давненько не виделись! Что привело вас в эту часть королевства?"\n'
    })

    ask()
    print({
        'english': '\n"Well, never mind that for the moment. Let me sing thee a @song!"',
        'russian': '\n"Ладно, не бери пока в голову. Позволь мне спеть тебе @песню!"'
    })

label_525:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"Mandrake, my friend, Mandrake. Like the @root, but taller, handsomer,',
            'russian': '"Мандрейк, друг мой, Мандрейк. Как @мандрагора, но выше, красивее'
        })
        print({
            'english': ' and @louder."',
            'russian': ' и @громче".'
        })
        jump label_525

    case 'root':
    case {'russian': 'манд'}:
        print({
            'english': '"It grows in swamps, but I\'m found mostly in @taverns."',
            'russian': '"Она растёт на болотах, но меня можно найти в основном в @тавернах".'
        })
        jump label_525

    case 'tall':
    case {'russian': 'выше'}:
    case 'hand':
    case {'russian': 'крас'}:
    case 'loud':
    case {'russian': 'гром'}:
        print({
            'english': '"So I\'ve heard."',
            'russian': '"Я так слышал".'
        })
        jump label_525

    case 'tave':
    case {'russian': 'таве'}:
        print({
            'english': '"I visit them all."',
            'russian': '"Я посещаю их все".'
        })
        wait()

        print({
            'english': '\n\n"The Fallen @Virgin and the Sword and @Keg are rowdy and rough."',
            'russian': '\n\n"\'Падшая @девственница\', \'Меч и @бочонок\' - шумные и неотёсанные".'
        })
        wait()

        print({
            'english': '\n"The Blue @Bottle serves Frasier\'s @Folly - the finest ale in all ',
            'russian': '\n"В \'Синей @бутылке\' подают \'@Безумие Фрейзера\' - лучший эль во всей '
        })
        print({
            'english': 'Britannia."',
            'russian': 'Британии".'
        })
        wait()

        print({
            'english': '\n\n"But the Cat\'s @Lair is still my favorite."',
            'russian': '\n\n"Но \'Кошачье @логово\' по-прежнему остается моим любимым".'
        })
        jump label_525

    case 'fras':
    case {'russian': 'фрей'}:
    case 'foll':
    case {'russian': 'безу'}:
        print({
            'english': '"You should try some! \'Twill do thee a world of good."',
            'russian': '"Вам стоит попробовать! Это пойдет тебе на пользу".'
        })
        jump label_525

    case 'fall':
    case {'russian': 'падш'}:
    case 'virg':
    case {'russian': 'девс'}:
        print({
            'english': '"\'Tis in Buccaneer\'s @Den - no place for the timid."',
            'russian': '"Она находится в Пиратском @логове - место не для робких".'
        })
        jump label_525

    case 'bucc':
    case {'russian': 'пира'}:
    case 'den':
    case {'russian': 'лого'}:
        print({
            'english': '"If thou knowest not where it is, I\'ll not be the one to say."',
            'russian': '"Если ты не знаешь, где это, я не буду тем, кто скажет".'
        })
        jump label_525

    case 'swor':
    case {'russian': 'меч'}:
    case 'keg':
    case {'russian': 'бочо'}:
        print({
            'english': '"Over in @Jhelom, it is. They always love a good brawl."',
            'russian': '"Она находится в @Джеломе. Они всегда любят хорошую драку".'
        })
        jump label_525

    case 'braw':
    case {'russian': 'драк'}:
    case 'jhel':
    case {'russian': 'джел'}:
        print({
            'english': '"Lots of warriors there."',
            'russian': '"Там много воинов".'
        })
        wait()

        print({
            'english': '\n\n"They fight just about every night, but they don\'t mean anything by ',
            'russian': '\n\n"Они дерутся почти каждую ночь, но не '
        })
        print({
            'english': 'it. \'Tis all in fun."',
            'russian': 'специально. Это всё ради забавы".'
        })
        jump label_525

    case 'blue':
    case {'russian': 'сине'}:
    case 'bott':
    case {'russian': 'буты'}:
        print({
            'english': '"\'Tis in @Moonglow."',
            'russian': '"Она находится в @Мунглоу".'
        })
        wait()

        print({
            'english': '\n\n"@Derydlus often drinks there - the man can put away more ale than ',
            'russian': '\n\n"@Деридлус часто там выпивает - этот человек может выпить больше эля, чем '
        })
        print({
            'english': 'any other I\'ve met."',
            'russian': 'кто-либо другой из тех, кого я встречал".'
        })
        wait()

        print({
            'english': '\n\n"Many\'s the time he\'s drunk me under the table."',
            'russian': '\n\n"Он меня частенько перепивает и загоняет под стол".'
        })
        jump label_525

    case 'moon':
    case {'russian': 'мунг'}:
        print({
            'english': '"Too honest a town to be much fun, but some fine people live there."',
            'russian': '"Слишком честный город, чтобы быть весёлым, но там живут замечательные люди".'
        })
        wait()

        print({
            'english': '\n\n"You should have @Penumbra tell your fortune sometime."',
            'russian': '\n\n"Вам стоило бы как-нибудь попросить @Пенумбру погадать вам".'
        })
        jump label_525

    case 'dery':
    case {'russian': 'дери'}:
        print({
            'english': '"Give him my regards if you see him."',
            'russian': '"Передайте ему от меня привет, если увидите".'
        })
        jump label_525

    case 'penu':
    case {'russian': 'пену'}:
        print({
            'english': '"I hear she has strange @powers."',
            'russian': '"Я слышал, она обладает странными @способностями".'
        })
        jump label_525

    case 'stra':
    case {'russian': 'стра'}:
    case 'powe':
    case {'russian': 'спос'}:
        print({
            'english': '"Yes, the gift of @prophecy."',
            'russian': '"Да, даром @пророчества".'
        })
        jump label_525

    case 'gift':
    case {'russian': 'даро'}:
    case 'prop':
    case {'russian': 'прор'}:
        print({
            'english': '"So I hear."',
            'russian': '"Я так слышал".'
        })
        jump label_525

    case 'cat':
    case {'russian': 'коша'}:
    case 'lair':
    case {'russian': 'лого'}:
        print({
            'english': '"A wonderful place! Dr. Cat gives me free drinks just for singing."',
            'russian': '"Чудесное место! Доктор Кот угощает меня бесплатными напитками только за то, что я пою".'
        })
        wait()

        print({
            'english': '\n\n"He loves games of all kinds too. Mention my name to him and he\'ll ',
            'russian': '\n\n"Он также любит всевозможные игры. Назови ему моё имя, и он '
        })
        print({
            'english': 'be sure to treat thee well."',
            'russian': 'обязательно будет хорошо к тебе относиться".'
        })
        jump label_525

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"I travel all over to spread important @news throughout the realm - ',
            'russian': '"Я путешествую повсюду, чтобы распространять важные @новости по всему королевству, '
        })
        print({
            'english': 'and @tales and @songs as well."',
            'russian': 'а также рассказывать @байки и петь @песни".'
        })
        wait()

        print({
            'english': '\n\n"If you have time enough, I\'ll favor you with all three."',
            'russian': '\n\n"Если у вас есть достаточно времени, я могу поделиться с вами всеми тремя".'
        })
        jump label_525

    case 'trav':
    case {'russian': 'путе'}:
    case 'impo':
    case {'russian': 'важн'}:
    case 'news':
    case {'russian': 'ново'}:
        print({
            'english': '"My travels were interrupted recently in a most fearsome manner."',
            'russian': '"Недавно мои путешествия были прерваны самым ужасным образом".'
        })
        wait()

        print({
            'english': '\n\n"I was captured by the @gargoyles, and taken down to the other side ',
            'russian': '\n\n"Я был схвачен @горгульями и перенесён на другой конец '
        })
        print({
            'english': 'of the world, where they held me prisoner."',
            'russian': 'света, где они держали меня в плену".'
        })
        wait()

        print({
            'english': '\n\n"But such was my good fortune that one of them helped me to escape."',
            'russian': '\n\n"Но мне очень повезло, что одна из них помогла мне сбежать".'
        })
        wait()

        print({
            'english': '\n\n"He spoke but little of our tongue, but I believe he said his name ',
            'russian': '\n\n"Он почти не говорил на нашем языке, но, по-моему, он сказал, что его '
        })
        print({
            'english': 'was \'Beh Lem.\'"',
            'russian': 'зовут \'Бе Лем\'".'
        })
        jump label_525

    case 'garg':
    case {'russian': 'горг'}:
        print({
            'english': '"I\'ve seen their handiwork many a time in my travels."',
            'russian': '"Я много раз видел следы их деятельности во время своих путешествий".'
        })
        wait()

        print({
            'english': '\n\n"I believe they have taken over all of the shrines of the eight ',
            'russian': '\n\n"Я уверен, что они захватили все святилища восьми '
        })
        print({
            'english': '@virtues."',
            'russian': '@добродетелей".'
        })
        jump label_525

    case 'eigh':
    case {'russian': 'вось'}:
    case 'virt':
    case {'russian': 'добр'}:
        print({
            'english': '"Oh, you know: honesty, compassion, valour, justice, sacrifice, honor,',
            'russian': '"О, ну ты знаешь: честность, сострадание, доблесть, справедливость, жертвенность, честь,'
        })
        print({
            'english': ' spirituality, and humility."',
            'russian': ' духовность и скромность".'
        })
        wait()

        print({
            'english': '\n\n"That\'s what you get for choosing such @stuffy principles as a ',
            'russian': '\n\n"Вот что случается, когда выбираешь такие @чопорные принципы в качестве '
        })
        print({
            'english': 'basis."',
            'russian': 'основы".'
        })
        jump label_525

    case 'stuf':
    case {'russian': 'чопо'}:
    case 'prin':
    case {'russian': 'прин'}:
        print({
            'english': '"Truth, love and courage... hah!"',
            'russian': '"Истина, любовь и мужество... ха!"'
        })
        wait()

        print({
            'english': '\n\n"If it had been up to me, I\'d have chosen wine, women and song ',
            'russian': '\n\n"Если бы это зависело от меня, я бы предпочёл вино, женщин и '
        })
        print({
            'english': 'instead."',
            'russian': 'песни".'
        })
        wait()

        print({
            'english': '\n\n"Think of the virtues those would @lead to!"',
            'russian': '\n\n"Подумайте, к каким добродетелям это @привело бы!"'
        })
        jump label_525

    case 'wine':
    case {'russian': 'вино'}:
    case 'wome':
    case {'russian': 'женщ'}:
    case 'lead':
    case {'russian': 'прив'}:
    case 'thin':
    case {'russian': 'поду'}:
        print({
            'english': '"I\'ve thought it over..."',
            'russian': '"Я всё продумал..."'
        })
        wait()

        print({
            'english': '\n\n"The principles of wine, women and song would lead to the eight ',
            'russian': '\n\n"Принципы вина, женщин и песни привели бы к восьми '
        })
        print({
            'english': 'virtues of',
            'russian': 'добродетелям:'
        })
        wait()

        print({
            'english': '\ndrunkenness, sensuality, harmony, lust, laziness, dance, indulgence, ',
            'russian': '\nпьянству, чувственности, гармонии, похоти, лени, танцу, наслаждению '
        })
        print({
            'english': 'and happiness."',
            'russian': 'и счастью".'
        })
        wait()

        print({
            'english': '\n\n"Now there would be the foundation for a fine world to live in!"',
            'russian': '\n\n"Вот это был бы фундамент для прекрасного мира, в котором можно было бы жить!"'
        })
        jump label_525

    case 'sing':
    case {'russian': 'спет'}:
    case 'song':
    case {'russian': 'песн'}:
        jump label_3743

    case 'tale':
    case {'russian': 'байк'}:
    case 'stor':
    case {'russian': 'исто'}:
        jump label_4447

    case 'bye':
    case {'russian': 'пока'}:
        if equals(integer(value 16), byte 1):
            print({
                'english': '"Leaving so soon, $G? And I was enjoying your company so." He bows and',
                'russian': '"Так скоро уходишь, $G? А я так наслаждался твоим обществом". Он кланяется и'
            })
            print({
                'english': ' kisses your hand.',
                'russian': ' целует вам руку.'
            })

        else:
            print({
                'english': '"Well, $P, I\'m glad you stopped by to chat with me. We must do it ',
                'russian': '"Что ж, $P, я рад, что вы зашли поболтать со мной. Мы обязательно должны как-нибудь '
            })
            print({
                'english': 'again sometime."',
                'russian': 'повторить это".'
            })
        fi

        wait()

        print({
            'english': '\n\n"I\'ll be glad to play another song for you when next we meet."\n',
            'russian': '\n\n"Я буду рад сыграть для вас ещё одну песню, когда мы встретимся в следующий раз".\n'
        })
        bye()

    case '*':
        if random(byte 0, byte 1):
            print({
                'english': '"I\'ll tell you of that later, perhaps."',
                'russian': '"Возможно, я расскажу вам об этом позже".'
            })

        else:
            print({
                'english': '"Oh, why bother with such a boring subject? How about a @song ',
                'russian': '"О, зачем затрагивать такую скучную тему? Как насчет того, чтобы вместо этого спеть '
            })
            print({
                'english': 'instead?"',
                'russian': '@песню?"'
            })
        fi
    esac

    jump label_525

label_3743:
    print({
        'english': '"I sing better if I keep my belly full, and my wineskin as well."',
        'russian': '"Я пою лучше, когда у меня полон живот, как и мой бурдюк для вина".'
    })
    wait()

    print({
        'english': '\n\n"Would you care to donate a coin or two?" ',
        'russian': '\n\n"Не могли бы вы пожертвовать монетку-другую?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'n':
    case {'russian': 'н'}:
label_3859:
        print({
            'english': '"As you wish."',
            'russian': '"Как пожелаете".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_4016

    case 'y':
    case {'russian': 'д'}:
label_3884:
        print({
            'english': 'How much do you give him? ',
            'russian': 'Сколько вы ему дадите? '
        })
        inputInteger(integer(value 0))

        if greater(integer(value 0), objectsCount(byte 1, byte 88)):
            print({
                'english': 'You don\'t have that much.\n',
                'russian': 'У вас нет такой суммы.\n'
            })
            jump label_3884
        fi

        if equals(integer(value 0), byte 0):
            jump label_3859
        fi

        destroyItem(byte 1, byte 88, byte 0, integer(value 0))
        createItem(byte 235, byte 88, byte 0, integer(value 0))
        print({
            'english': '"Thank you kindly."\n\n',
            'russian': '"Большое вам спасибо".\n\n'
        })
    esac

label_4016:
    print({
        'english': '"Ok, here we go!"',
        'russian': '"Хорошо, начинаем!"'
    })
    wait()

    print({
        'english': '\n\n"The dragon is a scaly sort',
        'russian': '\n\n"Дракон чашуйками покрыт,'
    })
    wait()

    print({
        'english': '\nWho spouts flame when he sneezes.',
        'russian': '\nИ чихом он пламя своё раздувает.'
    })
    wait()

    print({
        'english': '\nMany a bold knight has he fought,',
        'russian': '\nЛюбого рыцаря он сразит,'
    })
    wait()

    print({
        'english': '\nFor he goes where e\'er he pleases."',
        'russian': '\nИ полетит, куда нужным считает".'
    })
    wait()

    print({
        'english': '\n\n"Mister Porcupine\'s naught but spines,',
        'russian': '\n\n"Мистер ёж - ничто без острых шипов,'
    })
    wait()

    print({
        'english': '\nTo the dismay of him and his missus.',
        'russian': '\nК несчастью его и его милой хозяйки.'
    })
    wait()

    print({
        'english': '\nFor that for which he truly pines',
        'russian': '\nВедь всё, что на самом-то деле он хочет,'
    })
    wait()

    print({
        'english': '\nIs one of her sweet kisses."',
        'russian': '\nПолучить лишь один поцелуй её сладкий".'
    })
    wait()

    print({
        'english': '\n\n"A gypsy girl and a butterfly',
        'russian': '\n\n"Как-то раз девчонка из цыган,'
    })
    wait()

    print({
        'english': '\nWere out in the woods at play',
        'russian': '\nС бабочкой в лесу одна играла.'
    })
    wait()

    print({
        'english': '\nAnd when I saw them I said \'Oh my!',
        'russian': '\n\'Этот чудный день нам Богом дан!\''
    })
    wait()

    print({
        'english': '\nWhat a perfect sunny day!\'"',
        'russian': '\nВот что мне она тогда сказала!"'
    })
    jump label_525

label_4447:
    print({
        'english': '"Perhaps my stories would be worth a few coins?" ',
        'russian': '"Возможно, мои рассказы стоят нескольких монет?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"As you wish."',
            'russian': '"Как пожелаете".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_4655
    esac

label_4525:
    print({
        'english': 'How much do you give him? ',
        'russian': 'Сколько вы ему дадите? '
    })
    inputInteger(integer(value 0))

    if greater(integer(value 0), objectsCount(byte 1, byte 88)):
        print({
            'english': 'You don\'t have that much.\n\n',
            'russian': 'У вас нет такой суммы.\n\n'
        })
        jump label_4525
    fi

    if equals(integer(value 0), byte 0):
        jump label_3859
    fi

    destroyItem(byte 1, byte 88, byte 0, integer(value 0))
    createItem(byte 235, byte 88, byte 0, integer(value 0))
    print({
        'english': '"You\'re too kind."\n',
        'russian': '"Вы слишком добры".\n'
    })

label_4655:
    print({
        'english': 'Mandrake tells you tales for quite a while, yet listening to them you ',
        'russian': 'Мандрейк довольно долго рассказывает вас байки, но, слушая их, вы '
    })
    print({
        'english': 'lose track of time.',
        'russian': 'теряете счёт времени.'
    })
    wait()

    print({
        'english': '\n\nHe tells you of ships sailing off the edge of the world, of ',
        'russian': '\n\nОн рассказывает вам о кораблях, отплывающих от края света, о '
    })
    print({
        'english': 'earthquakes, and mad wizards, and fierce battles.',
        'russian': 'землетрясениях, безумных волшебниках и жестоких битвах.'
    })
    wait()

    print({
        'english': '\n\nHe speaks of spells that halt the flow of time, a man who found a ',
        'russian': '\n\nОн рассказывает о заклинаниях, которые останавливают течение времени, о человеке, который нашёл '
    })
    print({
        'english': 'way to fly, and the strange secret of the wisps.',
        'russian': 'способ летать, и о странной тайне огоньков.'
    })
    wait()

    print({
        'english': '\n\nHe tells you that there are two bands of gypsies who travel the ',
        'russian': '\n\nОн рассказывает вам, что по Королевскому тракту путешествуют две '
    })
    print({
        'english': 'King\'s Way, who are often mistaken for each other.',
        'russian': 'цыганские банды, которые часто путают.'
    })
    wait()

    print({
        'english': '\n\nHe speaks of the pirate ship Empire, which was much dreaded in its ',
        'russian': '\n\nОн рассказывает об Империи пиратских кораблей, которой в своё время '
    })
    print({
        'english': 'day, and of the giant ants that can be found in the Dry Land.',
        'russian': 'очень боялись, и о гигантских муравьях, которых можно встретить в Пустыне.'
    })
    wait()

    print({
        'english': '\n\nYour head is filled with wondrous visions.',
        'russian': '\n\nВаша голова забита чудесными видениями.'
    })
    wait()

    print({
        'english': '\nBut finally ',
        'russian': '\nНо в конце концов, '
    })

    if partyHas(byte 2):
        print({
            'english': 'he notices that Dupre has begun to doze off, and decides to bring his ',
            'russian': 'он замечает, что Дюпре начал дремать, и решает закончить '
        })
        print({
            'english': 'tales to an end.',
            'russian': 'свои рассказы.'
        })

    else:
        print({
            'english': 'his tales come to an end.',
            'russian': 'его рассказам приходит конец.'
        })
    fi

    jump label_525
