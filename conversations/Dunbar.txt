source('CONVERSE.A')
index(96)

id(96)
name({
    'english': 'Dunbar',
    'russian': 'Данбар'
})

description:
    print({
        'english': 'a plump, jovial fellow chewing on a leg of lamb.',
        'russian': 'пухлого, жизнерадостного парня, жующего баранью ногу.'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

interaction:
    integer(value 5) = byte 0
    print({
        'english': '"Welcome to the Humble Palate."',
        'russian': '"Добро пожаловать в \'Скромный вкус\'".'
    })
    jump label_136

label_103:
    print({
        'english': '"Anything else I can do for you?"',
        'russian': '"Могу я что-нибудь ещё для вас сделать?"'
    })

label_136:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"My name is Dunbar," he says between bites of mutton.',
            'russian': '"Меня зовут Данбар", - говорит он, откусывая кусок баранины.'
        })
        setBit(byte 235, value 0)
        jump label_136

    case 'buy':
    case {'russian': 'купи'}:
        print({
            'english': '"Which, @fish, @ale, @mead, @wine, or @mutton?"',
            'russian': '"Что хотите, @рыбу, @эль, @медовуху, @вино или @баранину?"'
        })
        jump label_136

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"I sell @fish, @ale, @mead, @wine, and @mutton."',
            'russian': '"Я продаю @рыбу, @эль, @медовуху, @вино и @баранину".'
        })
        jump label_136

    case 'fish':
    case {'russian': 'рыбу'}:
        jump label_1367

    case 'mead':
    case {'russian': 'медо'}:
        integer(value 4) = byte 0
        jump label_878

    case 'ale':
    case {'russian': 'эль'}:
        integer(value 4) = byte 1
        jump label_878

    case 'wine':
    case {'russian': 'вино'}:
        integer(value 4) = byte 2
        jump label_878

    case 'rati':
    case {'russian': 'пайк'}:
    case 'mutt':
    case {'russian': 'бара'}:
        jump label_1870

    case 'humi':
    case {'russian': 'скро'}:
    case 'humb':
    case {'russian': 'крот'}:
        print({
            'english': '"Serving others it the humblest occupation I could imagine. That\'s why',
            'russian': '"Служение другим - это самое кроткое занятие, которое я только мог себе представить. Вот почему'
        })
        print({
            'english': ' I opened this place."',
            'russian': ' я открыл это заведение".'
        })
        wait()

        print({
            'english': '\n\nHe pauses to wipe his mouth with the back of his hand.',
            'russian': '\n\nОн делает паузу, чтобы вытереть рот тыльной стороной ладони.'
        })
        jump label_136

    case 'cono':
    case {'russian': 'коно'}:
        print({
            'english': '"I hear he used to be the head of some important @guild."',
            'russian': '"Я слышал, что раньше он был главой какой-то важной @гильдии".'
        })
        jump label_136

    case 'impo':
    case {'russian': 'важн'}:
    case 'head':
    case {'russian': 'глав'}:
    case 'guil':
    case {'russian': 'гиль'}:
        print({
            'english': '"I don\'t know anything about it, but maybe it explains that strange ',
            'russian': '"Я ничего об этом не знаю, но, возможно, это объясняет то странное '
        })
        print({
            'english': '@glow you can see over by his house at night."',
            'russian': '@свечение, которое вы видите возле его дома по ночам".'
        })
        jump label_136

    case 'expl':
    case {'russian': 'объя'}:
    case 'stra':
    case {'russian': 'стра'}:
    case 'glow':
    case {'russian': 'свеч'}:
        print({
            'english': '"Go see for yourself."',
            'russian': '"Идите и посмотрите сами".'
        })
        jump label_136

    case 'no':
    case {'russian': 'нет'}:
    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"See you later."\n',
            'russian': '"Увидимся позже".\n'
        })
        bye()

    case '*':
        print({
            'english': '"I can\'t help you with that."',
            'russian': '"Я не могу вам с этим помочь".'
        })
    esac

    jump label_136

label_878:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 1
        jump label_1024
    fi

label_898:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_912:
    look(character(integer(value 0), byte 0))
    print({
        'english': '#2. $Y\n',
        'russian': '#2. $Y\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_912
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"Кому из вас?" '
    })
    inputDigit(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_1327
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_898
    fi

    integer(value 3) = character(integer(value 3), byte 0)

label_1024:
    integer(value 1) = data(integers_2580, integer(value 4))
    print({
        'english': '"For that I charge a modest #1 gold. Want some?" ',
        'russian': '"За это я беру скромную цену в #1 золота. Берёте?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        jump label_1113

    case 'n':
    case {'russian': 'н'}:
        integer(value 5) = byte 0
        jump label_1327
    esac

label_1113:
    if less(objectsCount(integer(value 3), byte 88), integer(value 1)):
        print({
            'english': '"I\'m afraid you haven\'t enough money for it."',
            'russian': '"Боюсь, у вас на это не хватит денег".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_103
    fi

    if less(plus(canCarry(integer(value 3)), weight(byte 88, integer(value 1))), weight(data(integers_2586, integer(value 4)), byte 1)):
        print({
            'english': '"You don\'t have room to carry it."\n\n',
            'russian': '"У вас не осталось свободного места".\n\n'
        })
        integer(value 5) = byte 0
        jump label_1327
    fi

    destroyItem(integer(value 3), byte 88, byte 0, integer(value 1))
    createItem(integer(value 3), data(integers_2586, integer(value 4)), byte 0, byte 1)
    look(integer(value 3))
    integer(value 5) = byte 1
    string(value 1) = data(strings_2592, integer(value 4))
    print({
        'english': '"Here you go."',
        'russian': '"Вот, пожалуйста".'
    })
    wait()

    print({
        'english': '\n\n',
        'russian': '\n\n'
    })
    jump label_1327

label_1327:
    if integer(value 5):
        print({
            'english': '"I hope you enjoy it."',
            'russian': '"Надеюсь, вам понравится".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_103
    fi

    jump label_103

label_1367:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 1
        jump label_1513
    fi

label_1387:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_1401:
    look(character(integer(value 0), byte 0))
    print({
        'english': '#2. $Y\n',
        'russian': '#2. $Y\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_1401
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"Кому из вас?" '
    })
    inputDigit(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_1818
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_1387
    fi

    integer(value 3) = character(integer(value 3), byte 0)

label_1513:
    print({
        'english': '"I buy all my fish fresh from @Conor. It\'s 3 gold per serving. Would ',
        'russian': '"Я покупаю всю свою свежую рыбу у @Конора. 3 золотых за порцию. Хотите '
    })
    print({
        'english': 'you like some?" ',
        'russian': 'немного?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(objectsCount(integer(value 3), byte 88), byte 3):
            print({
                'english': '"I\'m afraid you haven\'t enough money for it."',
                'russian': '"Боюсь, у вас на это не хватит денег".'
            })
            wait()

            print({
                'english': '\n\n',
                'russian': '\n\n'
            })
            jump label_103
        fi

        if less(plus(canCarry(integer(value 3)), weight(byte 88, byte 3)), weight(word 265, byte 1)):
            print({
                'english': '"You don\'t have room to carry it."*\n\n',
                'russian': '"У вас не осталось свободного места".*\n\n'
            })
            integer(value 5) = byte 0
            jump label_103
        fi

        destroyItem(integer(value 3), byte 88, byte 0, byte 3)
        createItem(integer(value 3), word 265, byte 0, byte 1)
        look(integer(value 3))
        print({
            'english': '$N serves $Y a fish.',
            'russian': '$N подаёт рыбу, и $Y забирает её.'
        })
        wait()

        integer(value 5) = byte 1
        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_1818

    case 'n':
    case {'russian': 'н'}:
        integer(value 5) = byte 0
        jump label_1818
    esac

label_1818:
    print({
        'english': '"Next week we should have some red snapper."',
        'russian': '"На следующей неделе у нас должен быть красный луциан".'
    })
    wait()

    print({
        'english': '\n\n',
        'russian': '\n\n'
    })
    jump label_103

label_1870:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 1
        jump label_2016
    fi

label_1890:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_1904:
    look(character(integer(value 0), byte 0))
    print({
        'english': '#2. $Y\n',
        'russian': '#2. $Y\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_1904
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"Кому из вас?" '
    })
    inputDigit(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_103
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_1890
    fi

    integer(value 3) = character(integer(value 3), byte 0)

label_2016:
    if or(less(plus(canCarry(integer(value 3)), weight(byte 88, byte 4)), weight(byte 129, byte 1)), less(objectsCount(integer(value 3), byte 88), byte 4)):
        integer(value 9) = byte 1
        jump label_2147
    fi

    print({
        'english': '"Rations cost 4 gold. How many do you want?" ',
        'russian': '"Пайки стоят 4 золотых. Сколько вам нужно?" '
    })
    inputInteger(integer(value 9))

    if greater(integer(value 9), word 200):
        integer(value 9) = word 200
    fi

    integer(value 8) = integer(value 9)

    if equals(integer(value 9), byte 0):
        jump label_103
    fi

    integer(value 0) = byte 0

label_2147:
    integer(value 6) = byte 0
    integer(value 7) = byte 0

    if less(plus(canCarry(integer(value 3)), weight(byte 88, multiply(integer(value 9), byte 4))), weight(byte 129, integer(value 9))):
        integer(value 6) = byte 1
        integer(value 0) = byte 1
        integer(value 9) = minus(integer(value 9), byte 1)
        jump label_2252
    fi

    if less(objectsCount(integer(value 3), byte 88), multiply(integer(value 9), byte 4)):
        integer(value 7) = byte 1
        integer(value 9) = minus(integer(value 9), byte 1)
        jump label_2252
    fi

    jump label_2393

label_2252:
    if integer(value 9):
        jump label_2147
    fi

    if integer(value 6):
        look(integer(value 3))
        print({
            'english': '$N looks at $Y. "You haven\'t any room in your pack."',
            'russian': '$N говорит: "$Y, в вашем рюкзаке нет места".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_103
    fi

    if integer(value 7):
        look(integer(value 3))
        print({
            'english': '"I\'m afraid you haven\'t enough money for it."',
            'russian': '"Боюсь, у вас на это не хватит денег".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_103
    fi

label_2393:
    destroyItem(integer(value 3), byte 88, byte 0, multiply(integer(value 9), byte 4))
    createItem(integer(value 3), byte 129, byte 0, integer(value 9))
    look(integer(value 3))

    if equals(integer(value 8), integer(value 9)):
        print({
            'english': '$N hands the rations to $Y.',
            'russian': '$Y получает от $N рацион.'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_103
    fi

    print({
        'english': 'He hands $Y #9 mutton ration\\s.',
        'russian': '$Y получает #9 порций баранины.'
    })
    wait()

    print({
        'english': '\n\n',
        'russian': '\n\n'
    })

    if integer(value 0):
        print({
            'english': '"That\'s all you can carry."',
            'russian': '"Это всё, что вы можете с собой унести".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_103

    else:
        print({
            'english': '"That\'s all you can afford."',
            'russian': '"Это всё, что вы можете себе позволить".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_103
    fi

integers_2580 = [
    3, // 0
    2, // 1
    4, // 2
]

integers_2586 = [
    116, // 0
    117, // 1
    115, // 2
]

strings_2592 = [
    {
        'english': 'Mead',
        'russian': 'Медовуха'
    }, // 0
    {
        'english': 'Ale',
        'russian': 'Эль'
    }, // 1
    {
        'english': 'Wine',
        'russian': 'Вино'
    }, // 2
]
