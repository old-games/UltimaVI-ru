source('CONVERSE.A')
index(58)

id(58)
name('Nicodemus')

description:
    print('a wizened old man with a ready smile.')
    wait()

    f3()

interaction:
    print('\n"Good $T, Avatar. For what purpose hast thou come?"\n')

label_105:
    ask()

    case 'buy':
    case 'reag':
        jump label_1684

    case 'lear':
    case 'spel':
        jump label_584

    case 'book':
        jump label_2456

    case 'sta':
        jump label_2855

    case 'name':
        print('"I am Nicodemus."')
        ('SETF', ('byte', 235), ('value', 0))
        jump label_104

    case 'job':
        print('"Why, bless me, I work here!"')
        wait()

        print('\n\n"I sell @reagents, teach @spells, and craft magic @staves."')
        wait()

        print('\n\n"I also do a little @experimenting."')
        jump label_104

    case 'expe':
        print('"Oh, nothing a great adventurer such as yourself would be @interested ')
        print('in."')
        jump label_104

    case 'inte':
        print('He gets a suspicious look in his eyes.')
        wait()

        print('\n\n"Don\'t be too nosy, ')

        if integer(value 16):
            print('girlie!"')

        else:
            print('sonny!"')
        fi

        jump label_104

    case 'bye':
        print('"Come back anytime!"\n')
        bye()

    case '*':
        print('"Nope, nope, I won\'t talk about that!"')
        jump label_104
    esac

label_584:
    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump label_682
    fi

    integer(value 3) = character(byte 0, byte 0)

    if hasObject(integer(value 3), byte 57, byte 0):
        jump label_980

    else:
        print('"But thou hast not a spell@book!"')
        jump label_104
    fi

label_682:
    if greater(integer(value 1), integer(value 23)):
        jump label_796
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(hasObject(integer(value 3), byte 57, byte 0), byte 0):
        jump label_781
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_781
    fi

    ('SETNAME', ('integer', [('value', 4)]))
    print('#2) $Y\n')
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

label_781:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump label_682

label_796:
    if equals(integer(value 2), byte 0):
        print('"But none of you has a spell@book!"')
        jump label_104
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump label_980
    fi

    ('SETNAME', ('integer', [('value', 4)]))
    print('#2) $Y\n"Which of you?" ')
    ('INPUTNUM', 2)

    if equals(integer(value 2), byte 0):
        jump label_104
    fi

    integer(value 1) = byte 0

label_914:
    integer(value 3) = character(integer(value 1), byte 0)

    if hasObject(integer(value 3), byte 57, byte 0):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump label_980
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump label_914
    fi

label_980:
    ('SETNAME', ('integer', [('value', 3)]))
    integer(value 1) = level(integer(value 3), byte 0)
    string(value 1) = data(dword 3527, integer(value 1))
    print('"In which Circle does $Y wish to study?" ')
    ('INPUTNUM', 0)

    if equals(integer(value 0), byte 0):
        jump label_105
    fi

    if greater(integer(value 0), byte 8):
        print('"As everybody knows, there are only eight circles."')
        wait()

        print('\n\n')
        jump label_980
    fi

    if greater(integer(value 0), integer(value 1)):
        print('"I sense that $Y is only ready for the #1$1 Circle."')
        wait()

        print('\n\n"But such matters are not my concern..."')
        wait()

        print('\n\n')
    fi

    integer(value 0) = minus(integer(value 0), byte 1)
    integer(value 0) = multiply(integer(value 0), byte 10)

    if equals(data(dword 3554, integer(value 0)), byte 0):
        print('"I have no spells of that circle."')
        wait()

        print('\n\n')
        jump label_980
    fi

    integer(value 2) = byte 1

label_1320:
    string(value 6) = data(dword 3714, minus(plus(integer(value 0), integer(value 2)), byte 1))
    print('#2) $6\n')
    integer(value 2) = plus(integer(value 2), byte 1)

    if greater(data(dword 3554, minus(plus(integer(value 0), integer(value 2)), byte 1)), byte 0):
        jump label_1320
    fi

    print('"Which of these?" ')
    ('INPUTNUM', 4)

    if or(equals(integer(value 4), byte 0), greaterOrEquals(integer(value 4), integer(value 2))):
        print('"Perhaps $Y is not ready for this circle."')
        wait()

        print('\n\n')
        jump label_980
    fi

    integer(value 4) = minus(integer(value 4), byte 1)
    integer(value 5) = plus(byte 20, multiply(integer(value 0), byte 2))

    if less(objectsCount(integer(value 3), byte 88), integer(value 5)):
        print('"$Y lacks the #5 gold required."')
        wait()

        print('\n\n')
        jump label_980
    fi

    print('"That spell costs #5 gold. Interested?" ')

    choice('yn')

    case 'y':
        print('$N hands $Y a piece of rune-covered parchment.')
        ('DELETE', ('integer', [('value', 3)]), ('byte', 88), ('byte', 0), ('integer', [('value', 5)]))
        ('NEW', ('integer', [('value', 3)]), ('byte', 58), ('data', [('dword', 3554), ('plus', [('integer', [('value', 0)]), ('integer', [('value', 4)])])]), ('byte', 1))
        wait()

        print('\n\n')
        jump label_980

    case 'n':
        jump label_980
    esac

label_1684:
    if greater(integer(value 23), byte 0):
        integer(value 2) = byte 1
        jump label_1719
    fi

    integer(value 3) = character(byte 0, byte 0)
    jump label_1821

label_1719:
    integer(value 3) = character(minus(integer(value 2), byte 1), byte 0)
    ('SETNAME', ('integer', [('value', 3)]))
    print('#2) $Y\n')

    if lessOrEquals(integer(value 2), integer(value 23)):
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_1719
    fi

    print('"Which of you?" ')
    ('INPUTNUM', 2)

    if or(equals(integer(value 2), byte 0), greater(integer(value 2), plus(integer(value 23), byte 1))):
        jump label_104

    else:
        integer(value 3) = character(minus(integer(value 2), byte 1), byte 0)
    fi

label_1821:
    ('SETNAME', ('integer', [('value', 3)]))
    integer(value 1) = byte 1

label_1832:
    string(value 1) = data(dword 3469, minus(integer(value 1), byte 1))
    print('#1) $1\n')
    integer(value 1) = plus(integer(value 1), byte 1)

    if greater(data(dword 3437, minus(integer(value 1), byte 1)), byte 0):
        jump label_1832
    fi

    print('"Which of these?" ')
    ('INPUTNUM', 2)

    if or(equals(integer(value 2), byte 0), greaterOrEquals(integer(value 2), integer(value 1))):
        integer(value 2) = byte 1
        jump label_105
    fi

    integer(value 2) = minus(integer(value 2), byte 1)
    integer(value 1) = data(dword 3453, integer(value 2))
    string(value 1) = data(dword 3469, integer(value 2))
    integer(value 5) = byte 0
    print('"$1 costs #1 per portion."')
    wait()

    print('\n\n"How many dost thou want?" ')
    ('INPUT', 4)

    if greater(integer(value 4), word 500):
        integer(value 4) = word 500
    fi

    if equals(integer(value 4), byte 0):
        jump label_1821
    fi

label_2066:
    if less(plus(canCarry(integer(value 3)), weight(byte 88, integer(value 1))), weight(data(dword 3437, integer(value 2)), byte 1)):
        jump label_2194
    fi

    if less(objectsCount(integer(value 3), byte 88), integer(value 1)):
        jump label_2325
    fi

    ('DELETE', ('integer', [('value', 3)]), ('byte', 88), ('byte', 0), ('integer', [('value', 1)]))
    ('NEW', ('integer', [('value', 3)]), ('data', [('dword', 3437), ('integer', [('value', 2)])]), ('byte', 0), ('byte', 1))
    integer(value 5) = plus(integer(value 5), byte 1)

    if equals(integer(value 5), integer(value 4)):
        print('$N hands $Y the $1.')
        wait()

        print('\n\n')
        jump label_1821

    else:
        jump label_2066
    fi

label_2194:
    if integer(value 5):
        print('"Thou cannot carry that much!"')
        wait()

        print('\n\n"I\'ll give thee #5; thou dost not need the rest."')
        wait()

        print('\n\n')
        jump label_1821

    else:
        print('"Thou cannot carry any $1!"')
        wait()

        print('\n\n')
        jump label_1821
    fi

label_2325:
    if integer(value 5):
        print('"Thou cannot afford that much!"')
        wait()

        print('\n\n"I\'ll give thee #5; thou cannot have the rest."')
        wait()

        print('\n\n')
        jump label_1821

    else:
        print('"Thou cannot afford any $1!"')
        wait()

        print('\n\n')
        jump label_1821
    fi

label_2456:
    if integer(value 23):
        integer(value 2) = byte 1
        jump label_2488
    fi

    integer(value 3) = character(byte 0, byte 0)
    jump label_2590

label_2488:
    integer(value 3) = character(minus(integer(value 2), byte 1), byte 0)
    ('SETNAME', ('integer', [('value', 3)]))
    print('#2) $Y\n')

    if lessOrEquals(integer(value 2), integer(value 23)):
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_2488
    fi

    print('"Which of you?" ')
    ('INPUTNUM', 2)

    if or(equals(integer(value 2), byte 0), greater(integer(value 2), plus(integer(value 23), byte 1))):
        jump label_104

    else:
        integer(value 3) = character(minus(integer(value 2), byte 1), byte 0)
    fi

label_2590:
    ('SETNAME', ('integer', [('value', 3)]))

    if less(plus(canCarry(integer(value 3)), weight(byte 88, byte 45)), weight(byte 57, byte 1)):
        print('"But thou cannot carry a spellbook!"')
        jump label_104
    fi

    if less(objectsCount(integer(value 3), byte 88), byte 45):
        print('"But thou cannot afford a spellbook!"')
        jump label_104
    fi

    print('"A spellbook costs 45 gold pieces. Interested?" ')

    choice('yn')

    case 'y':
        ('DELETE', ('integer', [('value', 3)]), ('byte', 88), ('byte', 0), ('byte', 45))
        ('NEW', ('integer', [('value', 3)]), ('byte', 57), ('byte', 0), ('byte', 1))
        jump label_104

    case 'n':
        if integer(value 23):
            print('"Perhaps one of thy friends then."')
            wait()

            print('\n\n')
            integer(value 2) = byte 1
            jump label_2488

        else:
            jump label_104
        fi
    esac

label_2855:
    print('"Yes, I make magical yew staves."')
    wait()

    print('\n\n"If thou knowest the Enchant spell, thou canst lock a spell within ')
    print('the staff for quick use!"')
    wait()

    print('\n\n"A yew staff costs 100 gold pieces, but it\'s worth twice that!"')
    wait()

    print('\n\n"Wouldst thou like to buy one?" ')

    choice('yn')

    case 'n':
        print('"Perhaps some other time, then."')
        jump label_104

    case 'y':
        if integer(value 23):
            integer(value 2) = byte 1
            jump label_3163

        else:
            integer(value 3) = character(byte 0, byte 0)
            jump label_3265
        fi

label_3163:
        integer(value 3) = character(minus(integer(value 2), byte 1), byte 0)
        ('SETNAME', ('integer', [('value', 3)]))
        print('#2) $Y\n')

        if lessOrEquals(integer(value 2), integer(value 23)):
            integer(value 2) = plus(integer(value 2), byte 1)
            jump label_3163
        fi

        print('"Which of you?" ')
        ('INPUTNUM', 2)

        if or(equals(integer(value 2), byte 0), greater(integer(value 2), plus(integer(value 23), byte 1))):
            jump label_104

        else:
            integer(value 3) = character(minus(integer(value 2), byte 1), byte 0)
        fi

label_3265:
        ('SETNAME', ('integer', [('value', 3)]))

        if less(plus(canCarry(integer(value 3)), weight(byte 88, byte 100)), weight(byte 78, byte 1)):
            print('"But thou cannot carry a staff!"')
            jump label_104
        fi

        if less(objectsCount(integer(value 3), byte 88), byte 100):
            print('"But thou cannot afford a staff!"')
            jump label_104
        fi

        print('The old man hands $Y a yew staff.')
        ('DELETE', ('integer', [('value', 3)]), ('byte', 88), ('byte', 0), ('byte', 100))
        ('NEW', ('integer', [('value', 3)]), ('byte', 78), ('byte', 0), ('byte', 1))
        jump label_104

integers_3437 = [
    66,
    67,
    68,
    71,
    72,
    0,
    0,
    0,
]

integers_3453 = [
    2,
    1,
    1,
    1,
    2,
    0,
    0,
    0,
]

strings_3469 = [
    'Blood Moss',
    'Garlic',
    'Ginseng',
    'Spider Silk',
    'Sulfurous Ash',
    ' ',
    ' ',
    ' ',
]

strings_3527 = [
    'th',
    'st',
    'nd',
    'rd',
    'th',
    'th',
    'th',
    'th',
    'th',
]

integers_3554 = [
    2,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    20,
    23,
    24,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    36,
    38,
    40,
    41,
    0,
    0,
    0,
    0,
    0,
    0,
    49,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    66,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    80,
    82,
    85,
    89,
    0,
    0,
    0,
    0,
    0,
    0,
    97,
    103,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
    0,
]

strings_3714 = [
    'Detect Trap',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    'Sleep',
    'Unlock Magic',
    'Untrap',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    'Magic Lock',
    'Mass Sleep',
    'Protection',
    'Repel Undead',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    'Conjure',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    'Insect Swarm',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    'Charm',
    'Confuse',
    'Mass Protect',
    'Web',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    'Enchant',
    'Mass Invisibility',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
    ' ',
]
