source('CONVERSE.A')
index(41)

id(41)
name({
    'english': 'Penumbra',
    'russian': 'Пенумбра'
})

description:
    print({
        'english': 'a small, inscrutable woman, cloaked in shadows.',
        'russian': 'небольшую, загадочную женщину, скрытую тенями.'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

interaction:
    if equals(hasBit(byte 235, value 0), byte 0):
        print({
            'english': '"Ah, hello Avatar. I was wondering when you would get here."',
            'russian': '"А, привет, Аватар. Я всё гадала, когда же вы появитесь".'
        })
        setBit(byte 235, value 0)

    else:
        print({
            'english': '"I see you have yet to fulfill your destiny."',
            'russian': '"Я вижу, вам ещё предстоит исполнить своё предназначение".'
        })
    fi

label_183:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"I am the one known as @Penumbra."',
            'russian': '"Я та, кого называют @Пенумбра".'
        })
        jump label_183

    case 'penu':
    case {'russian': 'пену'}:
        print({
            'english': '"I am the daughter of the eclipse."',
            'russian': '"Я дочь затмения".'
        })
        jump label_183

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"I am a @fortune teller."',
            'russian': '"Я @гадалка".'
        })
        jump label_183

    case 'fort':
    case {'russian': 'гада'}:
    case 'tell':
    case {'russian': 'воро'}:
        print({
            'english': '"Yes, I can foretell your @future for you."',
            'russian': '"Да, я могу предсказать ваше @будущее".'
        })
        jump label_183

    case 'fore':
    case {'russian': 'пред'}:
    case 'futu':
    case {'russian': 'буду'}:
        jump label_1419

    case 'beyv':
    case {'russian': 'бейв'}:
        print({
            'english': '"Yes he was a terribly @honest fellow."',
            'russian': '"Да, он был ужасно @честным человеком".'
        })
        wait()

        print({
            'english': '\n\n"Alas, though, he lacked the virtue of tact."',
            'russian': '\n\n"Однако, увы, ему не хватало такта".'
        })
        wait()

        print({
            'english': '\n\n"He told the truth once too often, and those he spoke of did not ',
            'russian': '\n\n"Он слишком часто говорил правду, и те, о ком он говорил, этого '
        })
        print({
            'english': 'appreciate it."',
            'russian': 'не ценили".'
        })
        wait()

        print({
            'english': '\n\n"He\'s buried in the catacombs under Moonglow now, pushing up ',
            'russian': '\n\n"Сейчас он похоронен в катакомбах под Мунглоу и выращивает '
        })
        print({
            'english': '@daffodils."',
            'russian': '@нарциссы".'
        })
        wait()

        print({
            'english': '\n\n"Even virtue has its price."',
            'russian': '\n\n"Даже добродетель имеет свою цену".'
        })
        jump label_183

    case 'daff':
    case {'russian': 'нарц'}:
        print({
            'english': '"Yes, daffodils."',
            'russian': '"Да, нарциссы".'
        })
        jump label_183

    case 'hone':
    case {'russian': 'чест'}:
        print({
            'english': '"I can tell you of both the @rune and the @mantra."',
            'russian': '"Я могу рассказать вам о @руне, и о @мантре".'
        })
        jump label_183

    case 'rune':
    case {'russian': 'руна'}:
        print({
            'english': '"\'Twas buried with @Beyvin, rest his shade."',
            'russian': '"Она была похоронена вместе с @Бейвином, да упокоится его тень".'
        })
        jump label_183

    case 'mant':
    case {'russian': 'мант'}:
        jump label_913

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"Your destiny awaits."\n',
            'russian': '"Вас ждёт ваша судьба".\n'
        })
        bye()

    case '*':
        print({
            'english': '"You must seek the answer to that elsewhere."',
            'russian': '"Вы должны искать ответ на этот вопрос в другом месте".'
        })
    esac

    jump label_183

label_913:
    print({
        'english': '"For five gold coins I can use my powers to divine the mantra for you.',
        'russian': '"За пять золотых монет я могу использовать свои силы, чтобы прочитать для вас мантру.'
    })
    print({
        'english': ' Shall I do this?" ',
        'russian': ' Прочту ли я её вам?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"It is a small price for so profound a word."',
            'russian': '"Это небольшая цена за столь глубокое слово".'
        })
        jump label_183

    case 'y':
    case {'russian': 'д'}:
    esac

    if less(objectsCount(byte 1, byte 88), byte 5):
        print({
            'english': '"Your ambitions outreach your means."',
            'russian': '"Ваши амбиции превышают ваши возможности".'
        })
        jump label_183
    fi

    destroyItem(byte 1, byte 88, byte 0, byte 5)
    createItem(byte 235, byte 88, byte 0, byte 5)
    print({
        'english': 'She closes her eyes in concentration. For long minutes you wait.',
        'russian': 'Она закрывает глаза, сосредотачиваясь. Вы ждёте долгие минуты.'
    })
    wait()

    print({
        'english': '\n\n',
        'russian': '\n\n'
    })

    if partyHas(byte 2):
        portrait(byte 2)
        print({
            'english': '"What are we waiting for!" whispers Dupre.',
            'russian': '"Чего мы ждём?!" - шепчет Дюпре.'
        })
        wait()

        print({
            'english': '\n\n"She\'s doubtless fallen asleep, and you\'ve wasted good money for ',
            'russian': '\n\n"Она, без сомнения, уснула, а мы зря потратили '
        })
        print({
            'english': 'nothing..."',
            'russian': 'деньги..."'
        })
        wait()

        portrait(byte 235)
        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
    fi

    print({
        'english': 'Finally Penumbra opens her eyes again. "The word you seek is \'ahm.\'"',
        'russian': 'Наконец, Пенумбра снова открывает глаза. "Слово, которое вы ищете, это \'ахм\'".'
    })
    jump label_183

label_1419:
    print({
        'english': '"I require a small donation for my services."',
        'russian': '"Мне нужно небольшое пожертвование за мои услуги".'
    })

label_1464:
    print({
        'english': '\n\nHow much do you give her? ',
        'russian': '\n\nСколько вы ей дадите? '
    })
    inputInteger(integer(value 0))

    if greater(integer(value 0), objectsCount(byte 1, byte 88)):
        print({
            'english': 'You don\'t have that much.',
            'russian': 'У вас столько нет.'
        })
        jump label_1464
    fi

    if equals(integer(value 0), byte 0):
        print({
            'english': '"So be it."',
            'russian': '"Да будет так".'
        })
        jump label_183
    fi

    destroyItem(byte 1, byte 88, byte 0, integer(value 0))
    print({
        'english': 'She holds her hands out on either side of her crystal ball, not quite ',
        'russian': 'Она протягивает руки по обе стороны от своего хрустального шара, не '
    })
    print({
        'english': 'touching it, and closes her eyes.',
        'russian': 'дотрагиваясь до него, и закрывает глаза.'
    })
    wait()

    print({
        'english': '\n\nAfter a time, she speaks.',
        'russian': '\n\nЧерез некоторое время она говорит.'
    })
    wait()

    print({
        'english': '\n\n"The future looks dark. All is unclear."',
        'russian': '\n\n"Будущее кажется мрачным. Очень неясным".'
    })
    wait()

    print({
        'english': '\n\n"Some more gold would shed further light on your destiny..."',
        'russian': '\n\n"Ещё немного золота пролило бы свет на вашу судьбу..."'
    })

label_1810:
    print({
        'english': '\n\nHow much do you give her? ',
        'russian': '\n\nСколько вы ей дадите? '
    })
    inputInteger(integer(value 0))

    if greater(integer(value 0), objectsCount(byte 1, byte 88)):
        print({
            'english': 'You don\'t have that much.',
            'russian': 'У вас столько нет.'
        })
        jump label_1810
    fi

    if equals(integer(value 0), byte 0):
        print({
            'english': '"So be it."',
            'russian': '"Да будет так".'
        })
        jump label_183
    fi

    destroyItem(byte 1, byte 88, byte 0, integer(value 0))
    print({
        'english': '"Though all is dark, I see a light at the end of the tunnel."',
        'russian': '"Хоть везде и темно, я вижу свет в конце туннеля".'
    })
    wait()

    print({
        'english': '\n\n"Quickly - more coins before I lose the thread of this vision!"',
        'russian': '\n\n"Быстрее - ещё монет, пока я не потеряла нить этого видения!"'
    })

label_2046:
    print({
        'english': '\n\nHow much do you give her? ',
        'russian': '\n\nСколько вы ей дадите? '
    })
    inputInteger(integer(value 0))

    if greater(integer(value 0), objectsCount(byte 1, byte 88)):
        print({
            'english': 'You don\'t have that much.',
            'russian': 'У вас столько нет.'
        })
        jump label_2046
    fi

    if equals(integer(value 0), byte 0):
        print({
            'english': '"So be it."',
            'russian': '"Да будет так".'
        })
        jump label_183
    fi

    destroyItem(byte 1, byte 88, byte 0, integer(value 0))
    print({
        'english': '"Much conflict lies before you. Your end..."',
        'russian': '"Вас ждёт множество конфликтов. Вы закончите..."'
    })
    wait()

    print({
        'english': '\n\n"I cannot see it. More gold is needed."',
        'russian': '\n\n"Я не могу этого понять. Нужно больше золота".'
    })

label_2241:
    print({
        'english': '\n\nHow much do you give her? ',
        'russian': '\n\nСколько вы ей дадите? '
    })
    inputInteger(integer(value 0))

    if greater(integer(value 0), objectsCount(byte 1, byte 88)):
        print({
            'english': 'You don\'t have that much.',
            'russian': 'У вас столько нет.'
        })
        jump label_2241
    fi

    if equals(integer(value 0), byte 0):
        print({
            'english': '"So be it."',
            'russian': '"Да будет так".'
        })
        jump label_183
    fi

    destroyItem(byte 1, byte 88, byte 0, integer(value 0))
    print({
        'english': '"You shall travel throughout the land before you are through."',
        'russian': '"Вы будете путешествовать по всей стране, прежде чем закончите".'
    })
    wait()

    print({
        'english': '\n\n"A few more coins and all should be clear."',
        'russian': '\n\n"Ещё несколько монет, и всё прояснится".'
    })

label_2458:
    print({
        'english': '\n\nHow much do you give her? ',
        'russian': '\n\nСколько вы ей дадите? '
    })
    inputInteger(integer(value 0))

    if greater(integer(value 0), objectsCount(byte 1, byte 88)):
        print({
            'english': 'You don\'t have that much.',
            'russian': 'У вас столько нет.'
        })
        jump label_2458
    fi

    if equals(integer(value 0), byte 0):
        print({
            'english': '"So be it."',
            'russian': '"Да будет так".'
        })
        jump label_183
    fi

    destroyItem(byte 1, byte 88, byte 0, integer(value 0))
    print({
        'english': '"You will journey into the depths of the earth..."',
        'russian': '"Вы отправитесь в путешествие в самую глубь земли..."'
    })
    wait()

    print({
        'english': '\n\n"Strange creatures will you face..."',
        'russian': '\n\n"Вы столкнётесь со странными существами..."'
    })
    wait()

    print({
        'english': '\n\n"I can almost see the end now."',
        'russian': '\n\n"Я уже почти вижу развязку".'
    })

label_2690:
    print({
        'english': '\n\nHow much do you give her? ',
        'russian': '\n\nСколько вы ей дадите? '
    })
    inputInteger(integer(value 0))

    if greater(integer(value 0), objectsCount(byte 1, byte 88)):
        print({
            'english': 'You don\'t have that much.',
            'russian': 'У вас столько нет.'
        })
        jump label_2690
    fi

    if equals(integer(value 0), byte 0):
        print({
            'english': '"So be it."',
            'russian': '"Да будет так".'
        })
        jump label_183
    fi

    destroyItem(byte 1, byte 88, byte 0, integer(value 0))
    print({
        'english': '"You and your companions will face terrible choices..."',
        'russian': '"Вы и ваши спутники столкнётесь с ужасным выбором..."'
    })
    wait()

    print({
        'english': '\n\n"You will need powerful magic to prevail..."',
        'russian': '\n\n"Вам понадобится могущественная магия, чтобы победить..."'
    })
    wait()

    print({
        'english': '\n\n"Wait... There is some barrier before me."',
        'russian': '\n\n"Подождите... Передо мной какой-то барьер".'
    })
    wait()

    print({
        'english': '\n\n"Give me just one more coin and I think I can break through it."',
        'russian': '\n\n"Дайте мне ещё одну монету, и, думаю, я смогу преодолеть его".'
    })

label_3013:
    print({
        'english': '\n\nHow much do you give her? ',
        'russian': '\n\nСколько вы ей дадите? '
    })
    inputInteger(integer(value 0))

    if greater(integer(value 0), objectsCount(byte 1, byte 88)):
        print({
            'english': 'You don\'t have that much.',
            'russian': 'У вас столько нет.'
        })
        jump label_3013
    fi

    if equals(integer(value 0), byte 0):
        print({
            'english': '"So be it."',
            'russian': '"Да будет так".'
        })
        jump label_183
    fi

    destroyItem(byte 1, byte 88, byte 0, integer(value 0))
    print({
        'english': '"Yes, now all is made clear to me!"',
        'russian': '"Да, теперь мне всё ясно!"'
    })
    wait()

    print({
        'english': '\n\n"I see a great Vortex."',
        'russian': '\n\n"Я вижу великий Вихрь".'
    })
    wait()

    print({
        'english': '\n\n"There is a violet lens that is crucial to your quest. It is broken,',
        'russian': '\n\n"И фиолетовую линзу, которая имеет решающее значение для вашего поиска. Она сломана,'
    })
    print({
        'english': ' and must be made whole."',
        'russian': ' и её нужно восстановить".'
    })
    wait()

    print({
        'english': '\n\n"But one lens is not enough! A blue lens is needed as well."',
        'russian': '\n\n"Но одной линзы недостаточно! Нужна ещё и синия линза".'
    })
    wait()

    print({
        'english': '\n\n"You must have two lenses, else all is for naught."',
        'russian': '\n\n"У вас должно быть две линзы, иначе всё будет напрасно".'
    })
    wait()

    print({
        'english': '\n\nShe opens her eyes. "I can see no more for now. Leave me, that I ',
        'russian': '\n\nОна открывает глаза. "Я больше ничего не вижу. Оставьте меня, мне '
    })
    print({
        'english': 'might rest."\n',
        'russian': 'нужно отдохнуть".\n'
    })
    bye()
