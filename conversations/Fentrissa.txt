source('CONVERSE.B')
index(22)

id(121)
name({
    'english': 'Fentrissa',
    'russian': 'Фентрисса'
})

description:
    print({
        'english': 'a strong, sinewy woman with a hard look about her.',
        'russian': 'сильную, жилистую женщину с жёстким взглядом.'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

interaction:
    integer(value 5) = byte 0

    if hasBit(byte 235, value 0):
        print({
            'english': '"Smell that salt air, friend. Brings a tear to me eye..."\n',
            'russian': '"Вдохните этот солёный воздух, друг. У меня на глаза наворачиваются слёзы..."\n'
        })

    else:
        print({
            'english': '"Welcome, welcome!" She slaps you heartily on the back.\n',
            'russian': '"Добро пожаловать, добро пожаловать!" Она от души хлопает вас по спине.\n'
        })
    fi

label_194:
    integer(value 1) = plus(plus(hasObject(byte 235, byte 149, byte 1), hasObject(byte 235, byte 149, byte 2)), multiply(plus(hasObject(byte 235, byte 149, word 128), hasObject(byte 235, byte 149, word 129)), byte 3))

    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"@Fentrissa."\n',
            'russian': '"@Фентрисса".\n'
        })
        setBit(byte 235, value 0)
        jump label_194

    case 'fent':
    case {'russian': 'фент'}:
        print({
            'english': '"A strong name, as strong as the @sea." She looks into the distance.\n',
            'russian': '"Сильное имя, такое же сильное, как @море". Она смотрит вдаль.\n'
        })
        jump label_194

    case 'sea':
    case {'russian': 'море'}:
        print({
            'english': '"Beautiful thing, but a @jealous man he is."\n',
            'russian': '"Прекрасное создание, но @ревнивое, как мужчина".\n'
        })
        jump label_194

    case 'jeal':
    case {'russian': 'ревн'}:
    case 'man':
    case {'russian': 'мужч'}:
        print({
            'english': '"Many call her a female."',
            'russian': '"Многие называют её женщиной".'
        })
        wait()

        print({
            'english': '\n\n"If ya ask me, men are much more unpredictable."\n',
            'russian': '\n\n"Если хотите знать моё мнение, мужчины гораздо более непредсказуемы".\n'
        })
        jump label_194

    case 'buy':
    case {'russian': 'купи'}:
    case 'deed':
    case {'russian': 'доку'}:
        if equals(integer(value 1), byte 0):
            print({
                'english': '"You bought my last craft."\n',
                'russian': '"Вы купили моё последнее судно".\n'
            })
            jump label_194
        fi

        print({
            'english': '"I sell',
            'russian': '"Я продаю'
        })

        if or(equals(integer(value 1), byte 1), equals(integer(value 1), byte 2)):
            print({
                'english': ' @ships."\n',
                'russian': ' @корабли".\n'
            })
            jump label_194
        fi

        if or(equals(integer(value 1), byte 3), equals(integer(value 1), byte 6)):
            print({
                'english': ' @skiffs."\n',
                'russian': ' @лодки".\n'
            })
            jump label_194
        fi

        print({
            'english': ' @ships and @skiffs."\n',
            'russian': ' @корабли и @лодки".\n'
        })
        jump label_194

    case 'ship':
    case {'russian': 'кора'}:
        if hasObject(byte 235, byte 149, byte 1):
            integer(value 9) = byte 0
            jump label_1165
        fi

        if hasObject(byte 235, byte 149, byte 2):
            integer(value 9) = byte 1
            jump label_1165
        fi

        print({
            'english': '"Sorry, I sold you my last one."\n',
            'russian': '"Извините, я продала вам свой последний".\n'
        })
        jump label_194

    case 'skif':
    case {'russian': 'лодк'}:
        if hasObject(byte 235, byte 149, word 128):
            integer(value 9) = byte 2
            jump label_1165
        fi

        if hasObject(byte 235, byte 149, word 129):
            integer(value 9) = byte 3
            jump label_1165
        fi

        print({
            'english': '"Sorry, I sold you my last one."\n',
            'russian': '"Извините, я продала вам свой последний".\n'
        })
        jump label_194

    case 'job':
    case {'russian': 'раб'}:
        if equals(integer(value 1), byte 0):
            print({
                'english': '"I\'m out of work after selling you all my ships and skiffs."\n',
                'russian': '"Я осталась без работы после того, как продала вам все свои корабли и лодки".\n'
            })
            jump label_194
        fi

        if or(equals(integer(value 1), byte 1), equals(integer(value 1), byte 2)):
            print({
                'english': '"I have @ships for sale, but I sold you my last @skiff."\n',
                'russian': '"У меня есть @корабли на продажу, но я продала вам свою последнюю @лодку".\n'
            })
            jump label_194
        fi

        if or(equals(integer(value 1), byte 3), equals(integer(value 1), byte 6)):
            print({
                'english': '"I sold you my last @ship, but I still have some @skiffs left."\n',
                'russian': '"Я продала вам свой последний @корабль, но у меня ещё остались @лодки".\n'
            })
            jump label_194
        fi

        print({
            'english': '"I sell @ships and @skiffs."\n',
            'russian': '"Я продаю @корабли и @лодки".\n'
        })
        jump label_194

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"Have a good one." She bows, hands on her hips.\n',
            'russian': '"Всего хорошего". Она кланяется, уперев руки в бока.\n'
        })
        bye()

    case '*':
        print({
            'english': '"Ask around."\n',
            'russian': '"Поспрашивайте других".\n'
        })
    esac

    jump label_194

label_1165:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 0
        jump label_1301
    fi

label_1185:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_1199:
    look(character(integer(value 0), byte 0))
    print({
        'english': '#2. $Y\n',
        'russian': '#2. $Y\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_1199
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"Кто из вас?" '
    })
    inputDigit(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_1584
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_1185
    fi

label_1301:
    integer(value 4) = data(integers_2033, integer(value 9))
    look(character(integer(value 3), byte 0))
    print({
        'english': '$N turns to $Y, "It\'ll cost you #4 gold for the deed. Interested?"',
        'russian': '$N поворачивается к $Y: "Это будет стоить вам #4 золотом за документ. Интересует?"'
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(canCarry(character(integer(value 3), byte 0)), weight(byte 149, byte 1)):
            look(character(integer(value 3), byte 0))
            print({
                'english': '$N looks at $Y. "You look pretty full to me."\n',
                'russian': '$N смотрит на $Y: "Вы кажетесь мне довольно перегруженным".\n'
            })
            jump label_194
        fi

        jump label_1656

label_1471:
        moveItem(byte 149, data(integers_2041, integer(value 9)), byte 235, character(integer(value 3), byte 0))
        look(character(integer(value 3), byte 0))
        print({
            'english': '"Excellent!" After accepting the gold, $N hands $Y the deed.',
            'russian': '"Отлично!" Приняв золото, $N вручает $Y документ.'
        })
        wait()

        integer(value 5) = byte 1
        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_1584

    case 'n':
    case {'russian': 'н'}:
        jump label_1584
    esac

label_1584:
    if integer(value 5):
        print({
            'english': '"Sail her straight."\n',
            'russian': '"Попутного ветра".\n'
        })
        jump label_194
    fi

    print({
        'english': '"You\'ll ne\'er find a better craft."\n',
        'russian': '"Вы не найдёте судна лучше".\n'
    })
    jump label_194

label_1656:
    integer(value 1) = data(integers_2033, integer(value 9))
    integer(value 2) = byte 0
    integer(value 6) = byte 0
    integer(value 4) = character(byte 0, byte 0)

label_1693:
    if greater(integer(value 6), integer(value 23)):
        jump label_1960

label_1705:
        print({
            'english': '"Your party hasn\'t enough money."',
            'russian': '"У вашей группы недостаточно денег".'
        })
        wait()

        print({
            'english': '\n\n"It looks like you\'re #1 gold piece\\s short."',
            'russian': '\n\n"Похоже, вам не хватает #1 золотых монет".'
        })
        wait()

        print({
            'english': '\n\n"Sorry."\n',
            'russian': '\n\n"Извините".\n'
        })
        jump label_194
    fi

    integer(value 7) = objectsCount(character(integer(value 6), byte 0), byte 88)
    data(integers_2017, integer(value 6)) = integer(value 7)

    if less(integer(value 7), integer(value 1)):
        integer(value 1) = minus(integer(value 1), integer(value 7))
        integer(value 2) = plus(integer(value 2), integer(value 7))
        destroyItem(character(integer(value 6), byte 0), byte 88, byte 0, integer(value 7))
        integer(value 6) = plus(integer(value 6), byte 1)
        jump label_1693

    else:
        destroyItem(character(integer(value 6), byte 0), byte 88, byte 0, integer(value 1))
        print({
            'english': 'Your party takes up a collection for the deed.',
            'russian': 'Ваша группа собирает деньги на документ.'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_1471
    fi

label_1960:
    integer(value 8) = byte 0

label_1967:
    createItem(character(integer(value 8), byte 0), byte 88, byte 0, data(integers_2017, integer(value 8)))
    integer(value 8) = plus(integer(value 8), byte 1)

    if less(integer(value 8), integer(value 23)):
        jump label_1967
    fi

    jump label_1705

integers_2017 = [
    0, // 0
    0, // 1
    0, // 2
    0, // 3
    0, // 4
    0, // 5
    0, // 6
    0, // 7
]

integers_2033 = [
    350, // 0
    350, // 1
    25,  // 2
    25,  // 3
]

integers_2041 = [
    1,   // 0
    2,   // 1
    128, // 2
    129, // 3
]
