source('CONVERSE.A')
index(52)

id(52)
name({
    'english': 'Martin',
    'russian': 'FIXME Martin'
})

description:
    print({
        'english': 'a jolly, red-faced innkeeper.',
        'russian': 'FIXME a jolly, red-faced innkeeper.'
    })

interaction:
    wait()

    print({
        'english': '\n"Vell, hello ',
        'russian': 'FIXME \n"Vell, hello '
    })

    if hasBit(byte 235, value 0):
        print({
            'english': 'again',
            'russian': 'FIXME again'
        })

    else:
        print({
            'english': 'dere',
            'russian': 'FIXME dere'
        })
        setBit(byte 235, value 0)
    fi

    print({
        'english': ', mine friend',
        'russian': 'FIXME , mine friend'
    })

    if integer(value 23):
        print({
            'english': 's',
            'russian': 'FIXME s'
        })
    fi

    print({
        'english': '! Velcome to the Varrior\'s Stead!"',
        'russian': 'FIXME ! Velcome to the Varrior\'s Stead!"'
    })
    wait()

    print({
        'english': '\n\n"Vat can I be doing for thee this $T?"',
        'russian': 'FIXME \n\n"Vat can I be doing for thee this $T?"'
    })

label_171:
    print({
        'english': '\n',
        'russian': 'FIXME \n'
    })

    ask()

    case 'name':
    case {'russian': 'FIXME name'}:
        print({
            'english': '"Mine name ist Martin, but my friends call me \'@Dutch.\'"',
            'russian': 'FIXME "Mine name ist Martin, but my friends call me \'@Dutch.\'"'
        })
        jump label_171

    case 'dutc':
    case {'russian': 'FIXME dutc'}:
        print({
            'english': '"Ja, dat\'s mine name!"',
            'russian': 'FIXME "Ja, dat\'s mine name!"'
        })
        jump label_171

    case 'job':
    case {'russian': 'FIXME job'}:
        print({
            'english': '"I run dis @inn."',
            'russian': 'FIXME "I run dis @inn."'
        })
        jump label_171

    case 'rest':
    case {'russian': 'FIXME rest'}:
    case 'inn':
    case {'russian': 'FIXME inn'}:
    case 'room':
    case {'russian': 'FIXME room'}:
        print({
            'english': '"Room und board ist 5 gold per night per person."',
            'russian': 'FIXME "Room und board ist 5 gold per night per person."'
        })
        wait()

        print({
            'english': '\n\n"Interested?" ',
            'russian': 'FIXME \n\n"Interested?" '
        })
        jump label_503

    case 'bye':
    case {'russian': 'FIXME bye'}:
        print({
            'english': '"Haf a good journey!" he calls as you leave.\n',
            'russian': 'FIXME "Haf a good journey!" he calls as you leave.\n'
        })
        bye()

    case '*':
        print({
            'english': '"I speak your language not so good. Vat is meaning \'$Z\'?"',
            'russian': 'FIXME "I speak your language not so good. Vat is meaning \'$Z\'?"'
        })
    esac

    jump label_171

label_503:
    choice({
        'english': 'yn',
        'russian': 'FIXME yn'
    })

    case 'y':
    case {'russian': 'FIXME y'}:
        jump label_559

    case 'n':
    case {'russian': 'FIXME n'}:
        print({
            'english': '"Vell, perhaps some other time, ja?"',
            'russian': 'FIXME "Vell, perhaps some other time, ja?"'
        })
        jump label_171
    esac

label_559:
    integer(value 0) = multiply(plus(integer(value 23), byte 1), byte 5)

    if less(objectsCount(byte 1, byte 88), integer(value 0)):
        print({
            'english': '"Ach, I\'m sorry, but I must haf my #0 gold."',
            'russian': 'FIXME "Ach, I\'m sorry, but I must haf my #0 gold."'
        })
        wait()

        print({
            'english': '\n\n"Come back ven fortune makes you rich, ah?"',
            'russian': 'FIXME \n\n"Come back ven fortune makes you rich, ah?"'
        })
        jump label_171
    fi

    destroyItem(byte 1, byte 88, byte 0, integer(value 0))
    print({
        'english': 'He shows you to your room, and you drift off into a well-earned sleep.',
        'russian': 'FIXME He shows you to your room, and you drift off into a well-earned sleep.'
    })
    print({
        'english': '\n',
        'russian': 'FIXME \n'
    })
    sleep()

    wait()

    print({
        'english': '\nThe next morning, Martin serves you a huge, tasty breakfast.',
        'russian': 'FIXME \nThe next morning, Martin serves you a huge, tasty breakfast.'
    })
    wait()

    print({
        'english': '\n\n"A good breakfast is the beginning of a good day!" he cries.',
        'russian': 'FIXME \n\n"A good breakfast is the beginning of a good day!" he cries.'
    })
    jump label_171
