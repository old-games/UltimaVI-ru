source('CONVERSE.A')
index(66)

id(66)
name('Gwenno')

description:
    print('a plainly dressed bard.\n*')

interaction:
    setBit(byte 235, value 0)

    if partyHas(byte 235):
        print('"Is there something you needed to know?"')

    else:
        print('"Hello, $P."')
    fi

label_100:
    print('\n')

    ask()

    case 'name':
        print('"It\'s me, Gwenno. You have been away from our realm a long time, ')
        print('haven\'t you..."')
        jump label_100

    case 'job':
        print('"Iolo\'s @apprentice has taken over my job at @Iolo\'s Bows."\n*\n"These ')
        print('days I\'ve been transcribing the folk @songs of Britannia into ')
        print('numerical @notation for the artisan\'s @guild."\n*\n')

        if partyHas(byte 235):
            print('"Of course, helping you on your quest is more important than that ')
            print('right now."')

        else:
            print('"Of course, if you need my help, I could leave the guild for a time ')
            print('and @join you."')
        fi

        jump label_100

    case 'arti':
    case 'guil':
        print('"@Selganor can tell you more about the guild than I could."')
        jump label_100

    case 'selg':
        print('"He\'s the guildmaster."')
        jump label_100

    case 'help':
    case 'join':
    case 'ques':
        jump label_1689

    case 'leav':
        jump label_2222

    case 'folk':
    case 'song':
        print('"The songs of a people are an important part of their heritage."\n*\n')
        print('"Putting them down on paper helps preserve our @traditions for future ')
        print('generations."')
        jump label_100

    case 'futu':
    case 'gene':
    case 'heri':
    case 'pape':
    case 'trad':
        print('"I\'m so glad you appreciate the value of tradition."')
        jump label_100

    case 'iolo':
        print('"A bit scruffy, but he\'s the sweetest husband I could ever ask for."')

        if isNearby(byte 4):
            wait()

            portrait(byte 4)
            print('\n\nIolo says "You\'re only saying that because it\'s true." He gives her ')
            print('a kiss.')
            wait()

            portrait(byte 235)
        fi

        jump label_100

    case 'appr':
    case 'bow':
        print('"If you need a good crossbow, the shop is in Britain, over by the Blue')
        print(' @Boar."')
        jump label_100

    case 'blue':
    case 'boar':
        print('"It\'s a lively place."')
        jump label_100

    case 'nota':
    case 'nume':
    case 'tran':
        print('"A number for every @note, and a note for every @number."')
        jump label_100

    case 'note':
        print('"Each note is represented by one @number."')
        jump label_100

    case 'numb':
        print('"Each number @represents one @note."')
        jump label_100

    case 'repr':
        print('"I knew you\'d catch on!"')
        jump label_100

    case 'play':
    case 'tune':
        print('"Oh, Selganor sent you, did he? I bet you want to learn \'@Stones.\'"')
        jump label_100

    case 'lear':
    case 'ston':
        print('"In the standard numerical notation, it reads \'678987 8767653\'."')
        jump label_100

    case 'bye':
        print('"Nice talking with you."\n')
        bye()

    case '*':
        print('"Sorry, can\'t help you there."')
    esac

    jump label_100

label_1689:
    if partyHas(byte 235):
label_1694:
        print('"I have joined you already!"')
        jump label_100
    fi

    print('"Do you want me to come with you?" ')

    choice('yn')

    case 'n':
        print('"Okay. Let me know if you need my help later."')
        jump label_100
    esac

    integer(value 0) = partyJoin(byte 235)

    if equals(integer(value 0), byte 1):
        print('\n"Not while you\'re in that thing!"')
        jump label_100
    fi

    if equals(integer(value 0), byte 2):
        print('\n"You have enough travelling with you already."\n*\n"If you ask one of ')
        print('them to @leave first, I\'d be happy to join you."')
        jump label_100
    fi

    if equals(integer(value 0), byte 3):
        jump label_1694
    fi

    print('\n"Okay! It will be nice to spend some time on the road again."')

    if partyHas(byte 4):
        wait()

        print('\n\nShe runs over and hooks arms with @Iolo, and they dance around and ')
        print('around.\n*\nThey\'re obviously very happy to see each other again.')
    fi

    print('\n')
    bye()

label_2222:
    if equals(partyHas(byte 235), byte 0):
label_2230:
        print('"I\'d have to @join you before I could leave, silly!"')
        jump label_100
    fi

    integer(value 0) = partyLeave(byte 235)

    if equals(integer(value 0), byte 1):
        print('"Let\'s get our feet back on solid ground first, okay?"')
        jump label_100
    fi

    if equals(integer(value 0), byte 2):
        jump label_2230
    fi

    print('"All right. I\'ll head back home to Minoc. Come let me know if you need')
    print(' me to join you again later."\n*\n"I\'ll leave all my things here - some ')
    print('of them might come in handy for you."')

    if partyHas(byte 4):
        wait()

        print('\n\nShe gives Iolo a big hug before she leaves.\n*\n"Remember to keep your')
        print(' socks dry," she says, "and I\'ll see you when the quest is done."')
    fi

    print('\n')
    bye()
