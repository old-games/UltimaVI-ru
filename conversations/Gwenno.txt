source("CONVERSE.A")
index(66)

id(66)
name("Gwenno")

description:
    print("a plainly dressed bard.\n*")

interaction:
    ('SETF', ('byte', 235), ('value', 0))

    if partyHas(byte 235):
    print("\"Is there something you needed to know?\"")

    else:
    print("\"Hello, $P.\"")

    endif

    print("\n")

    ask()
    case "name":
    print("\"It's me, Gwenno. You have been away from our realm a long time, haven't you...\"")
    jump 100

    case "job":
    print("\"Iolo's @apprentice has taken over my job at @Iolo's Bows.\"\n*\n\"These days I've been transcribing the folk @songs of Britannia into numerical @notation for the artisan's @guild.\"\n*\n")

    if partyHas(byte 235):
    print("\"Of course, helping you on your quest is more important than that right now.\"")

    else:
    print("\"Of course, if you need my help, I could leave the guild for a time and @join you.\"")

    endif

    jump 100

    case "arti,guil":
    print("\"@Selganor can tell you more about the guild than I could.\"")
    jump 100

    case "selg":
    print("\"He's the guildmaster.\"")
    jump 100

    case "join,help,ques":
    jump 1689

    case "leav":
    jump 2222

    case "folk,song":
    print("\"The songs of a people are an important part of their heritage.\"\n*\n\"Putting them down on paper helps preserve our @traditions for future generations.\"")
    jump 100

    case "heri,pape,trad,futu,gene":
    print("\"I'm so glad you appreciate the value of tradition.\"")
    jump 100

    case "iolo":
    print("\"A bit scruffy, but he's the sweetest husband I could ever ask for.\"")

    if isNearby(byte 4):
    wait()

    ('PORTRAIT', ('byte', 4))
    print("\n\nIolo says \"You're only saying that because it's true.\" He gives her a kiss.")
    wait()

    ('PORTRAIT', ('byte', 235))

    endif

    jump 100

    case "appr,bow":
    print("\"If you need a good crossbow, the shop is in Britain, over by the Blue @Boar.\"")
    jump 100

    case "blue,boar":
    print("\"It's a lively place.\"")
    jump 100

    case "nume,nota,tran":
    print("\"A number for every @note, and a note for every @number.\"")
    jump 100

    case "note":
    print("\"Each note is represented by one @number.\"")
    jump 100

    case "numb":
    print("\"Each number @represents one @note.\"")
    jump 100

    case "repr":
    print("\"I knew you'd catch on!\"")
    jump 100

    case "play,tune":
    print("\"Oh, Selganor sent you, did he? I bet you want to learn '@Stones.'\"")
    jump 100

    case "lear,ston":
    print("\"In the standard numerical notation, it reads '678987 8767653'.\"")
    jump 100

    case "bye":
    print("\"Nice talking with you.\"\n")
    bye()

    case "*":
    print("\"Sorry, can't help you there.\"")

    esac

    jump 100

1689:
    if partyHas(byte 235):
    print("\"I have joined you already!\"")
    jump 100

    endif

    print("\"Do you want me to come with you?\" ")

    askc("yn")
    case "n":
    print("\"Okay. Let me know if you need my help later.\"")
    jump 100

    esac

    integer(value 0) = partyJoin(byte 235)

    if equals(integer(value 0), byte 1):
    print("\n\"Not while you're in that thing!\"")
    jump 100

    endif

    if equals(integer(value 0), byte 2):
    print("\n\"You have enough travelling with you already.\"\n*\n\"If you ask one of them to @leave first, I'd be happy to join you.\"")
    jump 100

    endif

    if equals(integer(value 0), byte 3):
    jump 1694

    endif

    print("\n\"Okay! It will be nice to spend some time on the road again.\"")

    if partyHas(byte 4):
    wait()

    print("\n\nShe runs over and hooks arms with @Iolo, and they dance around and around.\n*\nThey're obviously very happy to see each other again.")

    endif

    print("\n")
    bye()

    if equals(partyHas(byte 235), byte 0):
    print("\"I'd have to @join you before I could leave, silly!\"")
    jump 100

    endif

    integer(value 0) = partyLeave(byte 235)

    if equals(integer(value 0), byte 1):
    print("\"Let's get our feet back on solid ground first, okay?\"")
    jump 100

    endif

    if equals(integer(value 0), byte 2):
    jump 2230

    endif

    print("\"All right. I'll head back home to Minoc. Come let me know if you need me to join you again later.\"\n*\n\"I'll leave all my things here - some of them might come in handy for you.\"")

    if partyHas(byte 4):
    wait()

    print("\n\nShe gives Iolo a big hug before she leaves.\n*\n\"Remember to keep your socks dry,\" she says, \"and I'll see you when the quest is done.\"")

    endif

    print("\n")
    bye()
