source('CONVERSE.B')
index(57)

id(156)
name({
    'english': 'Morchella',
    'russian': 'FIXME Morchella'
})

description:
    print({
        'english': 'a tough-looking woman with a walk like a troll.',
        'russian': 'FIXME a tough-looking woman with a walk like a troll.'
    })
    wait()

    print({
        'english': '\n',
        'russian': 'FIXME \n'
    })

interaction:
    print({
        'english': 'She stares insolently at you.\n',
        'russian': 'FIXME She stares insolently at you.\n'
    })

    ask()

    case {'english': 'name'}:
    case {'russian': 'FIXME name'}:
        print({
            'english': '"I\'m Morchella."',
            'russian': 'FIXME "I\'m Morchella."'
        })
        setBit(byte 235, value 0)
        jump label_91

    case {'english': 'job'}:
    case {'russian': 'FIXME job'}:
        print({
            'english': '"I be a retired @sailor, that I am.',
            'russian': 'FIXME "I be a retired @sailor, that I am.'
        })

        if partyHas(byte 2):
            print({
                'english': '"',
                'russian': 'FIXME "'
            })
            wait()

            portrait(byte 2)
            print({
                'english': '\n\n"Thou wert a @pirate!"',
                'russian': 'FIXME \n\n"Thou wert a @pirate!"'
            })
            wait()

            portrait(byte 235)
            print({
                'english': '\n\n"Well! How rude!" She turns up her nose and leaves.\n',
                'russian': 'FIXME \n\n"Well! How rude!" She turns up her nose and leaves.\n'
            })
            bye()
        fi

        print({
            'english': ' An honest one, mind ye."',
            'russian': 'FIXME  An honest one, mind ye."'
        })
        jump label_91

    case {'english': 'pira'}:
    case {'russian': 'FIXME pira'}:
        print({
            'english': '"I know nothing about that!" She walks off in a huff.\n',
            'russian': 'FIXME "I know nothing about that!" She walks off in a huff.\n'
        })
        bye()

    case {'english': 'hone'}:
    case {'russian': 'FIXME hone'}:
    case {'english': 'sail'}:
    case {'russian': 'FIXME sail'}:
        print({
            'english': '"That\'s right, me bucko. Why, I\'ve sailed with Lord @British and ',
            'russian': 'FIXME "That\'s right, me bucko. Why, I\'ve sailed with Lord @British and '
        })
        print({
            'english': 'Captain @John.',
            'russian': 'FIXME Captain @John.'
        })
        jump label_91

    case {'english': 'lord'}:
    case {'russian': 'FIXME lord'}:
    case {'english': 'brit'}:
    case {'russian': 'FIXME brit'}:
        print({
            'english': '"He walks with a limp, ye know. \'Fraid of mice, too, he is."',
            'russian': 'FIXME "He walks with a limp, ye know. \'Fraid of mice, too, he is."'
        })
        jump label_91

    case {'english': 'capt'}:
    case {'russian': 'FIXME capt'}:
    case {'english': 'john'}:
    case {'russian': 'FIXME john'}:
        print({
            'english': '"He offered to marry me but of course I refused. Didn\'t want to be ',
            'russian': 'FIXME "He offered to marry me but of course I refused. Didn\'t want to be '
        })
        print({
            'english': 'tied down."',
            'russian': 'FIXME tied down."'
        })
        jump label_91

    case {'english': 'map'}:
    case {'russian': 'FIXME map'}:
        print({
            'english': 'She looks around furtively first. "Well, now, I might have seen the ',
            'russian': 'FIXME She looks around furtively first. "Well, now, I might have seen the '
        })
        print({
            'english': 'likes of that in me travels..."',
            'russian': 'FIXME likes of that in me travels..."'
        })
        wait()

        print({
            'english': '\n"Tell ye what, matey:"',
            'russian': 'FIXME \n"Tell ye what, matey:"'
        })
        wait()

        print({
            'english': '\n\n"If ye give me a @shield of the Order of the Serpent, I\'ll tell ye ',
            'russian': 'FIXME \n\n"If ye give me a @shield of the Order of the Serpent, I\'ll tell ye '
        })
        print({
            'english': 'where that map be at."',
            'russian': 'FIXME where that map be at."'
        })
        jump label_91

    case {'english': 'cara'}:
    case {'russian': 'FIXME cara'}:
    case {'english': 'lad'}:
    case {'russian': 'FIXME lad'}:
        print({
            'english': '"I might even ask \'im to marry me." She winks slyly at you.',
            'russian': 'FIXME "I might even ask \'im to marry me." She winks slyly at you.'
        })
        jump label_91

    case {'english': 'bye'}:
    case {'russian': 'FIXME bye'}:
        print({
            'english': '"So long, matey."\n',
            'russian': 'FIXME "So long, matey."\n'
        })
        bye()

    case {'english': 'shie'}:
    case {'russian': 'FIXME shie'}:
    case {'english': 'serp'}:
    case {'russian': 'FIXME serp'}:
    case {'english': 'magi'}:
    case {'russian': 'FIXME magi'}:
        jump label_1013

    case '*':
        print({
            'english': '"Don\'t know what to say \'bout that, matey."',
            'russian': 'FIXME "Don\'t know what to say \'bout that, matey."'
        })
        jump label_91

label_1013:
        if hasBit(byte 235, byte 7):
            print({
                'english': '"Now all I need is a magic sword; then methinks I\'ll be a knight."',
                'russian': 'FIXME "Now all I need is a magic sword; then methinks I\'ll be a knight."'
            })
            jump label_91
        fi

        integer(value 0) = partyHasObject(byte 16, byte 0)

        if equals(integer(value 0), word 32769):
            print({
                'english': '"If I had a Silver Serpent shield, I\'d give it to @Caradon."',
                'russian': 'FIXME "If I had a Silver Serpent shield, I\'d give it to @Caradon."'
            })
            wait()

            print({
                'english': '\n\n"He\'s a fine, brave lad, he is."',
                'russian': 'FIXME \n\n"He\'s a fine, brave lad, he is."'
            })
            jump label_91
        fi

        print({
            'english': '"That be quite a prize there, matey. Will ye trade it to me for a bit ',
            'russian': 'FIXME "That be quite a prize there, matey. Will ye trade it to me for a bit '
        })
        print({
            'english': 'o\' map?" ',
            'russian': 'FIXME o\' map?" '
        })

        choice({
            'english': 'yn',
            'russian': 'FIXME yn'
        })

    case {'english': 'n'}:
    case {'russian': 'FIXME n'}:
        print({
            'english': '"Then leave me be!" She turns her back angrily on you and walks off.\n',
            'russian': 'FIXME "Then leave me be!" She turns her back angrily on you and walks off.\n'
        })
        bye()
    esac

    giveItem(byte 16, byte 0, integer(value 0), byte 235)
    setBit(byte 235, byte 7)
    giveItem(word 405, byte 0, byte 235, integer(value 0))
    print({
        'english': '\nFrom a little box Morchella hands over a piece of paper. It is a ',
        'russian': 'FIXME \nFrom a little box Morchella hands over a piece of paper. It is a '
    })
    print({
        'english': 'piece of the pirate map.',
        'russian': 'FIXME piece of the pirate map.'
    })
    wait()

    print({
        'english': '\n\n"I was going to give this magic shield to Caradon, but methinks I\'ll',
        'russian': 'FIXME \n\n"I was going to give this magic shield to Caradon, but methinks I\'ll'
    })
    print({
        'english': ' keep it for meself instead!"',
        'russian': 'FIXME  keep it for meself instead!"'
    })
    wait()

    print({
        'english': '\n\n"Good $T, $G." She walks off.\n',
        'russian': 'FIXME \n\n"Good $T, $G." She walks off.\n'
    })
    bye()
