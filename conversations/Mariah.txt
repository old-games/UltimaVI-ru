source("CONVERSE.A")
index(33)

id(33)
name("Mariah")

description:
    print("a freckled young lady with an enchanting smile.\n*")

interaction:
    if equals(hasBit(byte 235, byte 5), byte 0):
        jump 4126
    fi

    print("\"Good $T, $G, can I help thee?\"\n")

    ask()

    case "name":
        print("\"They call me Mariah.\"")
        ('SETF', ('byte', 235), ('value', 0))
        jump 106

    case "job":
        print("\"I'm the newest member of the @Council of Wizards. Somebody has to ")
        print("keep things running smoothly.\"\n*\n\"In my spare time I use the @library ")
        print("to pursue my own studies.\"")
        jump 106

    case "coun":
    case "wiza":
        print("\"They get so caught up in their work sometimes that they forget even ")
        print("to eat and @sleep!\"")
        jump 106

    case "eat":
    case "slee":
        print("\"Such things matter little to them. They often dwell apart from the ")
        print("realm of the @senses.\"")
        jump 106

    case "apar":
    case "dwel":
    case "real":
    case "sens":
        print("\"Aye, indeed.\"")
        jump 106

    case "libr":
    case "stud":
        print("\"'Tis the finest library in all Britannia.\"\n*\n\"I study many different ")
        print("things, but I find learning old languages the most interesting.\"\n*\n")
        print("\"One can learn so much about how our own language developed!\"")
        jump 106

    case "book":
        if equals(partyHasObject(byte 60, byte 0), word 32769):
            jump 1609
        fi

        if and(notEquals(partyHasObject(word 390, byte 0), word 32769), notEquals(partyHasObject(word 389, byte 0), word 32769)):
            jump 2292
        fi

        if equals(hasBit(byte 235, byte 7), byte 0):
            jump 1801
        fi

        jump 1177

    case "anci":
    case "deci":
    case "half":
    case "silv":
    case "tabl":
        if notEquals(partyHasObject(word 389, byte 0), word 32769):
            jump 1177
        fi

        print("\"I got my piece of the tablet from some gypsies whom I met at a pub.\"\n")
        print("*\n\"Mayhap they can tell thee where to look for the other piece.\"\n*\n")
        print("\"Bring both pieces of the tablet here and I will tell thee what I ")
        print("can.\"")
        jump 106

    case "bye":
        print("\"Fare thee well.\"\n")
        bye()

    case "*":
        print("\"I cannot help thee with that.\"")
    esac

    jump 106

1177:
    if equals(partyHasObject(byte 60, byte 0), word 32769):
        jump 1609
    fi

    if and(notEquals(partyHasObject(word 390, byte 0), word 32769), notEquals(partyHasObject(word 389, byte 0), word 32769)):
        jump 2292
    fi

    if and(notEquals(partyHasObject(word 390, byte 0), word 32769), equals(partyHasObject(word 389, byte 0), word 32769)):
        print("\"I must have both halves of the tablet before I can tell you any ")
        print("more.\"\n*\n\"This piece I have had for quite some time, and I've learned ")
        print("all I can from it.\"")
        jump 106
    fi

    if and(equals(partyHasObject(word 390, byte 0), word 32769), notEquals(partyHasObject(word 389, byte 0), word 32769)):
        print("\"Ah, thou hast found the rest of the tablet! Go get the other half ")
        print("from my study and bring it here.\"\n*\n\"With the two of them together I ")
        print("should be able to tell you more.\"")
        jump 106
    fi

    jump 1801

1609:
    print("\"Nystul sent word to me that thou hast a book written in a strange ")
    print("tongue.\"\n*\n\"I'd not mind looking at it for thee...\"\n*\n\"But I'd find ")
    print("the task much easier if thou wouldst bring it here!\"")
    jump 106

1801:
    ('SETF', ('byte', 235), ('byte', 7))
    print("\"I'd be glad to look at it for thee.\" She examines the book.\n*\n\"Oh! ")
    print("I've seen this script before!\"\n*\n\"I have part of an ancient silver ")
    print("tablet in my study with writing both in our language and this.\"\n*\n\"I ")
    print("have learned only a little from studying it, but I can make out a few ")
    print("words.\"\n*\n\"The title is 'The Book of Prophecies,' and it says ")
    print("something about 'the end of our world.'\"\n*\n\"If only I had the other ")
    print("half of the @tablet, perhaps I'd be able to decipher the rest of the ")
    print("book.\"")
    jump 106

2292:
    print("\"With both pieces of the tablet, I should be able to work out a ")
    print("translation.\"\n*\nShe studies the tablet for a while, and then starts ")
    print("reading, haltingly, from the book.\n*\n\nAn ancient prophecy tells of the")
    print(" final days, when the end of our world shall come.\n*\nThree signs will ")
    print("precede the end.\n\n*Thrice shall a being of great evil come unto our ")
    print("land, and by this it shall be known that the end is nigh.\n*\nThis evil ")
    print("one is of another race, who consider the evil one a great prophet.\n*\n")
    print("Yet this false prophet follows not the principles of Control, Passion ")
    print("and Diligence.\n*\nOne day the false prophet will come and desecrate our")
    print(" most holy shrine.\n*\nAnd the false prophet will steal our most holy ")
    print("artifact, the Codex of Ultimate Wisdom.\n*\nThis shall be the first sign")
    print(" of the end.\n*\nThen, it is written, the false prophet shall descend ")
    print("deep into the bowels of the earth.\n*\nAnd the false prophet will cause ")
    print("the underworld to collapse.\n*\nThis will cause great earthquakes to ")
    print("tear our world asunder, and there will be a time of plague and ")
    print("famine.*\n\nThis shall be the second sign of the end.\n*\nOne last time ")
    print("shall the false prophet come.\n*\nThis time, the false prophet will come")
    print(" with a band of warriors.\n*\nAnd they will destroy all that remains of ")
    print("the gargoyle race.\n*\nThere is only one way that this prophecy may be ")
    print("averted:\n*\nThat is by the sacrifice of the false prophet.\n*\n\nMariah ")
    print("pauses for a while, deep in thought.\n*\n\"When they refer to 'the false ")
    print("prophet,' they must mean you.\" she says.\n*\n\"It would seem that they ")
    print("have reason to think you evil, from their perspective.\"\n*\n\"This is a ")
    print("difficult matter to resolve. I think you'd better seek out more ")
    print("information.\"\n*\n\"There's a gargoyle named Sin'Vraal living out in the ")
    print("desert. He speaks our language.\"\n*\n\"Perhaps he could tell you more ")
    print("about this book, and of how the gargoyles view us.\"")
    jump 106

4126:
    print("\"I'm sorry to put you to the trouble, but I'm only supposed to help ")
    print("those who know the ways of magic.\"\n*\n\"So I have to ask you a question ")
    print("to test you...\"\n*\n")
    integer(value 6) = random(byte 1, byte 5)

    if equals(integer(value 6), byte 1):
        jump 4357
    fi

    if equals(integer(value 6), byte 2):
        jump 4503
    fi

    if equals(integer(value 6), byte 3):
        jump 4651
    fi

    if equals(integer(value 6), byte 4):
        jump 4798
    fi

    if equals(integer(value 6), byte 5):
        jump 4955
    fi

4357:
    print("\"What does the magic syllable 'Zu' mean?\"\n")

    ask()

    case "slee":
        jump 5102

    case "bye":
        jump 5165

    case "*":
        print("\"No, that's not it. Haven't you a Compendium of knowledge to draw ")
        print("on?\"*\n\n")
        jump 4357

        // Unreachable code!
    esac

4503:
    print("\"What does the magic syllable 'Quas' mean?\"\n")

    ask()

    case "illu":
        jump 5102

    case "bye":
        jump 5165

    case "*":
        print("\"No, that's not it. Haven't you a Compendium of knowledge to draw ")
        print("on?\"*\n\n")
        jump 4503

        // Unreachable code!
    esac

4651:
    print("\"What does the magic syllable 'Hur' mean?\"\n")

    ask()

    case "wind":
        jump 5102

    case "bye":
        jump 5165

    case "*":
        print("\"No, that's not it. Haven't you a Compendium of knowledge to draw ")
        print("on?\"*\n\n")
        jump 4651

        // Unreachable code!
    esac

4798:
    print("\"What does the magic syllable 'Jux' mean?\"\n")

    ask()

    case "dang":
    case "trap.harm":
        jump 5102

    case "bye":
        jump 5165

    case "*":
        print("\"No, that's not it. Haven't you a Compendium of knowledge to draw ")
        print("on?\"*\n\n")
        jump 4798

        // Unreachable code!
    esac

4955:
    print("\"What does the magic syllable 'Ort' mean?\"\n")

    ask()

    case "magi":
        jump 5102

    case "bye":
        jump 5165

    case "*":
        print("\"No, that's not it. Haven't you a Compendium of knowledge to draw ")
        print("on?\"*\n\n")
        jump 4955

        // Unreachable code!
    esac

5102:
    print("\"That's right! Now then, what can I help you with?\"")
    ('SETF', ('byte', 235), ('byte', 5))
    jump 106

5165:
    print("\"I'd suggest you find a Compendium to study, then come talk to me ")
    print("again.\"\n")
    bye()
