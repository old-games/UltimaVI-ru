source('CONVERSE.B')
index(71)

id(170)
name({
    'english': 'Lensmaker',
    'russian': 'Мастер линз'
})

description:
    print({
        'english': 'a very old gargoyle.',
        'russian': 'очень старую горгулью.'
    })

interaction:
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

    if equals(integer(value 21), byte 0):
        print({
            'english': 'The gargoyle gasps in terror and wheezes, "An-bal-sil-fer!"',
            'russian': 'Горгулья задыхается от ужаса и хрипит: "Ан-бал-сил-фер!"'
        })
        wait()

        print({
            'english': '\n\nThen he faints dead away!\n',
            'russian': '\n\nА затем падает в обморок!\n'
        })
        do(byte 235, byte 145)
        bye()
    fi

    if notEquals(partyHasObject(byte 76, byte 0), byte 1):
        print({
            'english': 'The gargoyle gasps in terror and wheezes, "The False Prophet!"',
            'russian': 'Горгулья задыхается от ужаса и хрипит: "Лжепророк!"'
        })
        wait()

        print({
            'english': '\n\nThen he faints dead away!\n',
            'russian': '\n\nА затем падает в обморок!\n'
        })
        do(byte 235, byte 145)
        bye()
    fi

    if equals(hasBit(byte 235, value 0), byte 0):
        print({
            'english': 'The venerable gargoyle peers at you.',
            'russian': 'Почтенная горгулья пристально смотрит на вас.'
        })
        wait()

        print({
            'english': '\n\n"Greetings, False Prophet."',
            'russian': '\n\n"Приветствую, Лжепророк".'
        })
        wait()

        print({
            'english': '\n\n"To have been told by @Naxatilor, long ago, that the you would one ',
            'russian': '\n\n"Давным-давно @Наксатилор сказал мне, что однажды '
        })
        print({
            'english': 'day come to me, wearing the Amulet of Submission."',
            'russian': 'ты придёшь ко мне, надев Амулет Покорности".'
        })
        wait()

        print({
            'english': '\n\n"To never have believed it would come to pass."',
            'russian': '\n\n"Никогда не верил, что это произойдет".'
        })
        wait()

        print({
            'english': '\n\n"To ask what service I can perform?"',
            'russian': '\n\n"Спросить, какую услугу я могу оказать?"'
        })
        setBit(byte 235, value 0)
        jump label_805
    fi

    if equals(hasBit(byte 235, byte 2), byte 0):
        print({
            'english': '"To ask how again I may help you?"',
            'russian': '"Спросить, чем я ещё могу вам помочь?"'
        })
        jump label_805
    fi

    integer(value 0) = partyHasObject(word 395, byte 0)

    if equals(integer(value 0), word 32769):
        print({
            'english': '"To wonder why you have not brought back the broken lens?!"',
            'russian': '"Удивляться, почему вы не вернули сломанную линзу?!"'
        })
        wait()

        print({
            'english': '\n\n"To have already told you that I need it in order to craft a new ',
            'russian': '\n\n"Уже сказал вам, что она нужна мне для того, чтобы изготовить '
        })
        print({
            'english': 'one!"',
            'russian': 'новую!"'
        })
        wait()

        print({
            'english': '\n\n"To ask what you think I can do without it?"',
            'russian': '\n\n"Спросить, что, по-вашему, я смогу без неё сделать?"'
        })
        jump label_805

    else:
        jump label_1806
    fi

label_805:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'vort':
    case {'russian': 'вихр'}:
    case 'lens':
    case {'russian': 'линз'}:
        integer(value 0) = partyHasObject(word 395, byte 0)

        if equals(integer(value 0), word 32769):
            print({
                'english': '"To remember little from so long ago," the gargoyle croaks.',
                'russian': '"Помнить немногое из того, что было так давно", - хрипит горгулья.'
            })
            wait()

            print({
                'english': '\n\n"To require the pieces of the lens in order to make a new copy."',
                'russian': '\n\n"Потребовать осколки линзы, чтобы сделать новую копию".'
            })
            setBit(byte 235, byte 2)
            jump label_805

        else:
            jump label_1806
        fi

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"To lack a name, of course."',
            'russian': '"Конечно, не иметь имени".'
        })
        wait()

        print({
            'english': '\n\n"But to be called Lor-wis-lem, the scholar of light, by many learned',
            'russian': '\n\n"Но многие учёные горгульи называли меня Лор-вис-лем, учёный'
        })
        print({
            'english': ' gargoyles."',
            'russian': ' света".'
        })
        wait()

        print({
            'english': '\n\nAs he says this, the ancient gargoyle beams with pride.',
            'russian': '\n\nКогда он произносит это, древняя горгулья сияет от гордости.'
        })
        jump label_805

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"To craft the finest lenses in the land," the gargoyle says proudly.',
            'russian': '"Создавать лучшие линзы в стране", - гордо говорит горгулья.'
        })
        wait()

        print({
            'english': '\n\n"Also to teach my young @apprentices not to cut themselves on the ',
            'russian': '\n\n"А также учить моих молодых @учеников не резать себя '
        })
        print({
            'english': 'glass!"',
            'russian': 'стеклом!"'
        })
        jump label_805

    case 'teac':
    case {'russian': 'учит'}:
    case 'youn':
    case {'russian': 'моло'}:
    case 'appr':
    case {'russian': 'учен'}:
        print({
            'english': '"To be nearing the end of my @time."',
            'russian': '"Приближаться к концу своего @времени".'
        })
        wait()

        print({
            'english': '\n\n"To have one last sacred duty:"',
            'russian': '\n\n"Иметь последний священный долг:"'
        })
        wait()

        print({
            'english': '\n\n"To pass on my skill to the next generation."',
            'russian': '\n\n"Передать своё мастерство следующему поколению".'
        })
        jump label_805

    case 'end':
    case {'russian': 'конц'}:
    case 'time':
    case {'russian': 'врем'}:
        print({
            'english': '"To be over a thousand years old."',
            'russian': '"Быть старше тысячи лет".'
        })
        wait()

        print({
            'english': '\n\n"To seem a mere youth compared to @Naxatilor, however."',
            'russian': '\n\n"Казаться просто юношей по сравнению с @Наксатилором, однако".'
        })
        jump label_805

    case 'naxa':
    case {'russian': 'накс'}:
        print({
            'english': '"To have helped Naxatilor create the Vortex Lens, centuries ago."',
            'russian': '"Помочь Наксатилору создать Вихревую Линзу много веков назад".'
        })
        wait()

        print({
            'english': '\n\n"To have found him venerable and ancient even then!"',
            'russian': '\n\n"Найти его почтенным и древним даже тогда!"'
        })
        jump label_805

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"To be honored to have helped you, False Prophet."\n',
            'russian': '"Для меня большая честь помочь вам, Лжепророк".\n'
        })
        bye()

    case '*':
        print({
            'english': '"To be old. To suggest you ask that of others."',
            'russian': '"Быть старым. Предложить вам спросить об этом других".'
        })
        jump label_805
    esac

label_1806:
    print({
        'english': '"To see the shattered Vortex Lens you carry."',
        'russian': '"Увидеть разбитую Вихревую линзу, которую вы носите с собой".'
    })
    wait()

    print({
        'english': '\n\n"To remember making it, so very long ago."',
        'russian': '\n\n"Вспомнить, как я её делал, так давно".'
    })
    wait()

    print({
        'english': '\n\n',
        'russian': '\n\n'
    })
    destroyItem(integer(value 0), word 395, byte 0, byte 1)
    print({
        'english': 'Taking the shards of glass, the lensmaker turns to his grinding table.',
        'russian': 'Собрав осколки стекла, мастер линз поворачивается к своему шлифовальному столу.'
    })
    wait()

    print({
        'english': '\n\nIn a short while, he has crafted a new Vortex Lens!',
        'russian': '\n\nВскоре он изготовил новую Вихревую линзу!'
    })
    wait()

    print({
        'english': '\n\n"To have far greater skill now than when first I made this lens," he',
        'russian': '\n\n"Иметь гораздо большее мастерство сейчас, чем когда я впервые сделал эту линзу", - самодовольно'
    })
    print({
        'english': ' says smugly.',
        'russian': ' говорит он.'
    })
    wait()

    print({
        'english': '\n\n"To require little time to repair it."',
        'russian': '\n\n"Тратить мало времени на её починку".'
    })
    wait()

    print({
        'english': '\n\nHe hands you the restored Vortex Lens.',
        'russian': '\n\nОн вручает вам восстановленную Вихревую линзу.'
    })
    createItem(integer(value 0), word 396, byte 0, byte 1)
    clearBit(byte 235, byte 2)
    jump label_805
