source('CONVERSE.A')
index(97)

id(97)
name({
    'english': 'Katrina',
    'russian': 'Катрина'
})

description:
    print({
        'english': 'the humble peasant Katrina.',
        'russian': 'скромную крестьянку Катрину.'
    })

interaction:
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

    if partyHas(byte 235):
        print({
            'english': '"I\'m but a simple peasant, $G."',
            'russian': '"Я всего лишь простая крестьянка, $G".'
        })
        wait()

        print({
            'english': '\n\n"I doubt I could help in this situation."',
            'russian': '\n\n"Сомневаюсь, что смогу помочь в этой ситуации".'
        })
        jump label_830
    fi

    if hasBit(byte 235, byte 2):
        print({
            'english': '"Good $T, $G. Wilt thou allow me to follow you again?" ',
            'russian': '"Доброго $T, $G. Позволите ли вы мне снова последовать за вами?" '
        })

        choice({
            'english': 'yn',
            'russian': 'дн'
        })

        case 'y':
        case {'russian': 'д'}:
            print({
                'english': '"Command me to @join and I will, $G."',
                'russian': '"Прикажите мне @присоединиться, и я сделаю это, $G".'
            })
            jump label_830

        case 'n':
        case {'russian': 'н'}:
            print({
                'english': '"As thou deem best, $G."',
                'russian': '"Как вы сочтёте нужным, $G".'
            })
            jump label_830
        esac
    fi

    if hasBit(byte 235, value 0):
        print({
            'english': '"Good $T, $G! I hope thou hast fared well in thy travels?" ',
            'russian': '"Доброго $T, $G! Надеюсь, ты хорошо справляешься со своими путешествиями?" '
        })

        choice({
            'english': 'yn',
            'russian': 'дн'
        })

        case 'y':
        case {'russian': 'д'}:
            print({
                'english': '"The land rejoices when all is well with the Avatar!"',
                'russian': '"Страна радуется, когда у Аватара всё хорошо!"'
            })
            jump label_830

        case 'n':
        case {'russian': 'н'}:
            print({
                'english': '"If there is aught a humble peasant can do to help, I am yours to ',
                'russian': '"Если есть что-то, что может сделать скромный крестьянин, чтобы помочь, в вашем '
            })
            print({
                'english': 'command."',
                'russian': 'распоряжении".'
            })
            jump label_830
        esac
    fi

    print({
        'english': '"$P! I had heard that thou hadst returned to our land, but I dared not',
        'russian': '"$P! Я слышала, что ты вернулся в нашу страну, но не смела в'
    })
    print({
        'english': ' believe it!"',
        'russian': ' это поверить!"'
    })
    setBit(byte 235, value 0)
    wait()

    print({
        'english': '\n\n"Hast thou returned to save our land from the @gargoyles?" ',
        'russian': '\n\n"Ты вернулся, чтобы спасти нашу землю от @горгулий?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        print({
            'english': '"Then surely we are saved already!"',
            'russian': '"Тогда мы, конечно, уже спасены!"'
        })

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"Then perhaps the crisis is not so severe as rumor says."',
            'russian': '"Тогда, возможно, кризис не так серьёзен, как говорят слухи".'
        })
    esac

    wait()

    print({
        'english': '\n\n"If there is aught a humble peasant might do to aid thy quest, $G, I',
        'russian': '\n\n"Если есть что-то, что может сделать скромный крестьянин, чтобы помочь тебе в твоих поисках, $G, то'
    })
    print({
        'english': ' am yours to command."',
        'russian': ' я в вашем распоряжении".'
    })

label_830:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"I am called Katrina, $G, as I was the last time we met."',
            'russian': '"Меня зовут Катрина, $G, как и во время нашей последней встречи".'
        })
        jump label_830

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"Times have changed, $G. Where once I grazed sheep, now I till the ',
            'russian': '"Времена изменились, $G. Там, где раньше я пасла овец, теперь я обрабатываю '
        })
        print({
            'english': 'land."',
            'russian': 'землю".'
        })
        wait()

        print({
            'english': '\n"All work is the same to a peasant, $G."',
            'russian': '\n"Вся работа одинакова для крестьянина, $G".'
        })
        wait()

        print({
            'english': '\n"We all do what is expected of us."',
            'russian': '\n"Мы все делаем то, что от нас ожидают".'
        })

        if equals(partyHas(byte 235), byte 0):
            wait()

            print({
                'english': '\n\n"If thou wouldst have me @join thy quest, thou needst but ask."',
                'russian': '\n\n"Если ты хочешь, чтобы я @присоединилась к твоим поискам, тебе нужно только попросить".'
            })
        fi

        jump label_830

    case 'join':
    case {'russian': 'прис'}:
        if partyHas(byte 235):
            print({
                'english': '"Surely I misunderstand thee, $G."',
                'russian': '"Я определённо неправильно тебя понимаю, $G".'
            })
            wait()

            print({
                'english': '\n\n"Am I not already a member of thy band?"',
                'russian': '\n\n"Разве я уже не в составе твоей группы?"'
            })
            jump label_830
        fi

        integer(value 0) = partyJoin(byte 235)

        if equals(integer(value 0), byte 0):
            print({
                'english': '"Since thou dost think it wise, I wilt join."',
                'russian': '"Поскольку ты считаешь это разумным, я присоединюсь".'
            })
            wait()

            print({
                'english': '\n\n"I hope I can aid thy quest."\n',
                'russian': '\n\n"Надеюсь, я смогу помочь тебе в твоих поисках".\n'
            })
            setBit(byte 235, byte 2)
            bye()
        fi

        if equals(integer(value 0), byte 2):
            print({
                'english': '"I hesitate to deny any request thou might have."',
                'russian': '"Я не решаюсь отказать тебе в любой твоей просьбе".'
            })
            wait()

            print({
                'english': '\n\n"But thou seemst to have enough companions as it is."',
                'russian': '\n\n"Но у тебя, кажется, и так достаточно компаньонов".'
            })
            wait()

            print({
                'english': '\n\n"Mayhap if one of them left your band, thou might have more need of ',
                'russian': '\n\n"Может быть, если бы кто-то из них покинул твою группу, я была бы тебе '
            })
            print({
                'english': 'me."',
                'russian': 'нужнее".'
            })
            jump label_830

        else:
            print({
                'english': '"But $G, there is no need to join you here, aboard ship."',
                'russian': '"Но $G, нет необходимости присоединяться к тебе здесь, на борту корабля".'
            })
            wait()

            print({
                'english': '\n\n"There is no place else to go!"',
                'russian': '\n\n"Здесь больше некуда идти!"'
            })
            wait()

            print({
                'english': '\n\n"Mayhap if thou asked again ashore."',
                'russian': '\n\n"Может быть, если ты спросишь ещё раз на берегу".'
            })
            jump label_830
        fi

    case 'leav':
    case {'russian': 'поки'}:
        integer(value 0) = partyLeave(byte 235)

        if or(equals(integer(value 0), byte 0), equals(integer(value 0), byte 2)):
            print({
                'english': '"Whatever thou thinkest best, $G. I\'ll leave my equipment with thee."\n',
                'russian': '"Как ты считаешь нужным, $G. Я оставлю тебе своё снаряжение".\n'
            })
            bye()

        else:
            print({
                'english': '"But $G, there is no place for me to go."',
                'russian': '"Но $G, мне некуда уйти".'
            })
            wait()

            print({
                'english': '\n\n"Mayhap this should wait until we are ashore."',
                'russian': '\n\n"Может быть, с этим стоит подождать, пока мы не сойдём на берег".'
            })
            jump label_830
        fi

    case 'garg':
    case {'russian': 'горг'}:
        print({
            'english': '"The gargoyles are a grave threat to the land, $G."',
            'russian': '"Горгульи представляют серьёзную угрозу для страны, $G".'
        })
        wait()

        print({
            'english': '\n\n"Many brave soldiers have died defending us from the invaders!"',
            'russian': '\n\n"Многие храбрые солдаты погибли, защищая нас от захватчиков!"'
        })
        jump label_830

    case 'humb':
    case {'russian': 'крот'}:
    case 'humi':
    case {'russian': 'скро'}:
    case 'most':
    case {'russian': 'самы'}:
        print({
            'english': '"I am most sorry, $G, but I cannot answer thy question."',
            'russian': '"Мне очень жаль, $G, но я не могу ответить на твой вопрос".'
        })
        wait()

        print({
            'english': '\n\n"\'Twould be vain of me to answer truthfully, and \'twould be worse to',
            'russian': '\n\n"С моей стороны было бы тщеславно отвечать правдиво, и еще хуже было бы'
        })
        print({
            'english': ' lie."',
            'russian': ' солгать".'
        })
        jump label_830

    case 'bye':
    case {'russian': 'пока'}:
        if partyHas(byte 235):
            print({
                'english': '"May we live up to the trust placed in us."\n',
                'russian': '"Да оправдаем мы оказанное нам доверие".\n'
            })

        else:
            print({
                'english': '"Farewell! The Avatar carries with him the hopes of all the land."\n',
                'russian': '"Прощай! Аватар несёт с собой надежды всей страны".\n'
            })
        fi

        bye()

    case '*':
        if random(byte 0, byte 1):
            print({
                'english': '"A peasant such as myself knows little about $Z, $G."',
                'russian': '"Такая крестьянка, как я, мало что знает о $Z, $G".'
            })

        else:
            print({
                'english': '"Beg pardon, $G?"',
                'russian': '"Прошу прощения, $G?"'
            })
        fi

        jump label_830
    esac
