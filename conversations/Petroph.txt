source('CONVERSE.B')
index(20)

id(119)
name('Petroph')

description:
    print('a giant of a man with a solemn stare.')
    wait()

    print('\n')

interaction:
    if hasBit(byte 235, value 1):
        print('"What you back for? I thought you not like my @inn."\n')
        jump label_154
    fi

    if hasBit(byte 235, value 0):
        print('"Heylo again."\n')

    else:
        print('"Heylo to you."\n')
    fi

label_154:
    ask()

    case 'name':
        print('"@Petroph."\n')
        ('SETF', ('byte', 235), ('value', 0))
        jump label_154

    case 'petr':
        print('"Da, Petroph."\n')
        jump label_154

    case 'job':
        print('"I am keeping the @inn, here at King\'s Ransom."\n')
        jump label_154

    case 'inn':
    case 'room':
        jump label_401

    case 'bye':
        if hasBit(byte 235, value 1):
            print('"Da, goodbye and good riddance!"\n')

        else:
            print('"Have a nice day."\n')
        fi

        bye()

    case '*':
        print('"You speak too quick. What was that?"\n')
        jump label_154
    esac

    // Unreachable code!
    jump label_154

label_401:
    integer(value 0) = multiply(plus(integer(value 23), byte 1), byte 6)
    print('"#0 gold for you to stay and have meal, good?" ')

    choice('yn')

    case 'y':
        if less(objectsCount(byte 1, byte 88), integer(value 0)):
            print('"Must pay in advance for rooms. Sorry, is policy."\n')
            jump label_154
        fi

        ('DELETE', ('byte', 1), ('byte', 88), ('byte', 0), ('integer', [('value', 0)]))
        ('CLEARF', ('byte', 235), ('value', 1))
        print('You sleep in a comfortable bed...\n')
        sleep()

        print('\nYou wake rested and eat a large breakfast.')
        wait()

        print('\n\n"Good morning to you."\n')
        jump label_154

    case 'n':
        print('"What, maybe you don\'t like my inn?"')
        wait()

        print('\n\n"Well, maybe I don\'t like you either!"\n')
        ('SETF', ('byte', 235), ('value', 1))
        jump label_154
    esac
