source('CONVERSE.A')
index(69)

id(69)
name('Aaron')

description:
    print('a plump blond man with curly blond hair and a cheerful face.')
    wait()

interaction:
    print('\n')

    if hasBit(byte 235, value 0):
        print('"Hello again, Avatar!"')

    else:
        print('"Hello hello!"')
    fi

    wait()

    print('\n\n"What can I do for you this $T?"\n')

    ask()

    case 'name':
        if hasBit(byte 235, value 0):
            print('"That\'s funny. I remember your name!"')

        else:
            print('"My name\'s Aaron."')
            setBit(byte 235, value 0)
        fi

        jump label_150

    case 'job':
        print('"I run the sawmill! Is there anything I can do for thee?"')
        jump label_150

    case 'saw':
        print('"Yes, I saw logs into @boards."')
        jump label_150

    case 'boar':
    case 'log':
        if notEquals(integer(value 32), byte 144):
            print('"Come to my shop when I\'m open!"')
            jump label_150
        fi

        integer(value 0) = partyHasObject(word 274, byte 0)

        if equals(integer(value 0), word 32769):
            print('"My mill makes smooth boards and planks out of rough-cut logs."')
            jump label_150
        fi

        look(integer(value 0))
        print('"Aye, I see $Y has a yew log." He inspects the wood with a practiced ')
        print('eye.')
        wait()

        print('\n\n"Good grain. Yes, I can make a fine board out of this log."')
        wait()

        print('\n\n"But it will cost thee 5 gold, $Y!"\n\n"Still interested?" ')
        jump label_733

    case 'bye':
        print('"Farewell!"\n')
        setBit(byte 235, value 0)
        bye()

    case '*':
        print('"Beg pardon?"')
        jump label_150
    esac

label_733:
    choice('yn')

    case 'y':
        if less(objectsCount(integer(value 0), byte 88), byte 5):
            print('"Sorry, but I can\'t work for free!"')
            wait()

            print('\n\n"Come back when you have the 5 gold!"')
            jump label_150
        fi

        destroyItem(integer(value 0), word 274, byte 0, byte 1)
        destroyItem(integer(value 0), byte 88, byte 0, byte 5)
        print('Aaron goes to his saw and turns the log into a flat, sanded board.')
        wait()

        print('\n\n"There!" He hands $Y the finished product.')
        createItem(integer(value 0), word 277, byte 0, byte 1)
        jump label_150

    case 'n':
        print('"Oh. Well, perhaps some other time then."')
        jump label_150
    esac
