source('CONVERSE.A')
index(9)

id(9)
name('Sherry')

description:
    print('a cute little mouse.')
    wait()

    print('\n')

interaction:
    if partyHas(byte 235):
        jump label_1356
    fi

    print('"Squeak, squeak, @squeak!"')

    if and(equals(hasBit(byte 235, byte 7), byte 0), partyHas(byte 2)):
        wait()

        ('PORTRAIT', ('byte', 2))
        print('\n\n"Talking to a mouse?" says Dupre.')
        wait()

        print('\n\n"Methinks you\'re starting to imagine things..."')
        wait()

        ('PORTRAIT', ('byte', 235))
        ('SETF', ('byte', 235), ('byte', 7))
    fi

label_186:
    print('\n')

    ask()

    case 'sque':
        print('"Squeak @squirk?"')
        jump label_186

    case 'fibl':
    case 'nitt':
    case 'squi':
        print('"Squeeeeek!"')
        jump label_186

    case 'boo':
    case 'cat':
    case 'meow':
        print('"Eeeek!"')
        jump label_1347

    case 'name':
        print('"I am Lord @British\'s friend, @Sherry."')
        ('SETF', ('byte', 235), ('value', 0))
        jump label_906

    case 'brit':
    case 'lord':
        print('"He reads me bedtime @stories every night."')
        jump label_906

    case 'bed':
    case 'nigh':
    case 'stor':
        print('"He knows the one about @Hubert the Lion by Heart!"')
        jump label_906

    case 'hube':
    case 'lion':
        print('"That\'s my favorite story."')
        jump label_906

    case 'sher':
        print('"Pleased to meet you!"')
        jump label_906

    case 'help':
    case 'hole':
    case 'join':
    case 'mous':
    case 'rune':
        if hasBit(byte 235, byte 5):
            jump label_1159

        else:
            print('"Give me some @cheese and ask me again."')
            ('SETF', ('byte', 235), ('byte', 6))
            jump label_186
        fi

    case 'bles':
    case 'dust':
    case 'gesh':
    case 'kerc':
    case 'snee':
        print('"I wish people would clean up under their beds and cabinets..."')
        wait()

        print('\n\n"Dust mice are no friends of mine!"')
        jump label_906

    case 'chee':
        jump label_922

    case 'bye':
        if equals(hasBit(byte 235, byte 6), byte 0):
            print('"Nitters @fiblik."')

        else:
            print('"Come visit me again soon!"')
        fi

        print('\n')
        bye()

    case '*':
        if greater(random(byte 1, byte 7), byte 5):
            print('"Kerchew!"')

        else:
            print('The mouse wiggles its whiskers at you.')
        fi
    esac

    jump label_186

label_906:
    if hasBit(byte 235, byte 5):
        jump label_186
    fi

    wait()

    print('\n\n"Do you have any cheese?" ')
    ('SETF', ('byte', 235), ('byte', 6))

    choice('yn')

    case 'n':
        print('"Oh, that\'s too bad."')
        jump label_1347
    esac

    if notEquals(partyHasObject(byte 132, byte 0), word 32769):
        jump label_1039

    else:
        print('\n"I don\'t smell any cheese!"')
        jump label_1347
    fi

label_1039:
    print('\n"Can I have some?" ')

    choice('yn')

    case 'n':
        print('"Well, you\'re no fun."')
        jump label_1347

    case 'y':
        ('DELETE', ('partyHasObject', [('byte', 132), ('byte', 0)]), ('byte', 132), ('byte', 0), ('byte', 1))
        ('NEW', ('byte', 235), ('byte', 132), ('byte', 0), ('byte', 1))
        print('"Thank you very much!"')
        ('SETF', ('byte', 235), ('byte', 5))
        jump label_186
    esac

label_1159:
    print('"I can help you! Do you want me to come with you?" ')

    choice('yn')

    case 'n':
        print('"Ok."')
        jump label_906

    case 'y':
        integer(value 0) = partyJoin(byte 235)

        if equals(integer(value 0), byte 0):
            print('"Great!"\n')
            bye()
        fi

        if equals(integer(value 0), byte 1):
            print('"Boats make me seasick."')
            jump label_186
        fi

        if equals(integer(value 0), byte 2):
            print('"With that many people I\'d get trampled!"')
            jump label_186
        fi
    esac

label_1347:
    ('WORKTYPE', ('byte', 235), ('byte', 154))
    print('\n')
    bye()

label_1356:
    print('"Travelling with you is fun! I hope we find some more cheese soon."\n')

    ask()

    case 'name':
        print('"I am Lord @British\'s friend, @Sherry."')
        jump label_1423

    case 'brit':
    case 'lord':
        print('"He used to read me bedtime @stories every night."')
        jump label_1423

    case 'bed':
    case 'nigh':
    case 'stor':
        print('"He knows the one about @Hubert the Lion by Heart!"')
        jump label_1423

    case 'hube':
    case 'lion':
        print('"That\'s my favorite story."')
        jump label_1423

    case 'sher':
        print('"Pleased to meet you!"')
        jump label_1423

    case 'job':
        print('"I can slip through openings that are too small for you to fit ')
        print('through!"')
        jump label_1423

    case 'bye':
        jump label_1804

    case '*':
        print('"You\'re funny!"')
    esac

    jump label_1423

label_1804:
    print('"Oh, goodbye. Does this mean you want me to go home now?" ')

    choice('yn')

    case 'n':
        print('"Okay."\n')
        bye()
    esac

    integer(value 0) = partyLeave(byte 235)

    if equals(integer(value 0), byte 1):
        print('"I\'m not leaving until we get out of this thing!"')
        jump label_186
    fi

    print('\n"All right. Now I can hear my bedtime stories again!"\n*\n"I\'ll leave ')
    print('my stuff with you in case you need it."\n')
    bye()
