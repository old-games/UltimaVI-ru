source('CONVERSE.A')
index(54)

id(54)
name({
    'english': 'Ben',
    'russian': 'Бен'
})

description:
    print({
        'english': 'a man as large as the trees that surround his cottage.',
        'russian': 'Крупный мужчина, своими размерами напоминающий дерево вроде тех, что окружают его дом.'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

interaction:
    if equals(integer(value 32), byte 143):
        jump label_226
    fi

    if and(hasBit(byte 235, value 0), equals(hasBit(byte 235, value 1), byte 0)):
        print({
            'english': '"You\'re welcome here."',
            'russian': '"Добро пожаловать".'
        })
        jump label_495
    fi

    print({
        'english': '"Why you bargin\' inta my house?" he shouts.',
        'russian': '"Что вам нужно у меня дома?" - кричит он.'
    })
    setBit(byte 235, value 1)
    wait()

    print({
        'english': '\n\nHefting his large axe, he prepares to defend his home.\n',
        'russian': '\n\nС топором в руках он готовится защищать свой дома.\n'
    })
    bye()

label_226:
    if hasBit(byte 235, value 1):
        print({
            'english': '"Hah, sneakin\' around in my @forest, huh?"',
            'russian': '"Ошиваешься в моём @лесу, значит?"'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
    fi

    if equals(hasBit(byte 235, value 0), byte 0):
        print({
            'english': '"I told the last one of ya that came by that I\'ll have nothin\' t\'do ',
            'russian': '"А я говорил последнему из вас, кто приходил, что мне нет '
        })
        print({
            'english': 'with yer @wars, so shove off!"',
            'russian': 'дела до ваших @войн, так что проваливай!"'
        })
        setBit(byte 235, value 0)
        setBit(byte 235, value 1)
        jump label_495
    fi

    if hasBit(byte 235, value 1):
        print({
            'english': '\n\n"I told ya once already that I want to be left @alone!"',
            'russian': '\n\n"Я же просил оставить меня в @покое!"'
        })

    else:
        print({
            'english': '"Hullo again, friend."',
            'russian': '"И снова здравствуй, друг".'
        })
    fi

    jump label_495

label_495:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"Ben. My @friends call me Big Ben."',
            'russian': '"Бен. Мои @друзья зовут меня Большой Бен".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })

        if hasBit(byte 235, value 1):
            print({
                'english': '"But you ain\'t one of my friends."',
                'russian': '"Но тебя нет среди моих друзей".'
            })

        else:
            print({
                'english': '"I guess you can call me \'Big Ben\'." He smiles broadly.',
                'russian': '"Можешь звать меня \'Большой Бен\'", - его лицо озаряет широкая улыбка.'
            })
        fi

        jump label_495

    case 'big':
    case {'russian': 'бол'}:
        if hasBit(byte 235, value 1):
            print({
                'english': 'He fires a look at you. "I said only my @friends call me that."',
                'russian': 'Он метает на вас взгляд. "Только мои @друзья могут так меня звать".'
            })

        else:
            print({
                'english': '"\'Tis my name. Don\'t wear it out." He laughs resoundingly at his wit.',
                'russian': '"Так меня зовут, да. Не злоупотребляй", - он начинает смеяться от своего остроумия.'
            })
        fi

        jump label_495

    case 'ben':
    case {'russian': 'бен'}:
        print({
            'english': '"\'Tis my name. Don\'t wear it out." He laughs resoundingly at his wit.',
            'russian': '"Так меня зовут, да. Не злоупотребляй", - он начинает смеяться от своего остроумия.'
        })
        jump label_495

    case 'frie':
    case {'russian': 'дру'}:
        print({
            'english': '"It surprises you that I would have some."',
            'russian': '"Тебя удивляет, что у меня могут быть друзья".'
        })
        wait()

        print({
            'english': '\n\n"Sometimes it surprises me too." He laughs.',
            'russian': '\n\n"Иногда меня это тоже удивляет", - смеётся он.'
        })
        jump label_495

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"Have ya never seen a lumberman before?"',
            'russian': '"Приходилось видеть дровосека раньше?"'
        })
        wait()

        print({
            'english': '\n\n"Look around. Those stacks o\' @wood don\'t cut themselves."',
            'russian': '\n\n"Осмотрись. Эти @деревья сами себя не нарубят".'
        })
        jump label_495

    case 'fore':
    case {'russian': 'лес'}:
        print({
            'english': '"Aye, this is where I cut trees, and I don\'t like strangers wanderin\' ',
            'russian': '"Ага, там я и рублю деревья. А ещё я терпеть не могу, когда тут шатаются '
        })
        print({
            'english': 'through!"',
            'russian': 'незнакомцы!"'
        })

        if equals(hasBit(byte 235, value 1), byte 0):
            wait()

            print({
                'english': '\n\n"You\'re welcome here, though."',
                'russian': '\n\n"Однако я рад тебя видеть здесь".'
            })
        fi

        jump label_495

    case 'war':
    case {'russian': 'вой'}:
    case 'alon':
    case {'russian': 'один'}:
        print({
            'english': '"Ever since I won that choppin\' contest, the @king\'s had a notion I\'d ',
            'russian': '"С тех пор, как я победил в турнире дровосеков, @королю показалось, '
        })
        print({
            'english': 'be good at wittlin\' on men the same way."',
            'russian': 'что я также ловко буду рубить людей".'
        })
        wait()

        print({
            'english': '\n\n"Well, you can tell him I\'m not interested."',
            'russian': '\n\n"Что ж, можешь передать ему, мне это неинтересно".'
        })
        jump label_495

    case 'king':
    case {'russian': 'коро'}:
        print({
            'english': '"You are from the king, ain\'t ya?"',
            'russian': '"Тебе прислал король, что ли?"'
        })
        jump label_1623

    case 'buy':
    case {'russian': 'куп'}:
    case 'wood':
    case {'russian': 'дере'}:
    case 'log':
    case {'russian': 'пол'}:
    case 'yew':
    case {'russian': 'тис'}:
        print({
            'english': '"Aye, are ya here to buy a log?" ',
            'russian': '"Ага, ты здесь, чтобы купить полено?" '
        })
        jump label_1697

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"Careful in those woods now.',
            'russian': '"В этих лесах теперь нужно быть осторожнее.'
        })

        if hasBit(byte 235, value 1):
            print({
                'english': ' Accidents happen...."\n',
                'russian': ' Всякое случается..."\n'
            })

        else:
            print({
                'english': '."\n',
                'russian': '."\n'
            })
        fi

        bye()

    case '*':
        print({
            'english': '"I spend too much time in these woods. Ask someone else."',
            'russian': '"Я слишком долго живу в этих лесах. Задай этот вопрос кому-нибудь другому".'
        })
        jump label_495
    esac

label_1623:
    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        print({
            'english': '"I knew it!"',
            'russian': '"Так и думал!"'
        })
        setBit(byte 235, value 1)
        jump label_495

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"Oh." He seems friendlier now.',
            'russian': '"Вот как", - теперь он выглядит дружелюбнее.'
        })
        clearBit(byte 235, value 1)
        jump label_495
    esac

label_1697:
    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if integer(value 23):
            integer(value 0) = byte 1
            jump label_1833

        else:
            integer(value 3) = character(byte 0, byte 0)
            jump label_1981
        fi

    case 'n':
    case {'russian': 'н'}:
        if hasBit(byte 235, value 1):
            print({
                'english': '"Well, what do ya want then?"',
                'russian': '"Хорошо, тогда чего ты хочешь?"'
            })

        else:
            print({
                'english': '"Well, come back sometime and I\'ll cut one for ya."',
                'russian': '"Хорошо, заходи как-нибудь и и я срублю для тебя парочку".'
            })
        fi

        jump label_495
    esac

label_1833:
    look(character(minus(integer(value 0), byte 1), byte 0))
    print({
        'english': '#0) $Y\n',
        'russian': '#0) $Y\n'
    })

    if lessOrEquals(integer(value 0), integer(value 23)):
        integer(value 0) = plus(integer(value 0), byte 1)
        jump label_1833
    fi

    print({
        'english': '"Who wants it?" ',
        'russian': '"Кому это нужно?" '
    })
    inputDigit(integer(value 2))

    if equals(integer(value 2), byte 0):
        print({
            'english': '"Well, why\'d ya say you wanted one?"',
            'russian': '"Хорошо, зачем тогда говоришь, что тебе нужно?"'
        })
        jump label_495
    fi

    integer(value 2) = minus(integer(value 2), byte 1)

    if greater(integer(value 2), integer(value 23)):
        integer(value 0) = byte 1
        jump label_1833
    fi

    integer(value 3) = character(integer(value 2), byte 0)

label_1981:
    look(integer(value 3))

    if less(plus(canCarry(integer(value 3)), weight(byte 88, byte 5)), weight(word 274, byte 1)):
        print({
            'english': '"But $Y can\'t carry a log!"',
            'russian': '"Но $Y не унесёт полено!"'
        })
        jump label_495
    fi

    if less(objectsCount(integer(value 3), byte 88), byte 5):
        print({
            'english': '"But $Y don\'t have 5 gold!"',
            'russian': '"Но $Y не имеет 5 золотых!"'
        })
        jump label_495
    fi

    print({
        'english': '"Logs is 5 gold apiece. Ya still want one?" ',
        'russian': '"5 золотых за полено. Надо?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        destroyItem(integer(value 3), byte 88, byte 0, byte 5)
        createItem(integer(value 3), word 274, byte 0, byte 1)
        print({
            'english': '$N takes $Y\'s gold and hands over a fine yew log.',
            'russian': '$N берет золото у персонажа $Y и протягивает отличное тисовое полено.'
        })

        if hasBit(byte 235, value 1):
            print({
                'english': '*\n\nBen seems friendlier now.',
                'russian': '*\n\nБен кажется дружелюбнее, чем прежде.'
            })
            clearBit(byte 235, value 1)
        fi

        jump label_495

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"Too pricey for ya, eh?"',
            'russian': '"Дороговато для тебя, да?"'
        })
        jump label_495
    esac
