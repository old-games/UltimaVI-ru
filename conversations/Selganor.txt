source('CONVERSE.A')
index(64)

id(64)
name({
    'english': 'Selganor',
    'russian': 'Селганор'
})

description:
    print({
        'english': 'a slender, graceful man tuning a lute.',
        'russian': 'худого изящного мужчину, настраивающего лютню.'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

interaction:
    if equals(hasBit(byte 235, byte 5), byte 0):
        jump label_2863
    fi

    if hasBit(byte 235, byte 7):
        print({
            'english': '"Hello. There\'s something I need to ask you, what was it..."',
            'russian': '"Здравствуйте. Мне хотелось попросить вас о чём-то, но что же это было..."'
        })
        wait()

        print({
            'english': '\n\n"Oh, yes, now I remember!"',
            'russian': '\n\n"О, точно, вспомнил!"'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_1968
    fi

    print({
        'english': '"Hail and welcome, $P!"',
        'russian': '"Приветствую и добро пожаловать, $P!"'
    })

label_196:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"My name is Selganor. \'Tis a name with a long @history..."',
            'russian': '"Меня зовут Селганор. О, у этого имени долгая @история..."'
        })
        wait()

        print({
            'english': '\n\n"But you have the look of one with more important @business."',
            'russian': '\n\n"Но будто бы у вас есть @дела поважнее".'
        })
        setBit(byte 235, value 0)
        jump label_196

    case 'selg':
    case {'russian': 'селг'}:
    case 'hist':
    case {'russian': 'ист'}:
        print({
            'english': '"It means \'seeker of the @crystal\'. Perhaps I\'ll tell you more some ',
            'russian': '"Оно значит \'искатель @кристалла\'. Возможно, потом я расскажу вам больше '
        })
        print({
            'english': 'other time."',
            'russian': 'в другой раз".'
        })
        jump label_196

    case 'seek':
    case {'russian': 'иска'}:
    case 'crys':
    case {'russian': 'крис'}:
        print({
            'english': '"That\'s quite a @tale."',
            'russian': '"Ох, это целый @рассказ".'
        })
        jump label_196

    case 'tale':
    case {'russian': 'расс'}:
        print({
            'english': '"Indeed."',
            'russian': '"Так и есть".'
        })
        jump label_196

    case 'impo':
    case {'russian': 'важ'}:
    case 'busi':
    case {'russian': 'дела'}:
        print({
            'english': '"Perhaps you\'re interested in joining the @guild."',
            'russian': '"Может быть, вам захочется вступить в @гильдию".'
        })
        jump label_196

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"I am the @guildmaster of artisans."',
            'russian': '"Я @глава гильдии ремесленников".'
        })
        jump label_196

    case 'rune':
    case {'russian': 'руна'}:
        if hasBit(byte 235, byte 6):
            print({
                'english': '"I already loaned you the rune."',
                'russian': '"Я уже одолжил вам руну".'
            })
            jump label_196
        fi

        print({
            'english': '"I\'d be glad to loan you the rune, but only members of the @guild are ',
            'russian': '"Я бы и рад одолжить руну, но только членам @гильдии '
        })
        print({
            'english': 'allowed to handle it."',
            'russian': 'позволено использовать её".'
        })
        jump label_196

    case 'loan':
    case {'russian': 'одол'}:
    case 'memb':
    case {'russian': 'член'}:
    case 'guil':
    case {'russian': 'гил'}:
    case 'arti':
    case {'russian': 'рем'}:
    case 'join':
    case {'russian': 'всту'}:
        if hasBit(byte 235, byte 6):
            print({
                'english': '"Wait a minute... You\'re already a member of the guild!"',
                'russian': '"Минутку... Вы уже состоите в гильдии!"'
            })
            jump label_196
        fi

        print({
            'english': '"If you want to join the guild, you need to do two things."',
            'russian': '"Чтобы вступить в гильдию, нужно сделать две вещи".'
        })
        wait()

        print({
            'english': '\n\n"First, you need to make a set of @panpipes. @Julia can teach you ',
            'russian': '\n\n"Во-первых, вам нужно изготовить @многоствольную флейту. @Джулия научит вас, '
        })
        print({
            'english': 'how to that."',
            'russian': 'как изготовить её".'
        })
        wait()

        print({
            'english': '\n\n"You also need to commit \'@Stones\' to memory. \'Tis a simple tune - ',
            'russian': '\n\n"Вам также нужно выучить \'@Камешки\'. Это очень простая мелодия - '
        })
        print({
            'english': 'ask @Gwenno to play it for thee."',
            'russian': 'попросите @Гвенно сыграть её".'
        })

        if equals(hasBit(byte 235, byte 6), byte 0):
            setBit(byte 235, byte 7)
        fi

        jump label_196

    case 'pan':
    case {'russian': 'мног'}:
    case 'pipe':
    case {'russian': 'флей'}:
    case 'ston':
    case {'russian': 'кам'}:
        jump label_1968

    case 'juli':
    case {'russian': 'джул'}:
        if partyHas(byte 67):
            print({
                'english': '"Yes, ask her about it."',
                'russian': '"Да, поговорите с ней об этом".'
            })

        else:
            print({
                'english': '"She made my @lute - and most of our other instruments as well."',
                'russian': '"Она изготовила @лютню для меня, а также многие другие наши инструменты".'
            })
            wait()

            print({
                'english': '\n\n"She lives just across the road, next door to Lady @Isabella."',
                'russian': '\n\n"Она живёт через дорогу по соседству с Леди @Изабеллой".'
            })
        fi

        jump label_196

    case 'isab':
    case {'russian': 'изаб'}:
        print({
            'english': '"She\'s the mayor."',
            'russian': '"Она мэр города".'
        })
        jump label_196

    case 'gwen':
    case {'russian': 'гвен'}:
        print({
            'english': '"I know she\'s around here somewhere..."',
            'russian': '"Я уверен, что она где-то рядом..."'
        })

        if isNearby(byte 66):
            wait()

            portrait(byte 66)
            print({
                'english': '\n\n"I\'m right here, Selganor!"',
                'russian': '\n\n"Я здесь, Селганор!"'
            })
            wait()

            portrait(byte 235)
            print({
                'english': '\n\n"Ah, I knew you\'d be somewhere close by."',
                'russian': '\n\n"О, я знал, что ты где-то рядышком".'
            })
        fi

        jump label_196

    case 'lute':
    case {'russian': 'лют'}:
    case 'inst':
    case {'russian': 'инст'}:
        print({
            'english': '"I prefer stringed instruments. They make such lovely sounds."',
            'russian': '"Я предпочитаю струнные инструменты. Они так прелестно звучат".'
        })
        jump label_196

    case 'ball':
    case {'russian': 'шар'}:
        print({
            'english': '"Oh, are you looking for the man who invented the balloon?" He stares ',
            'russian': '"О, вы ищете человека, который изобрёл воздушный шар?" - он задумчиво смотрит '
        })
        print({
            'english': 'upward, stroking his chin pensively.',
            'russian': 'куда-то вверх, поглаживая подбородок.'
        })
        wait()

        print({
            'english': '\n\n"Ah yes, now I remember. He flew to @Sutek\'s castle."',
            'russian': '\n\n"Ох, точно, я вспомнил. Он улетел в замок @Сутека".'
        })
        wait()

        print({
            'english': '\n\n"Said something about a big job he had to do there."',
            'russian': '\n\n"Он говорил что-то о большом заказе".'
        })
        jump label_196

    case 'sute':
    case {'russian': 'суте'}:
    case 'cast':
    case {'russian': 'замо'}:
    case 'flew':
    case {'russian': 'улет'}:
        print({
            'english': '"Sutek lives on an @island, far to the south."',
            'russian': '"Сутек живёт на @острове далеко на юге".'
        })
        jump label_196

    case 'isla':
    case {'russian': 'остр'}:
        print({
            'english': '"It\'s east of Serpent\'s Hold."',
            'russian': '"Он находится к востоку от Змеиной Крепости".'
        })
        jump label_196

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"It was nice talking to you."\n',
            'russian': '"Было приятно побеседовать".\n'
        })
        bye()

    case '*':
        print({
            'english': '"I don\'t think I can help you there."',
            'russian': '"Не думаю, что смогу помочь вам".'
        })
    esac

    jump label_196

label_1968:
    if hasBit(byte 235, byte 6):
        print({
            'english': '"You should play your panpipes often - \'twill lighten your step on the',
            'russian': '"Вам нужно почаще играть на флейте - так будет легче идти'
        })
        print({
            'english': ' long road ahead."',
            'russian': ' по долгой дороге".'
        })
        jump label_196
    fi

    print({
        'english': '"Have you made a set of panpipes?"',
        'russian': '"Вы уже изготовили многоствольную флейту?"'
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"Oh. Well, @Julia can show you how if you need help."',
            'russian': '"Ох. Хорошо, @Джулия может показать вам, если нужна помощь".'
        })
        jump label_196

    case 'y':
    case {'russian': 'д'}:
        if equals(partyHasObject(byte 153, byte 0), word 32769):
            print({
                'english': '"But I don\'t see any!"',
                'russian': '"Но у вас ничего нет!"'
            })
            jump label_196
        fi
    esac

    print({
        'english': 'He inspects the pipes. "Very good, very good indeed."',
        'russian': 'Он осматривает флейту. "Хорошо, в самом деле, очень хорошо".'
    })
    wait()

    print({
        'english': '\n\n"Now tell me the sequence of notes in \'Stones\' and I\'ll induct you ',
        'russian': '\n\n"Теперь назовите последовательность нот в \'Камешках\' и я приму вас '
    })
    print({
        'english': 'into the guild."',
        'russian': 'в гильдию".'
    })
    wait()

    print({
        'english': '\n\n"Numeric notation will be fine."\n',
        'russian': '\n\n"Можно перечислить по номерам".\n'
    })

    ask()

    case '678987':
    case {'russian': '678987'}:
    case '8767653':
    case {'russian': '8767653'}:
        print({
            'english': '"Excellent!" He strums a chord on his lute, then taps you lightly once',
            'russian': '"Восхитительно!" - он взял аккорд на лютне, а затем легонько похлопал вас'
        })
        print({
            'english': ' on each shoulder with it.',
            'russian': ' ей по каждому плечу.'
        })
        wait()

        print({
            'english': '\n"You are now a full member of the guild of artisans."',
            'russian': '\n"Теперь вы полноценный член гильдии ремесленников".'
        })
        wait()

        print({
            'english': '\n\nHe reaches into a belt-pouch, takes out the Rune of Sacrifice, and ',
            'russian': '\n\nОн открывает поясную сумку, достает Руну Самопожертвования и '
        })
        print({
            'english': 'hands it to you.',
            'russian': 'передаёт вам.'
        })
        wait()

        print({
            'english': '\n\n"I\'m sure you\'ll be needing this in your travels."',
            'russian': '\n\n"Я уверен, это понадобится во время ваших странствий".'
        })
        wait()

        print({
            'english': '\n"I know you\'ll find some solution to this gargoyle problem."',
            'russian': '\n"Верю, что у вас получится найти решение проблемы с гаргульями".'
        })
        moveItem(byte 246, byte 0, byte 235, byte 1)
        setBit(byte 235, byte 6)
        clearBit(byte 235, byte 7)
        jump label_196

    case '*':
        print({
            'english': '"No, I\'m afraid that\'s not it. Gwenno can help you learn the notes."',
            'russian': '"Нет, боюсь, это неправильно. Гвенно сможет помочь вам выучить ноты".'
        })
        jump label_196
    esac

label_2863:
    print({
        'english': '"Oh, hello. Maybe you can help me with something."\n*\n"My nephew is ',
        'russian': '"Здравствуйте. Возможно, вы сможете помочь мне кое с чем".\n*\n"Мой племянник '
    })
    print({
        'english': 'studying alchemy, and he needs to know this."\n*\n',
        'russian': 'изучает алхимию и ему необходимо знать вот что".\n*\n'
    })
    integer(value 6) = random(byte 1, byte 4)

    if equals(integer(value 6), byte 1):
        jump label_3040
    fi

    if equals(integer(value 6), byte 2):
        jump label_3209
    fi

    if equals(integer(value 6), byte 3):
        jump label_3391
    fi

    if equals(integer(value 6), byte 4):
        jump label_3543
    fi

label_3040:
    print({
        'english': '"What kind of fork should mandrake roots be prepared with?"',
        'russian': '"Какую вилку нужно использовать при приготовлении корней мандрагоры?"'
    })

label_3099:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'silv':
    case {'russian': 'сере'}:
        jump label_3691

    case 'bye':
    case {'russian': 'пока'}:
        jump label_3739

    case '*':
        print({
            'english': '"No, that doesn\'t sound right. If only I had a Compendium to look it ',
            'russian': '"Нет, звучит неправильно. Если бы у меня был Компендиум при себе, '
        })
        print({
            'english': 'up in..."',
            'russian': 'чтобы посмотреть кое-что..."'
        })
        jump label_3099
    esac

label_3209:
    print({
        'english': '"What part of the nightshade mushroom is used in spellcasting?"',
        'russian': '"Какую часть паслёнового гриба используют для заклинаний?"'
    })

label_3272:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'fung':
    case {'russian': 'гриб'}:
    case 'cap':
    case {'russian': 'шляп'}:
    case 'spor':
    case {'russian': 'спор'}:
        jump label_3691

    case 'bye':
    case {'russian': 'пока'}:
        jump label_3739

    case '*':
        print({
            'english': '"No, that doesn\'t sound right. If only I had a Compendium to look it ',
            'russian': '"Нет, звучит неправильно. Если бы у меня был Компендиум при себе, '
        })
        print({
            'english': 'up in..."',
            'russian': 'чтобы посмотреть кое-что..."'
        })
        jump label_3272
    esac

label_3391:
    print({
        'english': '"Where does sulfurous ash come from?"',
        'russian': '"Как получают сернистую золу?"'
    })

label_3428:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'volc':
    case {'russian': 'вулк'}:
    case 'erup':
    case {'russian': 'изве'}:
        jump label_3691

    case 'bye':
    case {'russian': 'пока'}:
        jump label_3739

    case '*':
        print({
            'english': '"No, that doesn\'t sound right. If only I had a Compendium to look it ',
            'russian': '"Нет, звучит неправильно. Если бы у меня был Компендиум при себе, '
        })
        print({
            'english': 'up in..."',
            'russian': 'чтобы посмотреть кое-что..."'
        })
        jump label_3428
    esac

label_3543:
    print({
        'english': '"What are black pearls used for?"',
        'russian': '"Для чего нужны чёрные жемчужины?"'
    })

label_3576:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'kine':
    case {'russian': 'уско'}:
    case 'prop':
    case {'russian': 'реак'}:
        jump label_3691

    case 'bye':
    case {'russian': 'пока'}:
        jump label_3739

    case '*':
        print({
            'english': '"No, that doesn\'t sound right. If only I had a Compendium to look it ',
            'russian': '"Нет, звучит неправильно. Если бы у меня был Компендиум при себе, '
        })
        print({
            'english': 'up in..."',
            'russian': 'чтобы посмотреть кое-что..."'
        })
        jump label_3576
    esac

label_3691:
    print({
        'english': '"Thanks! Now what can I do for you?"',
        'russian': '"Спасибо! Чем могу быть полезен?"'
    })
    setBit(byte 235, byte 5)
    jump label_196

label_3739:
    print({
        'english': '"Hmmmm... I wish I knew the answer to that question..."\n*\nHe turns ',
        'russian': '"Хм... Жаль, что я не знаю ответа на этот вопрос..."\n*\nОн отворачивается '
    })
    print({
        'english': 'away from you absent-mindedly.\n',
        'russian': 'от вас с рассеянным видом.\n'
    })
    bye()
