source("CONVERSE.A")
index(57)

id(57)
name("Utomo")

description:
    print("a huge, dark-skined man with a close-set face.")
    wait()

    f3()

interaction:
    print("\n")
    integer(value 8) = byte 5

    if hasBit(byte 235, value 0):
    print("\"@Ombogo @sano!\" he says, smiling widely.")

    else:
    print("\"@Ombogo @dono,\" he grunts at you from behind a large forge.")

    endif

    wait()

    jump 193

180:
    print("\n\"What else?\"\n")

193:
    print("\n")

    ask()
    case "buy":
    print("\"I have many things here. You want @arms or @armor?\"")
    jump 193

    case "arms":
    integer(value 9) = byte 0
    jump 2760

    case "armo":
    integer(value 9) = integer(value 8)
    jump 2760

    case "sell":
    jump 1843

    case "ombo":
    print("\"That mean 'hello.'\"")
    jump 193

    case "dono":
    print("\"That mean 'person I don't know.'\"")
    jump 193

    case "sano":
    print("\"That mean 'friend.'\"")
    jump 193

    case "name":

    if hasBit(byte 235, value 0):
    print("\"Utomo remember you, how you not remember @Utomo?\"")

    else:
    print("\"Utomo, from @island.\"")

    endif

    jump 193

    case "utom,isla":
    print("\"Utomo mean 'island' in my language. I also from island.\"*\n\n\"Bring ")
    print("magic @fan from island. This town new @home for Utomo now.\"")
    jump 193

    case "fan,magi":
    print("\"Lady on island make magic fans. They make big wind, blow ships all ")
    print("around.\"")
    jump 193

    case "job":
    print("\"Utomo make good @weapons. Make one for you if you like.\"")
    jump 193

    case "weap":
    print("\"Learn to make as boy. I live on island then.\"")
    jump 193

    case "from,home":
    print("\"I come here from @many days away. My home burned by @evil man.\"")
    jump 193

    case "many,days":
    print("\"I not sure where. Got ride on big @ship.\"")
    jump 193

    case "big,ship":
    print("\"I stow away when night come. After long time we land and I jump off.\"")
    jump 193

    case "burn,evil,man":
    print("\"He say to me, 'You man, you leave home and @kill good people with ")
    print("me.' I ran from him.\"")
    jump 193

    case "kill,good,peop":
    print("\"Like people in town. Like Lord British.\"")
    jump 193

    case "Andr":
    print("\"Utomo go and drink at her home.\"")
    wait()

    print("\n\nShe try @kiss Utomo. Utomo say, 'I no want you' but she kiss ")
    print("anyway.\"")
    wait()

    print("\n\n\"Utomo not go back there.\"")
    jump 193

    case "kiss":
    print("\"Utomo have @girl back home.\"")
    wait()

    print("\n\n\"She not thin like Andrea.\"")
    wait()

    print("\n\n\"Someday Utomo go back and get her.\"")
    wait()

    print("\n\n\"Someday.\"")
    wait()

    print("\n\nHe plays the poker over the hot coals and looks absently into the ")
    print("fire.")
    jump 193

    case "girl,back":
    print("\"Her name Yuna. She good tree climber. I not see her for long time.\"")
    jump 193

    case "omdu,yaf":
    print("\"In my land it mean 'You have good meal in sun.'\"")
    wait()

    print("\n\n\"It is goodbye in my land.\"")
    jump 193

    case "bye":
    print("\"@Omdu Yaf.\"\n")
    ('SETF', ('byte', 235), ('value', 0))
    bye()

    case "*":
    print("\"I speak not too much your language.\"")
    jump 193

1843:
    if notEquals(integer(value 32), byte 144):
    print("\"Come to my shop when I'm open!\"")
    jump 193

    endif

    integer(value 0) = byte 0
    integer(value 2) = byte 0
    integer(value 3) = byte 0
    integer(value 1) = byte 0

    if hasObject(character(integer(value 0), byte 0), data(dword 3419, integer(value 1)), byte 0):
    data(dword 3576, integer(value 2)) = integer(value 0)
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 3) = byte 1
    jump 1996

    endif

    integer(value 1) = plus(integer(value 1), byte 1)

    if data(dword 3419, integer(value 1)):
    jump 1916

    endif

    integer(value 0) = plus(integer(value 0), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
    jump 1909

    endif

    if equals(integer(value 3), byte 0):
    print("\"But you no have thing I want!\"")
    wait()

    print("\n")
    jump 180

    endif

    if equals(integer(value 2), byte 1):
    integer(value 3) = character(data(dword 3576, byte 0), byte 0)
    ('SETNAME', ('integer', [('value', 3)]))
    print("\"$Y have something I want...\"")
    wait()

    print("\n\n")
    jump 2254

    endif

    integer(value 1) = byte 1
    ('SETNAME', ('character', [('data', [('dword', 3576), ('minus', [('integer', [('value', 1)]), ('byte', 1)])]), ('byte', 0)]))
    print("#1) $Y\n")
    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 2)):
    jump 2137

    endif

    print("\"Which of you?\" ")
    ('INPUTNUM', 3)

    if equals(integer(value 3), byte 0):
    jump 2733

    endif

    integer(value 3) = minus(integer(value 3), byte 1)

    if greaterOrEquals(integer(value 3), integer(value 2)):
    jump 2130

    endif

    integer(value 3) = character(data(dword 3576, integer(value 3)), byte 0)
    integer(value 0) = byte 0
    integer(value 5) = byte 0

    if equals(hasObject(integer(value 3), data(dword 3419, integer(value 0)), byte 0), byte 0):
    jump 2315

    endif

    data(dword 3546, integer(value 5)) = integer(value 0)
    integer(value 5) = plus(integer(value 5), byte 1)
    integer(value 0) = plus(integer(value 0), byte 1)

    if data(dword 3419, integer(value 0)):
    jump 2268

    endif

    if equals(integer(value 5), byte 1):
    integer(value 6) = data(dword 3546, byte 0)
    jump 2479

    endif

    integer(value 0) = byte 1
    print("#0) ")
    ('DPRINT', [('data', [('dword', 3546), ('minus', [('integer', [('value', 0)]), ('byte', 1)])]), ('dword', 3441)])
    print("\n")
    integer(value 0) = plus(integer(value 0), byte 1)

    if lessOrEquals(integer(value 0), integer(value 5)):
    jump 2374

    endif

    print("\"Which item?\" ")
    ('INPUTNUM', 6)

    if greater(integer(value 6), integer(value 5)):
    jump 2254

    endif

    if equals(integer(value 6), byte 0):
    jump 2733

    endif

    integer(value 6) = data(dword 3546, minus(integer(value 6), byte 1))
    string(value 0) = data(dword 3441, integer(value 6))
    integer(value 7) = divide(data(dword 3399, integer(value 6)), byte 2)
    ('SETNAME', ('integer', [('value', 3)]))
    print("\"I give #7 gold for that $0, okay $Y?\" ")

    askc("yn")
    case "n":

    if equals(integer(value 5), byte 1):
    print("\"Maybe later.\"")
    wait()

    print("\n")
    jump 180

    else:
    print("\"Maybe something else?\"")
    wait()

    print("\n\n")
    jump 2254

    endif

    case "y":
    ('SETNAME', ('integer', [('value', 3)]))
    print("\"Good!\" $N hands $Y #7 gold pieces and takes the $0.")
    ('DELETE', ('integer', [('value', 3)]), ('data', [('dword', 3419), ('integer', [('value', 6)])]), ('byte', 0), ('byte', 1))
    ('NEW', ('integer', [('value', 3)]), ('byte', 88), ('byte', 0), ('integer', [('value', 7)]))

    if equals(integer(value 5), byte 1):
    print("\n")
    jump 180

    else:
    wait()

    print("\n\n")
    jump 2254

    endif

2733:
    print("\"No more, ah? Okay.\"")
    wait()

    print("\n")
    jump 180

2760:
    if notEquals(integer(value 32), byte 144):
    print("\"Come to my shop when I'm open!\"")
    jump 193

    endif

    if equals(integer(value 23), byte 0):
    integer(value 3) = byte 1
    jump 2951

    endif

    integer(value 0) = byte 0
    integer(value 2) = byte 1
    ('SETNAME', ('character', [('integer', [('value', 0)]), ('byte', 0)]))
    print("#2) $Y\n")
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
    jump 2839

    endif

    print("\"Which of you?\" ")
    ('INPUTNUM', 3)

    if equals(integer(value 3), byte 0):
    jump 2733

    endif

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
    jump 2825

    endif

    integer(value 3) = character(integer(value 3), byte 0)
    integer(value 0) = byte 1
    ('SETNAME', ('integer', [('value', 3)]))
    string(value 0) = data(dword 3441, plus(integer(value 9), minus(integer(value 0), byte 1)))
    print("#0) $0\n")
    integer(value 0) = plus(integer(value 0), byte 1)

    if and(integer(value 9), notEquals(data(dword 3419, plus(integer(value 9), minus(integer(value 0), byte 1))), byte 0)):
    jump 2962

    endif

    if and(equals(integer(value 9), byte 0), lessOrEquals(integer(value 0), integer(value 8))):
    jump 2962

    endif

    integer(value 7) = integer(value 0)
    print("\"Which item?\" ")
    ('INPUTNUM', 0)

    if equals(integer(value 0), byte 0):
    jump 2733

    endif

    if greaterOrEquals(integer(value 0), integer(value 7)):
    jump 2951

    endif

    integer(value 0) = minus(plus(integer(value 9), integer(value 0)), byte 1)
    integer(value 1) = data(dword 3399, integer(value 0))
    string(value 1) = data(dword 3441, integer(value 0))
    print("\"Sell $1 for #1 gold.\"")
    wait()

    print("\n\n\"Okay, $Y?\" ")

    askc("yn")
    case "y":
    jump 3191

    case "n":
    jump 2951

3191:
    if less(plus(canCarry(integer(value 3)), weight(byte 88, integer(value 1))), weight(data(dword 3419, integer(value 0)), byte 1)):
    print("\"$1 is too heavy for you, $Y!\"")
    wait()

    print("\n")
    jump 180

    endif

    if greaterOrEquals(objectsCount(integer(value 3), byte 88), integer(value 1)):
    ('DELETE', ('integer', [('value', 3)]), ('byte', 88), ('byte', 0), ('integer', [('value', 1)]))
    ('NEW', ('integer', [('value', 3)]), ('data', [('dword', 3419), ('integer', [('value', 0)])]), ('byte', 0), ('byte', 1))
    print("\"Good!\"\n\nAfter accepting $Y's gold, $N hands over the $1.")
    wait()

    print("\n\n")
    jump 2951

    else:
    print("\"$1 cost too much for you, $Y!\"")
    wait()

    print("\n")
    jump 180

    endif

3399:
    ['INTEGERS', [10, 10, 12, 12, 45, 20, 35, 7, 40, 10]]

3419:
    ['INTEGERS', [34, 38, 36, 37, 45, 6, 18, 1, 19, 28, 0]]

3441:
    ['STRINGS', ['Club', 'Dagger', 'Spear', 'Throwing Axe', '2-Handed Axe', 'Brass Helm', 'Leather Armour', 'Leather Helm', 'Ring Mail', 'Swamp Boots']]

3546:
    ['INTEGERS', [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]]

3576:
    ['INTEGERS', [0, 0, 0, 0, 0, 0, 0, 0]]
