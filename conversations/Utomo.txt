source('CONVERSE.A')
index(57)

id(57)
name('Utomo')

description:
    print('a huge, dark-skined man with a close-set face.')
    wait()

    f3()

interaction:
    print('\n')
    integer(value 8) = byte 5

    if hasBit(byte 235, value 0):
        print('"@Ombogo @sano!" he says, smiling widely.')

    else:
        print('"@Ombogo @dono," he grunts at you from behind a large forge.')
    fi

    wait()

    jump label_193

label_180:
    print('\n"What else?"')

label_193:
    print('\n')

    ask()

    case 'buy':
        print('"I have many things here. You want @arms or @armor?"')
        jump label_193

    case 'arms':
        integer(value 9) = byte 0
        jump label_2760

    case 'armo':
        integer(value 9) = integer(value 8)
        jump label_2760

    case 'sell':
        jump label_1843

    case 'ombo':
        print('"That mean \'hello.\'"')
        jump label_193

    case 'dono':
        print('"That mean \'person I don\'t know.\'"')
        jump label_193

    case 'sano':
        print('"That mean \'friend.\'"')
        jump label_193

    case 'name':
        if hasBit(byte 235, value 0):
            print('"Utomo remember you, how you not remember @Utomo?"')

        else:
            print('"Utomo, from @island."')
        fi

        jump label_193

    case 'isla':
    case 'utom':
        print('"Utomo mean \'island\' in my language. I also from island."*\n\n"Bring ')
        print('magic @fan from island. This town new @home for Utomo now."')
        jump label_193

    case 'fan':
    case 'magi':
        print('"Lady on island make magic fans. They make big wind, blow ships all ')
        print('around."')
        jump label_193

    case 'job':
        print('"Utomo make good @weapons. Make one for you if you like."')
        jump label_193

    case 'weap':
        print('"Learn to make as boy. I live on island then."')
        jump label_193

    case 'from':
    case 'home':
        print('"I come here from @many days away. My home burned by @evil man."')
        jump label_193

    case 'days':
    case 'many':
        print('"I not sure where. Got ride on big @ship."')
        jump label_193

    case 'big':
    case 'ship':
        print('"I stow away when night come. After long time we land and I jump off."')
        jump label_193

    case 'burn':
    case 'evil':
    case 'man':
        print('"He say to me, \'You man, you leave home and @kill good people with ')
        print('me.\' I ran from him."')
        jump label_193

    case 'good':
    case 'kill':
    case 'peop':
        print('"Like people in town. Like Lord British."')
        jump label_193

    case 'Andr':
        print('"Utomo go and drink at her home."')
        wait()

        print('\n\nShe try @kiss Utomo. Utomo say, \'I no want you\' but she kiss ')
        print('anyway."')
        wait()

        print('\n\n"Utomo not go back there."')
        jump label_193

    case 'kiss':
        print('"Utomo have @girl back home."')
        wait()

        print('\n\n"She not thin like Andrea."')
        wait()

        print('\n\n"Someday Utomo go back and get her."')
        wait()

        print('\n\n"Someday."')
        wait()

        print('\n\nHe plays the poker over the hot coals and looks absently into the ')
        print('fire.')
        jump label_193

    case 'back':
    case 'girl':
        print('"Her name Yuna. She good tree climber. I not see her for long time."')
        jump label_193

    case 'omdu':
    case 'yaf':
        print('"In my land it mean \'You have good meal in sun.\'"')
        wait()

        print('\n\n"It is goodbye in my land."')
        jump label_193

    case 'bye':
        print('"@Omdu Yaf."\n')
        setBit(byte 235, value 0)
        bye()

    case '*':
        print('"I speak not too much your language."')
        jump label_193
    esac

label_1843:
    if notEquals(integer(value 32), byte 144):
        print('"Come to my shop when I\'m open!"')
        jump label_193
    fi

    integer(value 0) = byte 0
    integer(value 2) = byte 0
    integer(value 3) = byte 0

label_1909:
    integer(value 1) = byte 0

label_1916:
    if hasObject(character(integer(value 0), byte 0), data(integers_3419, integer(value 1)), byte 0):
        data(integers_3576, integer(value 2)) = integer(value 0)
        integer(value 2) = plus(integer(value 2), byte 1)
        integer(value 3) = byte 1
        jump label_1996
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if data(integers_3419, integer(value 1)):
        jump label_1916
    fi

label_1996:
    integer(value 0) = plus(integer(value 0), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_1909
    fi

    if equals(integer(value 3), byte 0):
        print('"But you no have thing I want!"')
        wait()

        print('\n')
        jump label_180
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = character(data(integers_3576, byte 0), byte 0)
        look(integer(value 3))
        print('"$Y have something I want..."')
        wait()

        print('\n\n')
        jump label_2254
    fi

label_2130:
    integer(value 1) = byte 1

label_2137:
    look(character(data(integers_3576, minus(integer(value 1), byte 1)), byte 0))
    print('#1) $Y\n')
    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 2)):
        jump label_2137
    fi

    print('"Which of you?" ')
    inputInteger(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_2733
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greaterOrEquals(integer(value 3), integer(value 2)):
        jump label_2130
    fi

    integer(value 3) = character(data(integers_3576, integer(value 3)), byte 0)

label_2254:
    integer(value 0) = byte 0
    integer(value 5) = byte 0

label_2268:
    if equals(hasObject(integer(value 3), data(integers_3419, integer(value 0)), byte 0), byte 0):
        jump label_2315
    fi

    data(integers_3546, integer(value 5)) = integer(value 0)
    integer(value 5) = plus(integer(value 5), byte 1)

label_2315:
    integer(value 0) = plus(integer(value 0), byte 1)

    if data(integers_3419, integer(value 0)):
        jump label_2268
    fi

    if equals(integer(value 5), byte 1):
        integer(value 6) = data(integers_3546, byte 0)
        jump label_2479
    fi

    integer(value 0) = byte 1

label_2374:
    print('#0) ')
    printString(strings_3441, data(integers_3546, minus(integer(value 0), byte 1)))
    print('\n')
    integer(value 0) = plus(integer(value 0), byte 1)

    if lessOrEquals(integer(value 0), integer(value 5)):
        jump label_2374
    fi

    print('"Which item?" ')
    inputInteger(integer(value 6))

    if greater(integer(value 6), integer(value 5)):
        jump label_2254
    fi

    if equals(integer(value 6), byte 0):
        jump label_2733
    fi

    integer(value 6) = data(integers_3546, minus(integer(value 6), byte 1))

label_2479:
    string(value 0) = data(strings_3441, integer(value 6))
    integer(value 7) = divide(data(integers_3399, integer(value 6)), byte 2)
    look(integer(value 3))
    print('"I give #7 gold for that $0, okay $Y?" ')

    choice('yn')

    case 'n':
        if equals(integer(value 5), byte 1):
            print('"Maybe later."')
            wait()

            print('\n')
            jump label_180

        else:
            print('"Maybe something else?"')
            wait()

            print('\n\n')
            jump label_2254
        fi

    case 'y':
        look(integer(value 3))
        print('"Good!" $N hands $Y #7 gold pieces and takes the $0.')
        destroyItem(integer(value 3), data(integers_3419, integer(value 6)), byte 0, byte 1)
        createItem(integer(value 3), byte 88, byte 0, integer(value 7))

        if equals(integer(value 5), byte 1):
            print('\n')
            jump label_180

        else:
            wait()

            print('\n\n')
            jump label_2254
        fi
    esac

label_2733:
    print('"No more, ah? Okay."')
    wait()

    print('\n')
    jump label_180

label_2760:
    if notEquals(integer(value 32), byte 144):
        print('"Come to my shop when I\'m open!"')
        jump label_193
    fi

    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 1
        jump label_2951
    fi

label_2825:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_2839:
    look(character(integer(value 0), byte 0))
    print('#2) $Y\n')
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_2839
    fi

    print('"Which of you?" ')
    inputInteger(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_2733
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_2825
    fi

    integer(value 3) = character(integer(value 3), byte 0)

label_2951:
    integer(value 0) = byte 1
    look(integer(value 3))

label_2962:
    string(value 0) = data(strings_3441, plus(integer(value 9), minus(integer(value 0), byte 1)))
    print('#0) $0\n')
    integer(value 0) = plus(integer(value 0), byte 1)

    if and(integer(value 9), notEquals(data(integers_3419, plus(integer(value 9), minus(integer(value 0), byte 1))), byte 0)):
        jump label_2962
    fi

    if and(equals(integer(value 9), byte 0), lessOrEquals(integer(value 0), integer(value 8))):
        jump label_2962
    fi

    integer(value 7) = integer(value 0)
    print('"Which item?" ')
    inputInteger(integer(value 0))

    if equals(integer(value 0), byte 0):
        jump label_2733
    fi

    if greaterOrEquals(integer(value 0), integer(value 7)):
        jump label_2951
    fi

    integer(value 0) = minus(plus(integer(value 9), integer(value 0)), byte 1)
    integer(value 1) = data(integers_3399, integer(value 0))
    string(value 1) = data(strings_3441, integer(value 0))
    print('"Sell $1 for #1 gold."')
    wait()

    print('\n\n"Okay, $Y?" ')

    choice('yn')

    case 'y':
        jump label_3191

    case 'n':
        jump label_2951
    esac

label_3191:
    if less(plus(canCarry(integer(value 3)), weight(byte 88, integer(value 1))), weight(data(integers_3419, integer(value 0)), byte 1)):
        print('"$1 is too heavy for you, $Y!"')
        wait()

        print('\n')
        jump label_180
    fi

    if greaterOrEquals(objectsCount(integer(value 3), byte 88), integer(value 1)):
        destroyItem(integer(value 3), byte 88, byte 0, integer(value 1))
        createItem(integer(value 3), data(integers_3419, integer(value 0)), byte 0, byte 1)
        print('"Good!"\n\nAfter accepting $Y\'s gold, $N hands over the $1.')
        wait()

        print('\n\n')
        jump label_2951

    else:
        print('"$1 cost too much for you, $Y!"')
        wait()

        print('\n')
        jump label_180
    fi

integers_3399 = [
    10, // 0
    10, // 1
    12, // 2
    12, // 3
    45, // 4
    20, // 5
    35, // 6
    7,  // 7
    40, // 8
    10, // 9
]

integers_3419 = [
    34, // 0
    38, // 1
    36, // 2
    37, // 3
    45, // 4
    6,  // 5
    18, // 6
    1,  // 7
    19, // 8
    28, // 9
    0,  // 10
]

strings_3441 = [
    'Club',           // 0
    'Dagger',         // 1
    'Spear',          // 2
    'Throwing Axe',   // 3
    '2-Handed Axe',   // 4
    'Brass Helm',     // 5
    'Leather Armour', // 6
    'Leather Helm',   // 7
    'Ring Mail',      // 8
    'Swamp Boots',    // 9
]

integers_3546 = [
    0, // 0
    0, // 1
    0, // 2
    0, // 3
    0, // 4
    0, // 5
    0, // 6
    0, // 7
    0, // 8
    0, // 9
    0, // 10
    0, // 11
    0, // 12
    0, // 13
    0, // 14
]

integers_3576 = [
    0, // 0
    0, // 1
    0, // 2
    0, // 3
    0, // 4
    0, // 5
    0, // 6
    0, // 7
]
