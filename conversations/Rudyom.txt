source('CONVERSE.B')
index(29)

id(128)
name({
    'english': 'Rudyom',
    'russian': 'Рудьом'
})

description:
    print({
        'english': 'a dark, bearded man dressed in flowing white robes.',
        'russian': 'смуглого бородатого мужчину, одетого в развевающиеся белые одежды.'
    })

    f3()

interaction:
    wait()

    print({
        'english': '\n"Greetings, mighty Avatar. For what hast thou come to my place?"',
        'russian': '\n"Приветствую тебя, могущественный Аватар. Зачем ты пришёл ко мне?"'
    })

label_128:
    print({
        'english': '\n',
        'russian': '\n'
    })

label_129:
    ask()

    case 'buy':
    case {'russian': 'купи'}:
    case 'reag':
    case {'russian': 'реаг'}:
        jump label_1490

    case 'lear':
    case {'russian': 'учит'}:
    case 'spel':
    case {'russian': 'закл'}:
        jump label_345

    case 'book':
    case {'russian': 'книг'}:
        jump label_2305

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"I am Rudyom."',
            'russian': '"Я Рудьом".'
        })
        setBit(byte 235, value 0)
        jump label_128

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"I sell magic @books and @reagents, and teach @spells."',
            'russian': '"Я продаю магические @книги и @реагенты, а также обучаю @заклинаниям".'
        })
        jump label_128

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"May peace follow thee, Avatar."\n',
            'russian': '"Да пребудет с тобой мир, Аватар".\n'
        })
        bye()

    case '*':
        print({
            'english': '"Of that I will say nothing."',
            'russian': '"Я ничего не могу сказать об этом".'
        })
        jump label_128
    esac

label_345:
    if notEquals(integer(value 32), byte 144):
        print({
            'english': '"My shop is closed right now."',
            'russian': '"Мой магазин сейчас закрыт".'
        })
        jump label_128
    fi

    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump label_486
    fi

    integer(value 3) = character(byte 0, byte 0)

    if hasObject(integer(value 3), byte 57, byte 0):
        jump label_784

    else:
        print({
            'english': '"But thou hast not a spell@book!"',
            'russian': '"Но у тебя нет @книги заклинаний!"'
        })
        jump label_128
    fi

label_486:
    if greater(integer(value 1), integer(value 23)):
        jump label_600
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(hasObject(integer(value 3), byte 57, byte 0), byte 0):
        jump label_585
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_585
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n',
        'russian': '#2) $Y\n'
    })
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

label_585:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump label_486

label_600:
    if equals(integer(value 2), byte 0):
        print({
            'english': '"But none of you has a spell@book!"',
            'russian': '"Но ни у кого из вас нет @книги заклинаний!"'
        })
        jump label_128
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump label_784
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n"Which of you?" ',
        'russian': '#2) $Y\n"Кто из вас?" '
    })
    inputDigit(integer(value 2))

    if equals(integer(value 2), byte 0):
        jump label_129
    fi

    integer(value 1) = byte 0

label_718:
    integer(value 3) = character(integer(value 1), byte 0)

    if hasObject(integer(value 3), byte 57, byte 0):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump label_784
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump label_718
    fi

label_784:
    look(integer(value 3))
    integer(value 1) = level(integer(value 3), byte 0)
    string(value 1) = data(strings_2849, integer(value 1))
    print({
        'english': '"In which Circle does $Y wish to study?" ',
        'russian': '"$Y, какому кругу ты желаешь обучатся?" '
    })
    inputDigit(integer(value 0))

    if equals(integer(value 0), byte 0):
        jump label_128
    fi

    if greater(integer(value 0), byte 8):
        print({
            'english': '"As everybody knows, there are only eight circles."',
            'russian': '"Как известно каждому, есть всего восемь кругов".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_784
    fi

    if greater(integer(value 0), integer(value 1)):
        print({
            'english': '"I sense that $Y is only ready for the #1$1 Circle."',
            'russian': '"$Y, я чувствую, что ты готов только для постижения #1$1 круга".'
        })
        wait()

        print({
            'english': '\n\n"But such matters are not my concern..."',
            'russian': '\n\n"Но такие вопросы меня не касаются..."'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
    fi

    integer(value 0) = minus(integer(value 0), byte 1)
    integer(value 0) = multiply(integer(value 0), byte 10)

    if equals(data(integers_2876, integer(value 0)), word 255):
        print({
            'english': '"I have no spells of that circle."',
            'russian': '"У меня нет заклинаний этого круга".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_784
    fi

    integer(value 2) = byte 1

label_1125:
    string(value 0) = data(strings_3036, minus(plus(integer(value 0), integer(value 2)), byte 1))
    print({
        'english': '#2) $0\n',
        'russian': '#2) $0\n'
    })
    integer(value 2) = plus(integer(value 2), byte 1)

    if notEquals(data(integers_2876, minus(plus(integer(value 0), integer(value 2)), byte 1)), word 255):
        jump label_1125
    fi

    print({
        'english': '"Which of these?" ',
        'russian': '"Что из этого?" '
    })
    inputDigit(integer(value 4))

    if or(equals(integer(value 4), byte 0), greaterOrEquals(integer(value 4), integer(value 2))):
        print({
            'english': '"Perhaps $Y is not ready for this circle."',
            'russian': '"Чтож, $Y, похоже тебе ещё рано изучать этот круг".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_784
    fi

    integer(value 4) = minus(integer(value 4), byte 1)
    integer(value 5) = plus(byte 20, multiply(integer(value 0), byte 2))

    if less(objectsCount(integer(value 3), byte 88), integer(value 5)):
        print({
            'english': '"$Y lacks the #5 gold required."',
            'russian': '"$Y, у тебя нет #5 золота".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_784
    fi

    print({
        'english': '"That spell costs #5 gold. Interested?" ',
        'russian': '"Это заклинание стоит #5 золота. Интересует?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        print({
            'english': '$N hands $Y a piece of rune-covered parchment.',
            'russian': '$N получает золото, а $Y - лист пергамента, покрытый рунами.'
        })
        destroyItem(integer(value 3), byte 88, byte 0, integer(value 5))
        createItem(integer(value 3), byte 58, data(integers_2876, plus(integer(value 0), integer(value 4))), byte 1)
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_784

    case 'n':
    case {'russian': 'н'}:
        jump label_784
    esac

label_1490:
    if notEquals(integer(value 32), byte 144):
        print({
            'english': '"My shop is closed right now."',
            'russian': '"Мой магазин сейчас закрыт".'
        })
        jump label_128
    fi

    if greater(integer(value 23), byte 0):
        integer(value 2) = byte 1
        jump label_1568
    fi

    integer(value 3) = character(byte 0, byte 0)
    jump label_1670

label_1568:
    integer(value 3) = character(minus(integer(value 2), byte 1), byte 0)
    look(integer(value 3))
    print({
        'english': '#2) $Y\n',
        'russian': '#2) $Y\n'
    })

    if lessOrEquals(integer(value 2), integer(value 23)):
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_1568
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"Кто из вас?" '
    })
    inputDigit(integer(value 2))

    if or(equals(integer(value 2), byte 0), greater(integer(value 2), plus(integer(value 23), byte 1))):
        jump label_129

    else:
        integer(value 3) = character(minus(integer(value 2), byte 1), byte 0)
    fi

label_1670:
    look(integer(value 3))
    integer(value 1) = byte 1

label_1681:
    string(value 1) = data(strings_2782, minus(integer(value 1), byte 1))
    print({
        'english': '#1) $1\n',
        'russian': '#1) $1\n'
    })
    integer(value 1) = plus(integer(value 1), byte 1)

    if greater(data(integers_2750, minus(integer(value 1), byte 1)), byte 0):
        jump label_1681
    fi

    print({
        'english': '"Which of these?" ',
        'russian': '"Что из этого?" '
    })
    inputDigit(integer(value 2))

    if or(equals(integer(value 2), byte 0), greaterOrEquals(integer(value 2), integer(value 1))):
        integer(value 2) = byte 1
        jump label_129
    fi

    integer(value 2) = minus(integer(value 2), byte 1)
    integer(value 1) = data(integers_2766, integer(value 2))
    string(value 1) = data(strings_2782, integer(value 2))
    integer(value 5) = byte 0
    print({
        'english': '"$1 costs #1 per portion."',
        'russian': '"$1 стоит #1 за порцию".'
    })
    wait()

    print({
        'english': '\n\n"How many dost thou want?" ',
        'russian': '\n\n"Сколько тебе нужно?" '
    })
    inputInteger(integer(value 4))

    if greater(integer(value 4), word 500):
        integer(value 4) = word 500
    fi

    if equals(integer(value 4), byte 0):
        jump label_1670
    fi

label_1915:
    if less(plus(canCarry(integer(value 3)), weight(byte 88, integer(value 1))), weight(data(integers_2750, integer(value 2)), byte 1)):
        jump label_2043
    fi

    if less(objectsCount(integer(value 3), byte 88), integer(value 1)):
        jump label_2174
    fi

    destroyItem(integer(value 3), byte 88, byte 0, integer(value 1))
    createItem(integer(value 3), data(integers_2750, integer(value 2)), byte 0, byte 1)
    integer(value 5) = plus(integer(value 5), byte 1)

    if equals(integer(value 5), integer(value 4)):
        print({
            'english': '$N hands $Y the $1.',
            'russian': '$N получает золото, а $Y - $1.'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_1670

    else:
        jump label_1915
    fi

label_2043:
    if integer(value 5):
        print({
            'english': '"Thou cannot carry that much!"',
            'russian': '"Ты не сможешь столько унести!"'
        })
        wait()

        print({
            'english': '\n\n"I\'ll give thee #5; thou dost not need the rest."',
            'russian': '\n\n"Я дам тебе #5 штук, остальное тебе не нужно".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_1670

    else:
        print({
            'english': '"Thou cannot carry any $1!"',
            'russian': '"Ты не сможешь унести с собой даже один $1!"'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_1670
    fi

label_2174:
    if integer(value 5):
        print({
            'english': '"Thou cannot afford that much!"',
            'russian': '"Ты не можешь позволить себе столько!"'
        })
        wait()

        print({
            'english': '\n\n"I\'ll give thee #5; thou cannot have the rest."',
            'russian': '\n\n"Я дам тебе #5 штук, остальное тебе не нужно".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_1670

    else:
        print({
            'english': '"Thou cannot afford any $1!"',
            'russian': '"Ты не можешь позволить себе даже один $1!"'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_1670
    fi

label_2305:
    if notEquals(integer(value 32), byte 144):
        wait()

        print({
            'english': '\n\n"My shop is closed right now."',
            'russian': '\n\n"Мой магазин сейчас закрыт".'
        })
        jump label_128
    fi

    if integer(value 23):
        integer(value 2) = byte 1
        jump label_2383
    fi

    integer(value 3) = character(byte 0, byte 0)
    jump label_2485

label_2383:
    integer(value 3) = character(minus(integer(value 2), byte 1), byte 0)
    look(integer(value 3))
    print({
        'english': '#2) $Y\n',
        'russian': '#2) $Y\n'
    })

    if lessOrEquals(integer(value 2), integer(value 23)):
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_2383
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"Кто из вас?" '
    })
    inputDigit(integer(value 2))

    if or(equals(integer(value 2), byte 0), greater(integer(value 2), plus(integer(value 23), byte 1))):
        jump label_128

    else:
        integer(value 3) = character(minus(integer(value 2), byte 1), byte 0)
    fi

label_2485:
    look(integer(value 3))

    if less(plus(canCarry(integer(value 3)), weight(byte 88, byte 50)), weight(byte 57, byte 1)):
        print({
            'english': '"But thou cannot carry a spellbook!"',
            'russian': '"Но ты не сможешь унести с собой книгу заклинаний!"'
        })
        jump label_128
    fi

    if less(objectsCount(integer(value 3), byte 88), byte 50):
        print({
            'english': '"But thou cannot afford a spellbook!"',
            'russian': '"Но ты не можешь позволить себе книгу заклинаний!"'
        })
        jump label_128
    fi

    print({
        'english': '"A spellbook costs 50 gold pieces. Interested?" ',
        'russian': '"Книга заклинаний стоит 50 золотых монет. Интересует?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        destroyItem(integer(value 3), byte 88, byte 0, byte 50)
        createItem(integer(value 3), byte 57, byte 0, byte 1)
        jump label_128

    case 'n':
    case {'russian': 'н'}:
        if integer(value 23):
            print({
                'english': '"Perhaps one of thy friends then."',
                'russian': '"Тогда, может быть, её купит кто-нибудь из твоих друзей".'
            })
            wait()

            print({
                'english': '\n\n',
                'russian': '\n\n'
            })
            integer(value 2) = byte 1
            jump label_2383

        else:
            jump label_128
        fi
    esac

integers_2750 = [
    66, // 0
    67, // 1
    68, // 2
    70, // 3
    71, // 4
    72, // 5
    0,  // 6
    0,  // 7
]

integers_2766 = [
    3, // 0
    1, // 1
    2, // 2
    2, // 3
    2, // 4
    1, // 5
    0, // 6
    0, // 7
]

strings_2782 = [
    {
        'english': 'Blood Moss',
        'russian': 'Кровавый мох'
    }, // 0
    {
        'english': 'Garlic',
        'russian': 'Чеснок'
    }, // 1
    {
        'english': 'Ginseng',
        'russian': 'Женьшень'
    }, // 2
    {
        'english': 'Nightshade',
        'russian': 'Паслён'
    }, // 3
    {
        'english': 'Spider Silk',
        'russian': 'Паучий шёлк'
    }, // 4
    {
        'english': 'Sulfurous Ash',
        'russian': 'Сернистый пепел'
    }, // 5
    {
        'english': ' ',
        'russian': ' '
    }, // 6
    {
        'english': ' ',
        'russian': ' '
    }, // 7
]

strings_2849 = [
    {
        'english': 'th',
        'russian': '-го'
    }, // 0
    {
        'english': 'st',
        'russian': '-го'
    }, // 1
    {
        'english': 'nd',
        'russian': '-го'
    }, // 2
    {
        'english': 'rd',
        'russian': '-го'
    }, // 3
    {
        'english': 'th',
        'russian': '-го'
    }, // 4
    {
        'english': 'th',
        'russian': '-го'
    }, // 5
    {
        'english': 'th',
        'russian': '-го'
    }, // 6
    {
        'english': 'th',
        'russian': '-го'
    }, // 7
    {
        'english': 'th',
        'russian': '-го'
    }, // 8
]

integers_2876 = [
    0,   // 0
    4,   // 1
    6,   // 2
    8,   // 3
    255, // 4
    255, // 5
    255, // 6
    255, // 7
    255, // 8
    255, // 9
    255, // 10
    0,   // 11
    0,   // 12
    0,   // 13
    0,   // 14
    0,   // 15
    0,   // 16
    0,   // 17
    0,   // 18
    0,   // 19
    37,  // 20
    255, // 21
    0,   // 22
    0,   // 23
    0,   // 24
    0,   // 25
    0,   // 26
    0,   // 27
    0,   // 28
    0,   // 29
    52,  // 30
    255, // 31
    0,   // 32
    0,   // 33
    0,   // 34
    0,   // 35
    0,   // 36
    0,   // 37
    0,   // 38
    0,   // 39
    70,  // 40
    72,  // 41
    255, // 42
    0,   // 43
    0,   // 44
    0,   // 45
    0,   // 46
    0,   // 47
    0,   // 48
    0,   // 49
    255, // 50
    0,   // 51
    0,   // 52
    0,   // 53
    0,   // 54
    0,   // 55
    0,   // 56
    0,   // 57
    0,   // 58
    0,   // 59
    255, // 60
    0,   // 61
    0,   // 62
    0,   // 63
    0,   // 64
    0,   // 65
    0,   // 66
    0,   // 67
    0,   // 68
    0,   // 69
    117, // 70
    255, // 71
    0,   // 72
    0,   // 73
    0,   // 74
    0,   // 75
    0,   // 76
    0,   // 77
    0,   // 78
    0,   // 79
]

strings_3036 = [
    {
        'english': 'Create Food',
        'russian': 'Создать пищу'
    }, // 0
    {
        'english': 'Douse',
        'russian': 'Погасить'
    }, // 1
    {
        'english': 'Heal',
        'russian': 'Лечение'
    }, // 2
    {
        'english': 'Ignite',
        'russian': 'Воспламенить'
    }, // 3
    {
        'english': ' ',
        'russian': ' '
    }, // 4
    {
        'english': ' ',
        'russian': ' '
    }, // 5
    {
        'english': ' ',
        'russian': ' '
    }, // 6
    {
        'english': ' ',
        'russian': ' '
    }, // 7
    {
        'english': ' ',
        'russian': ' '
    }, // 8
    {
        'english': ' ',
        'russian': ' '
    }, // 9
    {
        'english': ' ',
        'russian': ' '
    }, // 10
    {
        'english': ' ',
        'russian': ' '
    }, // 11
    {
        'english': ' ',
        'russian': ' '
    }, // 12
    {
        'english': ' ',
        'russian': ' '
    }, // 13
    {
        'english': ' ',
        'russian': ' '
    }, // 14
    {
        'english': ' ',
        'russian': ' '
    }, // 15
    {
        'english': ' ',
        'russian': ' '
    }, // 16
    {
        'english': ' ',
        'russian': ' '
    }, // 17
    {
        'english': ' ',
        'russian': ' '
    }, // 18
    {
        'english': ' ',
        'russian': ' '
    }, // 19
    {
        'english': 'Mass Awaken',
        'russian': 'Групповое пробуждение'
    }, // 20
    {
        'english': ' ',
        'russian': ' '
    }, // 21
    {
        'english': ' ',
        'russian': ' '
    }, // 22
    {
        'english': ' ',
        'russian': ' '
    }, // 23
    {
        'english': ' ',
        'russian': ' '
    }, // 24
    {
        'english': ' ',
        'russian': ' '
    }, // 25
    {
        'english': ' ',
        'russian': ' '
    }, // 26
    {
        'english': ' ',
        'russian': ' '
    }, // 27
    {
        'english': ' ',
        'russian': ' '
    }, // 28
    {
        'english': ' ',
        'russian': ' '
    }, // 29
    {
        'english': 'Great Heal',
        'russian': 'Великое лечение'
    }, // 30
    {
        'english': ' ',
        'russian': ' '
    }, // 31
    {
        'english': ' ',
        'russian': ' '
    }, // 32
    {
        'english': ' ',
        'russian': ' '
    }, // 33
    {
        'english': ' ',
        'russian': ' '
    }, // 34
    {
        'english': ' ',
        'russian': ' '
    }, // 35
    {
        'english': ' ',
        'russian': ' '
    }, // 36
    {
        'english': ' ',
        'russian': ' '
    }, // 37
    {
        'english': ' ',
        'russian': ' '
    }, // 38
    {
        'english': ' ',
        'russian': ' '
    }, // 39
    {
        'english': 'Pickpocket',
        'russian': 'Обыскать карманы'
    }, // 40
    {
        'english': 'Seance',
        'russian': 'Медиум'
    }, // 41
    {
        'english': ' ',
        'russian': ' '
    }, // 42
    {
        'english': ' ',
        'russian': ' '
    }, // 43
    {
        'english': ' ',
        'russian': ' '
    }, // 44
    {
        'english': ' ',
        'russian': ' '
    }, // 45
    {
        'english': ' ',
        'russian': ' '
    }, // 46
    {
        'english': ' ',
        'russian': ' '
    }, // 47
    {
        'english': ' ',
        'russian': ' '
    }, // 48
    {
        'english': ' ',
        'russian': ' '
    }, // 49
    {
        'english': ' ',
        'russian': ' '
    }, // 50
    {
        'english': ' ',
        'russian': ' '
    }, // 51
    {
        'english': ' ',
        'russian': ' '
    }, // 52
    {
        'english': ' ',
        'russian': ' '
    }, // 53
    {
        'english': ' ',
        'russian': ' '
    }, // 54
    {
        'english': ' ',
        'russian': ' '
    }, // 55
    {
        'english': ' ',
        'russian': ' '
    }, // 56
    {
        'english': ' ',
        'russian': ' '
    }, // 57
    {
        'english': ' ',
        'russian': ' '
    }, // 58
    {
        'english': ' ',
        'russian': ' '
    }, // 59
    {
        'english': ' ',
        'russian': ' '
    }, // 60
    {
        'english': ' ',
        'russian': ' '
    }, // 61
    {
        'english': ' ',
        'russian': ' '
    }, // 62
    {
        'english': ' ',
        'russian': ' '
    }, // 63
    {
        'english': ' ',
        'russian': ' '
    }, // 64
    {
        'english': ' ',
        'russian': ' '
    }, // 65
    {
        'english': ' ',
        'russian': ' '
    }, // 66
    {
        'english': ' ',
        'russian': ' '
    }, // 67
    {
        'english': ' ',
        'russian': ' '
    }, // 68
    {
        'english': ' ',
        'russian': ' '
    }, // 69
    {
        'english': 'Resurrect',
        'russian': 'Воскрешение'
    }, // 70
    {
        'english': ' ',
        'russian': ' '
    }, // 71
    {
        'english': ' ',
        'russian': ' '
    }, // 72
    {
        'english': ' ',
        'russian': ' '
    }, // 73
    {
        'english': ' ',
        'russian': ' '
    }, // 74
    {
        'english': ' ',
        'russian': ' '
    }, // 75
    {
        'english': ' ',
        'russian': ' '
    }, // 76
    {
        'english': ' ',
        'russian': ' '
    }, // 77
    {
        'english': ' ',
        'russian': ' '
    }, // 78
    {
        'english': ' ',
        'russian': ' '
    }, // 79
]
