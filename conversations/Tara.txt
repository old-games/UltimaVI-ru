source('CONVERSE.A')
index(65)

id(65)
name({
    'english': 'Tara',
    'russian': 'Тара'
})

description:
    print({
        'english': 'a kindly old woman.',
        'russian': 'благожелательную женщину в годах.'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

interaction:
    integer(value 0) = partyHasObject(word 339, byte 0)

    if notEquals(integer(value 0), word 32769):
        jump label_2401
    fi

    if equals(hasBit(byte 235, value 0), byte 0):
        setBit(byte 235, value 0)
        print({
            'english': '"Welcome to my place of healing, Avatar."',
            'russian': '"Добро пожаловать в мою обитель исцеления, Аватар".'
        })
        wait()

        print({
            'english': '\n\n"I hope thou needest not my services!"',
            'russian': '\n\n"Надеюсь, тебе не нужны мои услуги!"'
        })

    else:
        print({
            'english': '"Welcome again, noble Avatar."',
            'russian': '"С возвращением, благородный Аватар".'
        })
        wait()

        print({
            'english': '\n\n"I hope this visit is for pleasure, not business!"',
            'russian': '\n\n"Надеюсь, вы пришли проведать меня, а не по делу!"'
        })
    fi

label_236:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'heal':
    case {'russian': 'леч'}:
        jump label_724

    case 'cure':
    case {'russian': 'исц'}:
        jump label_1555

    case 'resu':
    case {'russian': 'воск'}:
        integer(value 0) = partyHasObject(word 339, byte 0)

        if equals(integer(value 0), word 32769):
            print({
                'english': '"But gladly can I say that none of your party is dead!"',
                'russian': '"Отрадно видеть, что в вашем отряде нет мертвецов!"'
            })
            jump label_236

        else:
            look(integer(value 0))
            jump label_2453
        fi

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"My name is Tara."',
            'russian': '"Меня зовут Тара".'
        })
        jump label_236

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"I\'m the healer for this town."',
            'russian': '"Я целитель в этом городке".'
        })
        wait()

        print({
            'english': '\n\n"I\'ve cared for the @unfit here for threescore years!"',
            'russian': '\n\n"Я ухаживаю здесь за @больными вот уже шестьдесят лет!"'
        })
        jump label_236

    case 'unfi':
    case {'russian': 'боль'}:
        print({
            'english': '"Those who need @healing, @curing, or to be @resurrected."',
            'russian': '"Это те, кто нуждаются в @лечении, @исцелении или в @воскрешении".'
        })
        jump label_236

    case 'mant':
    case {'russian': 'закл'}:
    case 'sacr':
    case {'russian': 'жерт'}:
        print({
            'english': '"\'Cah,\' that is the word of sacrifice."',
            'russian': '"\'Каа\' - это слово жертвенности".'
        })
        jump label_236

    case 'bye':
    case {'russian': 'пока'}:
    case 'no':
    case {'russian': 'нет'}:
        print({
            'english': '"Farewell!"\n',
            'russian': '"Всего доброго!"\n'
        })
        bye()

    case 'yes':
    case {'russian': 'да'}:
        print({
            'english': '"What can I do for thee?"',
            'russian': '"Что я могу сделать для тебя?"'
        })
        jump label_236

    case '*':
        if random(byte 0, byte 1):
            print({
                'english': '"I don\'t understand $Z."',
                'russian': '"Я не понимаю, что такое \'$Z\'".'
            })

        else:
            print({
                'english': '"I beg thy pardon?"',
                'russian': '"Прошу прощения?"'
            })
        fi

        jump label_236
    esac

label_724:
    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump label_805
    fi

    integer(value 3) = character(byte 0, byte 0)

    if isWounded(integer(value 3)):
        jump label_1086

    else:
        print({
            'english': '"But thou art well!"',
            'russian': '"Но с вами всё в порядке!"'
        })
        jump label_1507
    fi

label_805:
    if greater(integer(value 1), integer(value 23)):
        jump label_915
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(isWounded(integer(value 3)), byte 0):
        jump label_900
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_900
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n',
        'russian': '#2) $Y\n'
    })
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

label_900:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump label_805

label_915:
    if equals(integer(value 2), byte 0):
        print({
            'english': '"But all of you are well!"',
            'russian': '"Но вы все здоровы!"'
        })
        jump label_1507
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump label_1086
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n"Which of you?" ',
        'russian': '#2) $Y\n"Кто из вас?" '
    })
    inputDigit(integer(value 2))

    if equals(integer(value 2), byte 0):
        jump label_1507
    fi

    integer(value 1) = byte 0

label_1024:
    integer(value 3) = character(integer(value 1), byte 0)

    if isWounded(integer(value 3)):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump label_1086
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump label_1024
    fi

label_1086:
    look(integer(value 3))
    print({
        'english': '"I see thy injury, $Y."',
        'russian': '"Я вижу твою рану, $Y".'
    })
    wait()

    print({
        'english': '\n\n"Wilt thou make an offering of 30 gold?" ',
        'russian': '\n\n"Желаешь пожертвовать 30 золотых?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(objectsCount(integer(value 3), byte 88), byte 30):
            jump label_1311

        else:
            print({
                'english': 'Tara approaches $Y and binds the wounds.',
                'russian': 'Тара подходит к персонажу $Y и начинает перевязывать раны.'
            })
            destroyItem(integer(value 3), byte 88, byte 0, byte 30)
            heal(integer(value 3))
            jump label_236
        fi

    case 'n':
    case {'russian': 'н'}:
        if less(objectsCount(integer(value 3), byte 88), byte 30):
            jump label_1311

        else:
            print({
                'english': '"If thou wilt not pay, I cannot heal thee."',
                'russian': '"Если ты не желаешь платить, тогда я не смогу вылечить тебя".'
            })
            jump label_1507
        fi
    esac

label_1311:
    if less(integer(value 20), byte 40):
        print({
            'english': '"I\'m sorry. Without an offering I cannot heal thee."',
            'russian': 'Сожалею, но без пожертвования я не смогу вылечить тебя".'
        })
        jump label_236

    else:
        print({
            'english': '"Thou art poor, but thy cause is just."',
            'russian': '"Ты беден, но дело твоё правое".'
        })
        wait()

        print({
            'english': '\n\n"I will heal thee without payment."',
            'russian': '\n\n"Я вылечу тебя бесплатно".'
        })
        wait()

        print({
            'english': '\n\nSasha approaches $Y and binds the wounds.',
            'russian': '\n\nТара приближается к персонажу $Y и начинает перевязывать раны.'
        })
        heal(integer(value 3))
        jump label_1507
    fi

label_1507:
    wait()

    print({
        'english': '\n\n"Is there aught else I can do for thee?"',
        'russian': '\n\n"Могу ли я ещё как-нибудь помочь?"'
    })
    jump label_236

label_1555:
    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump label_1636
    fi

    integer(value 3) = character(byte 0, byte 0)

    if isPoisoned(integer(value 3)):
        jump label_1917

    else:
        print({
            'english': '"But thou art well!"',
            'russian': '"Но с вами всё в порядке!"'
        })
        jump label_1507
    fi

label_1636:
    if greater(integer(value 1), integer(value 23)):
        jump label_1746
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(isPoisoned(integer(value 3)), byte 0):
        jump label_1731
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_1731
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n',
        'russian': '#2) $Y\n'
    })
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

label_1731:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump label_1636

label_1746:
    if equals(integer(value 2), byte 0):
        print({
            'english': '"But all of you are well!"',
            'russian': '"Но вы все здоровы!"'
        })
        jump label_1507
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump label_1917
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n"Which of you?" ',
        'russian': '#2) $Y\n"Кто из вас?" '
    })
    inputDigit(integer(value 2))

    if equals(integer(value 2), byte 0):
        jump label_1507
    fi

    integer(value 1) = byte 0

label_1855:
    integer(value 3) = character(integer(value 1), byte 0)

    if isPoisoned(integer(value 3)):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump label_1917
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump label_1855
    fi

label_1917:
    look(integer(value 3))
    print({
        'english': '"I see thy injury, $Y."',
        'russian': '"Я вижу твою рану, $Y".'
    })
    wait()

    print({
        'english': '\n\n"Wilt thou make an offering of 10 gold?" ',
        'russian': '\n\n"Желаешь пожертвовать 10 золотых?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(objectsCount(integer(value 3), byte 88), byte 10):
            jump label_2174

        else:
            print({
                'english': 'Tara grabs a vial and pours it down $Y\'s throat.',
                'russian': 'Тара берёт пузырёк и вливает его содержимое в рот персонажу $Y.'
            })
            wait()

            print({
                'english': '\n\n$Y feels much better.',
                'russian': '\n\n$Y чувствует себя лучше.'
            })
            destroyItem(integer(value 3), byte 88, byte 0, byte 10)
            cure(integer(value 3))
            jump label_1507
        fi

    case 'n':
    case {'russian': 'н'}:
        if less(objectsCount(integer(value 3), byte 88), byte 10):
            jump label_2174

        else:
            print({
                'english': '"If thou wilt not pay, I cannot heal thee."',
                'russian': '"Если ты не желаешь платить, тогда я не смогу вылечить тебя".'
            })
            jump label_1507
        fi
    esac

label_2174:
    if less(integer(value 20), byte 40):
        print({
            'english': '"I\'m sorry. Without an offering I cannot heal thee."',
            'russian': '"Сожалею, но без пожертвования я не смогу вылечить тебя".'
        })
        jump label_236

    else:
        print({
            'english': '"Thou art poor, but thy cause is just."',
            'russian': '"Ты беден, но дело твоё правое".'
        })
        wait()

        print({
            'english': '\n\n"I will heal thee without payment."',
            'russian': '\n\n"Я вылечу тебя бесплатно".'
        })
        wait()

        print({
            'english': '\n\nTara grabs a vial and pours it down $Y\'s throat.',
            'russian': '\n\nТара берёт пузырёк и вливает его содержимое в рот персонажу $Y.'
        })
        wait()

        print({
            'english': '\n\n$Y feels much better.',
            'russian': '\n\n$Y чувствует себя лучше.'
        })
        cure(integer(value 3))
        jump label_1507
    fi

label_2401:
    look(integer(value 0))
    print({
        'english': '"Oh! I see that $Y carries a fallen comrade!"',
        'russian': '"Ох! Вижу, $Y несёт павшего товарища!"'
    })
    wait()

    print({
        'english': '\n\n',
        'russian': '\n\n'
    })

label_2453:
    print({
        'english': '"Wilt thou make an offering of 400 gold?" ',
        'russian': '"Желаешь пожертвовать 400 золотых?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(objectsCount(integer(value 0), byte 88), word 400):
            jump label_2587

        else:
            jump label_2926
        fi

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"Then there is naught I can do save grieve with thee."',
            'russian': '"Ничем помочь не смогу, кроме как погоревать вместе с тобой".'
        })
        jump label_236
    esac

label_2587:
    integer(value 1) = word 400
    integer(value 2) = byte 0
    integer(value 3) = byte 0
    integer(value 4) = byte 0

label_2616:
    if greater(integer(value 3), integer(value 23)):
        print({
            'english': '"That isn\'t enough money."',
            'russian': '"Этой суммы недостаточно".'
        })
        wait()

        print({
            'english': '\n\n"Thou art #1 gold piece\\s short."',
            'russian': '\n\n"Тебе не хватает #1 золота".'
        })
        jump label_236
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)

    if less(integer(value 5), integer(value 1)):
        integer(value 1) = minus(integer(value 1), integer(value 5))
        integer(value 2) = plus(integer(value 2), integer(value 5))
        integer(value 3) = plus(integer(value 3), byte 1)
        jump label_2616

    else:
        print({
            'english': 'Your party takes up a collection for their fallen comrade.',
            'russian': 'Ваш отряд скидывается на воскрешение павшего товарища.'
        })
        integer(value 1) = word 400
        integer(value 2) = byte 0
        integer(value 4) = integer(value 3)
        integer(value 3) = byte 0
        jump label_2840
    fi

label_2840:
    if equals(integer(value 3), integer(value 4)):
        destroyItem(character(integer(value 3), byte 0), byte 88, byte 0, integer(value 1))
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_2926
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)
    integer(value 1) = minus(integer(value 1), integer(value 5))
    destroyItem(character(integer(value 3), byte 0), byte 88, byte 0, integer(value 5))
    integer(value 3) = plus(integer(value 3), byte 1)
    jump label_2840

label_2926:
    print({
        'english': 'Tara lays hands upon the corpse...',
        'russian': 'Тара накладывает руки на тело...'
    })
    wait()

    print({
        'english': '\n\n"Doman..."',
        'russian': '\n\n"Доман..."'
    })
    wait()

    print({
        'english': '\n\n"thixus..."',
        'russian': '\n\n"тиксус..."'
    })
    wait()

    print({
        'english': '\n\n"anretu!"',
        'russian': '\n\n"анрету!"'
    })
    resurrect(integer(value 0))
    wait()

    print({
        'english': '\n\nAnd the dead live again!',
        'russian': '\n\nИ мертвец оживает!'
    })
    integer(value 0) = partyHasObject(word 339, byte 0)

    if notEquals(integer(value 0), word 32769):
        look(integer(value 0))
        wait()

        print({
            'english': '\n\n"I see that $Y carries another slain friend."',
            'russian': '\n\n"Я вижу, $Y несёт другого вашего павшего друга".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_2453

    else:
        jump label_236
    fi
