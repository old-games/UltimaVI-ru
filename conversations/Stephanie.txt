source("CONVERSE.B")
index(49)

id(148)
name("Stephanie")

description:
    print("a young woman who stares into the distance.")
    wait()

interaction:
    print("\n")
    integer(value 0) = partyHasObject(word 339, byte 0)

    if and(notEquals(integer(value 0), word 32769), equals(integer(value 32), byte 144)):
        jump 2802
    fi

    if hasBit(byte 235, value 0):
        print("\"I recognize your voice.\" She smiles.")

    else:
        print("\"Hello? Is someone there?\"")
        ('SETF', ('byte', 235), ('value', 0))
    fi

    wait()

167:
    print("\n")

    ask()

    case "name":
        print("\"Stephanie, but you can call me '@Steph.'\"")
        jump 167

    case "step":
        print("\"That's better.\"")
        jump 167

    case "heal":
        jump 566

    case "cure":
        jump 1688

    case "resu":
        integer(value 0) = partyHasObject(word 339, byte 0)

        if equals(integer(value 0), word 32769):
            print("\"But I sense none with you are dead.\"")
            jump 167

        else:
            ('SETNAME', ('integer', [('value', 0)]))
            jump 2856
        fi

    case "job":
        print("\"We have no 'jobs' here as such.\"")
        wait()

        print("\n\n\"But I can @heal, @cure and @resurrect.\"")
        jump 167

    case "bye":
        print("\"Good $T, my friend")

        if integer(value 23):
            print("s")
        fi

        print(". Take care.\" Her long lashes flitter a moment.\n")
        bye()

    case "*":
        print("\"I don't think I'm the one to ask that of.\"")
        jump 167

        // Unreachable code!
    esac

566:
    if notEquals(integer(value 32), byte 144):
        print("\"Come to my shop when I'm open!\"")
        jump 167
    fi

    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump 731
    fi

    integer(value 3) = character(byte 0, byte 0)

    if isWounded(integer(value 3)):
        jump 1071

    else:
        print("After touching your brow she states, \"You feel fine to me.\"")
        jump 1625

        // Unreachable code!
    fi

731:
    if greater(integer(value 1), integer(value 23)):
        jump 841
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(isWounded(integer(value 3)), byte 0):
        jump 826
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump 826
    fi

    ('SETNAME', ('integer', [('value', 4)]))
    print("#2) $Y\n")
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

826:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump 731

841:
    if equals(integer(value 2), byte 0):
        print("She feels each brow and holds her ear close to your mouths.")
        wait()

        print("\n\n\"None of you are sick!\"")
        jump 1625
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump 1071
    fi

    ('SETNAME', ('integer', [('value', 4)]))
    print("#2) $Y\n\"Which of you?\" ")
    ('INPUTNUM', 2)

    if equals(integer(value 2), byte 0):
        jump 1625
    fi

    integer(value 1) = byte 0

1009:
    integer(value 3) = character(integer(value 1), byte 0)

    if isWounded(integer(value 3)):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump 1071
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump 1009
    fi

1071:
    ('SETNAME', ('integer', [('value', 3)]))
    print("\"I sense your injury, $Y.\"")
    wait()

    print("\n\n\"Will you make an offering of 25 gold?\" ")

    askc("yn")

    case "y":
        if less(objectsCount(integer(value 3), byte 88), byte 25):
            jump 1351

        else:
            print("She closes her eyes, puts a delicate hand on your brow and chants ")
            print("softly.")
            wait()

            print("\n\nYou feel much better.")
            ('DELETE', ('integer', [('value', 3)]), ('byte', 88), ('byte', 0), ('byte', 25))
            ('HEAL', ('integer', [('value', 3)]))
            jump 167
        fi

    case "n":
        if less(objectsCount(integer(value 3), byte 88), byte 25):
            jump 1351

        else:
            print("\"I cannot heal you if you won't tithe.\"")
            jump 1625

            // Unreachable code!
        fi
    esac

1351:
    if less(integer(value 20), byte 40):
        print("\"I'm sorry. Without an offering I cannot heal you.\"")
        jump 167

    else:
        print("\"I sense your hesitation is based on your empty pockets.\"")
        wait()

        print("\n\n\"I also sense your cause is a just one.\"")
        wait()

        print("\n\nShe closes her eyes, puts a delicate hand on your brow and chants ")
        print("softly.")
        wait()

        print("\n\nYou feel much better.")
        ('HEAL', ('integer', [('value', 3)]))
        jump 1625

        // Unreachable code!
    fi

1625:
    wait()

    print("\n\nHer blue eyes pierce you. \"What else can I do for you?\"")
    jump 167

1688:
    if notEquals(integer(value 32), byte 144):
        print("\"Come to my shop when I'm open!\"")
        jump 167
    fi

    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump 1855
    fi

    integer(value 3) = character(byte 0, byte 0)

    if isPoisoned(integer(value 3)):
        jump 2179

    else:
        print("She lifts your hand against her lips. \"You are not poisoned.\"")
        jump 1625

        // Unreachable code!
    fi

1855:
    if greater(integer(value 1), integer(value 23)):
        jump 1965
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(isPoisoned(integer(value 3)), byte 0):
        jump 1950
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump 1950
    fi

    ('SETNAME', ('integer', [('value', 4)]))
    print("#2) $Y\n")
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

1950:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump 1855

1965:
    if equals(integer(value 2), byte 0):
        print("Holding each hand against her lips she states \"You are not poisoned.\"")
        jump 1625
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump 2179
    fi

    ('SETNAME', ('integer', [('value', 4)]))
    print("#2) $Y\n\"Which of you?\" ")
    ('INPUTNUM', 2)

    if equals(integer(value 2), byte 0):
        jump 1625
    fi

    integer(value 1) = byte 0

2117:
    integer(value 3) = character(integer(value 1), byte 0)

    if isPoisoned(integer(value 3)):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump 2179
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump 2117
    fi

2179:
    ('SETNAME', ('integer', [('value', 3)]))
    print("\"I sense that you are poisoned, $Y.\"")
    wait()

    print("\n\n\"Will you make an offering of 5 gold?\" ")

    askc("yn")

    case "y":
        if less(objectsCount(integer(value 3), byte 88), byte 5):
            jump 2480

        else:
            print("Placing your hand over her heart, she closes her eyes and whispers ")
            print("something.")
            wait()

            print("\n\nThe fever leaves your brow.")
            ('DELETE', ('integer', [('value', 3)]), ('byte', 88), ('byte', 0), ('byte', 5))
            ('CURE', ('integer', [('value', 3)]))
            jump 1625
        fi

    case "n":
        if less(objectsCount(integer(value 3), byte 88), byte 5):
            jump 2480

        else:
            print("\"Without the offering I cannot cure you.\"")
            jump 1625

            // Unreachable code!
        fi
    esac

2480:
    if less(integer(value 20), byte 40):
        print("\"I'm sorry. Without an offering I cannot cure you.\"")
        jump 167

    else:
        print("A tear comes to her eyes.")
        wait()

        print("\n\n\"I should have known you would not ask unless 		[you were in grave ")
        print("need.\"")
        wait()

        print("\n\n\"Come, put your hand on my heart.\"")
        wait()

        print("\n\nPlacing your hand over her heart, she closes her eyes and whispers ")
        print("something.")
        wait()

        print("\n\nThe fever leaves your brow.")
        ('CURE', ('integer', [('value', 3)]))
        jump 1625

        // Unreachable code!
    fi

2802:
    ('SETNAME', ('integer', [('value', 0)]))
    print("\"I sense that someone has met a terrible fate.\"")
    wait()

    print("\n\n")

2856:
    if notEquals(integer(value 32), byte 144):
        print("\"Come to my shop when I'm open!\"")
        jump 167
    fi

    print("\"Will you make an offering of 350 gold?\" ")

    askc("yn")

    case "y":
        if less(objectsCount(integer(value 0), byte 88), word 350):
            jump 3034

        else:
            jump 3385
        fi

    case "n":
        print("\"Then there is nothing I can do save grieve with you.\"")
        jump 167

        // Unreachable code!
    esac

3034:
    integer(value 1) = word 350
    integer(value 2) = byte 0
    integer(value 3) = byte 0
    integer(value 4) = byte 0

3063:
    if greater(integer(value 3), integer(value 23)):
        print("\"You haven't enough gold.\"")
        wait()

        print("\n\n\"I'm sorry, all I can do is grieve with you.\"")
        jump 167
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)

    if less(integer(value 5), integer(value 1)):
        integer(value 1) = minus(integer(value 1), integer(value 5))
        integer(value 2) = plus(integer(value 2), integer(value 5))
        integer(value 3) = plus(integer(value 3), byte 1)
        jump 3063

    else:
        print("Your party takes up a collection for their fallen comrade.")
        integer(value 1) = word 350
        integer(value 2) = byte 0
        integer(value 4) = integer(value 3)
        integer(value 3) = byte 0
        jump 3299

        // Unreachable code!
    fi

3299:
    if equals(integer(value 3), integer(value 4)):
        ('DELETE', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 88), ('byte', 0), ('integer', [('value', 1)]))
        wait()

        print("\n\n")
        jump 3385
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)
    integer(value 1) = minus(integer(value 1), integer(value 5))
    ('DELETE', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 88), ('byte', 0), ('integer', [('value', 5)]))
    integer(value 3) = plus(integer(value 3), byte 1)
    jump 3299

3385:
    print("$N lays hands upon the corpse...")
    wait()

    print("\n\n\"Doman...\"")
    wait()

    print("\n\n\"thixus...\"")
    wait()

    print("\n\n\"anretu!\"")
    ('RESURRECT', ('integer', [('value', 0)]))
    wait()

    print("\n\nAnd the dead live again!")
    integer(value 0) = partyHasObject(word 339, byte 0)

    if notEquals(integer(value 0), word 32769):
        ('SETNAME', ('integer', [('value', 0)]))
        wait()

        print("\n\n\"I sense that others have been lost as well...\"")
        wait()

        print("\n\n")
        jump 2856

    else:
        jump 167

        // Unreachable code!
    fi
