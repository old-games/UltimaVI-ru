source('CONVERSE.B')
index(49)

id(148)
name({
    'english': 'Stephanie',
    'russian': 'Стефани'
})

description:
    print({
        'english': 'a young woman who stares into the distance.',
        'russian': 'молодую женщину с отстранённым взглядом.'
    })
    wait()

interaction:
    print({
        'english': '\n',
        'russian': '\n'
    })
    integer(value 0) = partyHasObject(word 339, byte 0)

    if and(notEquals(integer(value 0), word 32769), equals(integer(value 32), byte 144)):
        jump label_2802
    fi

    if hasBit(byte 235, value 0):
        print({
            'english': '"I recognize your voice." She smiles.',
            'russian': '"Я узнаю ваш голос", - улыбается она.'
        })

    else:
        print({
            'english': '"Hello? Is someone there?"',
            'russian': '"Здравствуйте? Здесь кто-то есть?"'
        })
        setBit(byte 235, value 0)
    fi

    wait()

label_167:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"Stephanie, but you can call me \'@Steph.\'"',
            'russian': '"Стефани, но можете звать меня \'@Стеф\'".'
        })
        jump label_167

    case 'step':
    case {'russian': 'стеф'}:
        print({
            'english': '"That\'s better."',
            'russian': '"Так-то лучше".'
        })
        jump label_167

    case 'heal':
    case {'russian': 'леч'}:
        jump label_566

    case 'cure':
    case {'russian': 'исц'}:
        jump label_1688

    case 'resu':
    case {'russian': 'воск'}:
        integer(value 0) = partyHasObject(word 339, byte 0)

        if equals(integer(value 0), word 32769):
            print({
                'english': '"But I sense none with you are dead."',
                'russian': '"Но я не чувствую мертвецов среди вас".'
            })
            jump label_167

        else:
            look(integer(value 0))
            jump label_2856
        fi

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"We have no \'jobs\' here as such."',
            'russian': '"Мы тут никем не \'работаем\'".'
        })
        wait()

        print({
            'english': '\n\n"But I can @heal, @cure and @resurrect."',
            'russian': '\n\n"Но я могу @лечить, @исцелять и @воскрешать".'
        })
        jump label_167

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"Good $T, my friend',
            'russian': '"Доброго $T, путник'
        })

        if integer(value 23):
            print({
                'english': 's',
                'russian': 'и'
            })
        fi

        print({
            'english': '. Take care." Her long lashes flitter a moment.\n',
            'russian': '. Берегите себя". Она взмахнула своими длинными ресницами.\n'
        })
        bye()

    case '*':
        print({
            'english': '"I don\'t think I\'m the one to ask that of."',
            'russian': '"Не думаю, что вы пришли по адресу".'
        })
        jump label_167
    esac

label_566:
    if notEquals(integer(value 32), byte 144):
        print({
            'english': '"Come to my shop when I\'m open!"',
            'russian': '"Приходите, когда лавка открыта!"'
        })
        jump label_167
    fi

    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump label_731
    fi

    integer(value 3) = character(byte 0, byte 0)

    if isWounded(integer(value 3)):
        jump label_1071

    else:
        print({
            'english': 'After touching your brow she states, "You feel fine to me."',
            'russian': 'Трогая ваш лоб, она произносит: "Вы здоровы, как по мне".'
        })
        jump label_1625
    fi

label_731:
    if greater(integer(value 1), integer(value 23)):
        jump label_841
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(isWounded(integer(value 3)), byte 0):
        jump label_826
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_826
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n',
        'russian': '#2) $Y\n'
    })
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

label_826:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump label_731

label_841:
    if equals(integer(value 2), byte 0):
        print({
            'english': 'She feels each brow and holds her ear close to your mouths.',
            'russian': 'Она трогает каждый лоб и наклоняется ухом к каждому рту.'
        })
        wait()

        print({
            'english': '\n\n"None of you are sick!"',
            'russian': '\n\n"Вы все здоровы!"'
        })
        jump label_1625
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump label_1071
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n"Which of you?" ',
        'russian': '#2) $Y\n"Кто из вас?" '
    })
    inputDigit(integer(value 2))

    if equals(integer(value 2), byte 0):
        jump label_1625
    fi

    integer(value 1) = byte 0

label_1009:
    integer(value 3) = character(integer(value 1), byte 0)

    if isWounded(integer(value 3)):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump label_1071
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump label_1009
    fi

label_1071:
    look(integer(value 3))
    print({
        'english': '"I sense your injury, $Y."',
        'russian': '"Я могу почувствовать вашу травму, $Y".'
    })
    wait()

    print({
        'english': '\n\n"Will you make an offering of 25 gold?" ',
        'russian': '\n\n"Желаете пожертвовать 25 золотых?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(objectsCount(integer(value 3), byte 88), byte 25):
            jump label_1351

        else:
            print({
                'english': 'She closes her eyes, puts a delicate hand on your brow and chants ',
                'russian': 'Она закрывает глаза и кладёт свою маленькую руку на ваш лоб и что-то '
            })
            print({
                'english': 'softly.',
                'russian': 'тихо произносит.'
            })
            wait()

            print({
                'english': '\n\nYou feel much better.',
                'russian': '\n\nВам сразу становится легче.'
            })
            destroyItem(integer(value 3), byte 88, byte 0, byte 25)
            heal(integer(value 3))
            jump label_167
        fi

    case 'n':
    case {'russian': 'н'}:
        if less(objectsCount(integer(value 3), byte 88), byte 25):
            jump label_1351

        else:
            print({
                'english': '"I cannot heal you if you won\'t tithe."',
                'russian': '"Я не могу вылечить вас, если вы не сделаете пожертвование".'
            })
            jump label_1625
        fi
    esac

label_1351:
    if less(integer(value 20), byte 40):
        print({
            'english': '"I\'m sorry. Without an offering I cannot heal you."',
            'russian': 'Сожалею, но я не смогу излечить вас без пожертвования".'
        })
        jump label_167

    else:
        print({
            'english': '"I sense your hesitation is based on your empty pockets."',
            'russian': '"Чувствую, что ваша нерешительность - от пустого кошелька".'
        })
        wait()

        print({
            'english': '\n\n"I also sense your cause is a just one."',
            'russian': '\n\n"Я также чувствую, ваше дело правое".'
        })
        wait()

        print({
            'english': '\n\nShe closes her eyes, puts a delicate hand on your brow and chants ',
            'russian': '\n\nОна закрывает глаза и кладёт свою маленькую руку на ваш лоб и что-то '
        })
        print({
            'english': 'softly.',
            'russian': 'тихо произносит.'
        })
        wait()

        print({
            'english': '\n\nYou feel much better.',
            'russian': '\n\nВам сразу становится легче.'
        })
        heal(integer(value 3))
        jump label_1625
    fi

label_1625:
    wait()

    print({
        'english': '\n\nHer blue eyes pierce you. "What else can I do for you?"',
        'russian': '\n\nЕё голубые глаза смотрят сквозь вас. "Чем ещё могу вам помочь?"'
    })
    jump label_167

label_1688:
    if notEquals(integer(value 32), byte 144):
        print({
            'english': '"Come to my shop when I\'m open!"',
            'russian': '"Приходите, когда лавка открыта!"'
        })
        jump label_167
    fi

    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump label_1855
    fi

    integer(value 3) = character(byte 0, byte 0)

    if isPoisoned(integer(value 3)):
        jump label_2179

    else:
        print({
            'english': 'She lifts your hand against her lips. "You are not poisoned."',
            'russian': 'Она подносит вашу руку к своим губам. "Вы не отравлены".'
        })
        jump label_1625
    fi

label_1855:
    if greater(integer(value 1), integer(value 23)):
        jump label_1965
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(isPoisoned(integer(value 3)), byte 0):
        jump label_1950
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_1950
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n',
        'russian': '#2) $Y\n'
    })
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

label_1950:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump label_1855

label_1965:
    if equals(integer(value 2), byte 0):
        print({
            'english': 'Holding each hand against her lips she states "You are not poisoned."',
            'russian': 'Поднеся каждую руку к своим губам, она произносит: "Вы не отравлены".'
        })
        jump label_1625
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump label_2179
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n"Which of you?" ',
        'russian': '#2) $Y\n"Кто из вас?" '
    })
    inputDigit(integer(value 2))

    if equals(integer(value 2), byte 0):
        jump label_1625
    fi

    integer(value 1) = byte 0

label_2117:
    integer(value 3) = character(integer(value 1), byte 0)

    if isPoisoned(integer(value 3)):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump label_2179
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump label_2117
    fi

label_2179:
    look(integer(value 3))
    print({
        'english': '"I sense that you are poisoned, $Y."',
        'russian': '"Чувствую, что вы отравлены, $Y".'
    })
    wait()

    print({
        'english': '\n\n"Will you make an offering of 5 gold?" ',
        'russian': '\n\n"Желаете пожертвовать 5 золотых?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(objectsCount(integer(value 3), byte 88), byte 5):
            jump label_2480

        else:
            print({
                'english': 'Placing your hand over her heart, she closes her eyes and whispers ',
                'russian': 'Она кладёт вашу руку на своё сердце, закрывает глаза и что-то '
            })
            print({
                'english': 'something.',
                'russian': 'шепчет.'
            })
            wait()

            print({
                'english': '\n\nThe fever leaves your brow.',
                'russian': '\n\nЖар покидает вас.'
            })
            destroyItem(integer(value 3), byte 88, byte 0, byte 5)
            cure(integer(value 3))
            jump label_1625
        fi

    case 'n':
    case {'russian': 'н'}:
        if less(objectsCount(integer(value 3), byte 88), byte 5):
            jump label_2480

        else:
            print({
                'english': '"Without the offering I cannot cure you."',
                'russian': '"Без пожертвования я не смогу исцелить вас".'
            })
            jump label_1625
        fi
    esac

label_2480:
    if less(integer(value 20), byte 40):
        print({
            'english': '"I\'m sorry. Without an offering I cannot cure you."',
            'russian': '"Сожалею, но я не смогу излечить вас без пожертвования".'
        })
        jump label_167

    else:
        print({
            'english': 'A tear comes to her eyes.',
            'russian': 'На её глазах наворачиваются слёзы.'
        })
        wait()

        print({
            'english': '\n\n"I should have known you would not ask unless \t\t[you were in grave ',
            'russian': '\n\n"Я должна была догадаться - вы бы не стали просить, не будь у вас '
        })
        print({
            'english': 'need."',
            'russian': 'крайней нужды".'
        })
        wait()

        print({
            'english': '\n\n"Come, put your hand on my heart."',
            'russian': '\n\n"Положите вашу руку на моё сердце".'
})
        wait()

        print({
            'english': '\n\nPlacing your hand over her heart, she closes her eyes and whispers ',
            'russian': '\n\nОна кладёт вашу руку на своё сердце, закрывает глаза и что-то '
        })
        print({
            'english': 'something.',
            'russian': 'шепчет.'
        })
        wait()

        print({
            'english': '\n\nThe fever leaves your brow.',
            'russian': '\n\nЖар покидает вас.'
        })
        cure(integer(value 3))
        jump label_1625
    fi

label_2802:
    look(integer(value 0))
    print({
        'english': '"I sense that someone has met a terrible fate."',
        'russian': '"Я чувствую, что кого-то постигла ужасная судьба".'
    })
    wait()

    print({
        'english': '\n\n',
        'russian': '\n\n'
    })

label_2856:
    if notEquals(integer(value 32), byte 144):
        print({
            'english': '"Come to my shop when I\'m open!"',
            'russian': '"Приходите, когда лавка открыта!"'
        })
        jump label_167
    fi

    print({
        'english': '"Will you make an offering of 350 gold?" ',
        'russian': '"Желаете пожертвовать 350 золотых?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(objectsCount(integer(value 0), byte 88), word 350):
            jump label_3034

        else:
            jump label_3385
        fi

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"Then there is nothing I can do save grieve with you."',
            'russian': '"Тогда я ничем не смогу помочь, кроме как погоревать вместе с вами".'
        })
        jump label_167
    esac

label_3034:
    integer(value 1) = word 350
    integer(value 2) = byte 0
    integer(value 3) = byte 0
    integer(value 4) = byte 0

label_3063:
    if greater(integer(value 3), integer(value 23)):
        print({
            'english': '"You haven\'t enough gold."',
            'russian': '"У вас недостаточно золота".'
        })
        wait()

        print({
            'english': '\n\n"I\'m sorry, all I can do is grieve with you."',
            'russian': '\n\n"Сожалею, но я могу лишь погоревать вместе с вами".'
        })
        jump label_167
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)

    if less(integer(value 5), integer(value 1)):
        integer(value 1) = minus(integer(value 1), integer(value 5))
        integer(value 2) = plus(integer(value 2), integer(value 5))
        integer(value 3) = plus(integer(value 3), byte 1)
        jump label_3063

    else:
        print({
            'english': 'Your party takes up a collection for their fallen comrade.',
            'russian': 'Ваш отряд скидывается на воскрешение павшего товарища.'
        })
        integer(value 1) = word 350
        integer(value 2) = byte 0
        integer(value 4) = integer(value 3)
        integer(value 3) = byte 0
        jump label_3299
    fi

label_3299:
    if equals(integer(value 3), integer(value 4)):
        destroyItem(character(integer(value 3), byte 0), byte 88, byte 0, integer(value 1))
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_3385
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)
    integer(value 1) = minus(integer(value 1), integer(value 5))
    destroyItem(character(integer(value 3), byte 0), byte 88, byte 0, integer(value 5))
    integer(value 3) = plus(integer(value 3), byte 1)
    jump label_3299

label_3385:
    print({
        'english': '$N lays hands upon the corpse...',
        'russian': '$N накладывает руки на тело...'
    })
    wait()

    print({
        'english': '\n\n"Doman..."',
        'russian': '\n\n"Доман..."'
    })
    wait()

    print({
        'english': '\n\n"thixus..."',
        'russian': '\n\n"тиксус..."'
    })
    wait()

    print({
        'english': '\n\n"anretu!"',
        'russian': '\n\n"анрету!"'
    })
    resurrect(integer(value 0))
    wait()

    print({
        'english': '\n\nAnd the dead live again!',
        'russian': '\n\nИ мертвец оживает!'
    })
    integer(value 0) = partyHasObject(word 339, byte 0)

    if notEquals(integer(value 0), word 32769):
        look(integer(value 0))
        wait()

        print({
            'english': '\n\n"I sense that others have been lost as well..."',
            'russian': '\n\n"Чувствую, что и другие пали..."'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_2856

    else:
        jump label_167
    fi
