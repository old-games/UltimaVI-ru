source('CONVERSE.B')
index(49)

id(148)
name('Stephanie')

description:
    print('a young woman who stares into the distance.')
    wait()

interaction:
    print('\n')
    integer(value 0) = partyHasObject(word 339, byte 0)

    if and(notEquals(integer(value 0), word 32769), equals(integer(value 32), byte 144)):
        jump label_2802
    fi

    if hasBit(byte 235, value 0):
        print('"I recognize your voice." She smiles.')

    else:
        print('"Hello? Is someone there?"')
        ('SETF', ('byte', 235), ('value', 0))
    fi

    wait()

label_167:
    print('\n')

    ask()

    case 'name':
        print('"Stephanie, but you can call me \'@Steph.\'"')
        jump label_167

    case 'step':
        print('"That\'s better."')
        jump label_167

    case 'heal':
        jump label_566

    case 'cure':
        jump label_1688

    case 'resu':
        integer(value 0) = partyHasObject(word 339, byte 0)

        if equals(integer(value 0), word 32769):
            print('"But I sense none with you are dead."')
            jump label_167

        else:
            ('SETNAME', ('integer', [('value', 0)]))
            jump label_2856
        fi

    case 'job':
        print('"We have no \'jobs\' here as such."')
        wait()

        print('\n\n"But I can @heal, @cure and @resurrect."')
        jump label_167

    case 'bye':
        print('"Good $T, my friend')

        if integer(value 23):
            print('s')
        fi

        print('. Take care." Her long lashes flitter a moment.\n')
        bye()

    case '*':
        print('"I don\'t think I\'m the one to ask that of."')
        jump label_167
    esac

label_566:
    if notEquals(integer(value 32), byte 144):
        print('"Come to my shop when I\'m open!"')
        jump label_167
    fi

    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump label_731
    fi

    integer(value 3) = character(byte 0, byte 0)

    if isWounded(integer(value 3)):
        jump label_1071

    else:
        print('After touching your brow she states, "You feel fine to me."')
        jump label_1625
    fi

label_731:
    if greater(integer(value 1), integer(value 23)):
        jump label_841
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(isWounded(integer(value 3)), byte 0):
        jump label_826
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_826
    fi

    ('SETNAME', ('integer', [('value', 4)]))
    print('#2) $Y\n')
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

label_826:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump label_731

label_841:
    if equals(integer(value 2), byte 0):
        print('She feels each brow and holds her ear close to your mouths.')
        wait()

        print('\n\n"None of you are sick!"')
        jump label_1625
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump label_1071
    fi

    ('SETNAME', ('integer', [('value', 4)]))
    print('#2) $Y\n"Which of you?" ')
    ('INPUTNUM', 2)

    if equals(integer(value 2), byte 0):
        jump label_1625
    fi

    integer(value 1) = byte 0

label_1009:
    integer(value 3) = character(integer(value 1), byte 0)

    if isWounded(integer(value 3)):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump label_1071
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump label_1009
    fi

label_1071:
    ('SETNAME', ('integer', [('value', 3)]))
    print('"I sense your injury, $Y."')
    wait()

    print('\n\n"Will you make an offering of 25 gold?" ')

    choice('yn')

    case 'y':
        if less(objectsCount(integer(value 3), byte 88), byte 25):
            jump label_1351

        else:
            print('She closes her eyes, puts a delicate hand on your brow and chants ')
            print('softly.')
            wait()

            print('\n\nYou feel much better.')
            ('DELETE', ('integer', [('value', 3)]), ('byte', 88), ('byte', 0), ('byte', 25))
            ('HEAL', ('integer', [('value', 3)]))
            jump label_167
        fi

    case 'n':
        if less(objectsCount(integer(value 3), byte 88), byte 25):
            jump label_1351

        else:
            print('"I cannot heal you if you won\'t tithe."')
            jump label_1625
        fi
    esac

label_1351:
    if less(integer(value 20), byte 40):
        print('"I\'m sorry. Without an offering I cannot heal you."')
        jump label_167

    else:
        print('"I sense your hesitation is based on your empty pockets."')
        wait()

        print('\n\n"I also sense your cause is a just one."')
        wait()

        print('\n\nShe closes her eyes, puts a delicate hand on your brow and chants ')
        print('softly.')
        wait()

        print('\n\nYou feel much better.')
        ('HEAL', ('integer', [('value', 3)]))
        jump label_1625
    fi

label_1625:
    wait()

    print('\n\nHer blue eyes pierce you. "What else can I do for you?"')
    jump label_167

label_1688:
    if notEquals(integer(value 32), byte 144):
        print('"Come to my shop when I\'m open!"')
        jump label_167
    fi

    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump label_1855
    fi

    integer(value 3) = character(byte 0, byte 0)

    if isPoisoned(integer(value 3)):
        jump label_2179

    else:
        print('She lifts your hand against her lips. "You are not poisoned."')
        jump label_1625
    fi

label_1855:
    if greater(integer(value 1), integer(value 23)):
        jump label_1965
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(isPoisoned(integer(value 3)), byte 0):
        jump label_1950
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_1950
    fi

    ('SETNAME', ('integer', [('value', 4)]))
    print('#2) $Y\n')
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

label_1950:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump label_1855

label_1965:
    if equals(integer(value 2), byte 0):
        print('Holding each hand against her lips she states "You are not poisoned."')
        jump label_1625
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump label_2179
    fi

    ('SETNAME', ('integer', [('value', 4)]))
    print('#2) $Y\n"Which of you?" ')
    ('INPUTNUM', 2)

    if equals(integer(value 2), byte 0):
        jump label_1625
    fi

    integer(value 1) = byte 0

label_2117:
    integer(value 3) = character(integer(value 1), byte 0)

    if isPoisoned(integer(value 3)):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump label_2179
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump label_2117
    fi

label_2179:
    ('SETNAME', ('integer', [('value', 3)]))
    print('"I sense that you are poisoned, $Y."')
    wait()

    print('\n\n"Will you make an offering of 5 gold?" ')

    choice('yn')

    case 'y':
        if less(objectsCount(integer(value 3), byte 88), byte 5):
            jump label_2480

        else:
            print('Placing your hand over her heart, she closes her eyes and whispers ')
            print('something.')
            wait()

            print('\n\nThe fever leaves your brow.')
            ('DELETE', ('integer', [('value', 3)]), ('byte', 88), ('byte', 0), ('byte', 5))
            ('CURE', ('integer', [('value', 3)]))
            jump label_1625
        fi

    case 'n':
        if less(objectsCount(integer(value 3), byte 88), byte 5):
            jump label_2480

        else:
            print('"Without the offering I cannot cure you."')
            jump label_1625
        fi
    esac

label_2480:
    if less(integer(value 20), byte 40):
        print('"I\'m sorry. Without an offering I cannot cure you."')
        jump label_167

    else:
        print('A tear comes to her eyes.')
        wait()

        print('\n\n"I should have known you would not ask unless \t\t[you were in grave ')
        print('need."')
        wait()

        print('\n\n"Come, put your hand on my heart."')
        wait()

        print('\n\nPlacing your hand over her heart, she closes her eyes and whispers ')
        print('something.')
        wait()

        print('\n\nThe fever leaves your brow.')
        ('CURE', ('integer', [('value', 3)]))
        jump label_1625
    fi

label_2802:
    ('SETNAME', ('integer', [('value', 0)]))
    print('"I sense that someone has met a terrible fate."')
    wait()

    print('\n\n')

label_2856:
    if notEquals(integer(value 32), byte 144):
        print('"Come to my shop when I\'m open!"')
        jump label_167
    fi

    print('"Will you make an offering of 350 gold?" ')

    choice('yn')

    case 'y':
        if less(objectsCount(integer(value 0), byte 88), word 350):
            jump label_3034

        else:
            jump label_3385
        fi

    case 'n':
        print('"Then there is nothing I can do save grieve with you."')
        jump label_167
    esac

label_3034:
    integer(value 1) = word 350
    integer(value 2) = byte 0
    integer(value 3) = byte 0
    integer(value 4) = byte 0

label_3063:
    if greater(integer(value 3), integer(value 23)):
        print('"You haven\'t enough gold."')
        wait()

        print('\n\n"I\'m sorry, all I can do is grieve with you."')
        jump label_167
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)

    if less(integer(value 5), integer(value 1)):
        integer(value 1) = minus(integer(value 1), integer(value 5))
        integer(value 2) = plus(integer(value 2), integer(value 5))
        integer(value 3) = plus(integer(value 3), byte 1)
        jump label_3063

    else:
        print('Your party takes up a collection for their fallen comrade.')
        integer(value 1) = word 350
        integer(value 2) = byte 0
        integer(value 4) = integer(value 3)
        integer(value 3) = byte 0
        jump label_3299
    fi

label_3299:
    if equals(integer(value 3), integer(value 4)):
        ('DELETE', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 88), ('byte', 0), ('integer', [('value', 1)]))
        wait()

        print('\n\n')
        jump label_3385
    fi

    integer(value 5) = objectsCount(character(integer(value 3), byte 0), byte 88)
    integer(value 1) = minus(integer(value 1), integer(value 5))
    ('DELETE', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 88), ('byte', 0), ('integer', [('value', 5)]))
    integer(value 3) = plus(integer(value 3), byte 1)
    jump label_3299

label_3385:
    print('$N lays hands upon the corpse...')
    wait()

    print('\n\n"Doman..."')
    wait()

    print('\n\n"thixus..."')
    wait()

    print('\n\n"anretu!"')
    ('RESURRECT', ('integer', [('value', 0)]))
    wait()

    print('\n\nAnd the dead live again!')
    integer(value 0) = partyHasObject(word 339, byte 0)

    if notEquals(integer(value 0), word 32769):
        ('SETNAME', ('integer', [('value', 0)]))
        wait()

        print('\n\n"I sense that others have been lost as well..."')
        wait()

        print('\n\n')
        jump label_2856

    else:
        jump label_167
    fi
