source('CONVERSE.A')
index(49)

id(49)
name({
    'english': 'Culham',
    'russian': 'Калхэм'
})

description:
    print({
        'english': 'a small man in a handsome vest made of seashells.',
        'russian': 'невысокого мужчину в красивом жилете из морских ракушек.'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

interaction:
    if equals(integer(value 32), byte 153):
        print({
            'english': '"It\'s fighting time. Talking\'s for later."\n',
            'russian': '"Пришло время драться. Разговоры отложим на потом".\n'
        })
        bye()
    fi

    if hasBit(byte 235, value 0):
        jump label_280
    fi

    print({
        'english': '"Why, hullo there, $G. And who might ye be?"\n',
        'russian': '"Приветствую, $G. С кем имею честь говорить?"\n'
    })

    ask()
    print({
        'english': '\n',
        'russian': '\n'
    })

    if equals(string(value 25), string(value 35)):
        setBit(byte 235, value 0)
        print({
            'english': '"Well met, $G $Z. Let me tell ye a @tale."',
            'russian': '"Приятно познакомиться, $G $Z. Позвольте мне рассказать вам @историю".'
        })
        jump label_416

    else:
        print({
            'english': '"Oho, that be a name in need of a story."',
            'russian': '"Ого, такое имя заслуживает целую историю".'
        })
    fi

    jump label_416

label_280:
    print({
        'english': '"Why, hullo there, $P. Have I told ye the one about the gypsies?" ',
        'russian': '"Приветствую, $P. Я тебе рассказывал историю о цыганах?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        print({
            'english': '"Oh. Perhaps a @song, then."',
            'russian': '"О. Тогда мне, может быть, спеть @песню?"'
        })
        jump label_416

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"Now there\'s a @tale."',
            'russian': '"Тебе понравится эта @история".'
        })
        jump label_416
    esac

label_416:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"Culham\'s me name, $G."',
            'russian': '"Меня зовут Калхэм, $G".'
        })
        jump label_416

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"When @spirits be low, I play tunes to bring @cheer."',
            'russian': '"Когда падает @дух, я играю мелодии, чтобы поднять @настроение".'
        })
        jump label_416

    case 'spir':
    case {'russian': 'дух'}:
        print({
            'english': '"Once I heard a haunting melody..."',
            'russian': '"Однажды я услышал душевную мелодию..."'
        })
        wait()

        print({
            'english': '\n\n"...in Old @Magincia." He laughs.',
            'russian': '\n\n"...в Старой @Маджинсии". Он смеётся.'
        })
        jump label_416

    case 'old':
    case {'russian': 'стар'}:
    case 'magi':
    case {'russian': 'мадж'}:
    case 'haun':
    case {'russian': 'душе'}:
        print({
            'english': '"Well, it used to be a ghost town."',
            'russian': '"Ну, раньше это был город-призрак".'
        })
        wait()

        print({
            'english': '\nHe laughs and plays a little tune on his lute.',
            'russian': '\nОн смеётся и наигрывает короткую мелодию на своей лютне.'
        })
        jump label_416

    case 'chee':
    case {'russian': 'наст'}:
    case 'mant':
    case {'russian': 'мант'}:
        print({
            'english': '"The Mantra of Valour bringeth great cheer."',
            'russian': '"Мантра Доблести здорово поднимает настроение".'
        })
        wait()

        print({
            'english': '\n\n"I\'m not a great singer, but I love to play a song of valour."',
            'russian': '\n\n"Я не великий певец, но мне нравится играть песню о доблести".'
        })
        wait()

        print({
            'english': '\n"It makes me @sing."',
            'russian': '\n"Я даже начинаю @петь".'
        })
        jump label_416

    case 'sing':
    case {'russian': 'петь'}:
    case 'song':
    case {'russian': 'песн'}:
        print({
            'english': '"I\'ll sing, though I\'d rather @play."',
            'russian': '"Я спою, хотя предпочитаю @играть".'
        })
        jump label_416

    case 'gyps':
    case {'russian': 'цыга'}:
    case 'hear':
    case {'russian': 'услы'}:
    case 'tell':
    case {'russian': 'расс'}:
    case 'tale':
    case {'russian': 'исто'}:
    case 'stor':
    case {'russian': 'байк'}:
        jump label_1878

    case 'play':
    case {'russian': 'игра'}:
    case 'tune':
    case {'russian': 'мело'}:
        if or(or(isNearby(byte 50), isNearby(byte 45)), isNearby(byte 46)):
            print({
                'english': 'The pub is filled with the sound of singing.',
                'russian': 'Паб наполняется звуками пения.'
            })

        else:
            print({
                'english': 'Culham sings for you.',
                'russian': 'Калхэм поёт для вас.'
            })
        fi

        wait()

        print({
            'english': '\n\n"It seemed like such an easy climb ',
            'russian': '\n\n"Лёгкой прогулкой наверх восходил - '
        })
        wait()

        print({
            'english': '\nI crawled upon the Serpent\'s Spine ',
            'russian': '\nЗмеиный Хребет покорить я решил '
        })
        wait()

        print({
            'english': '\nI hadn\'t even time to blanch ',
            'russian': '\nНо вдруг, не успел даже я побледнеть, '
        })
        wait()

        print({
            'english': '\nWhen down there came an avalanche!"',
            'russian': '\nНалетела лавина, наглеца чтоб стереть!"'
        })
        wait()

        print({
            'english': '\n\n"And then my mantra came to mind ',
            'russian': '\n\n"Тут на ум моментально мне мантра пришла - '
        })
        wait()

        print({
            'english': '\n\'Tho boulders bounced and passed with speed. ',
            'russian': '\nВалуны разлетались туда и сюда. '
        })
        wait()

        print({
            'english': '\nMy frozen fingers gripped to rock ',
            'russian': '\nЯ вцепился в скалу изо всех своих сил, '
        })
        wait()

        print({
            'english': '\nAs sliding snow swept loose my feet."',
            'russian': '\nЛишь по ноги меня скользкий снег завалил."'
        })
        wait()

        print({
            'english': '\n\n"Sing \'ra,\' my friends, sing \'ra.\' ',
            'russian': '\n\n"Пойте \'ра\', вы, друг мой, пойте \'ра\', пойте \'ра\', '
        })
        wait()

        print({
            'english': '\n\'Tis a song to make thee strong ',
            'russian': '\nИ придаст эта мантра много сил вам тогда! '
        })
        wait()

        print({
            'english': '\nWhen the mountains be high ',
            'russian': '\nСколь высоки не будут пред вами вершины, '
        })
        wait()

        print({
            'english': '\nAnd the ground be far..."',
            'russian': '\nСколь низко под вами не будет земля..."'
        })
        wait()

        print({
            'english': '\n\n"...Sing \'ra,\' my friends, sing \'ra\'!"',
            'russian': '\n\n"...Пойте \'ра\', вы, друг мой, пойте \'ра\', пойте \'ра\'!"'
        })
        jump label_416

    case 'rune':
    case {'russian': 'руна'}:
    case 'mous':
    case {'russian': 'мышь'}:
    case 'rat':
    case {'russian': 'крыс'}:
    case 'naug':
    case {'russian': 'шало'}:
    case 'noma':
    case {'russian': 'нома'}:
        print({
            'english': '"Ah, yes. That\'s quite a story, too."',
            'russian': '"Ах, да. Это тоже интересная история".'
        })
        wait()

        print({
            'english': '\n\n"Naughty Nomaan dropped the Rune of Valor, and the rat carried it ',
            'russian': '\n\n"Шаловливый Номаан уронил Руну Доблести, и её унесла '
        })
        print({
            'english': 'off."',
            'russian': 'крыса".'
        })
        wait()

        print({
            'english': '\n\nHe laughs loudly.',
            'russian': '\n\nОн громко смеётся.'
        })

        if and(isNearby(byte 50), isNearby(byte 45)):
            wait()

            print({
                'english': '\nToo loudly. Stelnar and Jerris begin to argue over whether it was a ',
                'russian': '\nСлишком громко. Стелнар и Джеррис начинают спорить о том, была ли это '
            })
            print({
                'english': 'rat or a mouse.',
                'russian': 'мышь, или крыса.'
            })
            wait()

            print({
                'english': '\n\nOnce again a brawl breaks out!\n',
                'russian': '\n\nИ снова вспыхивает драка!\n'
            })
            jump label_3031

        else:
            jump label_416
        fi

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"May we meet again soon, friend."\n',
            'russian': '"Да встретимся мы снова в скором времени, друг".\n'
        })
        bye()

    case '*':
        print({
            'english': '"Sorry, I cannot help ye with that."',
            'russian': '"Извините, я не могу вам с этим помочь".'
        })
        jump label_416
    esac

label_1878:
    print({
        'english': '"Would ye really like to hear a story?" ',
        'russian': '"Вы действительно хотели бы услышать историю?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"Well, not everyone likes gypsy tales, I suppose."',
            'russian': '"Ну, я полагаю, не всем нравятся истории про цыган".'
        })
        jump label_416

    case 'y':
    case {'russian': 'д'}:
        print({
            'english': '"I call this story..."',
            'russian': '"Я называю эту историю..."'
        })
        wait()

        print({
            'english': '\n\n"Arturosis"',
            'russian': '\n\n"Артурозис"'
        })
        wait()

        print({
            'english': '\n\n"Two gypsies come to Trinsic, hungry as usual."',
            'russian': '\n\n"Приезжают как-то в Тринсик два цыгана, как обычно, голодные".'
        })
        wait()

        print({
            'english': '\n"One goes out and gathers a poisonous weed from the swamps."',
            'russian': '\n"Один отправляется на болота собирать ядовитые сорняки".'
        })
        wait()

        print({
            'english': '\n"The other sneaks into town and puts the plant into the trough of a ',
            'russian': '\n"А другой пробирается в город и кладёт растение в кормушку '
        })
        print({
            'english': 'horse."',
            'russian': 'лошади".'
        })
        wait()

        print({
            'english': '\n\n"Well, poor horse doesn\'t know better."',
            'russian': '\n\n"Так вот, бедная лошадь не знает, что к чему".'
        })
        wait()

        print({
            'english': '\n\n"He eats the stuff, swells up and takes ill."',
            'russian': '\n\n"И съедает это растение, а затем опухает и заболевает".'
        })
        wait()

        print({
            'english': '\n\n"The owner, Immanuelle, doesn\'t know what to do."',
            'russian': '\n\n"Её владелец, Иммануэль, не знает, что делать".'
        })
        wait()

        print({
            'english': '\n\n"Along come the gypsies. \'Aiee!\' they cry."',
            'russian': '\n\n"Как вдруг приходят цыгане. \'Эй!\' - кричат они."'
        })
        wait()

        print({
            'english': '\n\n"\'Yonder nag hath contracted \'Arturosis.\'"',
            'russian': '\n\n"Вон та кляча заболела \'Артурозисом\'".'
        })
        wait()

        print({
            'english': '\n\n"Unless it be immediately removed, the rest shall catch the same ',
            'russian': '\n\n"Если её немедленно не убрать, остальные подхватят ту же '
        })
        print({
            'english': 'fatal disease.\'"',
            'russian': 'смертельную болезнь\'".'
        })
        wait()

        print({
            'english': '\n\n"Immanuelle decides to sacrifice the diseased one and the gypsies ',
            'russian': '\n\n"Иммануэль решает пожертвовать больным животным, и цыгане от всего '
        })
        print({
            'english': 'agree heartily."',
            'russian': 'сердца соглашаются".'
        })
        wait()

        print({
            'english': '\n\n"\'For but a few coins,\' say the gypsies,\' we will lead it away and ',
            'russian': '\n\n"\'Всего за несколько монет\', - говорят цыгане, - \'мы уведём его и '
        })
        print({
            'english': 'bury it far from here.\'"',
            'russian': 'похороним подальше отсюда\'".'
        })
        wait()

        print({
            'english': '\n\n"Immanuelle is too happy to hand them the doomed animal\'s bridle, ',
            'russian': '\n\n"Иммануэль с радостью отдаёт им уздечку обречённого животного '
        })
        print({
            'english': 'plus ten coins."',
            'russian': 'и десять монет впридачу".'
        })
        wait()

        print({
            'english': '\n\n"So the gypsies make a great kettle of horse stew and bury the ',
            'russian': '\n\n"Позднее, цыгане готовят большой котёл тушёной конины, а остальное '
        })
        print({
            'english': 'rest."',
            'russian': 'закапывают".'
        })
        wait()

        print({
            'english': '\n\n"A great feast is held \'mongst gypsykind."',
            'russian': '\n\n"И устраивают большой пир".'
        })
        wait()

        print({
            'english': '\n\n"Meanwhile, Immanuelle thanks virtue that the equine epidemic was ',
            'russian': '\n\n"А тем временем, Иммануэль благодарит добродетель за то, что эпидемия лошадей была '
        })
        print({
            'english': 'caught early on!"',
            'russian': 'остановлена на ранней стадии!"'
        })
        wait()

        print({
            'english': '\n\n"\'Tis a true story, my friend."',
            'russian': '\n\n"Это правдивая история, мой друг".'
        })
        jump label_416
    esac

label_3031:
    if isNearby(byte 44):
        do(byte 44, byte 153)
    fi

    if isNearby(byte 46):
        do(byte 46, byte 153)
    fi

    do(byte 50, byte 153)
    do(byte 45, byte 153)
    do(byte 49, byte 153)
    bye()
