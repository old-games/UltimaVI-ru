source("CONVERSE.A")
index(49)

id(49)
name("Culham")

description:
    print("a small man in a handsome vest made of seashells.")
    wait()

    print("\n")

interaction:
    if equals(integer(value 32), byte 153):
    print("\"It's fighting time. Talking's for later.\"\n")
    bye()

    endif

    if hasBit(byte 235, value 0):
    jump 280

    endif

    print("\"Why, hullo there, $G. And who might ye be?\"\n")

    ask()
    print("\n")

    if equals(string(value 25), string(value 35)):
    ('SETF', ('byte', 235), ('value', 0))
    print("\"Well met, $G $Z. Let me tell ye a @tale.\"")
    jump 416

    else:
    print("\"Oho, that be a name in need of a story.\"")

    endif

    jump 416

280:
    print("\"Why, hullo there, $P. Have I told ye the one about the gypsies?\" ")

    askc("yn")
    case "y":
    print("\"Oh. Perhaps a @song, then.\"")
    jump 416

    case "n":
    print("\"Now there's a @tale.\"")
    jump 416

416:
    print("\n")

    ask()
    case "name":
    print("\"Culham's me name, $G.\"")
    jump 416

    case "job":
    print("\"When @spirits be low, I play tunes to bring @cheer.\"")
    jump 416

    case "spir":
    print("\"Once I heard a haunting melody...\"")
    wait()

    print("\n\n\"...in Old @Magincia.\" He laughs.")
    jump 416

    case "old,magi,haun":
    print("\"Well, it used to be a ghost town.\"")
    wait()

    print("\nHe laughs and plays a little tune on his lute.")
    jump 416

    case "chee,mant":
    print("\"The Mantra of Valour bringeth great cheer.\"")
    wait()

    print("\n\n\"I'm not a great singer, but I love to play a song of valour.\"")
    wait()

    print("\n\"It makes me @sing.\"")
    jump 416

    case "sing,song":
    print("\"I'll sing, though I'd rather @play.\"")
    jump 416

    case "gyps,hear,tell,tale,stor":
    jump 1878

    case "play,tune":

    if or(or(isNearby(byte 50), isNearby(byte 45)), isNearby(byte 46)):
    print("The pub is filled with the sound of singing.")

    else:
    print("Culham sings for you.")

    endif

    wait()

    print("\n\n\"It seemed like such an easy climb ")
    wait()

    print("\nI crawled upon the Serpent's Spine ")
    wait()

    print("\nI hadn't even time to blanch ")
    wait()

    print("\nWhen down there came an avalanche!\"")
    wait()

    print("\n\n\"And then my mantra came to mind ")
    wait()

    print("\n'Tho boulders bounced and passed with speed. ")
    wait()

    print("\nMy frozen fingers gripped to rock ")
    wait()

    print("\nAs sliding snow swept loose my feet.\"")
    wait()

    print("\n\n\"Sing 'ra,' my friends, sing 'ra.' ")
    wait()

    print("\n'Tis a song to make thee strong ")
    wait()

    print("\nWhen the mountains be high ")
    wait()

    print("\nAnd the ground be far...\"")
    wait()

    print("\n\n\"...Sing 'ra,' my friends, sing 'ra'!\"")
    jump 416

    case "rune,mous,rat,naug,noma":
    print("\"Ah, yes. That's quite a story, too.\"")
    wait()

    print("\n\n\"Naughty Nomaan dropped the Rune of Valor, and the rat carried it off.\"")
    wait()

    print("\n\nHe laughs loudly.")

    if and(isNearby(byte 50), isNearby(byte 45)):
    wait()

    print("\nToo loudly. Stelnar and Jerris begin to argue over whether it was a rat or a mouse.")
    wait()

    print("\n\nOnce again a brawl breaks out!\n")
    jump 3031

    else:
    jump 416

    endif

    case "bye":
    print("\"May we meet again soon, friend.\"\n")
    bye()

    case "*":
    print("\"Sorry, I cannot help ye with that.\"")
    jump 416

1878:
    print("\"Would ye really like to hear a story?\" ")

    askc("yn")
    case "n":
    print("\"Well, not everyone likes gypsy tales, I suppose.\"")
    jump 416

    case "y":
    print("\"I call this story...\"")
    wait()

    print("\n\n\"Arturosis\"")
    wait()

    print("\n\n\"Two gypsies come to Trinsic, hungry as usual.\"")
    wait()

    print("\n\"One goes out and gathers a poisonous weed from the swamps.\"")
    wait()

    print("\n\"The other sneaks into town and puts the plant into the trough of a horse.\"")
    wait()

    print("\n\n\"Well, poor horse doesn't know better.\"")
    wait()

    print("\n\n\"He eats the stuff, swells up and takes ill.\"")
    wait()

    print("\n\n\"The owner, Immanuelle, doesn't know what to do.\"")
    wait()

    print("\n\n\"Along come the gypsies. 'Aiee!' they cry.\"")
    wait()

    print("\n\n\"'Yonder nag hath contracted 'Arturosis.'\"")
    wait()

    print("\n\n\"Unless it be immediately removed, the rest shall catch the same fatal disease.'\"")
    wait()

    print("\n\n\"Immanuelle decides to sacrifice the diseased one and the gypsies agree heartily.\"")
    wait()

    print("\n\n\"'For but a few coins,' say the gypsies,' we will lead it away and bury it far from here.'\"")
    wait()

    print("\n\n\"Immanuelle is too happy to hand them the doomed animal's bridle, plus ten coins.\"")
    wait()

    print("\n\n\"So the gypsies make a great kettle of horse stew and bury the rest.\"")
    wait()

    print("\n\n\"A great feast is held 'mongst gypsykind.\"")
    wait()

    print("\n\n\"Meanwhile, Immanuelle thanks virtue that the equine epidemic was caught early on!\"")
    wait()

    print("\n\n\"'Tis a true story, my friend.\"")
    jump 416

3031:
    if isNearby(byte 44):
    ('WORKTYPE', ('byte', 44), ('byte', 153))

    endif

    if isNearby(byte 46):
    ('WORKTYPE', ('byte', 46), ('byte', 153))

    endif

    ('WORKTYPE', ('byte', 50), ('byte', 153))
    ('WORKTYPE', ('byte', 45), ('byte', 153))
    ('WORKTYPE', ('byte', 49), ('byte', 153))
    bye()
