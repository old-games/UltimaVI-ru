source('CONVERSE.B')
index(53)

id(152)
name({
    'english': 'Gherick',
    'russian': 'Герик'
})

description:
    print({
        'english': 'a tall man, covered with scars and drooling uncontrollably.',
        'russian': 'высокого мужчину, покрытого шрамами и безудержно пускающего слюни.'
    })
    wait()

    f3()

interaction:
    print({
        'english': '\n',
        'russian': '\n'
    })
    integer(value 8) = byte 5

    if hasBit(byte 235, value 0):
        print({
            'english': '"Back again?"',
            'russian': '"Опять вернулись?"'
        })

    else:
        print({
            'english': '"What do you want?"',
            'russian': '"Чего вы хотите?"'
        })
        setBit(byte 235, value 0)
    fi

label_126:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'buy':
    case {'russian': 'купи'}:
        print({
            'english': '"I\'s a great craftsman, I is. Me shop is \'uge!"',
            'russian': '"Я отличный мастер, ага. Мой магазин крутой!"'
        })
        wait()

        print({
            'english': '\n\n"You\'ll hafta be more specific: @arms or @armor?"',
            'russian': '\n\n"Вы должны уточнить: @оружие или @броню?"'
        })
        jump label_126

    case 'weap':
    case {'russian': 'оруж'}:
    case 'arms':
    case {'russian': 'воор'}:
        integer(value 9) = byte 0
        jump label_2495

    case 'armo':
    case {'russian': 'брон'}:
        integer(value 9) = integer(value 8)
        jump label_2495

    case 'sell':
    case {'russian': 'прод'}:
        jump label_1513

    case 'magi':
    case {'russian': 'маги'}:
    case 'shie':
    case {'russian': 'щит'}:
    case 'orde':
    case {'russian': 'орде'}:
    case 'serp':
    case {'russian': 'змеи'}:
        if hasBit(byte 235, byte 2):
            print({
                'english': '"What, you gone daft?"',
                'russian': '"Вы что, рехнулись?"'
            })
            wait()

            print({
                'english': '\n\n"I already made ya one!"',
                'russian': '\n\n"Я уже сделал вам такой!"'
            })
            jump label_126
        fi

        if equals(hasBit(byte 159, byte 7), byte 0):
            print({
                'english': '"Go talk ta Koranada about that first."',
                'russian': '"Сначала поговорите об этом с Коранадой".'
            })
            wait()

            jump label_126
        fi

        jump label_972

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"@Gherick."',
            'russian': '"@Герик."'
        })
        jump label_126

    case 'gher':
    case {'russian': 'гери'}:
        print({
            'english': '"Are ya learnin\' how ta speak or do ya need somethin\'?"',
            'russian': '"Вы учитесь говорить или вам ещё что-то нужно?"'
        })
        jump label_126

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"I makes the most @hideous weapons!"',
            'russian': '"Я делаю самое @страшное оружие!"'
        })
        jump label_126

    case 'hide':
    case {'russian': 'стра'}:
        if greater(integer(value 20), byte 40):
            print({
                'english': '"You ain\'t the sort what\'d be interested."',
                'russian': '"Вы не из тех, кому это может быть интересно".'
            })

        else:
            print({
                'english': '"I ain\'t gonna tell you, you\'d steal me brilliant ideas!"',
                'russian': '"Я не расскажу вам, иначе вы украдёте мои блестящие идеи!"'
            })
        fi

        wait()

        print({
            'english': '\n\n"I got some other stuff you could @buy, though."',
            'russian': '\n\n"Но у меня есть ещё кое-что, что ты можешь @купить".'
        })
        jump label_126

    case 'aman':
    case {'russian': 'аман'}:
        print({
            'english': '"She\'s got the best food in the land. Go see for yerself."',
            'russian': '"У неё самая лучшая еда в стране. Сходите к ней и убедитесь в этом".'
        })
        jump label_126

    case 'segg':
    case {'russian': 'сегг'}:
        print({
            'english': '"A fine warrior. New to this area."',
            'russian': '"Отличный воин. Новичок в этих краях".'
        })
        jump label_126

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"Shut the door on yer way out," he snarls.\n',
            'russian': '"Закройте дверь, когда будете уходить", - проворчал он.\n'
        })
        bye()

    case '*':
        if random(byte 0, byte 1):
            print({
                'english': 'He doesn\'t hear you.',
                'russian': 'Он вас не слышит.'
            })

        else:
            print({
                'english': 'He hears you but doesn\'t respond.',
                'russian': 'Он слышит вас, но не отвечает.'
            })
        fi

        jump label_126
    esac

label_972:
    if notEquals(integer(value 32), byte 144):
        print({
            'english': '"Come to my shop when I\'m open!"',
            'russian': '"Приходите в мой магазин, когда я откроюсь!"'
        })
        jump label_126
    fi

    integer(value 0) = partyHasObject(byte 10, byte 0)
    print({
        'english': '"Huh? Oh, yeah, da serpent shield."',
        'russian': '"А? Ах, да, змеиный щит".'
    })
    wait()

    print({
        'english': '\n\nHe looks around and then at the ceiling.',
        'russian': '\n\nОн оглядывается по сторонам, а затем поднимает глаза к потолку.'
    })
    wait()

    print({
        'english': '\n\n"I needs a snake shield, a chunk o\' gold, and a magic gem."',
        'russian': '\n\n"Мне нужен змеиный щит, кусок золота и волшебный самоцвет".'
    })
    wait()

    print({
        'english': '\n\n"Have ya got dese tings?" ',
        'russian': '\n\n"У вас они есть?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if and(and(notEquals(partyHasObject(byte 10, byte 0), word 32769), notEquals(partyHasObject(byte 89, byte 0), word 32769)), notEquals(partyHasObject(byte 77, byte 0), word 32769)):
            destroyItem(integer(value 0), byte 10, byte 0, byte 1)
            destroyItem(partyHasObject(byte 89, byte 0), byte 89, byte 0, byte 1)
            destroyItem(partyHasObject(byte 77, byte 0), byte 77, byte 0, byte 1)
            createItem(integer(value 0), byte 16, byte 0, byte 1)
            print({
                'english': 'He holds up a beautiful golden shield that glows softly.',
                'russian': 'Он держит в руках красивый золотой щит, который мягко светится.'
            })
            wait()

            print({
                'english': '\n\n"Here ya go. Just as promised."',
                'russian': '\n\n"Вот, пожалуйста. Как и обещал".'
            })
            setBit(byte 235, byte 2)
            wait()

            jump label_1481

        else:
            jump label_1401
        fi

label_1401:
        print({
            'english': '\n\n"You ain\'t got all that I asked for."',
            'russian': '\n\n"У вас нет вещей, что я просил".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })

label_1443:
        print({
            'english': '"Come back when ya do!"',
            'russian': '"Приходите, когда их найдёте!"'
        })
        wait()

        jump label_1481

    case 'n':
    case {'russian': 'н'}:
        jump label_1443
    esac

label_1481:
    print({
        'english': '\n\n"What else can I get ya?"',
        'russian': '\n\n"Что я ещё могу вам предложить?"'
    })
    jump label_126

label_1513:
    if notEquals(integer(value 32), byte 144):
        print({
            'english': '"Come to my shop when I\'m open!"',
            'russian': '"Приходите в мой магазин, когда я откроюсь!"'
        })
        jump label_126
    fi

    integer(value 0) = byte 0
    integer(value 2) = byte 0
    integer(value 3) = byte 0

label_1579:
    integer(value 1) = byte 0

label_1586:
    if hasObject(character(integer(value 0), byte 0), data(integers_3185, integer(value 1)), byte 0):
        data(integers_3369, integer(value 2)) = integer(value 0)
        integer(value 2) = plus(integer(value 2), byte 1)
        integer(value 3) = byte 1
        jump label_1666
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if data(integers_3185, integer(value 1)):
        jump label_1586
    fi

label_1666:
    integer(value 0) = plus(integer(value 0), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_1579
    fi

    if equals(integer(value 3), byte 0):
        print({
            'english': '"You ain\'t got nothing I wants."',
            'russian': '"У вас нет ничего, что мне интересно".'
        })
        wait()

        jump label_126
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = character(data(integers_3369, byte 0), byte 0)
        look(integer(value 3))
        print({
            'english': '"Aye, $Y got somethin\' interestin\'..."',
            'russian': '"Да, $Y имеет при себе кое-что интересное..."'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_1933
    fi

label_1809:
    integer(value 1) = byte 1

label_1816:
    look(character(data(integers_3369, minus(integer(value 1), byte 1)), byte 0))
    print({
        'english': '#1) $Y\n',
        'russian': '#1) $Y\n'
    })
    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 2)):
        jump label_1816
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"У кого из вас?" '
    })
    inputDigit(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_2465
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greaterOrEquals(integer(value 3), integer(value 2)):
        jump label_1809
    fi

    integer(value 3) = character(data(integers_3369, integer(value 3)), byte 0)

label_1933:
    integer(value 0) = byte 0
    integer(value 5) = byte 0

label_1947:
    if equals(hasObject(integer(value 3), data(integers_3185, integer(value 0)), byte 0), byte 0):
        jump label_1994
    fi

    data(integers_3339, integer(value 5)) = integer(value 0)
    integer(value 5) = plus(integer(value 5), byte 1)

label_1994:
    integer(value 0) = plus(integer(value 0), byte 1)

    if data(integers_3185, integer(value 0)):
        jump label_1947
    fi

    if equals(integer(value 5), byte 1):
        integer(value 6) = data(integers_3339, byte 0)
        jump label_2158
    fi

    integer(value 0) = byte 1

label_2053:
    print({
        'english': '#0) ',
        'russian': '#0) '
    })
    printString(strings_3209, data(integers_3339, minus(integer(value 0), byte 1)))
    print({
        'english': '\n',
        'russian': '\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)

    if lessOrEquals(integer(value 0), integer(value 5)):
        jump label_2053
    fi

    print({
        'english': '"Which item?" ',
        'russian': '"Что именно?" '
    })
    inputDigit(integer(value 6))

    if greater(integer(value 6), integer(value 5)):
        jump label_1933
    fi

    if equals(integer(value 6), byte 0):
        jump label_2465
    fi

    integer(value 6) = data(integers_3339, minus(integer(value 6), byte 1))

label_2158:
    string(value 0) = data(strings_3209, integer(value 6))
    integer(value 7) = divide(data(integers_3163, integer(value 6)), byte 3)
    look(integer(value 3))
    print({
        'english': '"I\'ll give ya #7 gold for that $0, $Y. Whaddya say?" ',
        'russian': '"Я дам вам #7 золота за $0, $Y. Что скажете?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'n':
    case {'russian': 'н'}:
        if equals(integer(value 5), byte 1):
            print({
                'english': '"I don\'t bargain, mate. #7 and not a copper."',
                'russian': '"Я не торгуюсь, приятель. #7, и ни медяка больше".'
            })
            wait()

            jump label_126

        else:
            print({
                'english': '"Well, how \'bout somethin\' else?"',
                'russian': '"Ну, может у вас есть что-нибудь ещё?"'
            })
            wait()

            print({
                'english': '\n\n',
                'russian': '\n\n'
            })
            jump label_1933
        fi

    case 'y':
    case {'russian': 'д'}:
        look(integer(value 3))
        print({
            'english': '"Done!" $N hands $Y #7 gold pieces and takes the $0.',
            'russian': '"Готово!" $N передаёт #7 золотых монет, и $Y отдаёт $0.'
        })
        destroyItem(integer(value 3), data(integers_3185, integer(value 6)), byte 0, byte 1)
        createItem(integer(value 3), byte 88, byte 0, integer(value 7))

        if equals(integer(value 5), byte 1):
            jump label_126

        else:
            wait()

            print({
                'english': '\n\n',
                'russian': '\n\n'
            })
            jump label_1933
        fi
    esac

label_2465:
    print({
        'english': '"Changed your mind, eh?"',
        'russian': '"Передумали, да?"'
    })
    wait()

    jump label_126

label_2495:
    if notEquals(integer(value 32), byte 144):
        print({
            'english': '"Come to my shop when I\'m open!"',
            'russian': '"Приходите в мой магазин, когда я откроюсь!"'
        })
        jump label_126
    fi

    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 1
        jump label_2686
    fi

label_2560:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_2574:
    look(character(integer(value 0), byte 0))
    print({
        'english': '#2) $Y\n',
        'russian': '#2) $Y\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_2574
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"Кто из вас?" '
    })
    inputDigit(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_2465
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_2560
    fi

    integer(value 3) = character(integer(value 3), byte 0)

label_2686:
    integer(value 0) = byte 1
    look(integer(value 3))

label_2697:
    string(value 0) = data(strings_3209, plus(integer(value 9), minus(integer(value 0), byte 1)))
    print({
        'english': '#0) $0\n',
        'russian': '#0) $0\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)

    if and(integer(value 9), notEquals(data(integers_3185, plus(integer(value 9), minus(integer(value 0), byte 1))), byte 0)):
        jump label_2697
    fi

    if and(equals(integer(value 9), byte 0), lessOrEquals(integer(value 0), integer(value 8))):
        jump label_2697
    fi

    integer(value 7) = integer(value 0)
    print({
        'english': '"Which item?" ',
        'russian': '"Что именно?" '
    })
    inputDigit(integer(value 0))

    if equals(integer(value 0), byte 0):
        jump label_2465
    fi

    if greaterOrEquals(integer(value 0), integer(value 7)):
        jump label_2686
    fi

    integer(value 0) = minus(plus(integer(value 9), integer(value 0)), byte 1)
    integer(value 1) = data(integers_3163, integer(value 0))
    string(value 1) = data(strings_3209, integer(value 0))
    print({
        'english': '"That $1 costs #1 gold."',
        'russian': '"$1 стоит #1 золота".'
    })
    wait()

    print({
        'english': '\n\n"Interested, $Y?" ',
        'russian': '\n\n"Берёте, $Y?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        jump label_2934

    case 'n':
    case {'russian': 'н'}:
        jump label_2686
    esac

label_2934:
    if less(plus(canCarry(integer(value 3)), weight(byte 88, integer(value 1))), weight(data(integers_3185, integer(value 0)), byte 1)):
        print({
            'english': '"What\'s this? You can\'t carry no $1, $Y!"',
            'russian': '"Что? $Y, вы же не сможете унести $1!"'
        })
        wait()

        jump label_126
    fi

    if greaterOrEquals(objectsCount(integer(value 3), byte 88), integer(value 1)):
        destroyItem(integer(value 3), byte 88, byte 0, integer(value 1))
        createItem(integer(value 3), data(integers_3185, integer(value 0)), byte 0, byte 1)
        print({
            'english': '"Great!"\n\nAfter accepting $Y\'s gold, $N hands over the $1.',
            'russian': '"Здорово!"\n\nКак только $Y отдаёт золото, $N передаёт $1.'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_2686

    else:
        print({
            'english': '"What\'s this? You can\'t afford no $1, $Y!"',
            'russian': '"Что? $Y, вы же не можете позволить себе $1!"'
        })
        wait()

        jump label_126
    fi

integers_3163 = [
    100, // 0
    20,  // 1
    40,  // 2
    15,  // 3
    50,  // 4
    30,  // 5
    40,  // 6
    75,  // 7
    20,  // 8
    25,  // 9
    30,  // 10
]

integers_3185 = [
    47,  // 0
    204, // 1
    40,  // 2
    37,  // 3
    45,  // 4
    14,  // 5
    15,  // 6
    20,  // 7
    24,  // 8
    4,   // 9
    13,  // 10
    0,   // 11
]

strings_3209 = [
    {
        'english': 'Halberd',
        'russian': 'Алебарда'
    }, // 0
    {
        'english': 'Hammer',
        'russian': 'Молоток'
    }, // 1
    {
        'english': 'Morning Star',
        'russian': 'Утренняя звезда'
    }, // 2
    {
        'english': 'Throwing Axe',
        'russian': 'Метательный топор'
    }, // 3
    {
        'english': '2-Handed Axe',
        'russian': 'Двуручный топор'
    }, // 4
    {
        'english': 'Black Shield',
        'russian': 'Чёрный щит'
    }, // 5
    {
        'english': 'Door Shield',
        'russian': 'Щит-дверь'
    }, // 6
    {
        'english': 'Scale Mail',
        'russian': 'Чешуйчатая броня'
    }, // 7
    {
        'english': 'Spiked Collar',
        'russian': 'Воротник с шипами'
    }, // 8
    {
        'english': 'Spiked Helm',
        'russian': 'Шипастый шлем'
    }, // 9
    {
        'english': 'Spiked Shield',
        'russian': 'Шипастый щит'
    }, // 10
]

integers_3339 = [
    0, // 0
    0, // 1
    0, // 2
    0, // 3
    0, // 4
    0, // 5
    0, // 6
    0, // 7
    0, // 8
    0, // 9
    0, // 10
    0, // 11
    0, // 12
    0, // 13
    0, // 14
]

integers_3369 = [
    0, // 0
    0, // 1
    0, // 2
    0, // 3
    0, // 4
    0, // 5
    0, // 6
    0, // 7
]
