source('CONVERSE.A')
index(51)

id(51)
name('Arvin')

description:
    print('a tavernkeeper.\n')

    f3()

interaction:
    integer(value 5) = byte 0

    if or(equals(integer(value 32), byte 137), equals(integer(value 32), byte 142)):
        jump label_246
    fi

    print('The man looks up from his cooking. "Aye, hello there."')
    wait()

    print('\n\n"\'Fraid I can\'t talk now. I have to cook ')

    if or(equals(integer(value 17), byte 13), equals(integer(value 17), byte 14)):
        print('tonight\'s supper')

    else:
        print('tomorrow\'s lunch')
    fi

    print('."')
    wait()

    print('\n\n"Come back when it\'s ready and have some!"\n')
    bye()

label_246:
    print('"Welcome to the Sword and Keg."')
    jump label_316

label_282:
    print('\n"Anything else I can do for you?"\n')

label_316:
    print('\n')

    ask()

    case 'name':
        print('"I be Arvin, mate."')
        ('SETF', ('byte', 235), ('value', 0))
        jump label_316

    case 'buy':
        print('"Which, @rolls, @ale, @mead, @wine, or @rations?"')
        jump label_316

    case 'job':
        print('"I sell @rolls, @ale, @mead, @wine, and @rations."')
        jump label_316

    case 'roll':
        jump label_1108

    case 'mead':
        integer(value 4) = byte 0
        jump label_612

    case 'ale':
        integer(value 4) = byte 1
        jump label_612

    case 'wine':
        integer(value 4) = byte 2
        jump label_612

    case 'rati':
        jump label_1556

    case 'bye':
    case 'no':
        print('"See you later."\n')
        bye()

    case '*':
        print('"I can\'t help you with that."')
    esac

    jump label_316

label_612:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 0
        jump label_748
    fi

label_632:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_646:
    ('SETNAME', ('character', [('integer', [('value', 0)]), ('byte', 0)]))
    print('#2. $Y\n')
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_646
    fi

    print('"Which of you?" ')
    ('INPUTNUM', 3)

    if equals(integer(value 3), byte 0):
        jump label_1065
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_632
    fi

label_748:
    integer(value 1) = data(dword 2286, integer(value 4))
    print('"That\'ll be #1 crowns. All right?" ')

    choice('yn')

    case 'y':
        jump label_823

    case 'n':
        integer(value 5) = byte 0
        jump label_1065
    esac

label_823:
    if less(objectsCount(character(integer(value 3), byte 0), byte 88), integer(value 1)):
        ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))
        print('"Come back when you have some gold."')
        wait()

        print('\n')
        jump label_282
    fi

    if less(plus(canCarry(character(integer(value 3), byte 0)), weight(byte 88, integer(value 1))), weight(data(dword 2292, integer(value 4)), byte 1)):
        print('"You don\'t have room to carry it."')
        integer(value 5) = byte 0
        jump label_1065
    fi

    ('DELETE', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 88), ('byte', 0), ('integer', [('value', 1)]))
    ('NEW', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('data', [('dword', 2292), ('integer', [('value', 4)])]), ('byte', 0), ('byte', 1))
    ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))
    integer(value 5) = byte 1
    string(value 1) = data(dword 2298, integer(value 4))
    print('"All right." $N gives $Y the $1.')
    wait()

    print('\n\n')
    jump label_1065

label_1065:
    if integer(value 5):
        print('"Enjoy the drink, matey."')
        wait()

        print('\n')
        jump label_282
    fi

    print('\n')
    jump label_282

label_1108:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 0
        jump label_1244
    fi

label_1128:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_1142:
    ('SETNAME', ('character', [('integer', [('value', 0)]), ('byte', 0)]))
    print('#2. $Y\n')
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_1142
    fi

    print('"Which of you?" ')
    ('INPUTNUM', 3)

    if equals(integer(value 3), byte 0):
        jump label_1502
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_1128
    fi

label_1244:
    print('"That\'ll be 2 crowns, okay?" ')

    choice('yn')

    case 'y':
        if less(objectsCount(character(integer(value 3), byte 0), byte 88), byte 2):
            ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))
            print('"Come back when you have some gold."')
            wait()

            print('\n')
            jump label_282
        fi

        if less(plus(canCarry(character(integer(value 3), byte 0)), weight(byte 88, byte 2)), weight(byte 130, byte 1)):
            print('"You don\'t have room to carry it."')
            integer(value 5) = byte 0
            jump label_1502
        fi

        ('DELETE', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 88), ('byte', 0), ('byte', 2))
        ('NEW', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 130), ('byte', 0), ('byte', 1))
        ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))
        print('$N gives $Y the rolls.')
        wait()

        integer(value 5) = byte 1
        print('\n\n')
        jump label_1502

    case 'n':
        integer(value 5) = byte 0
        jump label_282
    esac

label_1502:
    if integer(value 5):
        print('"They\'re good with butter, ya know."')
        wait()

        print('\n')
        jump label_282
    fi

    print('\n')
    jump label_282

label_1556:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 0
        jump label_1692
    fi

label_1576:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_1590:
    ('SETNAME', ('character', [('integer', [('value', 0)]), ('byte', 0)]))
    print('#2. $Y\n')
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_1590
    fi

    print('"Which of you?" ')
    ('INPUTNUM', 3)

    if equals(integer(value 3), byte 0):
        jump label_282
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_1576
    fi

label_1692:
    if or(less(plus(canCarry(character(integer(value 3), byte 0)), weight(byte 88, byte 4)), weight(byte 129, byte 1)), less(objectsCount(character(integer(value 3), byte 0), byte 88), byte 4)):
        integer(value 9) = byte 1
        jump label_1835
    fi

    print('"Rations are 4 gold apiece. How many do you want?" ')
    ('INPUT', 9)

    if greater(integer(value 9), word 200):
        integer(value 9) = word 200
    fi

    integer(value 8) = integer(value 9)

    if equals(integer(value 9), byte 0):
        jump label_282
    fi

    integer(value 0) = byte 0

label_1835:
    integer(value 6) = byte 0
    integer(value 7) = byte 0

    if less(plus(canCarry(character(integer(value 3), byte 0)), weight(byte 88, byte 4)), weight(byte 129, integer(value 9))):
        integer(value 6) = byte 1
        integer(value 0) = byte 1
        integer(value 9) = minus(integer(value 9), byte 1)
        jump label_1943
    fi

    if less(objectsCount(character(integer(value 3), byte 0), byte 88), multiply(integer(value 9), byte 4)):
        integer(value 7) = byte 1
        integer(value 9) = minus(integer(value 9), byte 1)
        jump label_1943
    fi

    jump label_2079

label_1943:
    if integer(value 9):
        jump label_1835
    fi

    if integer(value 6):
        ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))
        print('$N looks at $Y. "You haven\'t any room in your pack."')
        wait()

        print('\n')
        jump label_282
    fi

    if integer(value 7):
        ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))
        print('"Come back when you have some gold."')
        wait()

        print('\n')
        jump label_282
    fi

label_2079:
    ('DELETE', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 88), ('byte', 0), ('multiply', [('integer', [('value', 9)]), ('byte', 4)]))
    ('NEW', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 129), ('byte', 0), ('integer', [('value', 9)]))
    ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))

    if equals(integer(value 8), integer(value 9)):
        ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))
        print('$N hands the rations to $Y.')
        wait()

        print('\n')
        jump label_282
    fi

    print('He hands $Y #9 mutton ration\\s.')
    wait()

    print('\n\n')
    ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))

    if integer(value 0):
        print('"That\'s all you can carry."')
        wait()

        print('\n')
        jump label_282

    else:
        print('"That\'s all you can afford."')
        wait()

        print('\n')
        jump label_282
    fi

integers_2286 = [
    4,
    3,
    6,
]

integers_2292 = [
    116,
    117,
    115,
]

strings_2298 = [
    'Mead',
    'Ale',
    'Wine',
]
