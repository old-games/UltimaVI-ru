source('CONVERSE.A')
index(79)

id(79)
name({
    'english': 'Brandon',
    'russian': 'Брэндон'
})

description:
    print({
        'english': 'a golden-haired young man.',
        'russian': 'светловолосого молодого мужчину.'
    })
    wait()

interaction:
    integer(value 8) = byte 6

    if hasBit(byte 235, value 0):
        print({
            'english': '"Avatar! Good $T, $G! How has thy quest gone?"',
            'russian': '"Аватар! Добрый $T, $G! Успешна ли твоя миссия?"'
        })

    else:
        print({
            'english': '"Hey! The Avatar! Good $T, $G!"',
            'russian': '"Эй! Это же Аватар! Добрый $T, $G!"'
        })
        wait()

        print({
            'english': '\n\n"You\'ve come to me to aid thee in thy quest! What an honor!"',
            'russian': '\n\n"Ты здесь, чтобы обрести помощь в своей миссии! Вот это честь!"'
        })
        setBit(byte 235, value 0)
    fi

    wait()

    jump label_236

label_205:
    print({
        'english': '\n"What else can I do for thee?"',
        'russian': '\n"Что я ещё могу сделать для тебя?"'
    })

label_236:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'buy':
    case {'russian': 'куп'}:
        print({
            'english': '"I have a large inventory, so be more specific:"',
            'russian': '"У меня богатый выбор, поэтому просто скажи, что тебе нужно:"'
        })
        wait()

        print({
            'english': '\n\n"Dost thou want @arms or @armor?"',
            'russian': '\n\n"Желаешь приобрести @оружие или @доспехи?"'
        })
        jump label_236

    case 'arms':
    case {'russian': 'оружие'}:
        if notEquals(integer(value 32), byte 144):
            print({
                'english': '"Come by my shop when I\'m open!"',
                'russian': '"Заглядывай, когда лавка открыта!"'
            })
            jump label_236

        else:
            integer(value 9) = byte 0
            jump label_2157
        fi

    case 'armo':
    case {'russian': 'досп'}:
        if notEquals(integer(value 32), byte 144):
            print({
                'english': '"Come by my shop when I\'m open!"',
                'russian': '"Заглядывай, когда лавка открыта!"'
            })
            jump label_236

        else:
            integer(value 9) = integer(value 8)
            jump label_2157
        fi

    case 'sell':
    case {'russian': 'прод'}:
        if notEquals(integer(value 32), byte 144):
            print({
                'english': '"Come by my shop when I\'m open!"',
                'russian': '"Заглядывай, когда лавка открыта!"'
            })
            jump label_236

        else:
            jump label_1235
        fi

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"Oh, I\'m not important like you. I\'m just a weaponsmith--and only a ',
            'russian': '"Ох, я не так важен, как ты. Я всего лишь оружейник, и то - '
        })
        print({
            'english': '@journeyman at that."',
            'russian': 'пока считаюсь лишь @подмастерьем в этом деле".'
        })
        jump label_236

    case 'jour':
    case {'russian': 'подм'}:
        print({
            'english': '"Aye, just a few years ago I was a simple apprentice."',
            'russian': '"Да, несколько лет назад я был простым учеником".'
        })
        wait()

        print({
            'english': '\n\n"Now I @supply arms to all Trinsic!"',
            'russian': '\n\n"А теперь я @снабжаю оружием весь Тринсик!"'
        })
        jump label_236

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"My name\'s Brandon, $G, and I\'m honored to meet thee!"',
            'russian': '"Меня зовут Брэндон, $G, и для меня большая честь встретить тебя!"'
        })
        jump label_236

    case 'join':
    case {'russian': 'прис'}:
        print({
            'english': '"That would be a great honor! I\'d love to!"',
            'russian': '"С радостью! Это была бы большая честь для меня!"'
        })
        wait()

        print({
            'english': '\n\nThe man comes to his senses.',
            'russian': '\n\nМужчина вдруг опомнился.'
        })
        wait()

        print({
            'english': '\n\n"But no, I can\'t. I\'ve responsibilites here, especially @now."',
            'russian': '\n\n"Но нет, я не могу. У меня здесь есть дела, особенно @сейчас".'
        })
        jump label_236

    case 'well':
    case {'russian': 'ладн'}:
    case 'good':
    case {'russian': 'хоро'}:
    case 'fine':
    case {'russian': 'отл'}:
    case 'okay':
    case {'russian': 'согл'}:
    case 'grea':
    case {'russian': 'слав'}:
        print({
            'english': '"And glad I am to hear it!"',
            'russian': '"Я рад это слышать!"'
        })
        jump label_236

    case 'now':
    case {'russian': 'сей'}:
    case 'supp':
    case {'russian': 'пост'}:
        print({
            'english': '"I have to make @weapons to help fight the gargoyles!"',
            'russian': '"Я должен делать @оружие, чтобы помогать в борьбе с гаргульями!"'
        })
        jump label_236

    case 'bye':
    case {'russian': 'пока'}:
    case 'noth':
    case {'russian': 'нич'}:
        print({
            'english': '"Farewell! May thy quest succeed, Avatar!"\n',
            'russian': '"Прощай! Да увенчается твоя миссия успехом, Аватар!"\n'
        })
        bye()

    case 'weap':
    case {'russian': 'оруж'}:
        print({
            'english': '"Perhaps you\'d like to @buy some. I\'d be honored to have thee as a ',
            'russian': '"Возможно, ты захочешь @купить кое-что. Такой покупатель - '
        })
        print({
            'english': 'customer."',
            'russian': 'большая честь для меня".'
        })
        jump label_236

    case '*':
        print({
            'english': '"Beg pardon, $G?"',
            'russian': '"Прошу прощения, $G?"'
        })
        jump label_236
    esac

    // Unreachable code!
    jump label_236

label_1235:
    integer(value 0) = byte 0
    integer(value 2) = byte 0
    integer(value 3) = byte 0

label_1256:
    integer(value 1) = byte 0

label_1263:
    if hasObject(character(integer(value 0), byte 0), data(integers_2806, integer(value 1)), byte 0):
        data(integers_2975, integer(value 2)) = integer(value 0)
        integer(value 2) = plus(integer(value 2), byte 1)
        integer(value 3) = byte 1
        jump label_1343
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if data(integers_2806, integer(value 1)):
        jump label_1263
    fi

label_1343:
    integer(value 0) = plus(integer(value 0), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_1256
    fi

    if equals(integer(value 3), byte 0):
        print({
            'english': '"Sorry, none of you has anything I need."',
            'russian': '"Простите, ни у кого из вас нет того, что мне нужно".'
        })
        wait()

        print({
            'english': '\n',
            'russian': '\n'
        })
        jump label_205
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = character(data(integers_2975, byte 0), byte 0)
        look(integer(value 3))
        print({
            'english': '"Aye, $Y has something of interest..."',
            'russian': '"Да, $Y может похвастать кое-чем интересным..."'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_1620
    fi

label_1496:
    integer(value 1) = byte 1

label_1503:
    look(character(data(integers_2975, minus(integer(value 1), byte 1)), byte 0))
    print({
        'english': '#1) $Y\n',
        'russian': '#1) $Y\n'
    })
    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 2)):
        jump label_1503
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"Кто из вас?" '
    })
    inputDigit(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_2126
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greaterOrEquals(integer(value 3), integer(value 2)):
        jump label_1496
    fi

    integer(value 3) = character(data(integers_2975, integer(value 3)), byte 0)

label_1620:
    integer(value 0) = byte 0
    integer(value 5) = byte 0

label_1634:
    if equals(hasObject(integer(value 3), data(integers_2806, integer(value 0)), byte 0), byte 0):
        jump label_1681
    fi

    data(integers_2945, integer(value 5)) = integer(value 0)
    integer(value 5) = plus(integer(value 5), byte 1)

label_1681:
    integer(value 0) = plus(integer(value 0), byte 1)

    if data(integers_2806, integer(value 0)):
        jump label_1634
    fi

    if equals(integer(value 5), byte 1):
        integer(value 6) = data(integers_2945, byte 0)
        jump label_1845
    fi

    integer(value 0) = byte 1

label_1740:
    print({
        'english': '#0) ',
        'russian': '#0) '
    })
    printString(strings_2830, data(integers_2945, minus(integer(value 0), byte 1)))
    print({
        'english': '\n',
        'russian': '\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)

    if lessOrEquals(integer(value 0), integer(value 5)):
        jump label_1740
    fi

    print({
        'english': '"Which item?" ',
        'russian': '"Какая вещь?" '
    })
    inputDigit(integer(value 6))

    if greater(integer(value 6), integer(value 5)):
        jump label_1620
    fi

    if equals(integer(value 6), byte 0):
        jump label_2126
    fi

    integer(value 6) = data(integers_2945, minus(integer(value 6), byte 1))

label_1845:
    string(value 0) = data(strings_2830, integer(value 6))
    integer(value 7) = divide(data(integers_2784, integer(value 6)), byte 2)
    look(integer(value 3))
    print({
        'english': '"Will you take #7 gold for that $0, $Y?" ',
        'russian': '"#7 золота за эту вещь ($0), по рукам, $Y?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'n':
    case {'russian': 'н'}:
        if equals(integer(value 5), byte 1):
            print({
                'english': '"Perhaps some other time, then."',
                'russian': '"Может быть в другой раз".'
            })
            wait()

            print({
                'english': '\n',
                'russian': '\n'
            })
            jump label_205

        else:
            print({
                'english': '"Perhaps something else then?"',
                'russian': '"Может быть что-то ещё?"'
            })
            wait()

            print({
                'english': '\n\n',
                'russian': '\n\n'
            })
            jump label_1620
        fi

    case 'y':
    case {'russian': 'д'}:
        look(integer(value 3))
        print({
            'english': '"Done!" $N hands $Y #7 gold pieces and takes the $0.',
            'russian': '"Сделано!" $N передаёт персонажу $Y #7 золотых и забирает: $0.'
        })
        destroyItem(integer(value 3), data(integers_2806, integer(value 6)), byte 0, byte 1)
        createItem(integer(value 3), byte 88, byte 0, integer(value 7))

        if equals(integer(value 5), byte 1):
            print({
                'english': '\n',
                'russian': '\n'
            })
            jump label_205

        else:
            wait()

            print({
                'english': '\n\n',
                'russian': '\n\n'
            })
            jump label_1620
        fi
    esac

label_2126:
    print({
        'english': '"Changed your mind, eh?"',
        'russian': '"Передумали, да?"'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })
    jump label_205

label_2157:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 1
        jump label_2303
    fi

label_2177:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_2191:
    look(character(integer(value 0), byte 0))
    print({
        'english': '#2) $Y\n',
        'russian': '#2) $Y\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_2191
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"Кто из вас?" '
    })
    inputDigit(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_2126
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_2177
    fi

    integer(value 3) = character(integer(value 3), byte 0)

label_2303:
    integer(value 0) = byte 1

label_2310:
    string(value 0) = data(strings_2830, plus(integer(value 9), minus(integer(value 0), byte 1)))
    print({
        'english': '#0) $0\n',
        'russian': '#0) $0\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)

    if and(integer(value 9), notEquals(data(integers_2806, plus(integer(value 9), minus(integer(value 0), byte 1))), byte 0)):
        jump label_2310
    fi

    if and(equals(integer(value 9), byte 0), lessOrEquals(integer(value 0), integer(value 8))):
        jump label_2310
    fi

    integer(value 7) = integer(value 0)
    print({
        'english': '"Which item?" ',
        'russian': '"Какой предмет?" '
    })
    inputDigit(integer(value 0))

    if equals(integer(value 0), byte 0):
        jump label_2126
    fi

    if greaterOrEquals(integer(value 0), integer(value 7)):
        jump label_2303
    fi

    integer(value 0) = minus(plus(integer(value 9), integer(value 0)), byte 1)
    integer(value 1) = data(integers_2784, integer(value 0))
    string(value 1) = data(strings_2830, integer(value 0))
    print({
        'english': '"That $1 costs #1 gold."',
        'russian': '"$1 стоит #1 золотых".'
    })
    wait()

    print({
        'english': '\n\n"Interested?" ',
        'russian': '\n\n"Интересно?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        jump label_2543

    case 'n':
    case {'russian': 'н'}:
        jump label_2303
    esac

label_2543:
    if less(plus(canCarry(integer(value 3)), weight(byte 88, integer(value 1))), weight(data(integers_2806, integer(value 0)), byte 1)):
        look(integer(value 3))
        print({
            'english': '"But \'twould make thee o\'erburdened, $Y!"',
            'russian': '"Но это тебе не унести, $Y!"'
        })
        wait()

        print({
            'english': '\n',
            'russian': '\n'
        })
        jump label_205
    fi

    if greaterOrEquals(objectsCount(integer(value 3), byte 88), integer(value 1)):
        destroyItem(integer(value 3), byte 88, byte 0, integer(value 1))
        createItem(integer(value 3), data(integers_2806, integer(value 0)), byte 0, byte 1)
        look(integer(value 3))
        print({
            'english': '"Excellent!"\n\nAfter accepting $Y\'s gold, $N hands over the $1.',
            'russian': '"Потрясающе!"\n\nПолучив золото от персонажа $Y, $N передает $1.'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_2303

    else:
        look(integer(value 3))
        print({
            'english': '"But thou hast not enough gold, $Y!"',
            'russian': '"Но у тебя не хватает золота, $Y!"'
        })
        wait()

        print({
            'english': '\n',
            'russian': '\n'
        })
        jump label_205
    fi

integers_2784 = [
    35,  // 0
    20,  // 1
    40,  // 2
    50,  // 3
    55,  // 4
    75,  // 5
    15,  // 6
    25,  // 7
    350, // 8
    200, // 9
    100, // 10
]

integers_2806 = [
    39, // 0
    35, // 1
    43, // 2
    45, // 3
    44, // 4
    46, // 5
    3,  // 6
    12, // 7
    23, // 8
    8,  // 9
    22, // 10
    0,  // 11
]

strings_2830 = [
    {
        'english': 'Mace',
        'russian': 'Булава'
    }, // 0
    {
        'english': 'Main Gauche',
        'russian': 'Дага'
    }, // 1
    {
        'english': 'Sword',
        'russian': 'Меч'
    }, // 2
    {
        'english': '2-Hnd Axe',
        'russian': 'Двуручный топор'
    }, // 3
    {
        'english': '2-Hnd Hammer',
        'russian': 'Двуручный молот'
    }, // 4
    {
        'english': '2-Hnd Sword',
        'russian': 'Двуручный меч'
    }, // 5
    {
        'english': 'Iron Helm',
        'russian': 'Железный шлем'
    }, // 6
    {
        'english': 'Kite Shield',
        'russian': 'Змеиный щит'
    }, // 7
    {
        'english': 'Magic Armour',
        'russian': 'Магические доспехи'
    }, // 8
    {
        'english': 'Magic Helm',
        'russian': 'Магический шлем'
    }, // 9
    {
        'english': 'Plate Mail',
        'russian': 'Латы'
    }, // 10
]

integers_2945 = [
    0, // 0
    0, // 1
    0, // 2
    0, // 3
    0, // 4
    0, // 5
    0, // 6
    0, // 7
    0, // 8
    0, // 9
    0, // 10
    0, // 11
    0, // 12
    0, // 13
    0, // 14
]

integers_2975 = [
    0, // 0
    0, // 1
    0, // 2
    0, // 3
    0, // 4
    0, // 5
    0, // 6
    0, // 7
]
