source('CONVERSE.B')
index(55)

id(154)
name({
    'english': 'Amanda',
    'russian': 'Аманда'
})

description:
    print({
        'english': 'a large black woman with a loud laugh.',
        'russian': 'Дородная темнокожая женщина с весёлым нравом.'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

    f3()

interaction:
    integer(value 5) = byte 0

    if hasBit(byte 235, value 0):
        jump label_133
    fi

    print({
        'english': '"Hello, hello!" she cries, clapping her hands together.*\n\n',
        'russian': '"Привет, привет!" - громко сказала она, ударив в ладоши.*\n\n'
    })
    jump label_179

label_133:
    print({
        'english': '"You\'re here again! Good." She smiles widely. ',
        'russian': '"Это снова вы! Замечательно", - широко улыбнулась она. '
    })

label_179:
    print({
        'english': '"What can I get ya?"\n',
        'russian': '"Чем могу помочь?"\n'
    })

label_200:
    ask()

    case 'name':
    case {'russian': 'имя'}:
        setBit(byte 235, value 0)
        print({
            'english': '"Amanda, but you can call me \'Miss Mandy\'."\n',
            'russian': '"Аманда, но вы можете звать меня \'Мисс Мэнди\'".\n'
        })
        jump label_200

    case 'buy':
    case {'russian': 'куп'}:
        print({
            'english': '"Which, @ale, @mead, @wine, @rations or @Waybread?"\n',
            'russian': '"Чего желаете? У меня есть @эль, @медовуха, @вино, @пайки и @лепёшки".\n'
        })
        jump label_200

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"I sell @ale, @mead, @wine, @rations and @Waybread."\n',
            'russian': '"Я продаю @эль, @медовуху, @вино, @пайки и @лепёшки".\n'
        })
        jump label_200

    case 'way':
    case {'russian': 'леп'}:
    case 'brea':
    case {'russian': 'хлеб'}:
        jump label_1233

    case 'mead':
    case {'russian': 'медо'}:
        integer(value 4) = byte 0
        jump label_745

    case 'ale':
    case {'russian': 'эль'}:
        integer(value 4) = byte 0
        jump label_745

    case 'wine':
    case {'russian': 'вино'}:
        integer(value 4) = byte 0
        jump label_745

    case 'rati':
    case {'russian': 'пайк'}:
        jump label_1738

    case 'aman':
    case {'russian': 'аман'}:
        print({
            'english': '"Please, call me \'Miss Mandy\'."\n',
            'russian': '"Прошу, зовите меня \'Мисс Мэнди\'".\n'
        })
        jump label_200

    case 'miss':
    case {'russian': 'мисс'}:
    case 'mand':
    case {'russian': 'мэнд'}:
        print({
            'english': '"There, that\'s much better."\n',
            'russian': '"Ну вот, так-то лучше".\n'
        })
        jump label_200

    case 'segg':
    case {'russian': 'сегг'}:
        print({
            'english': '"He\'s been in here a few times. He has a homesick look, he does."\n',
            'russian': '"Бывал он здесь, и не раз. Тоскует по дому, что поделать..."\n'
        })
        jump label_200

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"Remember to tell your friends \'bout Miss Mandy."\n',
            'russian': '"Не забудьте рассказать друзьям о Мисс Мэнди".\n'
        })
        bye()

    case '*':
        print({
            'english': '"That\'s one on me. \'Tain\'t never heard o\' that."\n',
            'russian': '"Вот дела! Такого я не слыхала".\n'
        })
    esac

    jump label_200

label_745:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 1
        jump label_891
    fi

label_765:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_779:
    look(character(integer(value 0), byte 0))
    print({
        'english': '#2. $Y\n',
        'russian': '#2. $Y\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_779
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"Кто из вас?" '
    })
    inputDigit(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_1191
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_765
    fi

    integer(value 3) = character(integer(value 3), byte 0)

label_891:
    integer(value 1) = data(integers_2450, integer(value 4))
    print({
        'english': '"That\'ll be #1 crowns, okay sugar?" ',
        'russian': '"С вас #1 золотых, по рукам?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        jump label_967

    case 'n':
    case {'russian': 'н'}:
        integer(value 5) = byte 0
        jump label_1191
    esac

label_967:
    if less(objectsCount(integer(value 3), byte 88), integer(value 1)):
        print({
            'english': '"Come back when you have some gold."',
            'russian': '"Приходите, когда раздобудете немного золота".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_179
    fi

    if less(plus(canCarry(integer(value 3)), weight(byte 88, integer(value 1))), weight(data(integers_2456, integer(value 4)), byte 1)):
        print({
            'english': '"You don\'t have room to carry it."',
            'russian': '"В вашем мешке недостаточно места".'
        })
        integer(value 5) = byte 0
        jump label_1191
    fi

    destroyItem(integer(value 3), byte 88, byte 0, integer(value 1))
    createItem(integer(value 3), data(integers_2456, integer(value 4)), byte 0, byte 1)
    look(integer(value 3))
    integer(value 5) = byte 1
    string(value 1) = data(strings_2462, integer(value 4))
    print({
        'english': '"Here you are." $N gives $Y the $1.',
        'russian': '"Вот возьмите", - $N даёт персонажу $Y предмет: $1.'
    })
    wait()

    print({
        'english': '\n\n',
        'russian': '\n\n'
    })
    jump label_1191

label_1191:
    if integer(value 5):
        print({
            'english': '"Y\'all enjoy it, now."',
            'russian': '"Наслаждайтесь".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_179
    fi

    print({
        'english': '\n\n',
        'russian': '\n\n'
    })
    jump label_179

label_1233:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 1
        jump label_1379
    fi

label_1253:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_1267:
    look(character(integer(value 0), byte 0))
    print({
        'english': '#2. $Y\n',
        'russian': '#2. $Y\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_1267
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"Кто из вас?" '
    })
    inputDigit(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_1687
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_1253
    fi

    integer(value 3) = character(integer(value 3), byte 0)

label_1379:
    print({
        'english': '"Some say I make the best Waybread in these parts. It costs just 2 ',
        'russian': '"Говорят, что я делаю лучшие лепёшки в округе. Всего лишь 2 '
    })
    print({
        'english': 'gold. You want to try some?" ',
        'russian': 'золотых. Хотите попробовать?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(objectsCount(integer(value 3), byte 88), byte 2):
            print({
                'english': '"Come back when you have some gold."',
                'russian': '"Приходите, когда раздобудете немного золота".'
            })
            wait()

            print({
                'english': '\n\n',
                'russian': '\n\n'
            })
            jump label_179
        fi

        if less(plus(canCarry(integer(value 3)), weight(byte 88, byte 2)), weight(byte 130, byte 1)):
            print({
                'english': '"You don\'t have room to carry it."',
                'russian': '"В вашем мешке недостаточно места".'
            })
            integer(value 5) = byte 0
            jump label_1687
        fi

        destroyItem(integer(value 3), byte 88, byte 0, byte 2)
        createItem(integer(value 3), byte 130, byte 0, byte 1)
        look(integer(value 3))
        print({
            'english': '$N gives $Y some Waybread.',
            'russian': '$N даёт персонажу $Y немного лепёшек.'
        })
        wait()

        integer(value 5) = byte 1
        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_1687

    case 'n':
    case {'russian': 'н'}:
        integer(value 5) = byte 0
        jump label_1687
    esac

label_1687:
    if integer(value 5):
        print({
            'english': '"That\'ll put some meat on your bones."',
            'russian': '"Подкрепитесь немного."'
        })
        wait()
    fi

    print({
        'english': '\n\n',
        'russian': '\n\n'
    })
    jump label_179

label_1738:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 1
        jump label_1884
    fi

label_1758:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_1772:
    look(character(integer(value 0), byte 0))
    print({
        'english': '#2. $Y\n',
        'russian': '#2. $Y\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_1772
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"Кто из вас?" '
    })
    inputDigit(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_179
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_1758
    fi

    integer(value 3) = character(integer(value 3), byte 0)

label_1884:
    if or(less(plus(canCarry(integer(value 3)), weight(byte 88, byte 4)), weight(byte 129, byte 1)), less(objectsCount(integer(value 3), byte 88), byte 4)):
        integer(value 9) = byte 1
        jump label_2021
    fi

    print({
        'english': '"Rations are 4 gold apiece. How many do you want?" ',
        'russian': '"4 золотых за паёк. Сколько вы хотите?" '
    })
    inputInteger(integer(value 9))

    if greater(integer(value 9), word 200):
        integer(value 9) = word 200
    fi

    integer(value 8) = integer(value 9)

    if equals(integer(value 9), byte 0):
        jump label_179
    fi

    integer(value 0) = byte 0

label_2021:
    integer(value 6) = byte 0
    integer(value 7) = byte 0

    if less(plus(canCarry(integer(value 3)), weight(byte 88, multiply(integer(value 9), byte 4))), weight(byte 129, integer(value 9))):
        integer(value 6) = byte 1
        integer(value 0) = byte 1
        integer(value 9) = minus(integer(value 9), byte 1)
        jump label_2126
    fi

    if less(objectsCount(integer(value 3), byte 88), multiply(integer(value 9), byte 4)):
        integer(value 7) = byte 1
        integer(value 9) = minus(integer(value 9), byte 1)
        jump label_2126
    fi

    jump label_2258

label_2126:
    if integer(value 9):
        jump label_2021
    fi

    if integer(value 6):
        look(integer(value 3))
        print({
            'english': '$N looks at $Y. "You haven\'t got room to carry any!"',
            'russian': '$N смотрит на: $Y. "В вашем мешке нет места!"'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_179
    fi

    if integer(value 7):
        look(integer(value 3))
        print({
            'english': '"Come back when you have some gold."',
            'russian': '"Приходите, когда раздобудете немного золота."'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_179
    fi

label_2258:
    destroyItem(integer(value 3), byte 88, byte 0, multiply(integer(value 9), byte 4))
    createItem(integer(value 3), byte 129, byte 0, integer(value 9))
    look(integer(value 3))

    if equals(integer(value 8), integer(value 9)):
        print({
            'english': '$N hands the rations to $Y.',
            'russian': '$N протягивает пайки персонажу $Y.'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_179
    fi

    print({
        'english': 'She hands $Y #9 mutton ration\\s.',
        'russian': 'Она протягивает персонажу $Y #9 пайков из баранины.'
    })
    wait()

    print({
        'english': '\n\n',
        'russian': '\n\n'
    })
    look(integer(value 3))

    if integer(value 0):
        print({
            'english': '"That\'s all you can carry."',
            'russian': '"Больше вы не сможете унести".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_179

    else:
        print({
            'english': '"That\'s all you can afford."',
            'russian': '"Это всё, что вы можете себе позволить".'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_179
    fi

integers_2450 = [
    4, // 0
    4, // 1
    4, // 2
]

integers_2456 = [
    116, // 0
    117, // 1
    115, // 2
]

strings_2462 = [
    {
        'english': 'Mead',
        'russian': 'Медовуха'
    }, // 0
    {
        'english': 'Ale',
        'russian': 'Эль'
    }, // 1
    {
        'english': 'Wine',
        'russian': 'Вино'
    }, // 2
]
