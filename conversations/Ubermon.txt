source('CONVERSE.B')
index(9)

id(108)
name('Ubermon')

description:
    print('a tall man with a disarming grin.')
    wait()

    print('\n')

interaction:
    if hasBit(byte 235, value 0):
        jump label_129
    fi

    print('"Hello, mein freund')

    if integer(value 23):
        print('en."')

    else:
        print('."')
    fi

    print(' His thick fingers grab your hand.\n')
    jump label_178

label_129:
    print('"You are back. Gut." He leans back on his heels.\n')

label_178:
    ask()

    case 'name':
        print('"Ubermon @Kalbmilch."\n')
        setBit(byte 235, value 0)
        jump label_178

    case 'kalb':
    case 'uber':
        print('"At your zervice." He snaps to attention.\n')
        jump label_178

    case 'job':
        print('"I @milk de cows und make de @cheese."')
        wait()

        print('\n\n')

        if equals(integer(value 32), byte 144):
            print('"You vant to buy someting, just say de word."\n')

        else:
            print('"You vant to buy someting, come by my dairy ven I\'m open."\n')
        fi

        jump label_178

    case 'buy':
    case 'word':
        if notEquals(integer(value 32), byte 144):
            print('"Come by my dairy ven I\'m open, ja?"\n')
            jump label_178
        fi

        print('"Ja, sure, vat you vant - milk or @cheese?"\n')
        jump label_178

    case 'milk':
        if notEquals(integer(value 32), byte 144):
            print('"Come by my dairy ven I\'m open, ja?"\n')
            jump label_178
        fi

        integer(value 4) = byte 0
        jump label_771

    case 'chee':
        if notEquals(integer(value 32), byte 144):
            print('"Come by my dairy ven I\'m open, ja?"\n')
            jump label_178
        fi

        integer(value 4) = byte 1
        jump label_771

    case 'bye':
        print('"Take care among ze British, now."\n')
        bye()

    case '*':
        print('"Now I not know vat you say."\n')
        jump label_178
    esac

    // Unreachable code!
    jump label_178

label_771:
    if equals(integer(value 23), byte 0):
        integer(value 3) = character(byte 0, byte 0)
        jump label_936
    fi

label_794:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_808:
    look(character(integer(value 0), byte 0))
    print('#2. $Y\n')
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_808
    fi

    print('"Which of you?" ')
    inputNumber(integer(value 3))

    if equals(integer(value 3), byte 0):
        print('"Vell, okay..."\n')
        jump label_178
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_794
    fi

    integer(value 3) = character(integer(value 3), byte 0)

label_936:
    look(integer(value 3))
    integer(value 1) = data(dword 1236, integer(value 4))
    print('"That\'ll be #1 crowns, okay?" ')

    choice('yn')

    case 'y':
        jump label_1043

    case 'n':
        print('"Vell, okay, but is very good for you!"\n')
        jump label_178
    esac

label_1043:
    if less(objectsCount(integer(value 3), byte 88), integer(value 1)):
        print('"You have not ze gold right now."\n')
        jump label_178
    fi

    if less(plus(canCarry(integer(value 3)), weight(byte 88, integer(value 1))), weight(data(dword 1240, integer(value 4)), byte 1)):
        print('"You don\'t have room to carry it."\n')
        jump label_178
    fi

    destroy(integer(value 3), byte 88, byte 0, integer(value 1))
    create(integer(value 3), data(dword 1240, integer(value 4)), byte 0, byte 1)
    print('"Good!" $N gives $Y the ')

    if integer(value 4):
        print('cheese')

    else:
        print('milk')
    fi

    print('.\n')
    jump label_178

integers_1236 = [
    3, // 0
    5, // 1
]

integers_1240 = [
    180, // 0
    132, // 1
]
