source('CONVERSE.B')
index(47)

id(146)
name({
    'english': 'Glen',
    'russian': 'Глен'
})

description:
    print({
        'english': 'a quiet, pale, almost motionless gentleman.\n*',
        'russian': 'тихого, бледного, почти неподвижного джентльмена.\n*'
    })

interaction:
    integer(value 0) = partyHasObject(word 339, byte 0)

    if notEquals(integer(value 0), word 32769):
        jump label_2841
    fi

    if and(hasBit(byte 178, byte 5), equals(hasBit(byte 235, byte 6), byte 0)):
        print({
            'english': '"Ohhh! Silly me, spending so much time with my clients." He gestures ',
            'russian': '"О-о-х! Какой же я глупый, провожу слишком много времени со своими клиентами". Он указывает '
        })
        print({
            'english': 'at the corpses.\n*\n"I forget little details like paying Mole..."\n*\n',
            'russian': 'на трупы.\n*\n"Я совсем забыл про одну мелочь, про оплату Кроту..."\n*\n'
        })
        print({
            'english': '"I\'ll have to take care of it right away."\n',
            'russian': '"Я должен немедленно этим заняться".\n'
        })
        wait()

        setBit(byte 235, byte 6)
        print({
            'english': '\n"You deserve a reward for helping me straighten this out."\n*\n"That ',
            'russian': '\n"Вы заслуживаете награды за то, что помогли мне с этим разобраться".\n*\n"Тот '
        })
        print({
            'english': 'mage over on the table was found just outside of town."\n*\n"He was ',
            'russian': 'маг, что лежит на столе, был найден недалеко от города".\n*\n"У него '
        })
        print({
            'english': 'carrying a couple of enchanted items and some money when the gargoyles',
            'russian': 'была пара зачарованных вещей и немного денег, когда до него добрались'
        })
        print({
            'english': ' got him."\n*"Nobody has been able to find any relatives of his, so you',
            'russian': ' горгульи".\n*"Никто так и не смог найти его родственников, так что вы'
        })
        print({
            'english': ' might as well take it all."',
            'russian': ' можете забрать его вещи".'
        })
        jump label_1337
    fi

    if and(hasBit(byte 178, byte 4), equals(hasBit(byte 235, byte 5), byte 0)):
        print({
            'english': '"That addle-brained, lower class, miserable excuse for a common ',
            'russian': '"Это тупоголовое, низкосортное, жалкое подобие простого '
        })
        print({
            'english': 'laborer..."\n*\n"I agreed to give him an equipment allowance with his ',
            'russian': 'рабочего..."\n*\n"Я согласился выделять ему средства на приобретение оборудования из его '
        })
        print({
            'english': 'pay."\n*\n"No doubt it\'s all been squandered at some tavern, along with ',
            'russian': 'зарплаты".\n*\n"Без сомнения, всё это было просажено в какой-нибудь таверне вместе с '
        })
        print({
            'english': 'the rest of his pay."\n*\n"See what he has to say about that!"\n',
            'russian': 'остатками его зарплаты".\n*\n"Посмотрим, что он скажет по этому поводу!"\n'
        })
        setBit(byte 235, byte 5)
        bye()
    fi

    if and(hasBit(byte 178, byte 3), equals(hasBit(byte 235, byte 4), byte 0)):
        print({
            'english': '"So, his shovel broke? That\'s no excuse."\n*\n"Tell him he should have ',
            'russian': '"Так значит, у него сломалась лопата? Это не оправдание".\n*\n"Скажите ему, что ему следовало '
        })
        print({
            'english': 'bought another one and kept working."\n',
            'russian': 'купить другую и продолжать работать".\n'
        })
        setBit(byte 235, byte 4)
        bye()
    fi

    if and(hasBit(byte 178, byte 2), equals(hasBit(byte 235, byte 3), byte 0)):
        print({
            'english': 'You pass along Mole\'s message. "Needs a shovel, does he? Tell him to ',
            'russian': 'Вы передаёте сообщение Крота. "Ему нужна лопата, не так ли? Скажите ему, чтобы он '
        })
        print({
            'english': 'use the one I gave him when I hired him!"\n*\n"No doubt he\'s forgotten ',
            'russian': 'пользовался той, которую я дал ему при приёме на работу!"\n*\n"Без сомнения, '
        })
        print({
            'english': 'he has it by now, or lost it somewhere..."\n',
            'russian': 'он уже забыл о ней или где-то потерял..."\n'
        })
        setBit(byte 235, byte 3)
        bye()
    fi

    print({
        'english': '"Good evening." he says, in a voice that sends shivers down your ',
        'russian': '"Добрый вечер", - говорит он голосом, от которого у вас мурашки бегут по '
    })
    print({
        'english': 'spine.\n*\n"It is evening, I hope. That\'s my favorite time."',
        'russian': 'спине.\n*\n"Надеюсь, сейчас вечер. Это моё любимое время".'
    })

label_1337:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"I am Glen D\'Arc, of the @Trinsic D\'Arcs."',
            'russian': '"Я Глен Д\'Арк, из рода Д\'Арков @Тринсика".'
        })
        setBit(byte 235, value 0)
        jump label_1337

    case 'trin':
    case {'russian': 'трин'}:
    case 'darc':
    case {'russian': 'дарк'}:
    case 'd\'ar':
    case {'russian': 'д\'ар'}:
        print({
            'english': '"I had to move away... Too @sunny."',
            'russian': '"Мне пришлось переехать... Слишком @солнечно".'
        })
        jump label_1337

    case 'sun':
    case {'russian': 'солн'}:
        print({
            'english': '"I much prefer moonlight. It\'s more natural and healthy."',
            'russian': '"Я предпочитаю лунный свет. Это более натурально и полезно для здоровья".'
        })
        jump label_1337

    case 'prep':
    case {'russian': 'гото'}:
    case 'bod':
    case {'russian': 'тела'}:
    case 'depa':
    case {'russian': 'усоп'}:
        print({
            'english': '"For most clients, I prefer to use Frigid @Solvol."\n*\n"It\'s the finest',
            'russian': '"Для большинства клиентов я предпочитаю использовать \'Холодный @Сольвол\'".\n*\n"Это лучшая'
        })
        print({
            'english': ' enbalming fluid on the market."',
            'russian': ' бальзамирующая жидкость на рынке".'
        })
        jump label_1337

    case 'frig':
    case {'russian': 'холо'}:
    case 'solv':
    case {'russian': 'соль'}:
    case 'enba':
    case {'russian': 'баль'}:
        print({
            'english': '"It gives the departed a nice, healthy glow..."',
            'russian': '"Он придаёт ушедшим приятное, здоровое сияние..."'
        })
        jump label_1337

    case 'eter':
    case {'russian': 'вечн'}:
    case 'rest':
    case {'russian': 'упок'}:
        print({
            'english': '"Yes, those who cannot afford resurrection know the cool comfort of ',
            'russian': '"Да, те, кто не может позволить себе воскреснуть, познают прохладу и уют '
        })
        print({
            'english': 'good, honest soil."\n*\nHe sighs longingly. "How I envy them, for only ',
            'russian': 'хорошей, чистой земли".\n*\nОн с тоской вздыхает. "Как я им завидую, потому что только '
        })
        print({
            'english': 'the @dead know true peace."',
            'russian': '@мёртвые знают истинный покой".'
        })
        jump label_1337

    case 'dead':
    case {'russian': 'мёрт'}:
    case 'ress':
    case {'russian': 'воск'}:
        print({
            'english': '"He smiles. "I see you\'re not much of a believer in death."\n*\n"But ',
            'russian': 'Он улыбается. - "Я вижу, вы не очень-то доверяете смерти".\n*\n"Но '
        })
        print({
            'english': 'next time you\'re dead you should try staying that way. You might like ',
            'russian': 'в следующий раз, когда вы умрёте, постарайтесь остаться таковым. Возможно, вам это '
        })
        print({
            'english': 'it..."',
            'russian': 'понравится..."'
        })
        jump label_1337

    case 'job':
    case {'russian': 'раб'}:
        jump label_2480

    case 'inco':
    case {'russian': 'неко'}:
    case 'grav':
    case {'russian': 'моги'}:
    case 'mole':
    case {'russian': 'крот'}:
        if hasBit(byte 235, byte 2):
            print({
                'english': '"You can\'t get good help these days..."',
                'russian': '"В наши дни хорошей помощи не дождешься..."'
            })
            jump label_1337
        fi

        print({
            'english': '"Mole was supposed to have two more graves finished yesterday."\n*\n"I ',
            'russian': '"Вчера Крот должен был закончить ещё две могилы".\n*\n"Я '
        })
        print({
            'english': 'can\'t stand to talk to him any more - if you see him, tell him I need ',
            'russian': 'больше не могу с ним разговаривать - если увидишь его, скажи, что мне нужно '
        })
        print({
            'english': 'those graves dug immediately!"',
            'russian': 'немедленно вырыть эти могилы!"'
        })
        setBit(byte 235, byte 2)
        jump label_1337

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"Goodbye for now - I\'m sure I\'ll see you again. Every body ends up ',
            'russian': '"До свидания - я уверен, мы ещё увидимся. Каждый труп '
        })
        print({
            'english': 'here sooner or later..."\n',
            'russian': 'рано или поздно оказывается здесь..."\n'
        })
        bye()

    case '*':
        print({
            'english': '"Don\'t concern yourself with that. Life is too hectic as it is."',
            'russian': '"Не беспокойтесь об этом. Жизнь и так слишком беспокойна".'
        })
    esac

    jump label_1337

label_2480:
    print({
        'english': '"I prepare the @bodies of the departed for their eternal @rest." He ',
        'russian': '"Я готовлю @тела усопших к их вечному @упокоению". Он '
    })
    print({
        'english': 'pauses to pop a grape into his mouth.\n*\nHe chews it delicately, but ',
        'russian': 'делает паузу, чтобы положить в рот виноградину.\n*\nОн аккуратно пережевывает её, но '
    })
    print({
        'english': 'you can still hear a soft, squishy sound. "Would you like a few ',
        'russian': 'всё равно слышен мягкий, хлюпающий звук. "Хотите несколько '
    })
    print({
        'english': 'grapes?" ',
        'russian': 'виноградин?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        print({
            'english': '"Help yourself."\n*\n',
            'russian': '"Угощайтесь".\n*\n'
        })

    case 'n':
    case {'russian': 'н'}:
        integer(value 1) = integer(value 1)
    esac

    print({
        'english': '"It\'s very relaxing work. At least it would be, if I didn\'t have to ',
        'russian': '"Это очень расслабляющая работа. По крайней мере, она была бы такой, если бы мне не приходилось '
    })
    print({
        'english': 'put up with that incompetent @gravedigger."',
        'russian': 'мириться с этим некомпетентным @могильщиком".'
    })
    jump label_1337

label_2841:
    print({
        'english': 'His eyes gleam fiendishly when he notices the body you\'re carrying.\n*\n',
        'russian': 'Его глаза дьявольски блестят, когда он замечает тело, которое вы несёте.\n*\n'
    })
    print({
        'english': '"Ah, you\'ve brought me a client. Tell the truth, doesn\'t your friend ',
        'russian': '"О, вы привели мне клиента. Скажите честно, разве ваш друг '
    })
    print({
        'english': 'look more peaceful this way?"\n*\n"For such a heroic client, I have ',
        'russian': 'так не выглядит более умиротворённым?"\n*\n"Для такого героического клиента у меня есть '
    })
    print({
        'english': 'something special to offer."\n*\n"It\'s a new process I\'ve invented ',
        'russian': 'кое-что особенное".\n*\n"Я изобрёл новый процесс, который '
    })
    print({
        'english': 'called \'cremation.\'"\n*\n"For a mere fifteen gold, the remains of the ',
        'russian': 'называется \'кремация\'".\n*\n"Всего за пятнадцать золотых останки '
    })
    print({
        'english': 'dearly departed are purified with flame."\n*\n"Would you like me to do ',
        'russian': 'дорогих усопших очищаются пламенем".\n*\n"Хотите, я сделаю '
    })
    print({
        'english': 'this for you?" ',
        'russian': 'это для вас?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"Too bad."\n',
            'russian': '"Очень жаль".\n'
        })
        bye()
    esac

    if less(objectsCount(byte 1, byte 88), byte 15):
        print({
            'english': '\n"You\'re a bit short on gold." he says, disappointedly.\n',
            'russian': '\n"У вас немного не хватает золота", - разочарованно говорит он.\n'
        })
        bye()
    fi

    print({
        'english': '\n"Excellent!" He takes the body, and recites a brief incantation.\n*\nAn',
        'russian': '\n"Превосходно!" Он берёт тело и произносит короткое заклинание.\n*\nТруп'
    })
    print({
        'english': ' eerie green flame engulfs the corpse, consuming it in seconds.\n*\n',
        'russian': ' охватывает жуткое зелёное пламя, которое сжигает его за считанные секунды.\n*\n'
    })
    print({
        'english': 'Nothing but ashes remain. The mortician sweeps them up, puts them in ',
        'russian': 'Остался лишь пепел. Гробовщик собирает его, и складывает в '
    })
    print({
        'english': 'an urn, and hands it to ',
        'russian': 'урну. '
    })
    look(integer(value 0))

    if notEquals(integer(value 0), byte 1):
        print({
            'english': '$Y',
            'russian': '$Y забирает её'
        })

    else:
        print({
            'english': 'you',
            'russian': 'Вы забираете её'
        })
    fi

    print({
        'english': '.\n*\n',
        'russian': '.\n*\n'
    })
    destroyItem(byte 1, byte 88, byte 0, byte 15)
    destroyItem(integer(value 0), word 339, byte 0, byte 1)
    createItem(integer(value 0), byte 170, byte 0, byte 1)
    print({
        'english': '"Please come again if any more of your friends need my services."\n',
        'russian': '"Пожалуйста, приходите ещё, если кому-то из ваших друзей понадобятся мои услуги".\n'
    })
    bye()
