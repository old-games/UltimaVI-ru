source('CONVERSE.B')
index(27)

id(126)
name({
    'english': 'Sasha',
    'russian': 'Саша'
})

description:
    print({
        'english': 'a pretty young nurse with violet eyes.',
        'russian': 'молодую симпатичную медсестру с фиолетовыми глазами.'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

interaction:
    print({
        'english': '"Leave these men alone! Can\'t you see they need to @rest?"',
        'russian': '"Лучше оставить этих людей в покое! Разве не видно, что им нужен @отдых?"'
    })

label_107:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"My name is Sasha."',
            'russian': '"Меня зовут Саша".'
        })
        setBit(byte 235, value 0)
        jump label_107

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"I @tend the sick. I know how to @heal, @cure, and @resurrect."',
            'russian': '"Я @ухаживаю за больными. Я знаю, как @лечить, @исцелять и @воскрешать".'
        })
        jump label_107

    case 'rest':
    case {'russian': 'отд'}:
    case 'need':
    case {'russian': 'нужд'}:
    case 'alon':
    case {'russian': 'поко'}:
    case 'leav':
    case {'russian': 'оста'}:
    case 'slee':
    case {'russian': 'спя'}:
        print({
            'english': '"Aye, these men\'s wounds need @time to @heal."',
            'russian': '"Верно, нужно @время, чтобы @вылечить раны этих людей".'
        })
        jump label_107

    case 'woun':
    case {'russian': 'ран'}:
    case 'time':
    case {'russian': 'врем'}:
    case 'tend':
    case {'russian': 'уха'}:
    case 'sick':
    case {'russian': 'боль'}:
        print({
            'english': '"Thou hast kept me from my duties long enough. Away with thee!"',
            'russian': '"Ты и так уже достаточно долго отвлекаешь меня от обязанностей. Ступай прочь!"'
        })
        jump label_107

    case 'heal':
    case {'russian': 'леч'}:
        print({
            'english': '"More wounded? I\'ll do what I can."',
            'russian': '"Ещё больше раненых? Я сделаю всё, что смогу".'
        })
        wait()

        print({
            'english': '\n\nThe poor nurse seems weary beyond words.\n',
            'russian': '\n\nНесчастная медсестра, кажется, совсем выбилась из сил.\n'
        })
        jump label_1121

    case 'cure':
    case {'russian': 'исце'}:
        print({
            'english': '"Poison? Yes, I can cure that. Let me see..."',
            'russian': '"Отравление? Да, я могу справиться. Нужно взглянуть..."'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': '\n\n'
        })
        jump label_2114

    case 'resu':
    case {'russian': 'воск'}:
        print({
            'english': 'Your question seems almost like a blow to the woman.',
            'russian': 'Ваш вопрос будто бы потряс её.'
        })
        wait()

        print({
            'english': '\n\n"Nay, I cannot. I no longer have the energy, or the @reagents."',
            'russian': '\n\n"Не-а, я не смогу. Нет ни энергии, ни @реагентов".'
        })
        wait()

        print({
            'english': '\n\n"It has been a dark, dark day indeed."',
            'russian': '\n\n"В самом деле сегодня был тёмный, тёмный день".'
        })
        wait()

        print({
            'english': '\n\n"I am sorry that I cannot help you, but we all @grieve today."',
            'russian': '\n\n"Очень жаль, что я не могу помочь, но мы все сегодня @грустим".'
        })
        jump label_107

    case 'ener':
    case {'russian': 'энер'}:
    case 'reag':
    case {'russian': 'реаг'}:
        print({
            'english': '"I have aided many today."',
            'russian': '"Я помогла многим сегодня".'
        })
        wait()

        print({
            'english': '\n\n"These men are the last; they are beyond the help of all save @time ',
            'russian': '\n\n"Эти люди - последние. Им уже ничем не помочь - лишь само @время '
        })
        print({
            'english': 'itself."',
            'russian': 'сможет что-то изменить".'
        })
        jump label_107

    case 'men':
    case {'russian': 'люд'}:
    case 'grie':
    case {'russian': 'грус'}:
    case 'toda':
    case {'russian': 'сего'}:
    case 'dark':
    case {'russian': 'тёмн'}:
        print({
            'english': '"These soldiers are the only survivors of an attempt to free the ',
            'russian': '"Эти солдаты - единственные выжившие после попытки освободить '
        })
        print({
            'english': 'Shrine of @Compassion."',
            'russian': 'Святилище @Сострадания".'
        })
        jump label_107

    case 'shri':
    case {'russian': 'свят'}:
    case 'comp':
    case {'russian': 'сост'}:
        print({
            'english': '"Show thy compassion now and let them @sleep."',
            'russian': '"Следует проявить сострадание и дать им @поспать".'
        })
        jump label_107

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': '"Goodbye."\n',
            'russian': '"Прощайте".\n'
        })
        bye()

    case '*':
        print({
            'english': '"I cannot help thee with that."',
            'russian': '"Ничем не могу помочь".'
        })
    esac

    jump label_107

label_1121:
    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump label_1284
    fi

    integer(value 3) = character(byte 0, byte 0)

    if isWounded(integer(value 3)):
        jump label_1644

    else:
        print({
            'english': '"Don\'t waste my time! Thou art not wounded!"',
            'russian': '"Я не вижу никаких ран! Не надо меня отвлекать!"'
        })
        wait()

        print({
            'english': '\n\n"\'Tis hard enough tending to those truly sick. Begone!"',
            'russian': '\n\n"И так тяжело ухаживать за настоящими больными. Прочь!"'
        })
        jump label_107
    fi

label_1284:
    if greater(integer(value 1), integer(value 23)):
        jump label_1394
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(isWounded(integer(value 3)), byte 0):
        jump label_1379
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_1379
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n',
        'russian': '#2) $Y\n'
    })
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

label_1379:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump label_1284

label_1394:
    if equals(integer(value 2), byte 0):
        print({
            'english': '"Don\'t waste my time! None of you are wounded!"',
            'russian': '"Никто из вас не ранен! Не надо меня отвлекать!"'
        })
        wait()

        print({
            'english': '\n\n"\'Tis hard enough tending to those truly sick. Begone!"',
            'russian': '\n\n"И так тяжело ухаживать за настоящими больными. Прочь!"'
        })
        jump label_107
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump label_1644
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n"Which of you?" ',
        'russian': '#2) $Y\n"Кто из вас?" '
    })
    inputDigit(integer(value 2))

    if equals(integer(value 2), byte 0):
        jump label_2066
    fi

    integer(value 1) = byte 0

label_1582:
    integer(value 3) = character(integer(value 1), byte 0)

    if isWounded(integer(value 3)):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump label_1644
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump label_1582
    fi

label_1644:
    look(integer(value 3))
    print({
        'english': '"I see thy injury, $Y."',
        'russian': '"Я вижу твою травму, $Y".'
    })
    wait()

    print({
        'english': '\n\n"Wilt thou make an offering of 40 gold?" ',
        'russian': '\n\n"Желаешь пожертвовать 40 золотых?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(objectsCount(integer(value 3), byte 88), byte 40):
            jump label_1870

        else:
            print({
                'english': 'Sasha approaches $Y and binds the wounds.',
                'russian': 'Саша подходит к персонажу $Y и бинтует раны.'
            })
            destroyItem(integer(value 3), byte 88, byte 0, byte 40)
            heal(integer(value 3))
            jump label_107
        fi

    case 'n':
    case {'russian': 'н'}:
        if less(objectsCount(integer(value 3), byte 88), byte 40):
            jump label_1870

        else:
            print({
                'english': '"If thou wilt not pay, I cannot heal thee."',
                'russian': '"Если не желаешь платить, то я не смогу вылечить тебя".'
            })
            jump label_2066
        fi
    esac

label_1870:
    if less(integer(value 20), byte 40):
        print({
            'english': '"I\'m sorry. Without an offering I cannot heal thee."',
            'russian': '"Очень жаль, но без пожертвования я не смогу вылечить тебя".'
        })
        jump label_107

    else:
        print({
            'english': '"Thou art poor, but thy cause is just."',
            'russian': '"Хоть у тебя и нет денег, но твоё дело правое".'
        })
        wait()

        print({
            'english': '\n\n"I will heal thee without payment."',
            'russian': '\n\n"Я вылечу тебя бесплатно".'
        })
        wait()

        print({
            'english': '\n\nSasha approaches $Y and binds the wounds.',
            'russian': '\n\nСаша подходит к персонажу $Y и бинтует раны.'
        })
        heal(integer(value 3))
        jump label_2066
    fi

label_2066:
    wait()

    print({
        'english': '\n\n"Is there aught else I can do for thee?"',
        'russian': '\n\n"Могу ли я сделать что-нибудь ещё?"'
    })
    jump label_107

label_2114:
    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump label_2278
    fi

    integer(value 3) = character(byte 0, byte 0)

    if isPoisoned(integer(value 3)):
        jump label_2639

    else:
        print({
            'english': '"Don\'t waste my time! Thou art not poisoned!"',
            'russian': '"Твоё тело не отравлено! Не надо меня отвлекать!"'
        })
        wait()

        print({
            'english': '\n\n"\'Tis hard enough tending to those truly sick. Begone!"',
            'russian': '\n\n"И так тяжело ухаживать за настоящими больными. Прочь!"'
        })
        jump label_107
    fi

label_2278:
    if greater(integer(value 1), integer(value 23)):
        jump label_2388
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(isPoisoned(integer(value 3)), byte 0):
        jump label_2373
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_2373
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n',
        'russian': '#2) $Y\n'
    })
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

label_2373:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump label_2278

label_2388:
    if equals(integer(value 2), byte 0):
        print({
            'english': '"Don\'t waste my time! None of you are poisoned!"',
            'russian': '"Никто из вас не отравлен! Не надо меня отвлекать!"'
        })
        wait()

        print({
            'english': '\n\n"\'Tis hard enough tending to those truly sick. Begone!"',
            'russian': '\n\n"И так тяжело ухаживать за настоящими больными. Прочь!"'
        })
        jump label_107
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump label_2639
    fi

    look(integer(value 4))
    print({
        'english': '#2) $Y\n"Which of you?" ',
        'russian': '#2) $Y\n"Кто из вас?" '
    })
    inputDigit(integer(value 2))

    if equals(integer(value 2), byte 0):
        jump label_2066
    fi

    integer(value 1) = byte 0

label_2577:
    integer(value 3) = character(integer(value 1), byte 0)

    if isPoisoned(integer(value 3)):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump label_2639
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump label_2577
    fi

label_2639:
    look(integer(value 3))
    print({
        'english': '"I sense that thou art poisoned, $Y."',
        'russian': '"Я чувствую, что твоё тело отравлено, $Y".'
    })
    wait()

    print({
        'english': '\n\n"Wilt thou make an offering of 15 gold?" ',
        'russian': '\n\n"Желаешь пожертвовать 15 золотых?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        if less(objectsCount(integer(value 3), byte 88), byte 15):
            jump label_2911

        else:
            print({
                'english': 'Sasha grabs a vial and pours it down $Y\'s throat.',
                'russian': 'Саша хватает пузырёк и вливает его содержимое в глотку персонажа $Y.'
            })
            wait()

            print({
                'english': '\n\n$Y feels much better.',
                'russian': '\n\n$Y чувствует себя намного легче.'
            })
            destroyItem(integer(value 3), byte 88, byte 0, byte 15)
            cure(integer(value 3))
            jump label_2066
        fi

    case 'n':
    case {'russian': 'н'}:
        if less(objectsCount(integer(value 3), byte 88), byte 15):
            jump label_2911

        else:
            print({
                'english': '"If thou wilt not pay, I cannot cure thee."',
                'russian': '"Если не желаешь платить, я не смогу исцелить тебя".'
            })
            jump label_2066
        fi
    esac

label_2911:
    if less(integer(value 20), byte 40):
        print({
            'english': '"I\'m sorry. Without an offering I cannot cure thee."',
            'russian': '"Очень жаль, но без пожертвования я не смогу исцелить тебя".'
        })
        jump label_107

    else:
        print({
            'english': '"Thou art poor, but thy cause is just".',
            'russian': '"Хоть у тебя нет денег, но твоё дело правое".'
        })
        wait()

        print({
            'english': '\n\n"I will cure thee without payment".',
            'russian': '\n\n"Я исцелю тебя бесплатно".'
        })
        wait()

        print({
            'english': '\n\nSasha grabs a vial and pours it down $Y\'s throat.',
            'russian': '\n\nСаша хватает пузырёк и вливает его содержимое в глотку персонажа $Y.'
        })
        wait()

        print({
            'english': '\n\n$Y feels much better.',
            'russian': '\n\n$Y чувствует себя намного легче.'
        })
        cure(integer(value 3))
        jump label_2066
    fi
