source("CONVERSE.B")
index(102)

id(201)
name("Wisp")

description:
    print("a strange, glowing ball of energy.\n*")

interaction:
    if hasBit(byte 201, byte 6):
    jump 80

    endif

    if and(hasBit(byte 201, byte 7), notEquals(partyHasObject(byte 151, byte 77), word 32769)):
    jump 3486

    endif

    ('SETF', ('byte', 201), ('value', 0))
    print("\"Again, '@you' of this plane address 'I' of the Xorinite dimension.\"\n*")
    print("\n\"By what name do 'you' wish to be addressed at this time?\"\n")

    ask()
    string(value 9) = string(value 35)
    print("\n\"Very well, '$9.' Do 'you' have memory of previous discussions with ")
    print("'myself?'\" ")

    askc("yn")
    case "y":
    print("\"Good. Tedious repetition should then be unnecessary on this occasion.")
    print(" Of what would 'you' speak?\"")
    jump 1044

    esac

    print("\n\"So be it. 'I' must often repeat information when conversing with the")
    print(" life of Britannia, it seems.\"\n*\n\"'I' do not see how each unit of life")
    print(" here can have different memories, different desires, but again 'I' ")
    print("inform Britannia that it is not so in 'my' realm.\"\n*\n\"Those which ")
    print("'you' know as 'wisp' in Britannia are projections of the life of ")
    print("Xorinia.\"\n*\n\"'I' extend into many planes beside this one.\"\n*\n")
    print("\"Britannia communicates with 'me' very seldom, and is known by those ")
    print("of very few other planes.\"\n*\n\"Every time 'I' speak with Britannia, it ")
    print("seems 'I' must explain 'my' nature again, as 'I' have just done.\"\n*\n")
    print("\"That is very strange.\"\n")

    ask()
    case "name":
    print("\"The concept of 'name' is one 'I' still do not grasp.\"\n*\n\"'I' believe ")
    print("that when 'you' ask 'me' to use '$9' as a form of address, it has ")
    print("something to do with 'name.'\"\n*\n\"When Britannia addressed me with the ")
    print("name '@Zog,' an attempt was made to explain.\"*\n\"But still 'I' do not ")
    print("understand.\"")
    jump 1044

    case "you":
    print("\"'I' and 'you' are words that seem to have no meaning.\"\n*\n\"'I' mimic ")
    print("the way 'you' use them in this language out of courtesy.\"")
    jump 1044

    case "job":
    print("\"Xorinia serves as a conduit for @information between different ")
    print("planes.\"\n*\n\"In exchange, these planes provide information that can be ")
    print("used to improve Xorinia.\"\n*\n\"Occasionally payment is accepted in the ")
    print("form of @substance, but this is not preferred.\"")
    jump 1044

    case "cond,info,exch":
    print("\"Britannia has never participated in the interplanar exchange of ")
    print("information.\"\n*\n\"'I' have presented a sample known in Britannian terms")
    print(" as a '@secret', but no further interest has been shown.\"")
    jump 1044

    case "subs":
    print("\"Actual physical materials are so plentiful throughout the multiverse ")
    print("that they are of little value.\"\n*\n\"Information has much greater ")
    print("worth.\"")
    jump 1044

    case "paym,inte":
    print("\"If 'you' present a reasonably dense information source to a 'wisp' ")
    print("unit, arrangements will be made to transfer some suitably valuable ")
    print("commodity into Britannian possession.\"")
    ('SETF', ('byte', 201), ('byte', 7))
    jump 1044

    case "secr":
    print("\"Because of the nature of Britannian memory, 'I' now present the ")
    print("sample information to 'you' again.\"\n*\nThe wisp pulsates, fading from ")
    print("blue to white, then back to blue again.\n*\nAs it does so, a scroll ")
    print("materializes in your hand.\n")
    ('NEW', ('byte', 1), ('byte', 58), ('byte', 112), ('byte', 1))
    wait()

    ('SETF', ('byte', 201), ('byte', 3))
    print("\n\"This is a simple invocation of magic energy to bring about the ")
    print("cessation of all life.\"\n*\n\"It is not a very useful or powerful form of")
    print(" magic, as it will only affect beings in the same plane where it is ")
    print("invoked.\"\n*\n\"Inform any 'wisp' unit if 'you' have @interest in further")
    print(" exchange.")
    jump 1044

    case "zog":
    print("\"Once when 'I' offered sample information to Britannia, the name 'Zog'")
    print(" was given by the life unit that received it.\"\n*\n\"No further contact ")
    print("with Britannia was obtainable for some time after this.\"\n*\n\"Perhaps ")
    print("misuse of the sample information was responsible.\"")
    jump 1044

    case "bye":
    print("\"'I' find it unusual that 'you' find it so important to inform 'me' of")
    print(" the imminent cessation of proximity between one unit of Britannian ")
    print("life and one of Xorinite.\"\n*\n\"Nonetheless, in accordance with 'your' ")
    print("custom:\nGoodbye, '$9.'\"\n")
    bye()

    case "*":
    print("\"The vagaries of the language 'you' speak are quite beyond 'me.'\"\n*\n")
    print("\"Perhaps another line of inquiry would prove more 'fruitful.'\"")

    esac

    jump 1044

3486:
    print("\"The volume 'you' bear with the symbol pattern representing the sounds")
    print(" 'The Book of Lost Mantras' is a prime source of high density ")
    print("information.\"\n*\n\"Do 'you' wish to 'me' to locate a client who is ")
    print("willing to make an exchange for it at this time?\" ")

    askc("yn")
    case "n":
    print("\"The ways of Britannia are strange indeed.\"")
    jump 1044

    esac

    ('SETF', ('byte', 201), ('byte', 6))
    print("\nFor a few moments, the wisp pulses, saying nothing.\n*\n\"It is done,\" ")
    print("the wisp says at last, \"Rklbwm have expressed desire to possess this ")
    print("information.\"\n*\n\"Hoping, no doubt, for a bargain, Rklbwm have offered ")
    print("a small quantity of the substance 'gold' in lieu of the customary ")
    print("useful information.\"\n*\n\"But surely 'you' wish 'me' to arrange for ")
    print("Rklbwm to provide information of value to 'you.'\"\n*\n\"Am 'I' correct to")
    print(" assume this?\" ")

    askc("yn")
    case "y":
    print("\"Then so be it. Here is useful information from the Rklbwm:\"*\n\n'If a ")
    print("substance with a partially reflective surface is positioned so that ")
    print("its third index of refraction matches the wavelength coefficient of ")
    print("the output of a polarized light source, and the resulting beam is ")
    print("focused on an ionized crystal suspended in a unipolar magnetic field, ")
    print("matter can be converted into useful electromagnetic radiation at an ")
    print("efficiency rate of 96 to 98 percent, depending on the desired output ")
    print("frequency.'*\n\n\"It was a pleasure doing business with you.\"\n")
    bye()

    esac

    case "n":
    print("\"Very well.\"\n*\n\"'You' have not sent enough life units to transport ")
    print("much substance, but it is 'your' decision to make.\"\n*\nThe wisp glows ")
    print("just a trifle brighter for a moment, and suddenly everyone notices ")
    print("that their packs have grown heavier.\n*\n\"It was a pleasure doing ")
    print("business with you.\"\n")
    integer(value 0) = byte 0
    integer(value 1) = character(integer(value 0), byte 0)

    if equals(integer(value 1), byte 0):
    jump 5160

    endif

    if less(canCarry(integer(value 1)), weight(byte 89, byte 1)):
    jump 5160

    endif

    integer(value 2) = divide(canCarry(integer(value 1)), weight(byte 89, byte 1))

    if greater(integer(value 2), word 255):
    integer(value 2) = word 255

    endif

    ('NEW', ('integer', [('value', 1)]), ('byte', 89), ('byte', 0), ('integer', [('value', 2)]))

    if equals(integer(value 2), word 255):
    jump 5062

    endif

    integer(value 0) = plus(integer(value 0), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
    jump 5062

    endif

    bye()
