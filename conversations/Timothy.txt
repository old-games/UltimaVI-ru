source('CONVERSE.B')
index(10)

id(109)
name('Timothy')

description:
    print('a man with sea-blue eyes and a warm smile.')
    wait()

    print('\n')

interaction:
    if hasBit(byte 235, value 0):
        print('"Welcome back, my friend')

    else:
        print('"Welcome, welcome, friend')
    fi

    if integer(value 23):
        print('s')
    fi

    print('. Here for @lodging this fine $T?"\n')

label_153:
    ask()

    case 'name':
        print('"@Timothy." He flashes a friendly smile and nods.\n')
        ('SETF', ('byte', 235), ('value', 0))
        jump label_153

    case 'timo':
        print('"I\'m named after my @uncle. He was a kind soul."\n')
        jump label_153

    case 'uncl':
        print('"Sir Timothy Enders Daverstock. He was a famous @knight in these ')
        print('parts."\n')
        jump label_153

    case 'job':
        print('"It is a busy one - this job, that is. I find it rewarding, though, ')
        print('meeting friendly faces."')
        wait()

        print('\n\n"Maybe you want a @room, eh?"\n')
        jump label_153

    case 'inn':
    case 'lodg':
    case 'room':
    case 'yes':
        jump label_789

    case 'famo':
    case 'knig':
        print('"He is perhaps best known for his courage in @battle."\n')
        jump label_153

    case 'batt':
    case 'cour':
        print('"He once held off a score of men while his own fled to safety across a')
        print(' bridge."\n')
        jump label_153

    case 'bye':
        print('"Farewell, friend')

        if integer(value 23):
            print('s')
        fi

        print('. Travel safely."\n')
        bye()

    case '*':
        print('"Hmm... Nope, can\'t help you there."\n')
        jump label_153
    esac

    // Unreachable code!
    jump label_153

label_789:
    integer(value 0) = multiply(plus(integer(value 23), byte 1), byte 5)
    print('"#0 gold for you to stay and have a meal, good?" ')

    choice('yn')

    case 'y':
        if less(objectsCount(byte 1, byte 88), integer(value 0)):
            print('"I\'m sorry, but we require cash in advance for our rooms."\n')
            bye()
        fi

        ('DELETE', ('byte', 1), ('byte', 88), ('byte', 0), ('integer', [('value', 0)]))
        print('You sleep in a comfortable bed...\n')
        sleep()

        print('\nYou wake rested and eat a large breakfast.')
        wait()

        print('\n\n"Good morning, have a good day."\n')
        jump label_153

    case 'n':
        print('"Perhaps some other time, then."\n')
        jump label_153
    esac
