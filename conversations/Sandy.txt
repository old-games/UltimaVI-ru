source("CONVERSE.A")
index(75)

id(75)
name("Sandy")

description:
    print("a shifty-eyed man with a strange smile. He smells of rancid grease and")
    print(" cooking smoke.")
    wait()

    print("\n")

interaction:
    print("\"Hello there, $G.\"")
    integer(value 0) = partyHasObject(word 417, byte 0)

    if equals(integer(value 0), word 32769):
    jump 790

    endif

    print("*\n\n\"That big, carefully wrapped bundle could only be a dragon's egg!\"")
    wait()

    print("\n\n\"Will you give it to me?\"")

    askc("yn")
    case "n":
    print("\"I guess I cannot help you much, then.\"")
    jump 790

    case "y":

    esac

    ('GIVE', ('word', 417), ('byte', 0), ('integer', [('value', 0)]), ('byte', 235))
    ('SETF', ('byte', 235), ('byte', 2))
    print("\"Now I can make Humble Pie!\" Overjoyed, he gives you a hug.")
    wait()

    print("\n\n\"So, does the subject of @pirates interest you?\" ")

    askc("yn")
    case "n":
    print("He shrugs. \"As you wish.\"")
    jump 790

    case "y":

    esac

    print("\"Well, first, there is one in Serpent's Hold. I cannot recall her ")
    print("name, but she has a piece of the map with her.\"")
    wait()

    print("\n\n\"Second, there is one on Dagger Isle. A hermit.\"")
    wait()

    print("\n\n\"Third, I know of a pirate at Empath Abbey, or thereabouts. ")
    print("Nathaniel Moorehead was his name.\"")
    wait()

    print("\n\n\"The @fourth... but then maybe I've said too much already.\"")
    jump 790

790:
    print("\n")

    ask()
    case "name":
    print("\"My name is Sandstone Angus.\"")
    wait()

    print("\n\n\"Most folks call me Sandy.\"")
    ('SETF', ('byte', 235), ('value', 0))
    jump 790

    case "job":
    print("\"I cook for Lord @Whitsaber.\"")
    wait()

    print("\n\n\"He especially likes my recipe for fish in a white wine @sauce.\"")
    jump 790

    case "fish,wine,sauc":
    print("\"It's my specialty!\"")
    jump 790

    case "four,said,much,alre":

    if equals(hasBit(byte 235, byte 2), byte 1):
    print("\"Before Lord Whitsaber came to Trinsic to be our mayor, he had another")
    print(" job...\"")
    wait()

    print("\n\"As first mate to Captain Hawkins himself! His real name is Alastor ")
    print("Gordon.\"")
    jump 790

    endif

    jump 1666

    case "map,lord,whit":
    print("\"Hmmm. I'd better get back to cooking... Excuse me.\"")
    wait()

    print("\n\nHe walks away mumbling, \"Magincian @pastry...\"")

    if equals(hasBit(byte 235, byte 2), byte 1):
    jump 790

    endif

    print("\n")
    bye()

    case "map,pira":

    if equals(hasBit(byte 235, byte 2), byte 1):
    jump 462

    else:
    jump 1228

    endif

    case "pie,magi,past":

    if equals(hasBit(byte 235, byte 2), byte 1):
    print("\"Truly it shall be a magnificent desert!\"")
    jump 790

    endif

    print("\"I could do you a @favor if you did one for me first.\"")
    jump 790

    case "favo,firs":
    jump 1708

    case "egg":
    print("\"Only a @dragon's will do.\"")
    jump 790

    case "drag":
    print("\"There's a lair in the dungeon Destard, to the northwest.\"")
    wait()

    print("\n\n\"It's not far.\"")
    jump 790

    case "bye":
    print("\"Bye.\"\n")
    bye()

    case "*":
    print("\"Sorry, I can't help you with that.\"")

    esac

    jump 790

1708:
    print("\"Let's see...\"")
    wait()

    print("\n\n\"'A golden orb on a crystal sea, in a box sans hinges, lid, or ")
    print("key.'\"")
    wait()

    print("\n\n\"I'll give you one guess to this riddle.\"\n")

    ask()
    case "egg":
    print("\"Very good!\"")
    jump 1891

    case "*":
    print("\"It's an egg, of course.\"")

    esac

    wait()

    print("\n\n\"To make Magincian pastry, I require one dragon's @egg.\"")
    jump 790
