source('CONVERSE.A')
index(25)

id(25)
name({
    'english': 'Cullen',
    'russian': 'FIXME Cullen'
})

description:
    print({
        'english': 'a short, dark man, covered in white flour.',
        'russian': 'FIXME a short, dark man, covered in white flour.'
    })
    wait()

interaction:
    print({
        'english': '\n"Hello ',
        'russian': 'FIXME \n"Hello '
    })

    if hasBit(byte 235, value 0):
        print({
            'english': 'again',
            'russian': 'FIXME again'
        })

    else:
        print({
            'english': 'there',
            'russian': 'FIXME there'
        })
        setBit(byte 235, value 0)
    fi

    print({
        'english': ', my friend',
        'russian': 'FIXME , my friend'
    })

    if integer(value 23):
        print({
            'english': 's',
            'russian': 'FIXME s'
        })
    fi

    print({
        'english': '!"',
        'russian': 'FIXME !"'
    })
    wait()

    print({
        'english': '\n\nAs he shakes your hand enthusiastically, clouds of flour fly off his',
        'russian': 'FIXME \n\nAs he shakes your hand enthusiastically, clouds of flour fly off his'
    })
    print({
        'english': ' clothes.',
        'russian': 'FIXME  clothes.'
    })

label_184:
    print({
        'english': '\n',
        'russian': 'FIXME \n'
    })

    ask()

    case {'english': 'name'}:
    case {'russian': 'FIXME name'}:
        print({
            'english': '"I\'m Cullen, Cullen the @Baker."',
            'russian': 'FIXME "I\'m Cullen, Cullen the @Baker."'
        })
        jump label_184

    case {'english': 'job'}:
    case {'russian': 'FIXME job'}:
        print({
            'english': '"I\'d have thought that\'d be obvious! I\'m a @baker!"',
            'russian': 'FIXME "I\'d have thought that\'d be obvious! I\'m a @baker!"'
        })
        wait()

        print({
            'english': '\n\nAs he laughs heartily, more clouds of flour rise off his clothing.',
            'russian': 'FIXME \n\nAs he laughs heartily, more clouds of flour rise off his clothing.'
        })
        wait()

        print({
            'english': '\n\n"You can @buy bakery goods from me or perhaps you have some flour to',
            'russian': 'FIXME \n\n"You can @buy bakery goods from me or perhaps you have some flour to'
        })
        print({
            'english': ' @sell, eh?"',
            'russian': 'FIXME  @sell, eh?"'
        })
        jump label_184

    case {'english': 'bake'}:
    case {'russian': 'FIXME bake'}:
        print({
            'english': '"I bake goods for Lord British himself!" the man says proudly.',
            'russian': 'FIXME "I bake goods for Lord British himself!" the man says proudly.'
        })
        wait()

        print({
            'english': '\n\n"If you\'d like to @buy some, just say the word!"',
            'russian': 'FIXME \n\n"If you\'d like to @buy some, just say the word!"'
        })
        jump label_184

    case {'english': 'buy'}:
    case {'russian': 'FIXME buy'}:
        jump label_695

    case {'english': 'sell'}:
    case {'russian': 'FIXME sell'}:
    case {'english': 'flou'}:
    case {'russian': 'FIXME flou'}:
        jump label_1941

    case {'english': 'bye'}:
    case {'russian': 'FIXME bye'}:
        print({
            'english': '"Come again soon!"\n',
            'russian': 'FIXME "Come again soon!"\n'
        })
        bye()

    case '*':
        print({
            'english': '"Hmmm... $Z..."',
            'russian': 'FIXME "Hmmm... $Z..."'
        })
        wait()

        print({
            'english': '\n\n"$Z..."',
            'russian': 'FIXME \n\n"$Z..."'
        })
        wait()

        print({
            'english': '\n\n"Nope, I don\'t know anything about that!"',
            'russian': 'FIXME \n\n"Nope, I don\'t know anything about that!"'
        })
        jump label_184
    esac

label_695:
    if notEquals(integer(value 32), byte 144):
        print({
            'english': '"Come to my shop when it\'s open!"',
            'russian': 'FIXME "Come to my shop when it\'s open!"'
        })
        jump label_184
    fi

    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 0
        jump label_893
    fi

label_761:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_775:
    look(character(integer(value 0), byte 0))
    print({
        'english': '#2) $Y\n',
        'russian': 'FIXME #2) $Y\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_775
    fi

    print({
        'english': '"Which of you?" ',
        'russian': 'FIXME "Which of you?" '
    })
    inputInteger(integer(value 3))

    if equals(integer(value 3), byte 0):
        print({
            'english': '"Suit yourself."',
            'russian': 'FIXME "Suit yourself."'
        })
        jump label_184
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_761
    fi

label_893:
    integer(value 0) = byte 1
    integer(value 9) = integer(value 3)
    integer(value 3) = character(integer(value 3), byte 0)
    look(integer(value 3))

label_921:
    string(value 0) = data(strings_2697, minus(integer(value 0), byte 1))
    print({
        'english': '#0) $0\n',
        'russian': 'FIXME #0) $0\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)

    if notEquals(data(integers_2689, minus(integer(value 0), byte 1)), byte 0):
        jump label_921
    fi

    integer(value 7) = integer(value 0)
    print({
        'english': '"Which item?" ',
        'russian': 'FIXME "Which item?" '
    })
    inputInteger(integer(value 0))

    if equals(integer(value 0), byte 0):
        print({
            'english': '"Suit thyself, $Y, but thou\'lt find no better!"',
            'russian': 'FIXME "Suit thyself, $Y, but thou\'lt find no better!"'
        })
        jump label_184
    fi

    if greaterOrEquals(integer(value 0), integer(value 7)):
        jump label_893
    fi

    integer(value 0) = minus(integer(value 0), byte 1)
    integer(value 1) = data(integers_2683, integer(value 0))
    string(value 1) = data(strings_2697, integer(value 0))
    print({
        'english': '"Those cost #1 gold each."',
        'russian': 'FIXME "Those cost #1 gold each."'
    })

label_1135:
    wait()

    print({
        'english': '\n\n"How many do you want, $Y?" ',
        'russian': 'FIXME \n\n"How many do you want, $Y?" '
    })
    input(integer(value 4))

    if equals(integer(value 4), byte 0):
        print({
            'english': '"Suit thyself, but thou\'lt find no better!"',
            'russian': 'FIXME "Suit thyself, but thou\'lt find no better!"'
        })
        jump label_1742
    fi

    if greater(integer(value 4), byte 50):
        print({
            'english': '"Whoa! Don\'t buy out my entire stock!"',
            'russian': 'FIXME "Whoa! Don\'t buy out my entire stock!"'
        })
        jump label_1135
    fi

    integer(value 5) = byte 0

label_1283:
    if less(plus(canCarry(integer(value 3)), weight(byte 88, integer(value 1))), multiply(plus(integer(value 5), byte 1), weight(data(integers_2689, integer(value 0)), byte 1))):
        jump label_1404
    fi

    if less(objectsCount(integer(value 3), byte 88), multiply(integer(value 1), plus(integer(value 5), byte 1))):
        jump label_1526
    fi

    destroyItem(integer(value 3), byte 88, byte 0, integer(value 1))
    createItem(integer(value 3), data(integers_2689, integer(value 0)), byte 0, byte 1)
    integer(value 5) = plus(integer(value 5), byte 1)

    if equals(integer(value 5), minus(integer(value 4), byte 1)):
        jump label_1657

    else:
        jump label_1283
    fi

label_1404:
    if integer(value 5):
        print({
            'english': '"Thou canst not carry that many!"',
            'russian': 'FIXME "Thou canst not carry that many!"'
        })
        wait()

        print({
            'english': '\n\n"I will sell thee just #5 $1\\s."',
            'russian': 'FIXME \n\n"I will sell thee just #5 $1\\s."'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': 'FIXME \n\n'
        })
        jump label_1657

    else:
        print({
            'english': '"But thou canst not carry any $1s!"',
            'russian': 'FIXME "But thou canst not carry any $1s!"'
        })
        jump label_1742
    fi

label_1526:
    if integer(value 5):
        print({
            'english': '"Thou hast not enough gold for that many!"',
            'russian': 'FIXME "Thou hast not enough gold for that many!"'
        })
        wait()

        print({
            'english': '\n\n"I will sell thee just #5 $1\\s."',
            'russian': 'FIXME \n\n"I will sell thee just #5 $1\\s."'
        })
        wait()

        print({
            'english': '\n\n',
            'russian': 'FIXME \n\n'
        })
        jump label_1657

    else:
        print({
            'english': '"But thou canst not afford any $1!"',
            'russian': 'FIXME "But thou canst not afford any $1!"'
        })
        jump label_1742
    fi

label_1657:
    print({
        'english': '"Here\'s thy $1',
        'russian': 'FIXME "Here\'s thy $1'
    })

    if greaterOrEquals(and(greater(integer(value 5), byte 11), canCarry(integer(value 3))), weight(data(integers_2689, integer(value 0)), byte 1)):
        createItem(integer(value 3), data(integers_2689, integer(value 0)), byte 0, byte 1)
        print({
            'english': ', plus one for luck!"',
            'russian': 'FIXME , plus one for luck!"'
        })

    else:
        print({
            'english': ', $Y."',
            'russian': 'FIXME , $Y."'
        })
    fi

label_1742:
    wait()

    print({
        'english': '\n\n"How about something else, $Y?" ',
        'russian': 'FIXME \n\n"How about something else, $Y?" '
    })

    choice({
        'english': 'yn',
        'russian': 'FIXME yn'
    })

    case {'english': 'y'}:
    case {'russian': 'FIXME y'}:
        jump label_893

    case {'english': 'n'}:
    case {'russian': 'FIXME n'}:
        if equals(integer(value 23), byte 0):
            print({
                'english': '"Perhaps some other time, then."',
                'russian': 'FIXME "Perhaps some other time, then."'
            })
            jump label_184
        fi

        if greater(integer(value 23), byte 1):
            print({
                'english': '"Perhaps one of thy friends, then?"\n\n',
                'russian': 'FIXME "Perhaps one of thy friends, then?"\n\n'
            })
            jump label_695
        fi

        print({
            'english': '"Perhaps thy friend, then?"\n\n',
            'russian': 'FIXME "Perhaps thy friend, then?"\n\n'
        })

        if integer(value 9):
            integer(value 3) = byte 0

        else:
            integer(value 3) = byte 1
        fi

        jump label_893
    esac

label_1941:
    if notEquals(integer(value 32), byte 144):
        print({
            'english': '"Come to my shop when it\'s open!"',
            'russian': 'FIXME "Come to my shop when it\'s open!"'
        })
        jump label_184
    fi

    integer(value 0) = byte 0
    integer(value 2) = byte 0
    integer(value 3) = byte 0

label_2008:
    integer(value 1) = byte 0

label_2015:
    if objectsCount(character(integer(value 0), byte 0), byte 167):
        data(integers_2667, integer(value 2)) = integer(value 0)
        integer(value 2) = plus(integer(value 2), byte 1)
        integer(value 3) = byte 1
        jump label_2084
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if less(integer(value 1), byte 7):
        jump label_2015
    fi

label_2084:
    integer(value 0) = plus(integer(value 0), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_2008
    fi

    if equals(integer(value 3), byte 0):
        print({
            'english': '"Sorry, none of you has any flour."',
            'russian': 'FIXME "Sorry, none of you has any flour."'
        })
        wait()

        print({
            'english': '\n',
            'russian': 'FIXME \n'
        })
        jump label_2627
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = data(integers_2667, byte 0)
        jump label_2318
    fi

label_2183:
    integer(value 0) = byte 0
    integer(value 1) = byte 1

label_2197:
    look(character(data(integers_2667, integer(value 0)), byte 0))
    print({
        'english': '#1. $Y\n',
        'russian': 'FIXME #1. $Y\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 1) = plus(integer(value 1), byte 1)

    if less(integer(value 0), integer(value 2)):
        jump label_2197
    fi

    print({
        'english': '"Which of you?" ',
        'russian': 'FIXME "Which of you?" '
    })
    inputInteger(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_2577
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greaterOrEquals(integer(value 3), integer(value 2)):
        jump label_2183
    fi

    integer(value 3) = data(integers_2667, integer(value 3))

label_2318:
    integer(value 4) = objectsCount(character(integer(value 3), byte 0), byte 167)
    look(character(integer(value 3), byte 0))

    if equals(integer(value 4), byte 0):
        jump label_2539
    fi

    print({
        'english': '$N turns to $Y, and says "Will you take 5 gold for that sack of ',
        'russian': 'FIXME $N turns to $Y, and says "Will you take 5 gold for that sack of '
    })
    print({
        'english': 'flour?" ',
        'russian': 'FIXME flour?" '
    })

    choice({
        'english': 'yn',
        'russian': 'FIXME yn'
    })

    case {'english': 'y'}:
    case {'russian': 'FIXME y'}:
        print({
            'english': '"Done!" He hands $Y 5 gold pieces and takes the sack of flour.',
            'russian': 'FIXME "Done!" He hands $Y 5 gold pieces and takes the sack of flour.'
        })
        destroyItem(character(integer(value 3), byte 0), byte 167, byte 0, byte 1)
        createItem(character(integer(value 3), byte 0), byte 88, byte 0, byte 5)
        wait()

        print({
            'english': '\n',
            'russian': 'FIXME \n'
        })
        jump label_2627

    case {'english': 'n'}:
    case {'russian': 'FIXME n'}:
        jump label_2577
    esac

label_2539:
    print({
        'english': '"Sorry, you haven\'t any flour."',
        'russian': 'FIXME "Sorry, you haven\'t any flour."'
    })
    wait()

    print({
        'english': '\n',
        'russian': 'FIXME \n'
    })
    jump label_2627

label_2577:
    print({
        'english': '"Changed your mind, eh?" he folds his arms.',
        'russian': 'FIXME "Changed your mind, eh?" he folds his arms.'
    })
    wait()

    print({
        'english': '\n',
        'russian': 'FIXME \n'
    })
    jump label_2627

label_2627:
    print({
        'english': '\n"Well, what else will it be then?"',
        'russian': 'FIXME \n"Well, what else will it be then?"'
    })
    jump label_184

integers_2667 = [
    0, // 0
    0, // 1
    0, // 2
    0, // 3
    0, // 4
    0, // 5
    0, // 6
    0, // 7
]

integers_2683 = [
    3, // 0
    5, // 1
    1, // 2
]

integers_2689 = [
    128, // 0
    131, // 1
    130, // 2
    0,   // 3
]

strings_2697 = [
    {
        'english': 'Bread',
        'russian': 'FIXME Bread'
    }, // 0
    {
        'english': 'Cake',
        'russian': 'FIXME Cake'
    }, // 1
    {
        'english': 'Rolls',
        'russian': 'FIXME Rolls'
    }, // 2
]
