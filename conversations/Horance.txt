source('CONVERSE.A')
index(88)

id(88)
name('Horance')

description:
    print('a bent, aging man with a scraggly beard and few teeth.')

    f3()

interaction:
    if hasBit(byte 235, byte 7):
        print('\n"Once they came for wanting,')
        wait()

        print('\nTwice they came to see,')
        wait()

        print('\nIf I am relenting,')
        wait()

        print('\nIn my mystery."')

    else:
        print('\n"Dogs are at my doorstep,')
        wait()

        print('\nYapping at my heels.')
        wait()

        print('\nNo way to ignore them.')
        wait()

        print('\nJust pretend that they are eels."')
        setBit(byte 235, byte 7)
    fi

label_280:
    print('\n')

label_281:
    ask()

    case 'buy':
    case 'reag':
        print('The mention of business brings the senile man to his senses ')
        print('momentarily.')
        wait()

        print('\n\n')
        jump label_3940

    case 'lear':
    case 'spel':
        print('The mention of business brings the senile man to his senses ')
        print('momentarily.')
        wait()

        print('\n\n')
        jump label_2840

    case 'book':
    case 'magi':
    case 'sell':
        print('The mention of business brings the senile man to his senses ')
        print('momentarily.')
        wait()

        print('\n\n')
        jump label_4713

    case 'name':
        print('"Names I\'m always thinking,')
        wait()

        print('\nNames I always see.')
        wait()

        print('\nHave you any inkling')
        wait()

        print('\nWhat they seem to mean?"')
        jump label_280

    case 'job':
        print('"I have nice @reagents,')
        wait()

        print('\nAlso wondrous @spells.')
        wait()

        print('\nIf you need a magic @book,')
        wait()

        print('\nThose I also sell."')
        jump label_280

    case 'hora':
    case 'tubl':
        print('"That is too familiar,')
        wait()

        print('\nCould it be a friend?')
        wait()

        print('\nNo, none is delivered,')
        wait()

        print('\nSo I must pretend."')
        setBit(byte 235, value 0)
        jump label_280

    case 'kill':
    case 'murd':
        print('"\'Step into my parlor,\'')
        wait()

        print('\nSaid the spider to the fly.')
        wait()

        print('\nPerhaps if he could holler,')
        wait()

        print('\nHe would not have to die."')
        jump label_280

    case 'relt':
    case 'rent':
        print('"Many are pretenders,')
        wait()

        print('\nA harmless game they play.')
        wait()

        print('\nBut for the few offenders,')
        wait()

        print('\nOf constant night they pray."')
        jump label_280

    case 'ghos':
        print('He purses his lips and lets out an eery, high-pitched cry.')
        wait()

        print('\n\n"That is my impression.')
        wait()

        print('\nTell me what you think.')
        wait()

        print('\nCan you learn a lesson,')
        wait()

        print('\nFrom what it has to teach?"')
        jump label_280

    case 'burm':
    case 'shav':
        print('"Don\'t stick your arm')
        wait()

        print('\nOut too far.')
        wait()

        print('\nIt may go home')
        wait()

        print('\nIn another car!"')
        wait()

        print('\n-- Burma Shave.')
        jump label_280

    case 'quen':
        print('"Ask about a traitor,')
        wait()

        print('\nAsk about a love,')
        wait()

        print('\nAnd if you are creative,')
        wait()

        print('\nAsk above the dove."')
        jump label_280

    case 'garg':
        print('"What is truly fearsome,')
        wait()

        print('\nWhat can evil be?')
        wait()

        print('\nNot all that growls is gruesome,')
        wait()

        print('\nNot all that hates has wings."')
        jump label_280

    case 'gate':
    case 'moon':
    case 'shri':
        print('"Through a glowing door,')
        wait()

        print('\nBy the full moons\' light.')
        wait()

        print('\nFor me to tell you more')
        wait()

        print('\nWould take us half the night!"')
        jump label_280

    case 'bell':
    case 'tren':
        print('"He who has opinions,')
        wait()

        print('\nThinks he knows it all,')
        wait()

        print('\nWill someday end up learning')
        wait()

        print('\nWhat comes before a fall."')
        jump label_280

    case 'yorl':
        print('"Simple has its moment')
        wait()

        print('\nAnd often is received')
        wait()

        print('\nMuch better than the brilliant,')
        wait()

        print('\nWho often will deceive."')
        jump label_280

    case 'mich':
        print('"Pain can run so deeply')
        wait()

        print('\nThat one becomes a mute,')
        wait()

        print('\nIn fear of leading others')
        wait()

        print('\nWhere goodness is in dispute."')
        jump label_280

    case 'gide':
        print('"Kindness is a proverb')
        wait()

        print('\nThat all can understand,')
        wait()

        print('\nAnd those who share it with you')
        wait()

        print('\nWill oft be in demand."')
        jump label_280

    case 'stiv':
        print('"Little is the difference,')
        wait()

        print('\nThat seperates ourselves.')
        wait()

        print('\nRemembering this inference,')
        wait()

        print('\nIs oft a great challenge."')
        jump label_280

    case 'marn':
        print('"Love has many rivers,')
        wait()

        print('\nYet grief can twist them all.')
        wait()

        print('\nBe guided by your wisdom,')
        wait()

        print('\nAnd you\'ll achieve the goal."')
        jump label_280

    case 'brit':
    case 'lord':
        print('"A council has a purpose,')
        wait()

        print('\nAnd yet it can be wrong.')
        wait()

        print('\nThere are no notes that singly')
        wait()

        print('\nPut the melody in a song."')
        jump label_280

    case 'bye':
        print('"I see that they are going,')
        wait()

        print('\nI\'m sure they will return.')
        wait()

        print('\nFor if they lack the knowing,')
        wait()

        print('\nThey\'ll always need to learn."\n')
        bye()

    case '*':
        print('"I hear you have a question.')
        wait()

        print('\nI\'m here to answer some.')
        wait()

        print('\nIf I may make suggestions,')
        wait()

        print('\nPlease ask another one."')
        jump label_280
    esac

label_2840:
    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 0
        integer(value 4) = byte 0
        jump label_2938
    fi

    integer(value 3) = character(byte 0, byte 0)

    if hasObject(integer(value 3), byte 57, byte 0):
        jump label_3236

    else:
        print('"But thou hast not a spell@book!"')
        jump label_280
    fi

label_2938:
    if greater(integer(value 1), integer(value 23)):
        jump label_3052
    fi

    integer(value 3) = character(integer(value 1), byte 0)

    if equals(hasObject(integer(value 3), byte 57, byte 0), byte 0):
        jump label_3037
    fi

    if equals(integer(value 4), byte 0):
        integer(value 4) = integer(value 3)
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_3037
    fi

    look(integer(value 4))
    print('#2) $Y\n')
    integer(value 2) = plus(integer(value 2), byte 1)
    integer(value 4) = integer(value 3)

label_3037:
    integer(value 1) = plus(integer(value 1), byte 1)
    jump label_2938

label_3052:
    if equals(integer(value 2), byte 0):
        print('"But none of you has a spell@book!"')
        jump label_280
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = integer(value 4)
        jump label_3236
    fi

    look(integer(value 4))
    print('#2) $Y\n"Which of you?" ')
    inputNumber(integer(value 2))

    if equals(integer(value 2), byte 0):
        jump label_281
    fi

    integer(value 1) = byte 0

label_3170:
    integer(value 3) = character(integer(value 1), byte 0)

    if hasObject(integer(value 3), byte 57, byte 0):
        integer(value 2) = minus(integer(value 2), byte 1)
    fi

    if equals(integer(value 2), byte 0):
        jump label_3236
    fi

    integer(value 1) = plus(integer(value 1), byte 1)

    if lessOrEquals(integer(value 1), integer(value 23)):
        jump label_3170
    fi

label_3236:
    look(integer(value 3))
    integer(value 1) = level(integer(value 3), byte 0)
    string(value 1) = data(dword 5226, integer(value 1))
    print('"In which Circle does $Y wish to study?" ')
    inputNumber(integer(value 0))

    if equals(integer(value 0), byte 0):
        jump label_280
    fi

    if greater(integer(value 0), byte 8):
        print('"As everybody knows, there are only eight circles."')
        wait()

        print('\n\n')
        jump label_3236
    fi

    if greater(integer(value 0), integer(value 1)):
        print('"I sense that $Y is only ready for the #1$1 Circle."')
        wait()

        print('\n\n"But such matters are not my concern..."')
        wait()

        print('\n\n')
    fi

    integer(value 0) = minus(integer(value 0), byte 1)
    integer(value 0) = multiply(integer(value 0), byte 10)

    if equals(data(dword 5253, integer(value 0)), byte 0):
        print('"I have no spells of that circle."')
        wait()

        print('\n\n')
        jump label_3236
    fi

    integer(value 2) = byte 1

label_3576:
    string(value 0) = data(dword 5413, minus(plus(integer(value 0), integer(value 2)), byte 1))
    print('#2) $0\n')
    integer(value 2) = plus(integer(value 2), byte 1)

    if greater(data(dword 5253, minus(plus(integer(value 0), integer(value 2)), byte 1)), byte 0):
        jump label_3576
    fi

    print('"Which of these?" ')
    inputNumber(integer(value 4))

    if or(equals(integer(value 4), byte 0), greaterOrEquals(integer(value 4), integer(value 2))):
        print('"Perhaps $Y is not ready for this circle."')
        wait()

        print('\n\n')
        jump label_3236
    fi

    integer(value 4) = minus(integer(value 4), byte 1)
    integer(value 5) = plus(byte 30, multiply(integer(value 0), byte 3))

    if less(objectsCount(integer(value 3), byte 88), integer(value 5)):
        print('"$Y lacks the #5 gold required."')
        wait()

        print('\n\n')
        jump label_3236
    fi

    print('"That spell costs #5 gold. Interested?" ')

    choice('yn')

    case 'y':
        print('$N hands $Y a piece of rune-covered parchment.')
        destroy(integer(value 3), byte 88, byte 0, integer(value 5))
        create(integer(value 3), byte 58, data(dword 5253, plus(integer(value 0), integer(value 4))), byte 1)
        wait()

        print('\n\n')
        jump label_3236

    case 'n':
        jump label_3236
    esac

label_3940:
    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 1
        integer(value 4) = byte 0
        jump label_3989
    fi

    integer(value 3) = character(byte 0, byte 0)
    jump label_4091

label_3989:
    integer(value 3) = character(minus(integer(value 2), byte 1), byte 0)
    look(integer(value 3))
    print('#2) $Y\n')

    if lessOrEquals(integer(value 2), integer(value 23)):
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_3989
    fi

    print('"Which of you?" ')
    inputNumber(integer(value 2))

    if or(equals(integer(value 2), byte 0), greater(integer(value 2), plus(integer(value 23), byte 1))):
        jump label_281

    else:
        integer(value 3) = character(minus(integer(value 2), byte 1), byte 0)
    fi

label_4091:
    look(integer(value 3))
    integer(value 1) = byte 1

label_4102:
    string(value 1) = data(dword 5148, minus(integer(value 1), byte 1))
    print('#1) $1\n')
    integer(value 1) = plus(integer(value 1), byte 1)

    if greater(data(dword 5116, minus(integer(value 1), byte 1)), byte 0):
        jump label_4102
    fi

    print('"Which of these?" ')
    inputNumber(integer(value 2))

    if or(equals(integer(value 2), byte 0), greaterOrEquals(integer(value 2), integer(value 1))):
        jump label_281
    fi

    integer(value 2) = minus(integer(value 2), byte 1)
    integer(value 1) = data(dword 5132, integer(value 2))
    string(value 1) = data(dword 5148, integer(value 2))
    integer(value 5) = byte 0
    print('"$1 costs #1 per portion."')
    wait()

    print('\n\n"How many dost thou want?" ')
    input(integer(value 4))

    if greater(integer(value 4), word 500):
        integer(value 4) = word 500
    fi

    if equals(integer(value 4), byte 0):
        jump label_4091
    fi

label_4329:
    if less(canCarry(integer(value 3)), weight(data(dword 5116, integer(value 2)), byte 1)):
        jump label_4451
    fi

    if less(objectsCount(integer(value 3), byte 88), integer(value 1)):
        jump label_4582
    fi

    destroy(integer(value 3), byte 88, byte 0, integer(value 1))
    create(integer(value 3), data(dword 5116, integer(value 2)), byte 0, byte 1)
    integer(value 5) = plus(integer(value 5), byte 1)

    if equals(integer(value 5), integer(value 4)):
        print('$N hands $Y the $1.')
        wait()

        print('\n\n')
        jump label_4091

    else:
        jump label_4329
    fi

label_4451:
    if integer(value 5):
        print('"Thou cannot carry that much!"')
        wait()

        print('\n\n"I\'ll give thee #5; thou dost not need the rest."')
        wait()

        print('\n\n')
        jump label_4091

    else:
        print('"Thou cannot carry any $1!"')
        wait()

        print('\n\n')
        jump label_4091
    fi

label_4582:
    if integer(value 5):
        print('"Thou cannot afford that much!"')
        wait()

        print('\n\n"I\'ll give thee #5; thou cannot have the rest."')
        wait()

        print('\n\n')
        jump label_4091

    else:
        print('"Thou cannot afford any $1!"')
        wait()

        print('\n\n')
        jump label_4091
    fi

label_4713:
    if greater(integer(value 23), byte 0):
        integer(value 1) = byte 0
        integer(value 2) = byte 1
        integer(value 4) = byte 0
        jump label_4762
    fi

    integer(value 3) = character(byte 0, byte 0)
    jump label_4864

label_4762:
    integer(value 3) = character(minus(integer(value 2), byte 1), byte 0)
    look(integer(value 3))
    print('#2) $Y\n')

    if lessOrEquals(integer(value 2), integer(value 23)):
        integer(value 2) = plus(integer(value 2), byte 1)
        jump label_4762
    fi

    print('"Which of you?" ')
    inputNumber(integer(value 2))

    if or(equals(integer(value 2), byte 0), greater(integer(value 2), plus(integer(value 23), byte 1))):
        jump label_280

    else:
        integer(value 3) = character(minus(integer(value 2), byte 1), byte 0)
    fi

label_4864:
    look(integer(value 3))

    if less(canCarry(integer(value 3)), weight(byte 57, byte 1)):
        print('"But thou cannot carry a spellbook!"')
        jump label_280
    fi

    if less(objectsCount(integer(value 3), byte 88), byte 50):
        print('"But thou cannot afford a spellbook!"')
        jump label_280
    fi

    print('"A spellbook costs 50 gold pieces. Interested?" ')

    choice('yn')

    case 'y':
        destroy(integer(value 3), byte 88, byte 0, byte 50)
        create(integer(value 3), byte 57, byte 0, byte 1)
        jump label_280

    case 'n':
        if integer(value 23):
            print('"Perhaps one of thy friends then."')
            wait()

            print('\n\n')
            jump label_4713

        else:
            jump label_280
        fi
    esac

integers_5116 = [
    65, // 0
    66, // 1
    69, // 2
    70, // 3
    71, // 4
    72, // 5
    0,  // 6
    0,  // 7
]

integers_5132 = [
    3, // 0
    3, // 1
    5, // 2
    2, // 3
    1, // 4
    2, // 5
    0, // 6
    0, // 7
]

strings_5148 = [
    'Black Pearl',   // 0
    'Blood Moss',    // 1
    'Mandrake Root', // 2
    'Nightshade',    // 3
    'Spider Silk',   // 4
    'Sulfurous Ash', // 5
    ' ',             // 6
    ' ',             // 7
]

strings_5226 = [
    'th', // 0
    'st', // 1
    'nd', // 2
    'rd', // 3
    'th', // 4
    'th', // 5
    'th', // 6
    'th', // 7
    'th', // 8
]

integers_5253 = [
    5,   // 0
    0,   // 1
    0,   // 2
    0,   // 3
    0,   // 4
    0,   // 5
    0,   // 6
    0,   // 7
    0,   // 8
    0,   // 9
    17,  // 10
    18,  // 11
    22,  // 12
    23,  // 13
    0,   // 14
    0,   // 15
    0,   // 16
    0,   // 17
    0,   // 18
    0,   // 19
    32,  // 20
    34,  // 21
    0,   // 22
    0,   // 23
    0,   // 24
    0,   // 25
    0,   // 26
    0,   // 27
    0,   // 28
    0,   // 29
    50,  // 30
    0,   // 31
    0,   // 32
    0,   // 33
    0,   // 34
    0,   // 35
    0,   // 36
    0,   // 37
    0,   // 38
    0,   // 39
    65,  // 40
    68,  // 41
    69,  // 42
    0,   // 43
    0,   // 44
    0,   // 45
    0,   // 46
    0,   // 47
    0,   // 48
    0,   // 49
    83,  // 50
    84,  // 51
    87,  // 52
    0,   // 53
    0,   // 54
    0,   // 55
    0,   // 56
    0,   // 57
    0,   // 58
    0,   // 59
    96,  // 60
    98,  // 61
    101, // 62
    102, // 63
    104, // 64
    0,   // 65
    0,   // 66
    0,   // 67
    0,   // 68
    0,   // 69
    0,   // 70
    0,   // 71
    0,   // 72
    0,   // 73
    0,   // 74
    0,   // 75
    0,   // 76
    0,   // 77
    0,   // 78
    0,   // 79
]

strings_5413 = [
    'Harm',         // 0
    ' ',            // 1
    ' ',            // 2
    ' ',            // 3
    ' ',            // 4
    ' ',            // 5
    ' ',            // 6
    ' ',            // 7
    ' ',            // 8
    ' ',            // 9
    'Magic Arrow',  // 10
    'Poison',       // 11
    'Trap',         // 12
    'Unlock Magic', // 13
    ' ',            // 14
    ' ',            // 15
    ' ',            // 16
    ' ',            // 17
    ' ',            // 18
    ' ',            // 19
    'Curse',        // 20
    'Fireball',     // 21
    ' ',            // 22
    ' ',            // 23
    ' ',            // 24
    ' ',            // 25
    ' ',            // 26
    ' ',            // 27
    ' ',            // 28
    ' ',            // 29
    'Disable',      // 30
    ' ',            // 31
    ' ',            // 32
    ' ',            // 33
    ' ',            // 34
    ' ',            // 35
    ' ',            // 36
    ' ',            // 37
    ' ',            // 38
    ' ',            // 39
    'Explosion',    // 40
    'Lightning',    // 41
    'Paralyze',     // 42
    ' ',            // 43
    ' ',            // 44
    ' ',            // 45
    ' ',            // 46
    ' ',            // 47
    ' ',            // 48
    ' ',            // 49
    'Flame Wind',   // 50
    'Hail Storm',   // 51
    'Poison Wind',  // 52
    ' ',            // 53
    ' ',            // 54
    ' ',            // 55
    ' ',            // 56
    ' ',            // 57
    ' ',            // 58
    ' ',            // 59
    'Chain Bolt',   // 60
    'Energy Wind',  // 61
    'Kill',         // 62
    'Mass Curse',   // 63
    'Wing Strike',  // 64
    ' ',            // 65
    ' ',            // 66
    ' ',            // 67
    ' ',            // 68
    ' ',            // 69
    ' ',            // 70
    ' ',            // 71
    ' ',            // 72
    ' ',            // 73
    ' ',            // 74
    ' ',            // 75
    ' ',            // 76
    ' ',            // 77
    ' ',            // 78
    ' ',            // 79
]
