source("CONVERSE.A")
index(56)

id(56)
name("Andrea")

description:
    print("an enormous woman, both in size and personality.")
    wait()

    print("\n")

interaction:
    integer(value 5) = byte 0
    print("\"Hello")

    if hasBit(byte 235, value 0):
        print(" again, ")

    else:
        print(", ")

    fi

    if equals(integer(value 23), byte 0):
        jump 127

    fi

    if integer(value 16):
        print("dears")

    else:
        print("fellahs")

    fi

    jump 148

127:
    if integer(value 16):
        print("my dear")

    else:
        print("handsome")

    fi

148:
    print("!\" she screams as she strides over to you with beer mugs in her hands.")
    wait()

    print("\n\n\"Welcome to the Slaughtered Lamb. What can I get you?\"\n")
    jump 303

281:
    print("\"What can I get you?\"\n")

303:
    ask()

    case "name":
        print("\"@Andrea! And yours, my fine friend?\"\n")

        ask()

        if integer(value 16):
            print("\n\"Pleased to meet you, dear.\"\n")

        else:
            print("\n\"I'm very pleased to meet you,\" she purrs.\n")

        fi

        ('SETF', ('byte', 235), ('value', 0))
        jump 303

    case "andr":
        print("\"Yes. Them's who I beat at arm @wrestling call me Miss Barlap, though.")
        print(" Out of respect.\" She laughs.\n")
        jump 303

    case "arm":
    case "wres":
        if hasBit(byte 235, byte 2):
            print("\"Alright, alright, I admit it - ya won fair an' square.\"")
            wait()

            print("\n\n\"No need to gloat about it...\"\n")
            jump 303

        fi

        if hasBit(byte 235, byte 3):
            print("\"Now don't feel bad, sugar, lots of folks lose to Andrea!\" She laughs ")
            print("heartily.\n")
            jump 303

        fi

        print("She looks you up and down and then feels your arm. \"Care for a match?\"")
        print(" ")
        jump 2083

    case "job":
        print("\"Honey, I've had many jobs in my time. But runnin' this pub is the ")
        print("best, 'cause I get to meet the strongest @men.\"\n")
        wait()

        print("\n\n\"I sell @ribs, @ale, @mead, @wine, and @rations.\"\n")
        jump 303

    case "buy":
        print("\"Which, @ribs, @ale, @mead, @wine, or @rations?\"\n")
        jump 303

    case "ribs":
        jump 2779

    case "mead":
        integer(value 4) = byte 0
        jump 2322

    case "ale":
        integer(value 4) = byte 1
        jump 2322

    case "wine":
        integer(value 4) = byte 2
        jump 2322

    case "rati":
        jump 3149

    case "men":
    case "stro":
        print("\"Look around. Here you'll find the men whose lives have lead them to ")
        print("many dangerous places.\"")
        wait()

        print("\n\nSomeone in a dark corner shouts \"Like this pub!\" and all the patrons")
        print(" laugh.\n")
        jump 303

    case "Lena":
        print("\"A little girlie-man. But he does make some fine clothes.\"\n")
        jump 303

    case "ben":
    case "big":
        print("\"Now there's a man.\" She looks into a beer mug and fixes her hair.")
        wait()

        print("\n\n\"I wish he'd come into town more often.\"\n")
        jump 303

    case "chan":
        print("\"That old witch? She may not have hit the bottle, but I believe a few ")
        print("have hit her.\"")
        wait()

        print("\n\nThe patrons around you chuckle.\n")
        jump 303

    case "garg":
        print("\"I've never seen any creature that could scare me. I say if they want ")
        print("trouble, come in this pub!\"")
        wait()

        print("\n\nThe men around her let out a cheer and she turns, acknowledging them")
        print(" with a bow.\n")
        jump 303

    case "brit":
    case "lord":
        print("\"He's never been in here. Can't imagine why--it seems like his kind of")
        print(" establishment.\"\n")
        jump 303

    case "bye":
        print("\"So long. Come back when you're thirsty.\"\n*\n\"And if you see that cutie")
        print(" Utomo, tell him Andrea says hi.\"\n")
        bye()

    case "*":
        print("\"Ask around.\"\n")

    esac

    jump 303

2083:
    askc("yn")

    case "y":
        print("\"Yer on!\" She grabs your arm and the contest begins!\n\n\"Arrghh!!!\"")
        wait()

        print("\n\n\"Nnghhh!!!\"")
        wait()

        print("\n\n\"Unghhh!!!\"")
        wait()

        print("\n\nAnd the winner is...")
        integer(value 0) = strength(character(byte 0, byte 0), byte 0)

        if greater(integer(value 0), byte 20):
            ('SETNAME', ('character', [('byte', 0), ('byte', 0)]))
            ('SETF', ('byte', 235), ('byte', 2))
            string(value 0) = string(value 34)

        else:
            ('SETF', ('byte', 235), ('byte', 3))
            string(value 0) = string(value 23)

        fi

        print("$0!!!\n")
        jump 303

    case "n":
        print("\"Well, maybe some other time, sugar...\"\n")
        jump 303

        // Unreachable code!

    esac

2322:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 0
        jump 2458

    fi

2342:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

2356:
    ('SETNAME', ('character', [('integer', [('value', 0)]), ('byte', 0)]))
    print("#2. $Y\n")
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump 2356

    fi

    print("\"Which of you?\" ")
    ('INPUTNUM', 3)

    if equals(integer(value 3), byte 0):
        jump 2741

    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump 2342

    fi

2458:
    ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))
    integer(value 1) = data(dword 3878, integer(value 4))
    print("\"That's #1 gold, okay?\" ")

    askc("yn")

    case "y":
        jump 2529

    case "n":
        integer(value 5) = byte 0
        jump 2741

        // Unreachable code!

    esac

2529:
    if less(objectsCount(character(integer(value 3), byte 0), byte 88), integer(value 1)):
        print("\"You can't afford it, sweetie.\"")
        wait()

        print("\n\n")
        jump 281

    fi

    if less(plus(canCarry(character(integer(value 3), byte 0)), weight(byte 88, integer(value 1))), weight(data(dword 3884, integer(value 4)), byte 1)):
        print("\"You don't have room to carry it.\"")
        integer(value 5) = byte 0
        jump 2741

    fi

    ('DELETE', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 88), ('byte', 0), ('integer', [('value', 1)]))
    ('NEW', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('data', [('dword', 3884), ('integer', [('value', 4)])]), ('byte', 0), ('byte', 1))
    integer(value 5) = byte 1
    string(value 1) = data(dword 3890, integer(value 4))
    print("$N gives $Y some $1.")
    wait()

    print("\n\n")
    jump 2741

2741:
    if integer(value 5):
        print("\"That ought to hold you.\"")
        wait()

    fi

    print("\n\n")
    jump 281

2779:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 0
        jump 2915

    fi

2799:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

2813:
    ('SETNAME', ('character', [('integer', [('value', 0)]), ('byte', 0)]))
    print("#2. $Y\n")
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump 2813

    fi

    print("\"Which of you?\" ")
    ('INPUTNUM', 3)

    if equals(integer(value 3), byte 0):
        jump 281

    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump 2799

    fi

2915:
    ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))
    print("\"That'll be 6 gold, okay?\" ")

    askc("yn")

    case "y":
        if less(objectsCount(character(integer(value 3), byte 0), byte 88), byte 6):
            print("\"You can't afford it, sweetie.\"")
            wait()

            print("\n\n")
            jump 281

        fi

        if less(plus(canCarry(character(integer(value 3), byte 0)), weight(byte 88, byte 6)), weight(byte 210, byte 1)):
            print("\"You don't have room to carry it.\"")
            integer(value 5) = byte 0
            wait()

            print("\n\n")
            jump 281

        fi

        ('DELETE', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 88), ('byte', 0), ('byte', 6))
        ('NEW', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 210), ('byte', 0), ('byte', 1))
        print("$N gives $Y some ribs.")
        wait()

        print("\n\n")
        jump 281

    case "n":
        jump 281

        // Unreachable code!

    esac

3149:
    if equals(integer(value 23), byte 0):
        integer(value 3) = byte 0
        jump 3285

    fi

3169:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

3183:
    ('SETNAME', ('character', [('integer', [('value', 0)]), ('byte', 0)]))
    print("#2. $Y\n")
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump 3183

    fi

    print("\"Which of you?\" ")
    ('INPUTNUM', 3)

    if equals(integer(value 3), byte 0):
        jump 281

    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump 3169

    fi

3285:
    ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))

    if or(less(canCarry(character(integer(value 3), byte 0)), weight(byte 129, byte 1)), less(objectsCount(character(integer(value 3), byte 0), byte 88), byte 4)):
        integer(value 9) = byte 1
        jump 3429

    fi

    print("\"Rations are 4 gold apiece. How many do you want?\" ")
    ('INPUT', 9)

    if greater(integer(value 9), word 200):
        integer(value 9) = word 200

    fi

    integer(value 8) = integer(value 9)

    if equals(integer(value 9), byte 0):
        jump 281

    fi

    integer(value 0) = byte 0

3429:
    integer(value 6) = byte 0
    integer(value 7) = byte 0

    if less(canCarry(character(integer(value 3), byte 0)), weight(byte 129, integer(value 9))):
        integer(value 6) = byte 1
        integer(value 0) = byte 1
        integer(value 9) = minus(integer(value 9), byte 1)
        jump 3531

    fi

    if less(objectsCount(character(integer(value 3), byte 0), byte 88), multiply(integer(value 9), byte 4)):
        integer(value 7) = byte 1
        integer(value 9) = minus(integer(value 9), byte 1)
        jump 3531

    fi

    jump 3664

3531:
    if integer(value 9):
        jump 3429

    fi

    if integer(value 6):
        ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))
        print("$N looks at $Y. \"You haven't any room in your pack.\"")
        wait()

        print("\n\n")
        jump 281

    fi

    if integer(value 7):
        ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))
        print("\"You can't afford it, sweetie.\"")
        wait()

        print("\n\n")
        jump 281

    fi

3664:
    ('DELETE', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 88), ('byte', 0), ('multiply', [('integer', [('value', 9)]), ('byte', 4)]))
    ('NEW', ('character', [('integer', [('value', 3)]), ('byte', 0)]), ('byte', 129), ('byte', 0), ('integer', [('value', 9)]))
    ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))

    if equals(integer(value 8), integer(value 9)):
        ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))
        print("$N hands the rations to $Y.")
        wait()

        print("\n\n")
        jump 281

    fi

    print("She hands $Y #9 ration\\s of mutton.")
    wait()

    print("\n\n")
    ('SETNAME', ('character', [('integer', [('value', 3)]), ('byte', 0)]))

    if integer(value 0):
        print("\"That's all you can carry.\"")
        wait()

        print("\n\n")
        jump 281

    else:
        print("\"That's all you can afford.\"")
        wait()

        print("\n\n")
        jump 281

        // Unreachable code!

    fi

    [['INTEGERS', [4, 3, 6]]]
    [['INTEGERS', [116, 117, 115]]]
    [['STRINGS', ['Mead', 'Ale', 'Wine']]]
