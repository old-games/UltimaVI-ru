source('CONVERSE.A')
index(55)

id(55)
name({
    'english': 'Le\'nard',
    'russian': 'Ле\'нард'
})

description:
    print({
        'english': 'a short, fat, rosy-cheeked man with long hair covering his eyes.',
        'russian': 'невысокого, толстого, розовощёкого мужчину с длинными волосами, закрывающими глаза.'
    })
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

    f3()

interaction:
    if hasBit(byte 235, value 0):
        print({
            'english': '"He--hello, $G. Nice to see thee again."',
            'russian': '"П-привет, $G. Рад снова тебя видеть".'
        })

    else:
        print({
            'english': 'The man seems afraid of you. "Wh-what do you want?"',
            'russian': 'Мужчина, кажется, боится вас. "Ч-чего вы хотите?"'
        })
    fi

label_177:
    print({
        'english': '\n',
        'russian': '\n'
    })

    ask()

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': 'As faint as a whisper comes the word "Le\'nard."',
            'russian': 'Словно шепотом слышится слово "Ле\'нард".'
        })
        setBit(byte 235, value 0)
        jump label_177

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"I\'m a @tailor, $G."',
            'russian': '"Я @портной, $G".'
        })
        jump label_177

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': 'He looks around, then waves goodbye.\n',
            'russian': 'Он оглядывается по сторонам, а затем машет рукой на прощание.\n'
        })
        bye()

    case 'sell':
    case {'russian': 'прод'}:
    case 'thre':
    case {'russian': 'нито'}:
        jump label_1232

    case 'buy':
    case {'russian': 'купи'}:
    case 'tail':
    case {'russian': 'порт'}:
        print({
            'english': '"I sew @pants, @tunics and @dresses, $G. I use a lot of @thread."',
            'russian': '"Я шью @брюки, @туники и @платья, $G. Я использую много @ниток".'
        })
        jump label_177

    case 'pant':
    case {'russian': 'брюк'}:
        integer(value 9) = byte 0
        jump label_545

    case 'tuni':
    case {'russian': 'туни'}:
        integer(value 9) = byte 1
        jump label_545

    case 'dres':
    case {'russian': 'плат'}:
        integer(value 9) = byte 2
        jump label_545

    case 'ball':
    case {'russian': 'шар'}:
    case 'plan':
    case {'russian': 'черт'}:
    case 'silk':
    case {'russian': 'шелк'}:
    case 'bag':
    case {'russian': 'мешо'}:
        jump label_1772

    case '*':
        print({
            'english': 'He stands still for a moment and then shrugs.',
            'russian': 'Он на мгновение замирает, а затем пожимает плечами.'
        })
        jump label_177
    esac

label_545:
    if integer(value 23):
        integer(value 0) = byte 1
        jump label_578

    else:
        integer(value 3) = character(byte 0, byte 0)
        jump label_733
    fi

label_578:
    look(character(minus(integer(value 0), byte 1), byte 0))
    print({
        'english': '#0) $Y\n',
        'russian': '#0) $Y\n'
    })

    if lessOrEquals(integer(value 0), integer(value 23)):
        integer(value 0) = plus(integer(value 0), byte 1)
        jump label_578
    fi

    print({
        'english': '"Who?" ',
        'russian': '"Кому?" '
    })
    inputDigit(integer(value 2))

    if equals(integer(value 2), byte 0):
        print({
            'english': '"Oh, sorry. I thought thou wanted to buy something."',
            'russian': '"Ох, извини. Я думал, ты хочешь что-то купить".'
        })
        jump label_177
    fi

    integer(value 2) = minus(integer(value 2), byte 1)

    if greater(integer(value 2), integer(value 23)):
        integer(value 0) = byte 1
        jump label_578
    fi

    integer(value 3) = character(integer(value 2), byte 0)

label_733:
    look(integer(value 3))
    integer(value 5) = data(integers_1901, integer(value 9))

    if less(plus(canCarry(integer(value 3)), weight(byte 88, integer(value 5))), weight(data(integers_1895, integer(value 9)), byte 1)):
        print({
            'english': '"I\'m sorry, but I really don\'t think $Y can carry that."',
            'russian': '"Извините, но я действительно не думаю, что $Y сможет это унести".'
        })
        jump label_177
    fi

    if less(objectsCount(integer(value 3), byte 88), integer(value 5)):
        print({
            'english': '"I\'m sorry, but I really don\'t think $Y can afford that."',
            'russian': '"Извините, но я действительно не думаю, что $Y может себе это позволить".'
        })
        jump label_177
    fi

    print({
        'english': '"That costs #5. Do you still want it?" ',
        'russian': '"Цена - #5. Вы всё ещё заинтересованы?" '
    })

label_947:
    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        destroyItem(integer(value 3), byte 88, byte 0, integer(value 5))
        createItem(integer(value 3), data(integers_1895, integer(value 9)), byte 0, byte 1)
        print({
            'english': '$N takes $Y\'s gold and hands over the purchase.',
            'russian': '$N берёт золото у $Y и передаёт покупку.'
        })
        jump label_177

    case 'n':
    case {'russian': 'н'}:
        if less(integer(value 5), minus(data(integers_1901, integer(value 9)), byte 9)):
            print({
                'english': '"I\'m terribly sorry, but I can\'t sell it for less!"',
                'russian': '"Мне ужасно жаль, но я не могу больше снижать цену!"'
            })
            jump label_177
        fi

        print({
            'english': '"I\'m sorry! That\'s ',
            'russian': '"Извините! Это  '
        })

        if less(integer(value 5), data(integers_1901, integer(value 9))):
            print({
                'english': 'still ',
                'russian': 'всё ещё '
            })
        fi

        integer(value 5) = minus(integer(value 5), byte 3)
        print({
            'english': 'too expensive, isn\'t it? Here, I\'ll sell it for #5 gold, okay?" ',
            'russian': 'слишком дорого, не так ли? Вот, я предлагаю новую цену - #5, идёт?" '
        })
        jump label_947
    esac

label_1232:
    integer(value 0) = byte 0
    integer(value 2) = byte 0
    integer(value 3) = byte 0

label_1253:
    if objectsCount(character(integer(value 0), byte 0), byte 225):
        data(integers_1879, integer(value 2)) = integer(value 0)
        integer(value 2) = plus(integer(value 2), byte 1)
        integer(value 3) = byte 1
    fi

    integer(value 0) = plus(integer(value 0), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_1253
    fi

label_1317:
    if equals(integer(value 3), byte 0):
        print({
            'english': '"But - but none of you has any thread to sell."',
            'russian': '"Но... но ни у кого из вас нет ниток на продажу".'
        })
        jump label_177
    fi

    if equals(integer(value 2), byte 1):
        integer(value 3) = data(integers_1879, byte 0)
        jump label_1538
    fi

label_1403:
    integer(value 0) = byte 0
    integer(value 1) = byte 1

label_1417:
    look(character(data(integers_1879, integer(value 0)), byte 0))
    print({
        'english': '#1. $Y\n',
        'russian': '#1. $Y\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 1) = plus(integer(value 1), byte 1)

    if less(integer(value 0), integer(value 2)):
        jump label_1417
    fi

    print({
        'english': '"Which of you?" ',
        'russian': '"Кто из вас?" '
    })
    inputDigit(integer(value 3))

    if equals(integer(value 3), byte 0):
        jump label_1756
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greaterOrEquals(integer(value 3), integer(value 2)):
        jump label_1403
    fi

    integer(value 3) = data(integers_1879, integer(value 3))

label_1538:
    integer(value 4) = objectsCount(character(integer(value 3), byte 0), byte 225)
    look(character(integer(value 3), byte 0))

    if equals(integer(value 4), byte 0):
        integer(value 3) = byte 0
        jump label_1317
    fi

    print({
        'english': '$N turns to $Y, and says "Will you take 8 gold for that thread?" ',
        'russian': '$N поворачивается к $Y и говорит: "Возьмёте ли вы 8 золотых за эту нить?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        print({
            'english': '"Good, good." He hands $Y 8 gold pieces and takes the thread.',
            'russian': '"Хорошо, хорошо". Он протягивает $Y 8 золотых монет и берёт нить.'
        })
        destroyItem(character(integer(value 3), byte 0), byte 225, byte 0, byte 1)
        createItem(character(integer(value 3), byte 0), byte 88, byte 0, byte 8)
        jump label_177

    case 'n':
    case {'russian': 'н'}:
        jump label_1756
    esac

label_1756:
    print({
        'english': '"Oh. Okay."',
        'russian': '"Ох, хорошо".'
    })
    jump label_177

label_1772:
    if equals(partyHasObject(word 270, byte 0), word 32769):
        print({
            'english': '"I\'m not sure what you mean."',
            'russian': '"Я не совсем понимаю, что вы имеете в виду".'
        })
        jump label_177
    fi

    print({
        'english': '"I wouldn\'t know where to begin. Ask @Marissa in Paws."',
        'russian': '"Даже не знаю, с чего начать. Спроси @Мариссу в Поус".'
    })
    jump label_177

integers_1879 = [
    0, // 0
    0, // 1
    0, // 2
    0, // 3
    0, // 4
    0, // 5
    0, // 6
    0, // 7
]

integers_1895 = [
    137, // 0
    124, // 1
    126, // 2
]

integers_1901 = [
    30, // 0
    25, // 1
    45, // 2
]
