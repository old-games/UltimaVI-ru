source('CONVERSE.B')
index(13)

id(112)
name('Elad')

description:
    print('an uncomfortable looking man sitting behind a cup of tea.')
    wait()

    print('\n')

interaction:
    if equals(integer(value 32), byte 153):
        print('"Can\'t talk now. I\'m--ungh!" He reels from a punch to his belly.')
        wait()

        print('\n\n"I\'m in the middle of something, $G. Ouch!"\n')
        bye()
    fi

    print('"Hello." His gaze darts from side to side, lingering longingly on the ')
    print('mugs of ale his fellow patrons are gulping down heartily.\n')

    ask()

    case 'name':
        if hasBit(byte 235, value 0):
            print('"Well, I\'m still Captain Elad."')
            jump label_314
        fi

        print('He looks at you uneasily. "I\'m @Captain Elad. Not that it\'s any ')
        print('business of yours..."')
        setBit(byte 235, value 0)
        jump label_314

    case 'job':
        print('"I was Captain of the Theodosia Marie--until she @sank."')
        jump label_314

    case 'capt':
        print('When you say \'Captain,\' all the pirates at the table turn to you ')
        print('expectantly.')
        wait()

        print('\n\nWhen they realize you weren\'t talking to them, they return to their ')
        print('business.')
        jump label_314

    case 'john':
        print('"Captain John, that fool... He was captured by gargoyles."')
        wait()

        print('\n\n"I hear they dragged him down into Hythloth, and nobody\'s seen hide ')
        print('nor hair of him since."')

        if isNearby(byte 114):
            wait()

            portrait(byte 114)
            print('\n\nLeonna raises an eyebrow. "Is that so? I could tell a different ')
            print('tale..."')
            wait()

            portrait(byte 235)
        fi

        jump label_314

    case 'mari':
    case 'sank':
    case 'theo':
        print('"Aye, \'twas a terrible ordeal. We were sailing just off @Bordermarch ')
        print('when the whole island started @shaking."')
        wait()

        print('\n\n"Must have been one of those @earthquakes we\'ve been having."')
        jump label_314

    case 'gone':
    case 'isla':
    case 'orde':
    case 'sail':
    case 'shak':
    case 'ship':
    case 'size':
    case 'terr':
        print('"The whole island sank beneath the waves. We were caught in the huge ')
        print('@whirlpool left in its wake."')
        wait()

        print('\n\n"I was one of the lucky few to swim clear. But my ship\'s on the ')
        print('bottom of the ocean now, and that\'s the honest truth."')
        jump label_314

    case 'whir':
        print('He shudders, then takes a sip of his tea. "I don\'t like to think about')
        print(' it."')
        jump label_314

    case 'bord':
        print('"A fair sized island, and now she\'s gone! Some o\' them @earthquakes ')
        print('have been mighty fierce."')
        jump label_314

    case 'eart':
    case 'quak':
        print('"Yes, they started soon after Lord @British was @rescued from the ')
        print('underworld."')
        wait()

        print('\n\n"I lost my ship to the last one."')
        jump label_314

    case 'brit':
    case 'lord':
        print('"I\'d toast him with you, but this," he gestures disparagingly at his ')
        print('cup, "is hardly fitting for such an honor."')
        jump label_314

    case 'resc':
    case 'unde':
        print('"Surely you\'ve heard tales of the Avatar\'s bold exploits?"')
        wait()

        print('\n\n"It was all anyone was talking about round here for weeks."')
        jump label_314

    case 'rune':
        print('"I wish I had one of them... I bet I could sell it for a pretty ')
        print('penny!"')
        jump label_314

    case 'mant':
        print('"You don\'t hear much about the @virtues in a pirate town..."')
        jump label_314

    case 'hone':
    case 'tea':
    case 'trut':
    case 'virt':
        print('"I could use more virtue in me life. I\'ve just given up @drinking, to ')
        print('start with."')
        jump label_314

    case 'drin':
        print('"Aye, \'tis quite a @temptation."')
        jump label_314

    case 'temp':
        print('"Indeed." He takes another big gulp of tea.')
        jump label_314

    case 'bye':
        jump label_2394

    case '*':
        print('"Ah, that\'s not important."')
    esac

    jump label_314

label_2394:
    if hasBit(byte 235, byte 6):
        print('The pirate smiles and waves goodbye, then scowls as he turns back to ')
        print('his mug of tea.\n')
        bye()
    fi

    if hasBit(byte 235, byte 7):
        jump label_3016
    fi

    if less(canCarry(byte 1), weight(byte 88, byte 5)):
        jump label_3016
    fi

    print('"Wait, before you go..."')
    wait()

    print('\n\n"I was wondering--do you know the @Mantra of Honesty?" ')

    choice('yn')

    case 'n':
        print('"Oh. Well, let me know if you find out later."')
        wait()

        print('\n\n')
        jump label_3016
    esac

    print('"I\'ve been trying to find out what it is, so that I can better ')
    print('myself."')
    wait()

    print('\n\n"I\'ll give you five gold if you tell me. Is it a deal?" ')

    choice('yn')

    case 'n':
        print('"I\'ll be here with the money if you change your mind."')
        wait()

        print('\n\n')
        jump label_3016

    case 'y':
        print('"Okay, what is it?"\n')
    esac

    ask()

    case 'bye':
        print('The pirate frowns.')
        wait()

        print('\n\n')
        jump label_3016

    case 'ahm':
        setBit(byte 235, byte 6)
    esac

    createItem(byte 1, byte 88, byte 0, byte 5)
    print('"Thank you! Now my meditations will succeed at last!"')
    setBit(byte 235, byte 7)

    if hasBit(byte 235, byte 6):
        print('\n')
        bye()

    else:
        decreaseKarma(byte 5)
    fi

label_3016:
    print('As you turn to leave, you think you might have caught a glimpse of ')
    print('Captain Elad stealing a swig from someone else\'s mug... But you can\'t ')
    print('be sure.\n')
    bye()
