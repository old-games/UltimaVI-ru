source("CONVERSE.B")
index(13)

id(112)
name("Elad")

description:
    print("an uncomfortable looking man sitting behind a cup of tea.")
    wait()
    print("\n")

interaction:
    if equals(integer(value 32), byte 153):
    print("\"Can't talk now. I'm--ungh!\" He reels from a punch to his belly.")
    wait()
    print("\n\n\"I'm in the middle of something, $G. Ouch!\"\n")
    bye()
    endif
    print("\"Hello.\" His gaze darts from side to side, lingering longingly on the mugs of ale his fellow patrons are gulping down heartily.\n")
    ask()
    case "name":
    if hasBit(byte 235, value 0):
    print("\"Well, I'm still Captain Elad.\"")
    jump 314
    endif
    print("He looks at you uneasily. \"I'm @Captain Elad. Not that it's any business of yours...\"")
    ('SETF', ('byte', 235), ('value', 0))
    jump 314
    case "job":
    print("\"I was Captain of the Theodosia Marie--until she @sank.\"")
    jump 314
    case "capt":
    print("When you say 'Captain,' all the pirates at the table turn to you expectantly.")
    wait()
    print("\n\nWhen they realize you weren't talking to them, they return to their business.")
    jump 314
    case "john":
    print("\"Captain John, that fool... He was captured by gargoyles.\"")
    wait()
    print("\n\n\"I hear they dragged him down into Hythloth, and nobody's seen hide nor hair of him since.\"")
    if isNearby(byte 114):
    wait()
    ('PORTRAIT', ('byte', 114))
    print("\n\nLeonna raises an eyebrow. \"Is that so? I could tell a different tale...\"")
    wait()
    ('PORTRAIT', ('byte', 235))
    endif
    jump 314
    case "theo,mari,sank":
    print("\"Aye, 'twas a terrible ordeal. We were sailing just off @Bordermarch when the whole island started @shaking.\"")
    wait()
    print("\n\n\"Must have been one of those @earthquakes we've been having.\"")
    jump 314
    case "terr,orde,sail,isla,shak,size,gone,ship":
    print("\"The whole island sank beneath the waves. We were caught in the huge @whirlpool left in its wake.\"")
    wait()
    print("\n\n\"I was one of the lucky few to swim clear. But my ship's on the bottom of the ocean now, and that's the honest truth.\"")
    jump 314
    case "whir":
    print("He shudders, then takes a sip of his tea. \"I don't like to think about it.\"")
    jump 314
    case "bord":
    print("\"A fair sized island, and now she's gone! Some o' them @earthquakes have been mighty fierce.\"")
    jump 314
    case "eart,quak":
    print("\"Yes, they started soon after Lord @British was @rescued from the underworld.\"")
    wait()
    print("\n\n\"I lost my ship to the last one.\"")
    jump 314
    case "lord,brit":
    print("\"I'd toast him with you, but this,\" he gestures disparagingly at his cup, \"is hardly fitting for such an honor.\"")
    jump 314
    case "resc,unde":
    print("\"Surely you've heard tales of the Avatar's bold exploits?\"")
    wait()
    print("\n\n\"It was all anyone was talking about round here for weeks.\"")
    jump 314
    case "rune":
    print("\"I wish I had one of them... I bet I could sell it for a pretty penny!\"")
    jump 314
    case "mant":
    print("\"You don't hear much about the @virtues in a pirate town...\"")
    jump 314
    case "hone,trut,virt,tea":
    print("\"I could use more virtue in me life. I've just given up @drinking, to start with.\"")
    jump 314
    case "drin":
    print("\"Aye, 'tis quite a @temptation.\"")
    jump 314
    case "temp":
    print("\"Indeed.\" He takes another big gulp of tea.")
    jump 314
    case "bye":
    jump 2394
    case "*":
    print("\"Ah, that's not important.\"")
    ESAC
    jump 314

2394:
    if hasBit(byte 235, byte 6):
    print("The pirate smiles and waves goodbye, then scowls as he turns back to his mug of tea.\n")
    bye()
    endif
    if hasBit(byte 235, byte 7):
    jump 3016
    endif
    if less(canCarry(byte 1), weight(byte 88, byte 5)):
    jump 3016
    endif
    print("\"Wait, before you go...\"")
    wait()
    print("\n\n\"I was wondering--do you know the @Mantra of Honesty?\" ")
    askc("yn")
    case "n":
    print("\"Oh. Well, let me know if you find out later.\"")
    wait()
    print("\n\n")
    jump 3016
    ESAC
    print("\"I've been trying to find out what it is, so that I can better myself.\"")
    wait()
    print("\n\n\"I'll give you five gold if you tell me. Is it a deal?\" ")
    askc("yn")
    case "n":
    print("\"I'll be here with the money if you change your mind.\"")
    wait()
    print("\n\n")
    jump 3016
    case "y":
    print("\"Okay, what is it?\"\n")
    ESAC
    ask()
    case "bye":
    print("The pirate frowns.")
    wait()
    print("\n\n")
    jump 3016
    case "ahm":
    ('SETF', ('byte', 235), ('byte', 6))
    ESAC
    ('NEW', ('byte', 1), ('byte', 88), ('byte', 0), ('byte', 5))
    print("\"Thank you! Now my meditations will succeed at last!\"")
    ('SETF', ('byte', 235), ('byte', 7))
    if hasBit(byte 235, byte 6):
    print("\n")
    bye()
    else:
    ('SUB_KARMA', ('byte', 5))
    endif
    print("As you turn to leave, you think you might have caught a glimpse of Captain Elad stealing a swig from someone else's mug... But you can't be sure.\n")
    bye()
