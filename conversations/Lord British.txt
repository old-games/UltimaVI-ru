source('CONVERSE.A')
index(5)

id(5)
name('Lord British')

description:
    print('the noble ruler of Britannia.\n*')

interaction:
    ('SETF', ('byte', 235), ('value', 0))

    if hasBit(byte 235, byte 7):
        jump 1819
    fi

    print('"$P! \'Tis good to see thee again. Much hath happened since thou last ')
    print('departed our realm."')
    wait()

    integer(value 7) = byte 0
    integer(value 8) = byte 0
    integer(value 9) = byte 0
    print('\n\n"But I must make sure \'tis truly thee."*\n\n"Only the true Avatar ')
    print('would know what was contained in the Compendium I sent."*\n\n')

302:
    if greater(integer(value 7), byte 0):
        jump 337
    fi

    integer(value 7) = random(byte 1, byte 10)
    integer(value 6) = integer(value 7)
    jump 5448

337:
    if greater(integer(value 8), byte 0):
        jump 385
    fi

350:
    integer(value 8) = random(byte 1, byte 10)

    if equals(integer(value 8), integer(value 7)):
        jump 350
    fi

    integer(value 6) = integer(value 8)
    jump 5448

385:
    if greater(integer(value 9), byte 0):
        jump 446
    fi

398:
    integer(value 9) = random(byte 1, byte 10)
    integer(value 6) = integer(value 9)

    if equals(integer(value 9), integer(value 7)):
        jump 398
    fi

    if equals(integer(value 9), integer(value 8)):
        jump 398
    fi

    jump 5448

446:
    print('\n"Ah, \'tis thee indeed, $P. Take this key."\n*\n"It will unlock the ')
    print('gatehouse by the southern entrance to the castle."\n*\n"Then you can use')
    print(' the lever inside to raise the portcullis, and the crank will lower ')
    print('the drawbridge."\n*\n"The same key will also let you into the sewers ')
    print('under the castle."*')
    ('NEW', ('byte', 1), ('byte', 64), ('byte', 1), ('byte', 1))
    ('SETF', ('byte', 235), ('byte', 7))
    print('\n\n"Now let me tell thee what hath transpired since thy last visit."')
    wait()

    print('\n\n"The vast underworld from which thou didst rescue me hath ')
    print('collapsed."')

826:
    print('"The vast underworld from which thou didst rescue me hath collapsed."')
    wait()

    print('\n\n"Yet still there are forces of evil abroad in the land."')
    wait()

    print('\n\n"Britannia is under attack by gargoyles such as those thou just ')
    print('fought."')
    wait()

    print('\n\n"They have been coming up through the dungeons."')
    wait()

    print('\n\n"Thus far they have mainly been attacking the @shrines of the eight ')
    print('@virtues."')
    wait()

    print('\n\n"When the Shrine of Compassion didst fall, Sir @Geoffrey sent a ')
    print('party to free it."')
    wait()

    print('\n\n"Do thou ask him of this mission. Perhaps thou canst prove of some ')
    print('assistance."')
    wait()

    print('\n\n"Whilst thou art here, I have a room in the castle set aside for thy')
    print(' personal use."')
    wait()

    print('\n\n"\'Tis in the west wing of the castle, just south of mine own ')
    print('chambers."')
    wait()

    print('\n\n"I have had my servants place some equipment there, in case thou ')
    print('shouldst have need of it."')
    wait()

    print('\n\n"Of course, thou mayst feel free to borrow anything in my castle, if')
    print(' thou shouldst need it."')
    wait()

    print('\n\n"Lastly, any time thou dost need @healing, do thou but ask me."')
    wait()

    print('\n\n"If thou doth wish me to @repeat all this later, thou need but ask."')
    jump 1967

1819:
    if notEquals(partyHasObject(byte 64, byte 1), word 32769):
        jump 1925
    fi

    print('"I see thou hath misplaced thy key to the castle."\n*\n"Here is ')
    print('another."')
    ('NEW', ('byte', 1), ('byte', 64), ('byte', 1), ('byte', 1))
    jump 1967

1925:
    print('"Good $T, $P. What wouldst thou speak of?"\n')

    ask()

    case 'name':
        print('"I am Lord British, as thou knowest well."')
        jump 1967

    case 'rep':
        jump 826

    case 'job':
        print('"Thanks to thee, I sit once more upon the throne of Britannia."')
        wait()

        print('\n\n"Though \'tis a heavy burden in such @troubled times as these."')
        jump 1967

    case 'burd':
    case 'heav':
    case 'time':
    case 'trou':
        print('"The @gargoyles art indeed the greatest threat our realm has ever ')
        print('known."')
        wait()

        print('\n\n"We are fortunate indeed that fate hath brought thee here in our ')
        print('hour of need."')
        jump 1967

    case 'garg':
        print('"Perhaps thou canst drive these vile creatures back into the bowels of')
        print(' the earth from whence they came."')
        wait()

        print('\n\n"All our efforts thus far have availed us naught."')
        jump 1967

    case 'shri':
        print('"By now the gargoyles may have captured them all."')
        wait()

        print('\n\n"Thou must hurry if thou wouldst foil their evil schemes..."')
        jump 1967

    case 'virt':
        print('"Stay strong in thy commitment to the eight virtues."')
        wait()

        print('\n\n"It is our belief in them that sets us apart from the cruel invaders')
        print(' who would destroy all that we hold dear."')
        jump 1967

    case 'geof':
        print('"He is the Captain of the Guard."')
        jump 1967

    case 'blac':
    case 'gate':
    case 'moon':
    case 'orb':
    case 'ston':
        print('You show Lord British the black stone.')
        wait()

        print('\n\n"Hmmmm... I have such a stone, as thou may recall."')
        wait()

        print('\n\n"I did not know that there were more such orbs."')
        wait()

        print('\n\n"\'Twill serve thee well in thy travels if thou dost learn to master ')
        print('its powers."')
        wait()

        print('\n\n"To open a gate, use the stone, and carefully position it a few feet')
        print(' from thee."')
        wait()

        print('\n\n"Thou wilt discover that the placement is the key."')
        wait()

        print('\n\n"In the proper positions, ')
        wait()

        print('the stone canst conjure gates to take thee to numerous destinations."')
        ('SETF', ('byte', 235), ('byte', 5))
        jump 1967

    case 'mant':
    case 'rune':
        print('"Ask the leaders of each town to tell thee of that. ')
        jump 1967

    case 'comp':
        print('"Do thou ask @Tholden."')
        jump 1967

    case 'thol':
        print('"He is my @chancellor."')
        jump 1967

    case 'chan':
        print('"Aye, Tholden is my chancellor."')
        jump 1967

    case 'mous':
    case 'sher':
        if partyHas(byte 9):
            print('"Please take good care of my little friend."')
            jump 1967
        fi

        print('"Ah, thou hast heard of my little friend?"')
        wait()

        print('\n\n"Her name is Sherry, and I\'m quite proud of her."')
        wait()

        print('\n\n"I\'m certain she is the only talking mouse in all of Britannia."')
        wait()

        print('\n\n"Thou art welcome to see her, if thou dost wish."')
        wait()

        print('\n\n"Thou canst find her wandering throughout the castle."')
        wait()

        print('\n\n"She comes by my room every night, so I can tell her @stories."')
        jump 1967

    case 'book':
    case 'oz':
    case 'wiza':
        print('"I collect rare books."')
        wait()

        print('\n\n"There\'s one in particular I\'ve been hunting for many years."')
        wait()

        print('\n\n"It\'s called \'The Wizard of Oz.\' Ever heard of it?" ')
        jump 4608

    case 'bedt':
    case 'stor':
        print('"My favorite story is \'@Hubert the Lion.\'"')
        jump 1967

    case 'favo':
    case 'hube':
    case 'lion':
        print('"I\'ve known it by heart, ever since I heard it as a child."')
        wait()

        print('\n\n"Hubert the Lion was haughty and vain, and especially proud of his ')
        print('elegant mane."')
        wait()

        print('\n\n"But conceit of this sort is not proper at all, and Hubert the Lion ')
        print('was due for a fall."')
        jump 1967

    case 'mr':
    case 'nose':
        jump 5231

    case 'heal':
        jump 5323

    case 'than':
        print('"\'Tis I who should thank thee, Avatar, for all thou hast done for ')
        print('Britannia."')
        jump 1967

    case 'bye':
        print('"May fortune favor thee."\n')
        bye()

    case '*':
        print('"I cannot help thee with that."')
    esac

    jump 1967

4608:
    askc('yn')

    case 'n':
4614:
        print('"Well, if thou dost run across it in thy travels, ')
        wait()

        print('I would greatly appreciate if thou couldst bring it here."')
        wait()

        print('\n\n"I hath promised a great reward to whosoever shalt bring me a copy."')
        jump 1967

    case 'y':
        if equals(partyHasObject(byte 151, byte 75), word 32769):
            jump 4614
        fi

        integer(value 0) = divide(canCarry(byte 1), weight(byte 77, byte 1))

        if greater(integer(value 0), byte 20):
            integer(value 0) = byte 20
        fi

        if less(integer(value 0), byte 5):
            print('"Thou art carrying too much for me to reward thee properly..."')
            wait()

            print('\n\n"Bring the book back later, when thou art less burdened."')
            jump 1967
        fi

        print('"Thou hath found a copy!"')
        wait()

        print('\n"Long hath I anticipated this moment..."')
        wait()

        print('\n\n"Not since my childhood have I read this wondrous story."')
        wait()

        print('\n\nGingerly, he takes the tome. "Here is your reward." He gives you ')
        print('some glowing gems.')
        ('DELETE', ('partyHasObject', [('byte', 151), ('byte', 75)]), ('byte', 151), ('byte', 75), ('byte', 1))
        ('NEW', ('byte', 1), ('byte', 77), ('byte', 0), ('integer', [('value', 0)]))
        jump 1967
    esac

5231:
    print('"Who told thee of that nickname!?"\n')

    ask()

    case '*':
        print('"Well, I\'d rather thou didst not call me that."')
        jump 1967
    esac

5323:
    integer(value 0) = byte 0

5330:
    integer(value 2) = character(integer(value 0), byte 0)

    if isWounded(integer(value 2)):
        ('HEAL', ('integer', [('value', 2)]))
    fi

    if isPoisoned(integer(value 2)):
        ('CURE', ('integer', [('value', 2)]))
    fi

    integer(value 0) = plus(integer(value 0), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump 5330
    fi

    print('Lord British waves his hand, and your whole party is healed!')
    jump 1967

5448:
    if equals(integer(value 6), byte 1):
        jump 5578
    fi

    if equals(integer(value 6), byte 2):
        jump 5713
    fi

    if equals(integer(value 6), byte 3):
        jump 5887
    fi

    if equals(integer(value 6), byte 4):
        jump 6039
    fi

    if equals(integer(value 6), byte 5):
        jump 6226
    fi

    if equals(integer(value 6), byte 6):
        jump 6392
    fi

    if equals(integer(value 6), byte 7):
        jump 6550
    fi

    if equals(integer(value 6), byte 8):
        jump 6709
    fi

    if equals(integer(value 6), byte 9):
        jump 6862
    fi

    if equals(integer(value 6), byte 10):
        jump 7041
    fi

5578:
    print('"What doth trolls lack?"\n')

    ask()

    case 'end':
        print('"Thou art correct."\n\n')
        jump 302

    case 'bye':
        jump 7194

    case '*':
        print('"Nay, \'tis not the correct answer. Consult thy Compendium."')
        jump 5602
    esac

5713:
    print('"What part of the tangle vine doth put one to sleep?"\n')

    ask()

    case 'cent':
    case 'frag':
    case 'pod':
        print('"Thou art correct."\n\n')
        jump 302

    case 'bye':
        jump 7194

    case '*':
        print('"Nay, \'tis not the correct answer. Consult thy Compendium."')
        jump 5766
    esac

5887:
    print('"How wert the headlesses produced?"\n')

    ask()

    case 'expe':
    case 'wiza':
        print('"Thou art correct."\n\n')
        jump 302

    case 'bye':
        jump 7194

    case '*':
        print('"Nay, \'tis not the correct answer. Consult thy Compendium."')
        jump 5922
    esac

6039:
    print('"What valued item canst one find near the spawning grounds of Hydras?"')
    print('\n')

    ask()

    case 'mush':
    case 'nigh':
        print('"Thou art correct."\n\n')
        jump 302

    case 'bye':
        jump 7194

    case '*':
        print('"Nay, \'tis not the correct answer. Consult thy Compendium."')
        jump 6109
    esac

6226:
    print('"How canst one fend off rotworms?"\n')

    ask()

    case 'burn':
    case 'fire':
    case 'flam':
    case 'pass':
    case 'torc':
        print('"Thou art correct."\n\n')
        jump 302

    case 'bye':
        jump 7194

    case '*':
        print('"Nay, \'tis not the correct answer. Consult thy Compendium."')
        jump 6260
    esac

6392:
    print('"How doth sea serpents attack?"\n')

    ask()

    case 'ball':
    case 'fire':
    case 'swip':
    case 'tail':
        print('"Thou art correct."\n\n')
        jump 302

    case 'bye':
        jump 7194

    case '*':
        print('"Nay, \'tis not the correct answer. Consult thy Compendium."')
        jump 6423
    esac

6550:
    print('"What creature art wisps oft mistaken for?"\n')

    ask()

    case 'fire':
    case 'fly':
        print('"Thou art correct."\n\n')
        jump 302

    case 'bye':
        jump 7194

    case '*':
        print('"Nay, \'tis not the correct answer. Consult thy Compendium."')
        jump 6593
    esac

6709:
    print('"How doth giant squids crush their prey?"\n')

    ask()

    case 'beak':
        print('"Thou art correct."\n\n')
        jump 302

    case 'bye':
        jump 7194

    case '*':
        print('"Nay, \'tis not the correct answer. Consult thy Compendium."')
        jump 6750
    esac

6862:
    print('"Where hath images of the silver serpent been seen?"\n')

    ask()

    case 'anci':
    case 'monu':
    case 'tomb':
    case 'wall':
        print('"Thou art correct."\n\n')
        jump 302

    case 'bye':
        jump 7194

    case '*':
        print('"Nay, \'tis not the correct answer. Consult thy Compendium."')
        jump 6914
    esac

7041:
    print('"What art reapers remnants of?"\n')

    ask()

    case 'anci':
    case 'ench':
    case 'fore':
        print('"Thou art correct."\n\n')
        jump 302

    case 'bye':
        jump 7194

    case '*':
        print('"Nay, \'tis not the correct answer. Consult thy Compendium."')
        jump 7072
    esac

7194:
    print('"Find thy Compendium, then come speak with me again."\n')
    bye()
