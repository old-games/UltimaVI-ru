source('CONVERSE.B')
index(76)

id(175)
name('Foodmaker')

description:
    print('a large and boisterous gargoyle.*\n\nHe carries a \'knife\' large enough ')
    print('to be a sword!')
    wait()

interaction:
    print('\n')

    if and(equals(integer(value 21), byte 1), equals(partyHasObject(byte 76, byte 0), byte 1)):
        jump label_372
    fi

    if integer(value 21):
        print('"The False Prophet!" the gargoyle shouts. "Begone, begone!"')

    else:
        print('"An-bal-sil-fer!" the gargoyle shouts. "Gres por! Gres por!"')
    fi

    wait()

    if partyHas(byte 4):
        portrait(byte 4)
        print('\n\nHalf-jokingly, Iolo says, "We\'d better do as he says."')
        wait()

        print('\n\n"After all, we don\'t know what kind of meat that is!\n')
        bye()

    else:
        print('\n')
        bye()
    fi

label_372:
    if hasBit(byte 235, value 0):
        print('"To welcome you back, False Prophet!"')

    else:
        print('"The False Prophet!"')
        wait()

        print('\n\n"To welcome you to my place of cooking."')
    fi

    wait()

    print('\n\n"To offer you the best @food in all the world!"\n')

    ask()

    case 'food':
        if notEquals(integer(value 32), byte 143):
            print('"To not have food on me. To have you visit my shop."')
            jump label_530
        fi

        jump label_1586

    case 'hors':
    case 'meat':
        print('"To be famous among all gargoyles for the quality of my horseflesh!"')
        jump label_530

    case 'name':
        print('"To be called Foodmaker, not having a name yet."')
        wait()

        print('\n\n"But to be the finest cook in the land!"')
        wait()

        print('\n\n"To receive a name someday soon for my skill!"')
        jump label_530

    case 'good':
        print('"The goodscrafter? To be pathetic!" the huge gargoyle scowls.')
        wait()

        print('\n\n"To have self-pity, when strength and long work will give success!"')
        wait()

        print('\n\n"To wish to hear no more about that creature."')
        jump label_530

    case 'job':
        print('"To cook and serve food for all the gargoyles who live in these ')
        print('parts!"')
        wait()

        print('\n\n"Also to guide and instruct the @wingless ones in cooking chores."')
        jump label_530

    case 'wing':
        print('"To have to watch their every move!"')
        wait()

        print('\n\n"But to acknowledge that they are vital to our society."')
        jump label_530

    case 'bye':
        if hasBit(byte 235, value 0):
            jump label_2448

        else:
            integer(value 2) = random(byte 1, plus(integer(value 23), byte 1))
            integer(value 0) = byte 0
            jump label_2151
        fi

    case 'bunc':
    case 'grap':
    case 'plan':
    case 'wine':
        print('"Well, yes, of course to have that as well."')
        wait()

        print('\n\n"But to be famous for my roast horseflesh!"')
        wait()

        print('\n\n"To offer you some of this fine @food!"')
        jump label_530

    case '*':
        print('"To not know what $Z is."')
        wait()

        print('\n\n"But to gladly cook it for you if you tell me the recipe!"')
        jump label_530
    esac

label_1586:
    print('"Yes, yes! To offer you this finely roasted @meat!"')
    wait()

    print('\n\nWith a few strokes of his huge knife, the gargoyle cuts you a slice ')
    print('of @meat.')
    wait()

    print('\n\nDo you take the meat? ')

    choice('yn')

    case 'y':
        print('You')

        if integer(value 23):
            print('r party eats the profferred food.')

        else:
            print(' eat the profferred food.')
        fi

        wait()

        print('\n\nThe flavor is unlike anything you\'ve had before.')

        if equals(and(integer(value 23), partyHas(byte 4)), byte 0):
            jump label_530
        fi

        wait()

        portrait(byte 4)
        print('\n\nIolo speaks. "I wonder what sort of @meat this is, $P."')
        wait()

        portrait(byte 235)
        print('\n\nThe gargoyle beams with pride. "To ask you: Is it not the best @meat')
        print(' you have ever eaten?"')
        jump label_530

    case 'n':
        print('"To be saddened by your not liking!"')
        wait()

        print('\n\n"To know of no finer cooker of @horseflesh than myself!"')
        jump label_530
    esac

label_2151:
    if greater(integer(value 0), integer(value 24)):
        setBit(byte 235, value 0)
        jump label_2448
    fi

    integer(value 2) = byte 5
    integer(value 1) = character(integer(value 0), byte 0)

    if greater(weight(byte 135, integer(value 2)), canCarry(integer(value 1))):
        integer(value 0) = plus(integer(value 0), byte 1)
        jump label_2151
    fi

    setBit(byte 235, value 0)
    print('"Wait!"')
    wait()

    print('\n\n"To give you some fine horseflesh to take with you on your trip!"')
    wait()

    print('\n\nDo you accept his gift? ')

    choice('yn')

    case 'y':
        createItem(integer(value 1), byte 135, byte 0, integer(value 2))
        look(integer(value 1))
        print('The chef gives ')

        if equals(integer(value 1), byte 1):
            print('you')

        else:
            print('$Y')
        fi

        print(' #2 horse chop\\s.')
        wait()

        print('\n\n')
        jump label_2448

    case 'n':
        print('"Well then, to save it here for you!"')
        wait()

        print('\n\n')
        jump label_2448
    esac

label_2448:
    print('"To welcome you to come back when you are hungry again!"\n')
    bye()
