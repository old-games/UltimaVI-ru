source('CONVERSE.B')
index(8)

id(107)
name({
    'english': 'Hendle',
    'russian': 'FIXME Hendle'
})

f3()

description:
    print({
        'english': 'a man whose pungent smell greets you before he can.',
        'russian': 'FIXME a man whose pungent smell greets you before he can.'
    })
    wait()

    print({
        'english': '\n',
        'russian': 'FIXME \n'
    })

interaction:
    print({
        'english': '"Well, hello there, ',
        'russian': 'FIXME "Well, hello there, '
    })

    if hasBit(byte 235, value 0):
        print({
            'english': 'friend',
            'russian': 'FIXME friend'
        })

    else:
        print({
            'english': 'stranger',
            'russian': 'FIXME stranger'
        })
    fi

    if integer(value 23):
        print({
            'english': 's',
            'russian': 'FIXME s'
        })
    fi

    print({
        'english': '!"',
        'russian': 'FIXME !"'
    })

    if notEquals(integer(value 32), byte 144):
        setBit(byte 235, value 0)
        print({
            'english': '\n',
            'russian': 'FIXME \n'
        })
        jump label_181
    fi

    wait()

    print({
        'english': '\n\n"',
        'russian': 'FIXME \n\n"'
    })

    if hasBit(byte 235, value 0):
        print({
            'english': 'Back for more',
            'russian': 'FIXME Back for more'
        })

    else:
        print({
            'english': 'Come for some',
            'russian': 'FIXME Come for some'
        })
    fi

    print({
        'english': ' @meat?"\n',
        'russian': 'FIXME  @meat?"\n'
    })

label_181:
    ask()

    case {'english': name'}:
    case {'russian': 'FIXME name'}:
        print({
            'english': '"@Hendle the Slaughterman."\n',
            'russian': 'FIXME "@Hendle the Slaughterman."\n'
        })
        jump label_181

    case {'english': hend'}:
    case {'russian': 'FIXME hend'}:
    case {'english': slau'}:
    case {'russian': 'FIXME slau'}:
        print({
            'english': '"Yep."\n',
            'russian': 'FIXME "Yep."\n'
        })
        jump label_181

    case {'english': job'}:
    case {'russian': 'FIXME job'}:
        if equals(integer(value 32), byte 144):
            print({
                'english': '"As ya can see, I slaughter the beef and pork which you can then buy."',
                'russian': 'FIXME "As ya can see, I slaughter the beef and pork which you can then buy."'
            })
            print({
                'english': '\n',
                'russian': 'FIXME \n'
            })

        else:
            print({
                'english': '"I slaughter beef and pork."',
                'russian': 'FIXME "I slaughter beef and pork."'
            })
            wait()

            print({
                'english': '\n\n"Makes me a bit unpopular \'ere in the pub!" he laughs.\n',
                'russian': 'FIXME \n\n"Makes me a bit unpopular \'ere in the pub!" he laughs.\n'
            })
        fi

        jump label_181

    case {'english': buy'}:
    case {'russian': 'FIXME buy'}:
    case {'english': meat'}:
    case {'russian': 'FIXME meat'}:
        if equals(integer(value 32), byte 144):
            jump label_775
        fi

        print({
            'english': '"Strewth! If I carried it around with me, I\'d be even more unpopular!"',
            'russian': 'FIXME "Strewth! If I carried it around with me, I\'d be even more unpopular!"'
        })
        wait()

        print({
            'english': '\n\nHe laughs, then continues, "Nay, friend, come to my shop later."',
            'russian': 'FIXME \n\nHe laughs, then continues, "Nay, friend, come to my shop later."'
        })
        wait()

        print({
            'english': '\n\n"I\'ll fix ya up then."\n',
            'russian': 'FIXME \n\n"I\'ll fix ya up then."\n'
        })
        jump label_181

    case {'english': bye'}:
    case {'russian': 'FIXME bye'}:
        print({
            'english': '"Be careful out there."\n',
            'russian': 'FIXME "Be careful out there."\n'
        })
        bye()

    case '*':
        if equals(integer(value 32), byte 144):
            print({
                'english': 'He stops chopping and scratches his chin. "Say what?"\n',
                'russian': 'FIXME He stops chopping and scratches his chin. "Say what?"\n'
            })

        else:
            print({
                'english': 'He takes a swig from his mug and asks, "What d\'ya mean?"\n',
                'russian': 'FIXME He takes a swig from his mug and asks, "What d\'ya mean?"\n'
            })
        fi

        jump label_181
    esac

    // Unreachable code!
    jump label_181

label_775:
    if equals(integer(value 23), byte 0):
        integer(value 3) = character(byte 0, byte 0)
        jump label_936
    fi

label_798:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_812:
    look(character(integer(value 0), byte 0))
    print({
        'english': '#2. $Y\n',
        'russian': 'FIXME #2. $Y\n'
    })
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_812
    fi

    print({
        'english': '"Which of you?" ',
        'russian': 'FIXME "Which of you?" '
    })
    inputInteger(integer(value 3))

    if equals(integer(value 3), byte 0):
        print({
            'english': '"Whatever."\n',
            'russian': 'FIXME "Whatever."\n'
        })
        jump label_181
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_798
    fi

    integer(value 3) = character(integer(value 3), byte 0)

label_936:
    integer(value 0) = byte 1
    print({
        'english': '1. Ham\n2. Bacon\n3. Pork Chops\n4. Brisket\n5. Steak\n6. Ribs\n"Which ',
        'russian': 'FIXME 1. Ham\n2. Bacon\n3. Pork Chops\n4. Brisket\n5. Steak\n6. Ribs\n"Which '
    })
    print({
        'english': 'item?" ',
        'russian': 'FIXME item?" '
    })
    inputInteger(integer(value 0))

    if equals(integer(value 0), byte 0):
        print({
            'english': '"Whatever."\n',
            'russian': 'FIXME "Whatever."\n'
        })
        jump label_181
    fi

    if greater(integer(value 0), byte 6):
        jump label_936
    fi

    integer(value 0) = minus(integer(value 0), byte 1)
    look(integer(value 3))

    if equals(integer(value 0), byte 0):
        integer(value 9) = word 133
    fi

    if equals(integer(value 0), byte 1):
        integer(value 9) = word 133
    fi

    if equals(integer(value 0), byte 2):
        integer(value 9) = word 129
    fi

    if equals(integer(value 0), byte 3):
        integer(value 9) = word 209
    fi

    if equals(integer(value 0), byte 4):
        integer(value 9) = word 209
    fi

    if equals(integer(value 0), byte 5):
        integer(value 9) = word 210
    fi

    integer(value 1) = data(integers_1472, integer(value 0))
    print({
        'english': 'Hendle smiles at $Y, "That will cost you #1 gold. Interested?" ',
        'russian': 'FIXME Hendle smiles at $Y, "That will cost you #1 gold. Interested?" '
    })

    choice({
        'english': 'yn',
        'russian': 'FIXME yn'
    })

    case {'english': n'}:
    case {'russian': 'FIXME n'}:
        print({
            'english': '"Whatever."\n',
            'russian': 'FIXME "Whatever."\n'
        })
        jump label_181

    case {'english': y'}:
    case {'russian': 'FIXME y'}:
        if less(plus(canCarry(integer(value 3)), weight(byte 88, integer(value 1))), weight(integer(value 9), byte 1)):
            print({
                'english': '"You look pretty full to me, $Y."\n',
                'russian': 'FIXME "You look pretty full to me, $Y."\n'
            })
            jump label_181
        fi

        if greaterOrEquals(objectsCount(integer(value 3), byte 88), integer(value 1)):
            destroyItem(integer(value 3), byte 88, byte 0, integer(value 1))
            createItem(integer(value 3), integer(value 9), byte 0, byte 1)
            print({
                'english': '"Excellent!" After accepting $Y\'s gold, $N hands over the food.\n',
                'russian': 'FIXME "Excellent!" After accepting $Y\'s gold, $N hands over the food.\n'
            })
            jump label_181

        else:
            print({
                'english': '"You don\'t have enough gold, $Y."\n',
                'russian': 'FIXME "You don\'t have enough gold, $Y."\n'
            })
            jump label_181
        fi
    esac

integers_1472 = [
    3, // 0
    4, // 1
    3, // 2
    6, // 3
    8, // 4
    9, // 5
]
