source('CONVERSE.B')
index(8)

id(107)
name('Hendle')

f3()

description:
    print('a man whose pungent smell greets you before he can.')
    wait()

    print('\n')

interaction:
    print('"Well, hello there, ')

    if hasBit(byte 235, value 0):
        print('friend')

    else:
        print('stranger')
    fi

    if integer(value 23):
        print('s')
    fi

    print('!"')

    if notEquals(integer(value 32), byte 144):
        ('SETF', ('byte', 235), ('value', 0))
        print('\n')
        jump label_181
    fi

    wait()

    print('\n\n"')

    if hasBit(byte 235, value 0):
        print('Back for more')

    else:
        print('Come for some')
    fi

    print(' @meat?"\n')

label_181:
    ask()

    case 'name':
        print('"@Hendle the Slaughterman."\n')
        jump label_181

    case 'hend':
    case 'slau':
        print('"Yep."\n')
        jump label_181

    case 'job':
        if equals(integer(value 32), byte 144):
            print('"As ya can see, I slaughter the beef and pork which you can then buy."')
            print('\n')

        else:
            print('"I slaughter beef and pork."')
            wait()

            print('\n\n"Makes me a bit unpopular \'ere in the pub!" he laughs.\n')
        fi

        jump label_181

    case 'buy':
    case 'meat':
        if equals(integer(value 32), byte 144):
            jump label_775
        fi

        print('"Strewth! If I carried it around with me, I\'d be even more unpopular!"')
        wait()

        print('\n\nHe laughs, then continues, "Nay, friend, come to my shop later."')
        wait()

        print('\n\n"I\'ll fix ya up then."\n')
        jump label_181

    case 'bye':
        print('"Be careful out there."\n')
        bye()

    case '*':
        if equals(integer(value 32), byte 144):
            print('He stops chopping and scratches his chin. "Say what?"\n')

        else:
            print('He takes a swig from his mug and asks, "What d\'ya mean?"\n')
        fi

        jump label_181
    esac

    // Unreachable code!
    jump label_181

label_775:
    if equals(integer(value 23), byte 0):
        integer(value 3) = character(byte 0, byte 0)
        jump label_936
    fi

label_798:
    integer(value 0) = byte 0
    integer(value 2) = byte 1

label_812:
    ('SETNAME', ('character', [('integer', [('value', 0)]), ('byte', 0)]))
    print('#2. $Y\n')
    integer(value 0) = plus(integer(value 0), byte 1)
    integer(value 2) = plus(integer(value 2), byte 1)

    if lessOrEquals(integer(value 0), integer(value 23)):
        jump label_812
    fi

    print('"Which of you?" ')
    ('INPUTNUM', 3)

    if equals(integer(value 3), byte 0):
        print('"Whatever."\n')
        jump label_181
    fi

    integer(value 3) = minus(integer(value 3), byte 1)

    if greater(integer(value 3), integer(value 23)):
        jump label_798
    fi

    integer(value 3) = character(integer(value 3), byte 0)

label_936:
    integer(value 0) = byte 1
    print('1. Ham\n2. Bacon\n3. Pork Chops\n4. Brisket\n5. Steak\n6. Ribs\n"Which ')
    print('item?" ')
    ('INPUTNUM', 0)

    if equals(integer(value 0), byte 0):
        print('"Whatever."\n')
        jump label_181
    fi

    if greater(integer(value 0), byte 6):
        jump label_936
    fi

    integer(value 0) = minus(integer(value 0), byte 1)
    ('SETNAME', ('integer', [('value', 3)]))

    if equals(integer(value 0), byte 0):
        integer(value 9) = word 133
    fi

    if equals(integer(value 0), byte 1):
        integer(value 9) = word 133
    fi

    if equals(integer(value 0), byte 2):
        integer(value 9) = word 129
    fi

    if equals(integer(value 0), byte 3):
        integer(value 9) = word 209
    fi

    if equals(integer(value 0), byte 4):
        integer(value 9) = word 209
    fi

    if equals(integer(value 0), byte 5):
        integer(value 9) = word 210
    fi

    integer(value 1) = data(dword 1472, integer(value 0))
    print('Hendle smiles at $Y, "That will cost you #1 gold. Interested?" ')

    choice('yn')

    case 'n':
        print('"Whatever."\n')
        jump label_181

    case 'y':
        if less(plus(canCarry(integer(value 3)), weight(byte 88, integer(value 1))), weight(integer(value 9), byte 1)):
            print('"You look pretty full to me, $Y."\n')
            jump label_181
        fi

        if greaterOrEquals(objectsCount(integer(value 3), byte 88), integer(value 1)):
            ('DELETE', ('integer', [('value', 3)]), ('byte', 88), ('byte', 0), ('integer', [('value', 1)]))
            ('NEW', ('integer', [('value', 3)]), ('integer', [('value', 9)]), ('byte', 0), ('byte', 1))
            print('"Excellent!" After accepting $Y\'s gold, $N hands over the food.\n')
            jump label_181

        else:
            print('"You don\'t have enough gold, $Y."\n')
            jump label_181
        fi
    esac

integers_1472 = [
    3, // 0
    4, // 1
    3, // 2
    6, // 3
    8, // 4
    9, // 5
]
