source('CONVERSE.A')
index(61)

id(61)
name({
    'english': 'Pridgarm',
    'russian': 'Придгарм'
})

description:
    print({
        'english': 'an old man, tall and thin. He spends all his time whittling.',
        'russian': 'высокого и худого старика. Он всё своё время проводит за строганием.'
    })

interaction:
    wait()

    print({
        'english': '\n',
        'russian': '\n'
    })

    if equals(hasBit(byte 235, byte 2), byte 0):
        jump label_476
    fi

    print({
        'english': '"Good $T, $G. Done with the key yet?"',
        'russian': '"Доброго времени $T, $G. Вам уже больше не нужен ключ?"'
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        integer(value 0) = partyHasObject(byte 64, byte 11)

        if equals(integer(value 0), word 32769):
            print({
                'english': '"Well, where is it?"\n',
                'russian': '"Ну и где он?"\n'
            })

            ask()
            print({
                'english': '\n"Well, that does me no good."',
                'russian': '\n"Что ж, это мне никак не поможет".'
            })
            wait()

            print({
                'english': '\n\n"Need it here."',
                'russian': '\n\n"Он нужен мне здесь".'
            })
            wait()

            print({
                'english': '\n\nWithout another word, the jailer returns to his carving.\n',
                'russian': '\n\nНе говоря больше ни слова, тюремщик возвращается к своей резьбе.\n'
            })
            bye()

        else:
            moveItem(byte 64, byte 11, integer(value 0), byte 235)
            print({
                'english': '"Much obliged," the taciturn jailer says as he takes the key.\n',
                'russian': '"Премного благодарен", - говорит молчаливый тюремщик, забирая ключ.\n'
            })
            clearBit(byte 235, byte 2)
            increaseKarma(byte 7)
            bye()
        fi

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"Well, bring it back to me when you are."',
            'russian': '"Что ж, верните мне его, когда закончите".'
        })
        wait()

        print({
            'english': '\n\nWithout another word, the jailer returns to his carving.\n',
            'russian': '\n\nНе говоря больше ни слова, тюремщик возвращается к своей резьбе.\n'
        })
        bye()

label_476:
        print({
            'english': '"Good $T, $G. What can I do for you?"',
            'russian': '"Доброго времени $T, $G. Что я могу для вас сделать?"'
        })

label_513:
        print({
            'english': '\n',
            'russian': '\n'
        })

        ask()

    case 'thie':
    case {'russian': 'вор'}:
    case 'robb':
    case {'russian': 'граб'}:
        print({
            'english': '"He\'s in @solitary, right over there."',
            'russian': '"Он в одиночной @камере, вон там".'
        })
        jump label_513

    case 'lock':
    case {'russian': 'запе'}:
    case 'see':
    case {'russian': 'увид'}:
    case 'meet':
    case {'russian': 'встр'}:
    case 'talk':
    case {'russian': 'пого'}:
    case 'soli':
    case {'russian': 'каме'}:
    case 'ther':
    case {'russian': 'там'}:
        print({
            'english': '"You\'ll need my @key to get in there."',
            'russian': '"Вам понадобится мой @ключ, чтобы попасть туда".'
        })
        jump label_513

    case 'key':
    case {'russian': 'ключ'}:
    case 'your':
    case {'russian': 'твой'}:
    case 'give':
    case {'russian': 'дай'}:
    case 'plea':
    case {'russian': 'пожа'}:
        print({
            'english': '"Yup, I could give you the key...."',
            'russian': '"Да, я мог бы дать вам ключ..."'
        })
        wait()

        print({
            'english': '\n\n"But not without Her Ladyship\'s @permission."',
            'russian': '\n\n"Но не без @разрешения её светлости".'
        })
        jump label_513

    case 'perm':
    case {'russian': 'разр'}:
    case 'impo':
    case {'russian': 'важн'}:
    case 'ques':
    case {'russian': 'поис'}:
    case 'avat':
    case {'russian': 'ават'}:
    case 'lett':
    case {'russian': 'пись'}:
    case 'lady':
    case {'russian': 'свет'}:
    case 'must':
    case {'russian': 'долж'}:
    case 'need':
    case {'russian': 'нужн'}:
        jump label_1362

    case 'brib':
    case {'russian': 'взят'}:
    case 'mone':
    case {'russian': 'день'}:
    case 'pay':
    case {'russian': 'запл'}:
    case 'give':
    case {'russian': 'подк'}:
        jump label_1657

    case 'name':
    case {'russian': 'имя'}:
        print({
            'english': '"Name\'s Pridgarm."',
            'russian': '"Меня зовут Придгарм".'
        })
        setBit(byte 235, value 0)
        jump label_513

    case 'job':
    case {'russian': 'раб'}:
        print({
            'english': '"I mind the @jail."',
            'russian': '"Я слежу за @тюрьмой"."'
        })
        wait()

        print({
            'english': '\n\n"Got a @prisoner in @solitary right now."',
            'russian': '\n\n"Сейчас у нас всего один @заключённый в одиночной @камере".'
        })
        jump label_513

    case 'jail':
    case {'russian': 'тюрь'}:
        print({
            'english': '"Got four of the cleanest @cells you could ask fer."',
            'russian': '"У меня здесь четыре самые чистые @камеры, о каких только можно мечтать".'
        })
        jump label_513

    case 'cell':
    case {'russian': 'каме'}:
        jump label_1802

    case 'pris':
    case {'russian': 'закл'}:
        print({
            'english': '"Feller broke into the @grave of His Lordship, the late Mayor."',
            'russian': '"Парень вломился в @могилу его светлости, покойного мэра".'
        })
        jump label_513

    case 'rune':
    case {'russian': 'руна'}:
    case 'fami':
    case {'russian': 'семь'}:
    case 'free':
    case {'russian': 'выпу'}:
    case 'feed':
    case {'russian': 'корм'}:
    case 'kids':
    case {'russian': 'малы'}:
    case 'rele':
    case {'russian': 'отпу'}:
    case 'deal':
    case {'russian': 'сдел'}:
    case 'go':
    case {'russian': 'высв'}:
    case 'allo':
    case {'russian': 'разр'}:
    case 'trad':
    case {'russian': 'торг'}:
    case 'brok':
    case {'russian': 'влом'}:
    case 'grav':
    case {'russian': 'моги'}:
    case 'lord':
    case {'russian': 'его'}:
        print({
            'english': '"\'Taint my place to talk about that. You should go see Her Ladyship, ',
            'russian': '"Я не имею права говорить об этом. Вам следует встретиться с её светлостью '
        })
        print({
            'english': 'the Mayor."',
            'russian': 'мэром".'
        })
        jump label_513

    case 'bye':
    case {'russian': 'пока'}:
        print({
            'english': 'The jailer nods and says "$T."\n',
            'russian': 'Тюремщик кивает и говорит "Доброго времени $T".\n'
        })
        bye()

    case '*':
        if random(byte 0, byte 1):
            print({
                'english': '"Don\'t know nothing about that."',
                'russian': '"Ничего об этом не знаю".'
            })

        else:
            print({
                'english': 'The old man simply shrugs and keeps on whittling.',
                'russian': 'Старик просто пожимает плечами и продолжает строгать.'
            })
        fi

        jump label_513
    esac

label_1362:
    print({
        'english': '"You got a letter of permission from Her Ladyship?" ',
        'russian': '"У вас есть разрешение от её светлости?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        integer(value 0) = partyHasObject(byte 152, byte 121)

        if equals(integer(value 0), word 32769):
            print({
                'english': '"Gotta have a letter if you want to see the thief."',
                'russian': '"Оно нужно мне в виде письма, если вы хотите увидеть вора".'
            })

        else:
            print({
                'english': '"Okay, here\'s the key."',
                'russian': '"Хорошо, вот ключ".'
            })
            wait()

            print({
                'english': '\n\n"Give it back when you\'re done."',
                'russian': '\n\n"Верните его мне, когда закончите".'
            })
            destroyItem(integer(value 0), byte 152, byte 121, byte 1)
            moveItem(byte 64, byte 11, byte 235, integer(value 0))
            setBit(byte 235, byte 2)
            decreaseKarma(byte 5)
        fi

        jump label_513

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"Well, gotta have a letter if you want to see the thief."',
            'russian': '"Ну, если вы хотите увидеть вора, у вас должно быть письмо".'
        })
        jump label_513
    esac

label_1657:
    print({
        'english': '"You offering me a bribe?" ',
        'russian': '"Вы предлагаете мне взятку?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'y':
    case {'russian': 'д'}:
        print({
            'english': 'He thinks for a moment.',
            'russian': 'Он на мгновение задумывается.'
        })
        wait()

        print({
            'english': '\n\n"Nope. Sorry, not interested."',
            'russian': '\n\n"Не. Извините, меня это не интересует".'
        })
        jump label_513

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"Pity. Never been offered a bribe before."',
            'russian': '"Жаль". Мне никогда раньше не предлагали взятку.'
        })
        jump label_513
    esac

label_1802:
    print({
        'english': '"Say, you looking to get the keys to my jail cells?" ',
        'russian': '"Слушайте, вы хотите получить ключи от моих тюремных камер?" '
    })

    choice({
        'english': 'yn',
        'russian': 'дн'
    })

    case 'n':
    case {'russian': 'н'}:
        print({
            'english': '"Okay. Never had nobody sound so interested in jest hearing about the ',
            'russian': '"Хорошо. Никогда ещё никто не проявлял такого интереса к шуткам '
        })
        print({
            'english': 'jail before."',
            'russian': 'о тюрьме".'
        })
        jump label_513
    esac

    print({
        'english': '\n"Well, ya know, I shouldn\'t do this."*\n\n"But Her Ladyship is a little',
        'russian': '\n"Ну, вы знаете, мне не следовало бы этого делать".*\n\n"Но её светлость'
    })
    print({
        'english': ' too strict about who she puts in here."*\n\n"So I make up fer it by ',
        'russian': ' слишком строга к тем, кого она сюда помещает".*\n\n"Поэтому я стараюсь компенсировать это тем, что '
    })
    print({
        'english': 'being a little careless with the keys, if you take my meaning."*\n\nHe ',
        'russian': 'немного небрежно обращаюсь с ключами, если вы понимаете, что я имею в виду".*\n\nОн '
    })
    print({
        'english': 'tosses you some keys, then turns his back on you.\n',
        'russian': 'бросает вам несколько ключей, а затем поворачивается к вам спиной.\n'
    })

    if equals(hasObject(byte 1, byte 64, byte 7), byte 0):
        createItem(byte 1, byte 64, byte 7, byte 1)
    fi

    if equals(hasObject(byte 1, byte 64, byte 8), byte 0):
        createItem(byte 1, byte 64, byte 8, byte 1)
    fi

    if equals(hasObject(byte 1, byte 64, byte 9), byte 0):
        createItem(byte 1, byte 64, byte 9, byte 1)
    fi

    if equals(hasObject(byte 1, byte 64, byte 10), byte 0):
        createItem(byte 1, byte 64, byte 10, byte 1)
    fi

    bye()
