source('CONVERSE.A')
index(61)

id(61)
name('Pridgarm')

description:
    print('an old man, tall and thin. He spends all his time whittling.')

interaction:
    wait()

    print('\n')

    if equals(hasBit(byte 235, byte 2), byte 0):
        jump label_476
    fi

    print('"Good $T, $G. Done with the key yet?"')

    choice('yn')

    case 'y':
        integer(value 0) = partyHasObject(byte 64, byte 11)

        if equals(integer(value 0), word 32769):
            print('"Well, where is it?"\n')

            ask()
            print('\n"Well, that does me no good."')
            wait()

            print('\n\n"Need it here."')
            wait()

            print('\n\nWithout another word, the jailer returns to his carving.\n')
            bye()

        else:
            ('GIVE', ('byte', 64), ('byte', 11), ('integer', [('value', 0)]), ('byte', 235))
            print('"Much obliged," the taciturn jailer says as he takes the key.\n')
            ('CLEARF', ('byte', 235), ('byte', 2))
            ('ADD_KARMA', ('byte', 7))
            bye()
        fi

    case 'n':
        print('"Well, bring it back to me when you are."')
        wait()

        print('\n\nWithout another word, the jailer returns to his carving.\n')
        bye()

label_476:
        print('"Good $T, $G. What can I do for you?"\n')

        ask()

    case 'robb':
    case 'thie':
        print('"He\'s in @solitary, right over there."')
        jump label_513

    case 'lock':
    case 'meet':
    case 'see':
    case 'soli':
    case 'talk':
    case 'ther':
        print('"You\'ll need my @key to get in there."')
        jump label_513

    case 'give':
    case 'key':
    case 'plea':
    case 'your':
        print('"Yup, I could give you the key...."')
        wait()

        print('\n\n"But not without Her Ladyship\'s @permission."')
        jump label_513

    case 'avat':
    case 'impo':
    case 'lady':
    case 'lett':
    case 'must':
    case 'need':
    case 'perm':
    case 'ques':
        jump label_1362

    case 'brib':
    case 'give':
    case 'mone':
    case 'pay':
        jump label_1657

    case 'name':
        print('"Name\'s Pridgarm."')
        ('SETF', ('byte', 235), ('value', 0))
        jump label_513

    case 'job':
        print('"I mind the @jail."')
        wait()

        print('\n\n"Got a @prisoner in @solitary right now."')
        jump label_513

    case 'jail':
        print('"Got four of the cleanest @cells you could ask fer."')
        jump label_513

    case 'cell':
        jump label_1802

    case 'pris':
        print('"Feller broke into the @grave of His Lordship, the late Mayor."')
        jump label_513

    case 'allo':
    case 'brok':
    case 'deal':
    case 'fami':
    case 'feed':
    case 'free':
    case 'go':
    case 'grav':
    case 'kids':
    case 'lord':
    case 'rele':
    case 'rune':
    case 'trad':
        print('"\'Taint my place to talk about that. You should go see Her Ladyship, ')
        print('the Mayor."')
        jump label_513

    case 'bye':
        print('The jailer nods and says "$T."\n')
        bye()

    case '*':
        if random(byte 0, byte 1):
            print('"Don\'t know nothing about that."')

        else:
            print('The old man simply shrugs and keeps on whittling.')
        fi

        jump label_513
    esac

label_1362:
    print('"You got a letter of permission from Her Ladyship?" ')

    choice('yn')

    case 'y':
        integer(value 0) = partyHasObject(byte 152, byte 121)

        if equals(integer(value 0), word 32769):
            print('"Gotta have a letter if you want to see the thief."')

        else:
            print('"Okay, here\'s the key."')
            wait()

            print('\n\n"Give it back when you\'re done."')
            ('DELETE', ('integer', [('value', 0)]), ('byte', 152), ('byte', 121), ('byte', 1))
            ('GIVE', ('byte', 64), ('byte', 11), ('byte', 235), ('integer', [('value', 0)]))
            ('SETF', ('byte', 235), ('byte', 2))
            ('SUB_KARMA', ('byte', 5))
        fi

        jump label_513

    case 'n':
        print('"Well, gotta have a letter if you want to see the thief."')
        jump label_513
    esac

label_1657:
    print('"You offering me a bribe?" ')

    choice('yn')

    case 'y':
        print('He thinks for a moment.')
        wait()

        print('\n\n"Nope. Sorry, not interested."')
        jump label_513

    case 'n':
        print('"Pity. Never been offered a bribe before."')
        jump label_513
    esac

label_1802:
    print('"Say, you looking to get the keys to my jail cells?" ')

    choice('yn')

    case 'n':
        print('"Okay. Never had nobody sound so interested in jest hearing about the ')
        print('jail before."')
        jump label_513
    esac

    print('\n"Well, ya know, I shouldn\'t do this."*\n\n"But Her Ladyship is a little')
    print(' too strict about who she puts in here."*\n\n"So I make up fer it by ')
    print('being a little careless with the keys, if you take my meaning."*\n\nHe ')
    print('tosses you some keys, then turns his back on you.\n')

    if equals(hasObject(byte 1, byte 64, byte 7), byte 0):
        ('NEW', ('byte', 1), ('byte', 64), ('byte', 7), ('byte', 1))
    fi

    if equals(hasObject(byte 1, byte 64, byte 8), byte 0):
        ('NEW', ('byte', 1), ('byte', 64), ('byte', 8), ('byte', 1))
    fi

    if equals(hasObject(byte 1, byte 64, byte 9), byte 0):
        ('NEW', ('byte', 1), ('byte', 64), ('byte', 9), ('byte', 1))
    fi

    if equals(hasObject(byte 1, byte 64, byte 10), byte 0):
        ('NEW', ('byte', 1), ('byte', 64), ('byte', 10), ('byte', 1))
    fi

    bye()
